import{e8 as $,e9 as P,ea as Y,eS as Z,eT as ee,cp as te,cq as V,d3 as le,cu as n,cx as f,cF as O,cA as a,cB as F,cz as t,cK as p,cy as y,cC as R,cD as h,dX as A,cR as ae}from"./index-07dfdb25.js";const i="/product",re=(o,s)=>$(`${i}`,o||{},s),oe=(o,s,v)=>$(`${i}/${o.current_page}/${o.page_size}`,s,v),se=(o,s)=>P(`${i}`,o,void 0,s),ue=(o,s,v)=>Y(`${i}/${o}`,s,void 0,v),ne=(o,s)=>Z(`${i}/${o}`,void 0,{},s),de=(o,s)=>$(`${i}/${o}`,void 0,s),ie=(o,s)=>P(`${i}/batch_delete`,{ids:o},void 0,s),me=(o,s)=>ee("产品库数据.xlsx",`${i}/export`,o,s),pe=(o,s)=>P(`${i}/import`,o,void 0,s),ce=o=>$(`${i}/categories`,void 0,o),_e=(o,s)=>P(`${i}/recommendations`,o,void 0,s),j={getAllProducts:re,getProducts:oe,postProduct:se,putProduct:ue,delProduct:ne,getProductById:de,batchDeleteProducts:ie,exportProducts:me,importProducts:pe,getProductCategories:ce,getProductRecommendations:_e},fe={class:"feature-container"},ge={class:"requirement-container"},ve={class:"dialog-footer"},be=te({__name:"ProductDialog",emits:["success"],setup(o,{expose:s,emit:v}){const I=v,q=V(!1),C=V(!1),x=V(!1),U=V(),l=le({name:"",description:"",category:"",price:0,interest_rate:void 0,term_months:void 0,credit_limit:void 0,risk_level:"low",status:"draft",features:[""],requirements:[""]}),S=V([{label:"个人贷款",value:"个人贷款"},{label:"企业贷款",value:"企业贷款"},{label:"信用卡",value:"信用卡"},{label:"理财产品",value:"理财产品"},{label:"保险产品",value:"保险产品"}]),T={name:[{required:!0,message:"请输入产品名称",trigger:"blur"},{min:2,max:50,message:"产品名称长度在 2 到 50 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择产品分类",trigger:"change"}],price:[{required:!0,message:"请输入产品价格",trigger:"blur"},{type:"number",min:0,message:"价格必须大于等于0",trigger:"blur"}],status:[{required:!0,message:"请选择产品状态",trigger:"change"}],risk_level:[{required:!0,message:"请选择风险等级",trigger:"change"}],description:[{required:!0,message:"请输入产品描述",trigger:"blur"},{min:10,max:500,message:"产品描述长度在 10 到 500 个字符",trigger:"blur"}]},K=u=>{var e,c;q.value=!0,x.value=!!u,u?Object.assign(l,{...u,features:(e=u.features)!=null&&e.length?[...u.features]:[""],requirements:(c=u.requirements)!=null&&c.length?[...u.requirements]:[""]}):E()},E=()=>{var u;Object.assign(l,{name:"",description:"",category:"",price:0,interest_rate:void 0,term_months:void 0,credit_limit:void 0,risk_level:"low",status:"draft",features:[""],requirements:[""]}),(u=U.value)==null||u.clearValidate()},L=()=>{l.features.push("")},M=u=>{l.features.splice(u,1)},X=()=>{l.requirements.push("")},G=u=>{l.requirements.splice(u,1)},D=()=>{q.value=!1,E()},H=async()=>{try{await U.value.validate(),C.value=!0;const u={...l,features:l.features.filter(e=>e.trim()),requirements:l.requirements.filter(e=>e.trim())};x.value?(await j.putProduct(l.id,u),A.success("编辑成功")):(await j.postProduct(u),A.success("创建成功")),I("success"),D()}catch(u){console.error("提交失败:",u),A.error("提交失败")}finally{C.value=!1}};return s({open:K}),(u,e)=>{const c=n("el-input"),d=n("el-form-item"),_=n("el-col"),k=n("el-option"),N=n("el-select"),z=n("el-row"),w=n("el-input-number"),B=n("el-radio"),J=n("el-radio-group"),g=n("el-button"),Q=n("el-form"),W=n("el-dialog");return f(),O(W,{modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=r=>q.value=r),title:x.value?"编辑产品":"新增产品",width:"800px","close-on-click-modal":!1,onClose:D},{footer:a(()=>[F("div",ve,[t(g,{onClick:D},{default:a(()=>e[17]||(e[17]=[p("取消")])),_:1,__:[17]}),t(g,{type:"primary",onClick:H,loading:C.value},{default:a(()=>e[18]||(e[18]=[p(" 确定 ")])),_:1,__:[18]},8,["loading"])])]),default:a(()=>[t(Q,{ref_key:"formRef",ref:U,model:l,rules:T,"label-width":"100px"},{default:a(()=>[t(z,{gutter:20},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(d,{label:"产品名称",prop:"name"},{default:a(()=>[t(c,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=r=>l.name=r),placeholder:"请输入产品名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(d,{label:"分类",prop:"category"},{default:a(()=>[t(N,{modelValue:l.category,"onUpdate:modelValue":e[1]||(e[1]=r=>l.category=r),placeholder:"请选择分类",style:{width:"100%"}},{default:a(()=>[(f(!0),y(R,null,h(S.value,r=>(f(),O(k,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(z,{gutter:20},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(d,{label:"价格",prop:"price"},{default:a(()=>[t(w,{modelValue:l.price,"onUpdate:modelValue":e[2]||(e[2]=r=>l.price=r),min:0,step:100,style:{width:"100%"},placeholder:"请输入价格"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(d,{label:"状态",prop:"status"},{default:a(()=>[t(N,{modelValue:l.status,"onUpdate:modelValue":e[3]||(e[3]=r=>l.status=r),placeholder:"请选择状态",style:{width:"100%"}},{default:a(()=>[t(k,{label:"活跃",value:"active"}),t(k,{label:"停用",value:"inactive"}),t(k,{label:"草稿",value:"draft"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(z,{gutter:20},{default:a(()=>[t(_,{span:8},{default:a(()=>[t(d,{label:"利率(%)"},{default:a(()=>[t(w,{modelValue:l.interest_rate,"onUpdate:modelValue":e[4]||(e[4]=r=>l.interest_rate=r),min:0,max:100,step:.1,precision:2,style:{width:"100%"},placeholder:"请输入利率"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:8},{default:a(()=>[t(d,{label:"期限(月)"},{default:a(()=>[t(w,{modelValue:l.term_months,"onUpdate:modelValue":e[5]||(e[5]=r=>l.term_months=r),min:1,step:1,style:{width:"100%"},placeholder:"请输入期限"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:8},{default:a(()=>[t(d,{label:"信用额度"},{default:a(()=>[t(w,{modelValue:l.credit_limit,"onUpdate:modelValue":e[6]||(e[6]=r=>l.credit_limit=r),min:0,step:1e3,style:{width:"100%"},placeholder:"请输入信用额度"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(d,{label:"风险等级",prop:"risk_level"},{default:a(()=>[t(J,{modelValue:l.risk_level,"onUpdate:modelValue":e[7]||(e[7]=r=>l.risk_level=r)},{default:a(()=>[t(B,{value:"low"},{default:a(()=>e[10]||(e[10]=[p("低风险")])),_:1,__:[10]}),t(B,{value:"medium"},{default:a(()=>e[11]||(e[11]=[p("中风险")])),_:1,__:[11]}),t(B,{value:"high"},{default:a(()=>e[12]||(e[12]=[p("高风险")])),_:1,__:[12]})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"产品描述",prop:"description"},{default:a(()=>[t(c,{modelValue:l.description,"onUpdate:modelValue":e[8]||(e[8]=r=>l.description=r),type:"textarea",rows:4,placeholder:"请输入产品描述"},null,8,["modelValue"])]),_:1}),t(d,{label:"产品特色"},{default:a(()=>[F("div",fe,[(f(!0),y(R,null,h(l.features,(r,m)=>(f(),y("div",{key:m,class:"feature-item"},[t(c,{modelValue:l.features[m],"onUpdate:modelValue":b=>l.features[m]=b,placeholder:"请输入产品特色",class:"mr-8"},null,8,["modelValue","onUpdate:modelValue"]),t(g,{type:"danger",size:"small",onClick:b=>M(m),disabled:l.features.length<=1},{default:a(()=>e[13]||(e[13]=[p(" 删除 ")])),_:2,__:[13]},1032,["onClick","disabled"])]))),128)),t(g,{type:"primary",size:"small",onClick:L},{default:a(()=>e[14]||(e[14]=[p(" 添加特色 ")])),_:1,__:[14]})])]),_:1}),t(d,{label:"申请要求"},{default:a(()=>[F("div",ge,[(f(!0),y(R,null,h(l.requirements,(r,m)=>(f(),y("div",{key:m,class:"requirement-item"},[t(c,{modelValue:l.requirements[m],"onUpdate:modelValue":b=>l.requirements[m]=b,placeholder:"请输入申请要求",class:"mr-8"},null,8,["modelValue","onUpdate:modelValue"]),t(g,{type:"danger",size:"small",onClick:b=>G(m),disabled:l.requirements.length<=1},{default:a(()=>e[15]||(e[15]=[p(" 删除 ")])),_:2,__:[15]},1032,["onClick","disabled"])]))),128)),t(g,{type:"primary",size:"small",onClick:X},{default:a(()=>e[16]||(e[16]=[p(" 添加要求 ")])),_:1,__:[16]})])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});const ye=ae(be,[["__scopeId","data-v-4cd48145"]]);export{ye as P,j as p};
