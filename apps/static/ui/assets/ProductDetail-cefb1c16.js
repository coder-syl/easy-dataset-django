import{cp as W,dz as X,dB as Y,cq as w,ct as j,cu as d,cU as G,cx as u,cy as c,cB as a,cz as l,cA as t,cH as m,eU as O,cK as n,cJ as r,cv as Q,en as V,cF as y,cN as _,cC as S,cD as E,eV as Z,eW as ee,dX as D,dY as te,cR as se}from"./index-07dfdb25.js";import{P as ae,p as F}from"./ProductDialog-cf1080a9.js";const le={class:"product-detail-container p-24"},oe={class:"header-section mb-24"},ne={class:"flex-between"},re={class:"product-title"},ue={class:"product-tags mt-8"},ie={class:"main-content"},de={class:"price-text"},ce={class:"description-content"},_e={class:"feature-list"},pe={class:"requirement-list"},ve={class:"sidebar"},fe={class:"quick-info"},me={class:"info-item"},ye={class:"value"},ge={key:0,class:"info-item"},be={class:"value"},he={key:1,class:"info-item"},ke={class:"value"},xe={class:"action-buttons"},we=W({__name:"ProductDetail",setup(De){const I=X(),$=Y(),g=w(!1),s=w({}),M=w(),B=async()=>{const o=I.params.id;if(o){g.value=!0;try{const{data:e}=await F.getProductById(o);s.value=e}catch(e){console.error("获取产品详情失败:",e),D.error("获取产品详情失败")}finally{g.value=!1}}},A=()=>{M.value.open(s.value)},L=async()=>{try{await te.confirm(`确定要删除产品"${s.value.name}"吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await F.delProduct(s.value.id),D.success("删除成功"),$.push("/product-lib")}catch(o){o!=="cancel"&&(console.error("删除产品失败:",o),D.error("删除产品失败"))}},U=()=>{B()},P=o=>{if(!o)return"-";try{return new Date(o).toLocaleString("zh-CN")}catch{return o}},T=o=>({active:"success",inactive:"danger",draft:"warning"})[o]||"",C=o=>({active:"活跃",inactive:"停用",draft:"草稿"})[o]||o,q=o=>({low:"success",medium:"warning",high:"danger"})[o]||"",R=o=>({low:"低风险",medium:"中风险",high:"高风险"})[o]||o;return j(()=>{B()}),(o,e)=>{const b=d("el-icon"),p=d("el-button"),f=d("el-tag"),i=d("el-descriptions-item"),H=d("el-descriptions"),v=d("el-card"),z=d("el-col"),J=d("el-row"),K=G("loading");return u(),c("div",le,[a("div",oe,[l(p,{onClick:e[0]||(e[0]=h=>o.$router.go(-1)),class:"mb-16"},{default:t(()=>[l(b,null,{default:t(()=>[l(m(O))]),_:1}),e[1]||(e[1]=n(" 返回产品库 "))]),_:1,__:[1]}),a("div",ne,[a("div",null,[a("h2",re,r(s.value.name),1),a("div",ue,[l(f,{type:T(s.value.status),class:"mr-8"},{default:t(()=>[n(r(C(s.value.status)),1)]),_:1},8,["type"]),l(f,{type:q(s.value.risk_level),class:"mr-8"},{default:t(()=>[n(r(R(s.value.risk_level)),1)]),_:1},8,["type"]),l(f,{type:"info"},{default:t(()=>[n(r(s.value.category),1)]),_:1})])]),a("div",null,[l(p,{type:"primary",onClick:A},{default:t(()=>e[2]||(e[2]=[n("编辑产品")])),_:1,__:[2]}),l(p,{type:"danger",onClick:L},{default:t(()=>e[3]||(e[3]=[n("删除产品")])),_:1,__:[3]})])])]),Q((u(),c("div",null,[l(J,{gutter:24},{default:t(()=>[l(z,{span:16},{default:t(()=>{var h,N;return[a("div",ie,[l(v,{class:"mb-16"},{header:t(()=>e[4]||(e[4]=[a("div",{class:"card-header"},[a("h3",null,"基本信息")],-1)])),default:t(()=>[l(H,{column:2,border:""},{default:t(()=>[l(i,{label:"产品名称"},{default:t(()=>[n(r(s.value.name),1)]),_:1}),l(i,{label:"产品分类"},{default:t(()=>[n(r(s.value.category),1)]),_:1}),l(i,{label:"产品价格"},{default:t(()=>[a("span",de,"￥"+r(m(V)(s.value.price)),1)]),_:1}),l(i,{label:"风险等级"},{default:t(()=>[l(f,{type:q(s.value.risk_level)},{default:t(()=>[n(r(R(s.value.risk_level)),1)]),_:1},8,["type"])]),_:1}),s.value.interest_rate?(u(),y(i,{key:0,label:"利率"},{default:t(()=>[n(r(s.value.interest_rate)+"% ",1)]),_:1})):_("",!0),s.value.term_months?(u(),y(i,{key:1,label:"期限"},{default:t(()=>[n(r(s.value.term_months)+"个月 ",1)]),_:1})):_("",!0),s.value.credit_limit?(u(),y(i,{key:2,label:"信用额度"},{default:t(()=>[n(" ￥"+r(m(V)(s.value.credit_limit)),1)]),_:1})):_("",!0),l(i,{label:"状态"},{default:t(()=>[l(f,{type:T(s.value.status)},{default:t(()=>[n(r(C(s.value.status)),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1}),l(v,{class:"mb-16"},{header:t(()=>e[5]||(e[5]=[a("div",{class:"card-header"},[a("h3",null,"产品描述")],-1)])),default:t(()=>[a("div",ce,r(s.value.description),1)]),_:1}),(h=s.value.features)!=null&&h.length?(u(),y(v,{key:0,class:"mb-16"},{header:t(()=>e[6]||(e[6]=[a("div",{class:"card-header"},[a("h3",null,"产品特色")],-1)])),default:t(()=>[a("ul",_e,[(u(!0),c(S,null,E(s.value.features,(k,x)=>(u(),c("li",{key:x,class:"feature-item"},[l(b,{class:"feature-icon"},{default:t(()=>[l(m(Z))]),_:1}),n(" "+r(k),1)]))),128))])]),_:1})):_("",!0),(N=s.value.requirements)!=null&&N.length?(u(),y(v,{key:1},{header:t(()=>e[7]||(e[7]=[a("div",{class:"card-header"},[a("h3",null,"申请要求")],-1)])),default:t(()=>[a("ul",pe,[(u(!0),c(S,null,E(s.value.requirements,(k,x)=>(u(),c("li",{key:x,class:"requirement-item"},[l(b,{class:"requirement-icon"},{default:t(()=>[l(m(ee))]),_:1}),n(" "+r(k),1)]))),128))])]),_:1})):_("",!0)])]}),_:1}),l(z,{span:8},{default:t(()=>[a("div",ve,[l(v,{class:"mb-16"},{header:t(()=>e[8]||(e[8]=[a("div",{class:"card-header"},[a("h3",null,"快速信息")],-1)])),default:t(()=>[a("div",fe,[a("div",me,[e[9]||(e[9]=a("span",{class:"label"},"创建时间：",-1)),a("span",ye,r(P(s.value.created_time)),1)]),s.value.updated_time?(u(),c("div",ge,[e[10]||(e[10]=a("span",{class:"label"},"更新时间：",-1)),a("span",be,r(P(s.value.updated_time)),1)])):_("",!0),s.value.creator?(u(),c("div",he,[e[11]||(e[11]=a("span",{class:"label"},"创建者：",-1)),a("span",ke,r(s.value.creator),1)])):_("",!0)])]),_:1}),l(v,null,{header:t(()=>e[12]||(e[12]=[a("div",{class:"card-header"},[a("h3",null,"操作")],-1)])),default:t(()=>[a("div",xe,[l(p,{type:"primary",size:"large",style:{width:"100%","margin-bottom":"12px"}},{default:t(()=>e[13]||(e[13]=[n(" 推荐给客户 ")])),_:1,__:[13]}),l(p,{size:"large",style:{width:"100%","margin-bottom":"12px"}},{default:t(()=>e[14]||(e[14]=[n(" 生成产品介绍 ")])),_:1,__:[14]}),l(p,{size:"large",style:{width:"100%"}},{default:t(()=>e[15]||(e[15]=[n(" 查看客户匹配度 ")])),_:1,__:[15]})])]),_:1})])]),_:1})]),_:1})])),[[K,g.value]]),l(ae,{ref_key:"productDialogRef",ref:M,onSuccess:U},null,512)])}}});const Pe=se(we,[["__scopeId","data-v-7d3999ab"]]);export{Pe as default};
