var XD=Object.defineProperty;var YD=(e,t,n)=>t in e?XD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wa=(e,t,n)=>(YD(e,typeof t!="symbol"?t+"":t,n),n);import{aK as _v,aL as ys,aM as Lr,aN as OS,aO as Dd,aP as Vy,aQ as Sf,aR as zp,aS as AM,aT as Iu,aU as Uu,ah as ci,aV as qD,aW as pc,aX as Iw,aY as KD,aZ as Wy,a_ as Lu,a$ as zy,b0 as ZD,b1 as Mv,b2 as a_,aF as Gu,b3 as JD,b4 as Hp,b5 as TM,b6 as Xp,b7 as Id,z as Lw,b8 as Zr,b9 as l_,ba as Hy,bb as ms,bc as ko,bd as Of,be as hc,bf as Pv,bg as Xy,bh as bs,bi as Sa,bj as qr,bk as u_,bl as QD,bm as MM,bn as Af,bo as PM,bp as kM,bq as Q1,br as ea,ai as Fu,bs as eI,bt as tI,bu as s_,bv as NM,bw as Yp,bx as RM,ac as Fw,by as kv,A as Nv,bz as Cy,bA as Yy,af as jM,bB as CM,bC as nI,bD as bv,bE as rI,bF as DM,bG as IM,bH as oI,bI as LM,bJ as iI,bK as aI,bL as lI,bM as uI,bN as sI,bO as Mg,bP as cI,bQ as fI,bR as dI,bS as FM,bT as $M,bU as BM,bV as UM,bW as $w,bX as pI,bY as qy,bZ as GM,b_ as hI,b$ as VM,c0 as WM,c1 as vI,c2 as yI,c3 as mI,c4 as $p,ae as gI,c5 as _I,c6 as bI,aH as wI,c7 as EI,ag as OI,c8 as xI,c9 as SI,ca as AI,cb as TI,ab as MI,aj as PI,cc as kI,aG as NI,cd as RI,ce as jI,cf as CI,cg as DI,ch as II,ci as LI,aa as FI,cj as $I,ck as BI,ak as UI,cl as GI,p as VI,cm as WI,cn as zI,co as HI,cp as Cr,cq as wt,cr as po,cs as XI,ct as Uo,cu as ue,cv as Pl,cw as wv,cx as Ye,cy as Rn,cz as L,cA as U,cB as me,cC as Bo,cD as zi,cE as _n,cF as Bt,cG as iv,cH as vr,cI as av,cJ as $e,cK as Tt,cL as rg,cM as xS,cN as nr,cO as SS,cP as vg,cQ as Aa,cR as Rv,cS as Vu,cT as et,cU as Ev,cV as sc,cW as YI,cX as zM,cY as xa,cZ as Qt,c_ as Bw,c$ as si,d0 as c_,d1 as Pf,d2 as qp,T as qI,d3 as f_,d4 as Bp,d5 as KI,d6 as ZI,d7 as HM,d8 as JI,d9 as XM,da as QI,db as eL,dc as tL,dd as nL,de as rL,df as oL,dg as iL,dh as Ov,di as aL,dj as Up,dk as lL,dl as Uw,dm as uL,dn as b1,dp as sL,dq as Oy,dr as YM,ds as cL,dt as AS,du as og,dv as fL,dw as dL,dx as pL,Q as gy,dy as hL,dz as qM,dA as ew,dB as vL,dC as w1,dD as yL,dE as mL}from"./index-07dfdb25.js";import{_ as d_,a as gL,b as KM,c as _L,d as bL}from"./ReasoningParamSettingDialog.vue_vue_type_script_setup_true_lang-64b635c4.js";import{b as ZM,c as Kp,v as jv,d as wL,e as EL,g as JM,f as TS,a as OL,r as xL,h as SL}from"./reduce-ce357546.js";import{h as AL,i as QM,j as TL,k as ML,l as PL,n as kL,o as NL,p as RL,q as jL,z as CL,f as DL,s as IL,a as LL,m as FL,b as $L,d as BL,e as UL,g as GL,c as VL,r as WL,u as zL}from"./zipObject-63ab10c4.js";import{S as Gw,_ as HL,a as XL}from"./sortable.esm-4d516e90.js";var YL=0/0;function MS(e){return typeof e=="number"?e:_v(e)?YL:+e}function p_(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=ys(n),o=ys(o)):(n=MS(n),o=MS(o)),r=e(n,o)}return r}}var qL=p_(function(e,t){return e+t},0);const KL=qL;var ZL="Expected a function";function JL(e,t){if(typeof t!="function")throw new TypeError(ZL);return e=Lr(e),function(){if(--e<1)return t.apply(this,arguments)}}var QL=OS&&new OS;const Pg=QL;var e3=Pg?function(e,t){return Pg.set(e,t),e}:Dd;const e2=e3;function Dy(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vy(e.prototype),o=e.apply(n,t);return Sf(o)?o:n}}var t3=1;function n3(e,t,n){var o=t&t3,r=Dy(e);function s(){var c=this&&this!==zp&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var r3=Math.max;function t2(e,t,n,o){for(var r=-1,s=e.length,c=n.length,v=-1,h=t.length,g=r3(s-c,0),_=Array(h+g),w=!o;++v<h;)_[v]=t[v];for(;++r<c;)(w||r<s)&&(_[n[r]]=e[r]);for(;g--;)_[v++]=e[r++];return _}var o3=Math.max;function n2(e,t,n,o){for(var r=-1,s=e.length,c=-1,v=n.length,h=-1,g=t.length,_=o3(s-v,0),w=Array(_+g),O=!o;++r<_;)w[r]=e[r];for(var S=r;++h<g;)w[S+h]=t[h];for(;++c<v;)(O||r<s)&&(w[S+n[c]]=e[r++]);return w}function i3(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function h_(){}var a3=4294967295;function Yr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a3,this.__views__=[]}Yr.prototype=Vy(h_.prototype);Yr.prototype.constructor=Yr;var l3=Pg?function(e){return Pg.get(e)}:AM;const Vw=l3;var u3={};const fv=u3;var s3=Object.prototype,c3=s3.hasOwnProperty;function yg(e){for(var t=e.name+"",n=fv[t],o=c3.call(fv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function $u(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}$u.prototype=Vy(h_.prototype);$u.prototype.constructor=$u;function r2(e){if(e instanceof Yr)return e.clone();var t=new $u(e.__wrapped__,e.__chain__);return t.__actions__=Iu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var f3=Object.prototype,d3=f3.hasOwnProperty;function le(e){if(Uu(e)&&!ci(e)&&!(e instanceof Yr)){if(e instanceof $u)return e;if(d3.call(e,"__wrapped__"))return r2(e)}return new $u(e)}le.prototype=h_.prototype;le.prototype.constructor=le;function tw(e){var t=yg(e),n=le[t];if(typeof n!="function"||!(t in Yr.prototype))return!1;if(e===n)return!0;var o=Vw(n);return!!o&&e===o[0]}var p3=qD(e2);const o2=p3;var h3=/\{\n\/\* \[wrapped with (.+)\] \*/,v3=/,? & /;function y3(e){var t=e.match(h3);return t?t[1].split(v3):[]}var m3=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function g3(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(m3,`{
/* [wrapped with `+t+`] */
`)}var _3=1,b3=2,w3=8,E3=16,O3=32,x3=64,S3=128,A3=256,T3=512,M3=[["ary",S3],["bind",_3],["bindKey",b3],["curry",w3],["curryRight",E3],["flip",T3],["partial",O3],["partialRight",x3],["rearg",A3]];function P3(e,t){return pc(M3,function(n){var o="_."+n[0];t&n[1]&&!Iw(e,o)&&e.push(o)}),e.sort()}function i2(e,t,n){var o=t+"";return KD(e,g3(o,P3(y3(o),n)))}var k3=1,N3=2,R3=4,j3=8,PS=32,kS=64;function a2(e,t,n,o,r,s,c,v,h,g){var _=t&j3,w=_?c:void 0,O=_?void 0:c,S=_?s:void 0,P=_?void 0:s;t|=_?PS:kS,t&=~(_?kS:PS),t&R3||(t&=~(k3|N3));var A=[e,t,r,S,w,P,O,v,h,g],R=n.apply(void 0,A);return tw(e)&&o2(R,A),R.placeholder=o,i2(R,e,t)}function Cv(e){var t=e;return t.placeholder}var C3=Math.min;function D3(e,t){for(var n=e.length,o=C3(t.length,n),r=Iu(e);o--;){var s=t[o];e[o]=Wy(s,n)?r[s]:void 0}return e}var NS="__lodash_placeholder__";function jd(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===NS)&&(e[n]=NS,s[r++]=n)}return s}var I3=1,L3=2,F3=8,$3=16,B3=128,U3=512;function v_(e,t,n,o,r,s,c,v,h,g){var _=t&B3,w=t&I3,O=t&L3,S=t&(F3|$3),P=t&U3,A=O?void 0:Dy(e);function R(){for(var D=arguments.length,N=Array(D),B=D;B--;)N[B]=arguments[B];if(S)var q=Cv(R),Z=i3(N,q);if(o&&(N=t2(N,o,r,S)),s&&(N=n2(N,s,c,S)),D-=Z,S&&D<g){var Y=jd(N,q);return a2(e,t,v_,R.placeholder,n,N,Y,v,h,g-D)}var te=w?n:this,G=O?te[e]:e;return D=N.length,v?N=D3(N,v):P&&D>1&&N.reverse(),_&&h<D&&(N.length=h),this&&this!==zp&&this instanceof R&&(G=A||Dy(G)),G.apply(te,N)}return R}function G3(e,t,n){var o=Dy(e);function r(){for(var s=arguments.length,c=Array(s),v=s,h=Cv(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==h&&c[s-1]!==h?[]:jd(c,h);if(s-=g.length,s<n)return a2(e,t,v_,r.placeholder,void 0,c,g,void 0,void 0,n-s);var _=this&&this!==zp&&this instanceof r?o:e;return Lu(_,this,c)}return r}var V3=1;function W3(e,t,n,o){var r=t&V3,s=Dy(e);function c(){for(var v=-1,h=arguments.length,g=-1,_=o.length,w=Array(_+h),O=this&&this!==zp&&this instanceof c?s:e;++g<_;)w[g]=o[g];for(;h--;)w[g++]=arguments[++v];return Lu(O,r?n:this,w)}return c}var RS="__lodash_placeholder__",E1=1,z3=2,H3=4,jS=8,py=128,CS=256,X3=Math.min;function Y3(e,t){var n=e[1],o=t[1],r=n|o,s=r<(E1|z3|py),c=o==py&&n==jS||o==py&&n==CS&&e[7].length<=t[8]||o==(py|CS)&&t[7].length<=t[8]&&n==jS;if(!(s||c))return e;o&E1&&(e[2]=t[2],r|=n&E1?0:H3);var v=t[3];if(v){var h=e[3];e[3]=h?t2(h,v,t[4]):v,e[4]=h?jd(e[3],RS):t[4]}return v=t[5],v&&(h=e[5],e[5]=h?n2(h,v,t[6]):v,e[6]=h?jd(e[5],RS):t[6]),v=t[7],v&&(e[7]=v),o&py&&(e[8]=e[8]==null?t[8]:X3(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var q3="Expected a function",DS=1,K3=2,O1=8,x1=16,S1=32,IS=64,LS=Math.max;function kf(e,t,n,o,r,s,c,v){var h=t&K3;if(!h&&typeof e!="function")throw new TypeError(q3);var g=o?o.length:0;if(g||(t&=~(S1|IS),o=r=void 0),c=c===void 0?c:LS(Lr(c),0),v=v===void 0?v:Lr(v),g-=r?r.length:0,t&IS){var _=o,w=r;o=r=void 0}var O=h?void 0:Vw(e),S=[e,t,n,o,r,_,w,s,c,v];if(O&&Y3(S,O),e=S[0],t=S[1],n=S[2],o=S[3],r=S[4],v=S[9]=S[9]===void 0?h?0:e.length:LS(S[9]-g,0),!v&&t&(O1|x1)&&(t&=~(O1|x1)),!t||t==DS)var P=n3(e,t,n);else t==O1||t==x1?P=G3(e,t,v):(t==S1||t==(DS|S1))&&!r.length?P=W3(e,t,n,o):P=v_.apply(void 0,S);var A=O?e2:o2;return i2(A(P,S),e,t)}var Z3=128;function l2(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,kf(e,Z3,void 0,void 0,void 0,void 0,t)}var J3=Object.prototype,Q3=J3.hasOwnProperty,e8=zy(function(e,t){if(ZD(t)||Mv(t)){a_(t,Gu(t),e);return}for(var n in t)Q3.call(t,n)&&JD(e,n,t[n])});const t8=e8;var n8=zy(function(e,t){a_(t,Hp(t),e)});const FS=n8;var r8=zy(function(e,t,n,o){a_(t,Hp(t),e,o)});const kg=r8;var o8=zy(function(e,t,n,o){a_(t,Gu(t),e,o)});const i8=o8;function Ww(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:TM(e,t[n]);return r}var a8=Xp(Ww);const l8=a8;var u8="[object DOMException]",s8="[object Error]";function zw(e){if(!Uu(e))return!1;var t=Id(e);return t==s8||t==u8||typeof e.message=="string"&&typeof e.name=="string"&&!Lw(e)}var c8=Zr(function(e,t){try{return Lu(e,void 0,t)}catch(n){return zw(n)?n:new Error(n)}});const u2=c8;var f8="Expected a function";function s2(e,t){var n;if(typeof t!="function")throw new TypeError(f8);return e=Lr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var d8=1,p8=32,Hw=Zr(function(e,t,n){var o=d8;if(n.length){var r=jd(n,Cv(Hw));o|=p8}return kf(e,o,t,n,r)});Hw.placeholder={};const c2=Hw;var h8=Xp(function(e,t){return pc(t,function(n){n=l_(n),Hy(e,n,c2(e[n],e))}),e});const v8=h8;var y8=1,m8=2,g8=32,Xw=Zr(function(e,t,n){var o=y8|m8;if(n.length){var r=jd(n,Cv(Xw));o|=g8}return kf(t,o,e,n,r)});Xw.placeholder={};const _8=Xw;function Ld(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:ms(e,t,n)}var b8="\\ud800-\\udfff",w8="\\u0300-\\u036f",E8="\\ufe20-\\ufe2f",O8="\\u20d0-\\u20ff",x8=w8+E8+O8,S8="\\ufe0e\\ufe0f",A8="\\u200d",T8=RegExp("["+A8+b8+x8+S8+"]");function Dv(e){return T8.test(e)}function M8(e){return e.split("")}var f2="\\ud800-\\udfff",P8="\\u0300-\\u036f",k8="\\ufe20-\\ufe2f",N8="\\u20d0-\\u20ff",R8=P8+k8+N8,j8="\\ufe0e\\ufe0f",C8="["+f2+"]",nw="["+R8+"]",rw="\\ud83c[\\udffb-\\udfff]",D8="(?:"+nw+"|"+rw+")",d2="[^"+f2+"]",p2="(?:\\ud83c[\\udde6-\\uddff]){2}",h2="[\\ud800-\\udbff][\\udc00-\\udfff]",I8="\\u200d",v2=D8+"?",y2="["+j8+"]?",L8="(?:"+I8+"(?:"+[d2,p2,h2].join("|")+")"+y2+v2+")*",F8=y2+v2+L8,$8="(?:"+[d2+nw+"?",nw,p2,h2,C8].join("|")+")",B8=RegExp(rw+"(?="+rw+")|"+$8+F8,"g");function U8(e){return e.match(B8)||[]}function gs(e){return Dv(e)?U8(e):M8(e)}function m2(e){return function(t){t=ko(t);var n=Dv(t)?gs(t):void 0,o=n?n[0]:t.charAt(0),r=n?Ld(n,1).join(""):t.slice(1);return o[e]()+r}}var G8=m2("toUpperCase");const Yw=G8;function g2(e){return Yw(ko(e).toLowerCase())}function qw(e){return function(t){return e==null?void 0:e[t]}}var V8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},W8=qw(V8);const z8=W8;var H8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,X8="\\u0300-\\u036f",Y8="\\ufe20-\\ufe2f",q8="\\u20d0-\\u20ff",K8=X8+Y8+q8,Z8="["+K8+"]",J8=RegExp(Z8,"g");function _2(e){return e=ko(e),e&&e.replace(H8,z8).replace(J8,"")}var Q8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function eF(e){return e.match(Q8)||[]}var tF=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function nF(e){return tF.test(e)}var b2="\\ud800-\\udfff",rF="\\u0300-\\u036f",oF="\\ufe20-\\ufe2f",iF="\\u20d0-\\u20ff",aF=rF+oF+iF,w2="\\u2700-\\u27bf",E2="a-z\\xdf-\\xf6\\xf8-\\xff",lF="\\xac\\xb1\\xd7\\xf7",uF="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sF="\\u2000-\\u206f",cF=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",O2="A-Z\\xc0-\\xd6\\xd8-\\xde",fF="\\ufe0e\\ufe0f",x2=lF+uF+sF+cF,S2="['’]",$S="["+x2+"]",dF="["+aF+"]",A2="\\d+",pF="["+w2+"]",T2="["+E2+"]",M2="[^"+b2+x2+A2+w2+E2+O2+"]",hF="\\ud83c[\\udffb-\\udfff]",vF="(?:"+dF+"|"+hF+")",yF="[^"+b2+"]",P2="(?:\\ud83c[\\udde6-\\uddff]){2}",k2="[\\ud800-\\udbff][\\udc00-\\udfff]",Qh="["+O2+"]",mF="\\u200d",BS="(?:"+T2+"|"+M2+")",gF="(?:"+Qh+"|"+M2+")",US="(?:"+S2+"(?:d|ll|m|re|s|t|ve))?",GS="(?:"+S2+"(?:D|LL|M|RE|S|T|VE))?",N2=vF+"?",R2="["+fF+"]?",_F="(?:"+mF+"(?:"+[yF,P2,k2].join("|")+")"+R2+N2+")*",bF="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",EF=R2+N2+_F,OF="(?:"+[pF,P2,k2].join("|")+")"+EF,xF=RegExp([Qh+"?"+T2+"+"+US+"(?="+[$S,Qh,"$"].join("|")+")",gF+"+"+GS+"(?="+[$S,Qh+BS,"$"].join("|")+")",Qh+"?"+BS+"+"+US,Qh+"+"+GS,wF,bF,A2,OF].join("|"),"g");function SF(e){return e.match(xF)||[]}function j2(e,t,n){return e=ko(e),t=n?void 0:t,t===void 0?nF(e)?SF(e):eF(e):e.match(t)||[]}var AF="['’]",TF=RegExp(AF,"g");function Iv(e){return function(t){return ZM(j2(_2(t).replace(TF,"")),e,"")}}var MF=Iv(function(e,t,n){return t=t.toLowerCase(),e+(n?g2(t):t)});const PF=MF;var kF=zp.isFinite,NF=Math.min;function Kw(e){var t=Math[e];return function(n,o){if(n=Of(n),o=o==null?0:NF(Lr(o),292),o&&kF(n)){var r=(ko(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(ko(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var RF=Kw("ceil");const jF=RF;function C2(e){var t=le(e);return t.__chain__=!0,t}var CF=Math.ceil,DF=Math.max;function IF(e,t,n){(n?hc(e,t,n):t===void 0)?t=1:t=DF(Lr(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(CF(o/t));r<o;)c[s++]=ms(e,r,r+=t);return c}function Zp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function LF(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Of(n),n=n===n?n:0),t!==void 0&&(t=Of(t),t=t===t?t:0),Zp(Of(e),t,n)}var FF=1,$F=4;function BF(e,t){return t=typeof t=="function"?t:void 0,Pv(e,FF|$F,t)}var UF=4;function GF(e,t){return t=typeof t=="function"?t:void 0,Pv(e,UF,t)}function VF(){return new $u(this.value(),this.__chain__)}function WF(e){for(var t=-1,n=e==null?0:e.length,o=0,r=[];++t<n;){var s=e[t];s&&(r[o++]=s)}return r}function zF(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Xy(ci(n)?Iu(n):[n],bs(t,1))}var HF="Expected a function";function XF(e){var t=e==null?0:e.length,n=qr;return e=t?Sa(e,function(o){if(typeof o[1]!="function")throw new TypeError(HF);return[n(o[0]),o[1]]}):[],Zr(function(o){for(var r=-1;++r<t;){var s=e[r];if(Lu(s[0],this,o))return Lu(s[1],this,o)}})}function D2(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function YF(e){var t=Gu(e);return function(n){return D2(n,e,t)}}var qF=1;function KF(e){return YF(Pv(e,qF))}function ZF(e,t){return t==null||D2(e,t,Gu(t))}function JF(e,t,n,o){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(o,c,n(c),e)}return o}function QF(e,t,n,o){return u_(e,function(r,s,c){t(o,r,n(r),c)}),o}function y_(e,t){return function(n,o){var r=ci(n)?JF:QF,s=t?t():{};return r(n,e,qr(o),s)}}var e4=Object.prototype,t4=e4.hasOwnProperty,n4=y_(function(e,t,n){t4.call(e,n)?++e[n]:Hy(e,n,1)});const r4=n4;function o4(e,t){var n=Vy(e);return t==null?n:QD(n,t)}var i4=8;function Zw(e,t,n){t=n?void 0:t;var o=kf(e,i4,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Zw.placeholder,o}Zw.placeholder={};var a4=16;function Jw(e,t,n){t=n?void 0:t;var o=kf(e,a4,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Jw.placeholder,o}Jw.placeholder={};function l4(e,t){return e==null||e!==e?t:e}function I2(e,t,n,o,r,s){return Sf(e)&&Sf(t)&&(s.set(t,e),MM(e,t,void 0,I2,s),s.delete(t)),e}var u4=zy(function(e,t,n,o){MM(e,t,n,o)});const L2=u4;var s4=Zr(function(e){return e.push(void 0,I2),Lu(L2,void 0,e)});const c4=s4;var f4="Expected a function";function F2(e,t,n){if(typeof e!="function")throw new TypeError(f4);return setTimeout(function(){e.apply(void 0,n)},t)}var d4=Zr(function(e,t){return F2(e,1,t)});const p4=d4;var h4=Zr(function(e,t,n){return F2(e,Of(t)||0,n)});const v4=h4;var y4=200;function Ky(e,t,n,o){var r=-1,s=Iw,c=!0,v=e.length,h=[],g=t.length;if(!v)return h;n&&(t=Sa(t,Af(n))),o?(s=kM,c=!1):t.length>=y4&&(s=Q1,c=!1,t=new PM(t));e:for(;++r<v;){var _=e[r],w=n==null?_:n(_);if(_=o||_!==0?_:0,c&&w===w){for(var O=g;O--;)if(t[O]===w)continue e;h.push(_)}else s(t,w,o)||h.push(_)}return h}var m4=Zr(function(e,t){return ea(e)?Ky(e,bs(t,1,ea,!0)):[]});const g4=m4;var _4=Zr(function(e,t){var n=Fu(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,bs(t,1,ea,!0),qr(n)):[]});const b4=_4;var w4=Zr(function(e,t){var n=Fu(t);return ea(n)&&(n=void 0),ea(e)?Ky(e,bs(t,1,ea,!0),void 0,n):[]});const E4=w4;var O4=p_(function(e,t){return e/t},1);const x4=O4;function S4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Lr(t),ms(e,t<0?0:t,o)):[]}function A4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Lr(t),t=o-t,ms(e,0,t<0?0:t)):[]}function m_(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?ms(e,o?0:s,o?s+1:r):ms(e,o?s+1:0,o?r:s)}function T4(e,t){return e&&e.length?m_(e,qr(t),!0,!0):[]}function M4(e,t){return e&&e.length?m_(e,qr(t),!0):[]}function P4(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var k4=eI(!0);const $2=k4;function Qw(e,t){return e&&$2(e,t,Gu)}var N4=tI(Qw,!0);const B2=N4;function VS(e,t){var n=ci(e)?P4:B2;return n(e,Kp(t))}function R4(e,t,n){e=ko(e),t=ys(t);var o=e.length;n=n===void 0?o:Zp(Lr(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function j4(e,t){return Sa(t,function(n){return[n,e[n]]})}function C4(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var D4="[object Map]",I4="[object Set]";function U2(e){return function(t){var n=s_(t);return n==D4?NM(t):n==I4?C4(t):j4(t,e(t))}}var L4=U2(Gu);const WS=L4;var F4=U2(Hp);const zS=F4;var $4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B4=qw($4);const U4=B4;var G2=/[&<>"']/g,G4=RegExp(G2.source);function V2(e){return e=ko(e),e&&G4.test(e)?e.replace(G2,U4):e}var W2=/[\\^$.*+?()[\]{}|]/g,V4=RegExp(W2.source);function W4(e){return e=ko(e),e&&V4.test(e)?e.replace(W2,"\\$&"):e}function z2(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function z4(e,t){var n=!0;return u_(e,function(o,r,s){return n=!!t(o,r,s),n}),n}function H4(e,t,n){var o=ci(e)?z2:z4;return n&&hc(e,t,n)&&(t=void 0),o(e,qr(t))}var X4=4294967295;function H2(e){return e?Zp(Lr(e),0,X4):0}function Y4(e,t,n,o){var r=e.length;for(n=Lr(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:Lr(o),o<0&&(o+=r),o=n>o?0:H2(o);n<o;)e[n++]=t;return e}function q4(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&hc(e,t,n)&&(n=0,o=r),Y4(e,t,n,o)):[]}function X2(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function K4(e,t){return X2(e,qr(t),Yp)}var Z4=AL(RM);const J4=Z4;function Q4(e,t){return X2(e,qr(t),Qw)}function HS(e){return e&&e.length?e[0]:void 0}var e$=1/0;function t$(e,t){return bs(Fw(e,t),e$)}function n$(e,t,n){return n=n===void 0?1:Lr(n),bs(Fw(e,t),n)}function r$(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Lr(t),bs(e,t)):[]}var o$=512;function i$(e){return kf(e,o$)}var a$=Kw("floor");const l$=a$;var u$="Expected a function",s$=8,c$=32,f$=128,d$=256;function Y2(e){return Xp(function(t){var n=t.length,o=n,r=$u.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(u$);if(r&&!c&&yg(s)=="wrapper")var c=new $u([],!0)}for(o=c?o:n;++o<n;){s=t[o];var v=yg(s),h=v=="wrapper"?Vw(s):void 0;h&&tw(h[0])&&h[1]==(f$|s$|c$|d$)&&!h[4].length&&h[9]==1?c=c[yg(h[0])].apply(c,h[3]):c=s.length==1&&tw(s)?c[v]():c.thru(s)}return function(){var g=arguments,_=g[0];if(c&&g.length==1&&ci(_))return c.plant(_).value();for(var w=0,O=n?t[w].apply(this,g):_;++w<n;)O=t[w].call(this,O);return O}})}var p$=Y2();const h$=p$;var v$=Y2(!0);const y$=v$;function m$(e,t){return e==null?e:$2(e,Kp(t),Hp)}function g$(e,t){return e&&Qw(e,Kp(t))}function g_(e,t){return kv(t,function(n){return Nv(e[n])})}function _$(e){return e==null?[]:g_(e,Gu(e))}function b$(e){return e==null?[]:g_(e,Hp(e))}var w$=Object.prototype,E$=w$.hasOwnProperty,O$=y_(function(e,t,n){E$.call(e,n)?e[n].push(t):Hy(e,n,[t])});const x$=O$;function __(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Of(t),n=Of(n)),e(t,n)}}var S$=__(QM);const A$=S$;var T$=__(function(e,t){return e>=t});const M$=T$;var P$=Math.max,k$=Math.min;function N$(e,t,n){return e>=k$(t,n)&&e<P$(t,n)}function R$(e,t,n){return t=Cy(t),n===void 0?(n=t,t=0):n=Cy(n),e=Of(e),N$(e,t,n)}var j$="[object String]";function b_(e){return typeof e=="string"||!ci(e)&&Uu(e)&&Id(e)==j$}var C$=Math.max;function D$(e,t,n,o){e=Mv(e)?e:jv(e),n=n&&!o?Lr(n):0;var r=e.length;return n<0&&(n=C$(r+n,0)),b_(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Yy(e,t,n)>-1}var I$=Math.max;function L$(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Lr(n);return r<0&&(r=I$(o+r,0)),Yy(e,t,r)}function F$(e){var t=e==null?0:e.length;return t?ms(e,0,-1):[]}var $$=Math.min;function eE(e,t,n){for(var o=n?kM:Iw,r=e[0].length,s=e.length,c=s,v=Array(s),h=1/0,g=[];c--;){var _=e[c];c&&t&&(_=Sa(_,Af(t))),h=$$(_.length,h),v[c]=!n&&(t||r>=120&&_.length>=120)?new PM(c&&_):void 0}_=e[0];var w=-1,O=v[0];e:for(;++w<r&&g.length<h;){var S=_[w],P=t?t(S):S;if(S=n||S!==0?S:0,!(O?Q1(O,P):o(g,P,n))){for(c=s;--c;){var A=v[c];if(!(A?Q1(A,P):o(e[c],P,n)))continue e}O&&O.push(P),g.push(S)}}return g}function tE(e){return ea(e)?e:[]}var B$=Zr(function(e){var t=Sa(e,tE);return t.length&&t[0]===e[0]?eE(t):[]});const U$=B$;var G$=Zr(function(e){var t=Fu(e),n=Sa(e,tE);return t===Fu(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?eE(n,qr(t)):[]});const V$=G$;var W$=Zr(function(e){var t=Fu(e),n=Sa(e,tE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?eE(n,void 0,t):[]});const z$=W$;function H$(e,t,n,o){return Yp(e,function(r,s,c){t(o,n(r),s,c)}),o}function q2(e,t){return function(n,o){return H$(n,e,t(o),{})}}var X$=Object.prototype,Y$=X$.toString,q$=q2(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Y$.call(t)),e[t]=n},jM(Dd));const K$=q$;var K2=Object.prototype,Z$=K2.hasOwnProperty,J$=K2.toString,Q$=q2(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=J$.call(t)),Z$.call(e,t)?e[t].push(n):e[t]=[n]},qr);const e5=Q$;function Zy(e,t,n){t=CM(t,e),e=nI(e,t);var o=e==null?e:e[l_(Fu(t))];return o==null?void 0:Lu(o,e,n)}var t5=Zr(Zy);const n5=t5;var r5=Zr(function(e,t,n){var o=-1,r=typeof t=="function",s=Mv(e)?Array(e.length):[];return u_(e,function(c){s[++o]=r?Lu(t,c,n):Zy(c,t,n)}),s});const o5=r5;var i5="[object ArrayBuffer]";function a5(e){return Uu(e)&&Id(e)==i5}var XS=bv&&bv.isArrayBuffer,l5=XS?Af(XS):a5;const u5=l5;var s5="[object Boolean]";function c5(e){return e===!0||e===!1||Uu(e)&&Id(e)==s5}var f5="[object Date]";function d5(e){return Uu(e)&&Id(e)==f5}var YS=bv&&bv.isDate,p5=YS?Af(YS):d5;const h5=p5;function v5(e){return Uu(e)&&e.nodeType===1&&!Lw(e)}function y5(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?rI(e,t,void 0,n):!!o}var m5=zp.isFinite;function g5(e){return typeof e=="number"&&m5(e)}function Z2(e){return typeof e=="number"&&e==Lr(e)}function _5(e,t){return e===t||DM(e,t,IM(t))}function b5(e,t,n){return n=typeof n=="function"?n:void 0,DM(e,t,IM(t),n)}var w5="[object Number]";function J2(e){return typeof e=="number"||Uu(e)&&Id(e)==w5}function E5(e){return J2(e)&&e!=+e}var O5=oI?Nv:LM;const x5=O5;var S5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function A5(e){if(x5(e))throw new Error(S5);return iI(e)}var T5="[object RegExp]";function M5(e){return Uu(e)&&Id(e)==T5}var qS=bv&&bv.isRegExp,P5=qS?Af(qS):M5;const nE=P5;var KS=9007199254740991;function k5(e){return Z2(e)&&e>=-KS&&e<=KS}var N5="[object WeakMap]";function R5(e){return Uu(e)&&s_(e)==N5}var j5="[object WeakSet]";function C5(e){return Uu(e)&&Id(e)==j5}var D5=1;function I5(e){return qr(typeof e=="function"?e:Pv(e,D5))}var L5=Array.prototype,F5=L5.join;function $5(e,t){return e==null?"":F5.call(e,t)}var B5=Iv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const U5=B5;var G5=y_(function(e,t,n){Hy(e,n,t)});const V5=G5;function W5(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var z5=Math.max,H5=Math.min;function X5(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=Lr(n),r=r<0?z5(o+r,0):H5(r,o-1)),t===t?W5(e,t,r):aI(e,lI,r,!0)}var Y5=Iv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const q5=Y5;var K5=m2("toLowerCase");const Z5=K5;var J5=__(TL);const Q5=J5;var eB=__(function(e,t){return e<=t});const tB=eB;function nB(e,t){var n={};return t=qr(t),Yp(e,function(o,r,s){Hy(n,t(o,r,s),o)}),n}var rB=1;function oB(e){return uI(Pv(e,rB))}var iB=1;function aB(e,t){return sI(e,Pv(t,iB))}function lB(e,t){return e&&e.length?ML(e,qr(t),QM):void 0}function rE(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var uB=0/0;function Q2(e,t){var n=e==null?0:e.length;return n?rE(e,t)/n:uB}function sB(e){return Q2(e,Dd)}function cB(e,t){return Q2(e,qr(t))}var fB=Zr(function(e,t){return function(n){return Zy(n,e,t)}});const dB=fB;var pB=Zr(function(e,t){return function(n){return Zy(e,n,t)}});const hB=pB;function eP(e,t,n){var o=Gu(t),r=g_(t,o),s=!(Sf(n)&&"chain"in n)||!!n.chain,c=Nv(e);return pc(r,function(v){var h=t[v];e[v]=h,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var _=e(this.__wrapped__),w=_.__actions__=Iu(this.__actions__);return w.push({func:h,args:arguments,thisArg:e}),_.__chain__=g,_}return h.apply(e,Xy([this.value()],arguments))})}),e}var vB=p_(function(e,t){return e*t},1);const yB=vB;var mB="Expected a function";function Jy(e){if(typeof e!="function")throw new TypeError(mB);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function gB(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var _B="[object Map]",bB="[object Set]",A1=Mg?Mg.iterator:void 0;function tP(e){if(!e)return[];if(Mv(e))return b_(e)?gs(e):Iu(e);if(A1&&e[A1])return gB(e[A1]());var t=s_(e),n=t==_B?NM:t==bB?cI:jv;return n(e)}function wB(){this.__values__===void 0&&(this.__values__=tP(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function nP(e,t){var n=e.length;if(n)return t+=t<0?n:0,Wy(t,n)?e[t]:void 0}function EB(e,t){return e&&e.length?nP(e,Lr(t)):void 0}function OB(e){return e=Lr(e),Zr(function(t){return nP(t,e)})}function rP(e,t){if(e==null)return{};var n=Sa(fI(e),function(o){return[o]});return t=qr(t),dI(e,n,function(o,r){return t(o,r[0])})}function xB(e,t){return rP(e,Jy(qr(t)))}function SB(e){return s2(2,e)}function AB(e,t,n,o){return e==null?[]:(ci(t)||(t=t==null?[]:[t]),n=o?void 0:n,ci(n)||(n=n==null?[]:[n]),PL(e,t,n))}function oE(e){return Xp(function(t){return t=Sa(t,Af(qr)),Zr(function(n){var o=this;return e(t,function(r){return Lu(r,o,n)})})})}var TB=oE(Sa);const MB=TB;var PB=Zr;const kB=PB;var NB=Math.min,RB=kB(function(e,t){t=t.length==1&&ci(t[0])?Sa(t[0],Af(qr)):Sa(bs(t,1),Af(qr));var n=t.length;return Zr(function(o){for(var r=-1,s=NB(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Lu(e,this,o)})});const jB=RB;var CB=oE(z2);const DB=CB;var IB=oE(FM);const LB=IB;var FB=9007199254740991,$B=Math.floor;function ow(e,t){var n="";if(!e||t<1||t>FB)return n;do t%2&&(n+=e),t=$B(t/2),t&&(e+=e);while(t);return n}var BB=$M("length");const UB=BB;var oP="\\ud800-\\udfff",GB="\\u0300-\\u036f",VB="\\ufe20-\\ufe2f",WB="\\u20d0-\\u20ff",zB=GB+VB+WB,HB="\\ufe0e\\ufe0f",XB="["+oP+"]",iw="["+zB+"]",aw="\\ud83c[\\udffb-\\udfff]",YB="(?:"+iw+"|"+aw+")",iP="[^"+oP+"]",aP="(?:\\ud83c[\\udde6-\\uddff]){2}",lP="[\\ud800-\\udbff][\\udc00-\\udfff]",qB="\\u200d",uP=YB+"?",sP="["+HB+"]?",KB="(?:"+qB+"(?:"+[iP,aP,lP].join("|")+")"+sP+uP+")*",ZB=sP+uP+KB,JB="(?:"+[iP+iw+"?",iw,aP,lP,XB].join("|")+")",ZS=RegExp(aw+"(?="+aw+")|"+JB+ZB,"g");function QB(e){for(var t=ZS.lastIndex=0;ZS.test(e);)++t;return t}function Lv(e){return Dv(e)?QB(e):UB(e)}var e6=Math.ceil;function Ng(e,t){t=t===void 0?" ":ys(t);var n=t.length;if(n<2)return n?ow(t,e):t;var o=ow(t,e6(e/Lv(t)));return Dv(t)?Ld(gs(o),0,e).join(""):o.slice(0,e)}var t6=Math.ceil,n6=Math.floor;function r6(e,t,n){e=ko(e),t=Lr(t);var o=t?Lv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Ng(n6(r),n)+e+Ng(t6(r),n)}function o6(e,t,n){e=ko(e),t=Lr(t);var o=t?Lv(e):0;return t&&o<t?e+Ng(t-o,n):e}function i6(e,t,n){e=ko(e),t=Lr(t);var o=t?Lv(e):0;return t&&o<t?Ng(t-o,n)+e:e}var a6=/^\s+/,l6=zp.parseInt;function u6(e,t,n){return n||t==null?t=0:t&&(t=+t),l6(ko(e).replace(a6,""),t||0)}var s6=32,iE=Zr(function(e,t){var n=jd(t,Cv(iE));return kf(e,s6,void 0,t,n)});iE.placeholder={};const cP=iE;var c6=64,aE=Zr(function(e,t){var n=jd(t,Cv(aE));return kf(e,c6,void 0,t,n)});aE.placeholder={};const f6=aE;var d6=y_(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const p6=d6;function h6(e){for(var t,n=this;n instanceof h_;){var o=r2(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function v6(e){return function(t){return e==null?void 0:BM(e,t)}}function y6(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var m6=Array.prototype,JS=m6.splice;function lE(e,t,n,o){var r=o?y6:Yy,s=-1,c=t.length,v=e;for(e===t&&(t=Iu(t)),n&&(v=Sa(e,Af(n)));++s<c;)for(var h=0,g=t[s],_=n?n(g):g;(h=r(v,_,h,o))>-1;)v!==e&&JS.call(v,h,1),JS.call(e,h,1);return e}function fP(e,t){return e&&e.length&&t&&t.length?lE(e,t):e}var g6=Zr(fP);const _6=g6;function b6(e,t,n){return e&&e.length&&t&&t.length?lE(e,t,qr(n)):e}function w6(e,t,n){return e&&e.length&&t&&t.length?lE(e,t,void 0,n):e}var E6=Array.prototype,O6=E6.splice;function dP(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Wy(r)?O6.call(e,r,1):UM(e,r)}}return e}var x6=Xp(function(e,t){var n=e==null?0:e.length,o=Ww(e,t);return dP(e,Sa(t,function(r){return Wy(r,n)?+r:r}).sort(kL)),o});const S6=x6;var A6=Math.floor,T6=Math.random;function uE(e,t){return e+A6(T6()*(t-e+1))}var M6=parseFloat,P6=Math.min,k6=Math.random;function N6(e,t,n){if(n&&typeof n!="boolean"&&hc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Cy(e),t===void 0?(t=e,e=0):t=Cy(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=k6();return P6(e+r*(t-e+M6("1e-"+((r+"").length-1))),t)}return uE(e,t)}var R6=NL(!0);const j6=R6;var C6=256,D6=Xp(function(e,t){return kf(e,C6,void 0,void 0,void 0,t)});const I6=D6;function L6(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function F6(e,t,n){var o=ci(e)?L6:wL,r=arguments.length<3;return o(e,qr(t),n,r,B2)}function $6(e,t){var n=ci(e)?kv:EL;return n(e,Jy(qr(t)))}function B6(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=qr(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return dP(e,r),n}function U6(e,t,n){return(n?hc(e,t,n):t===void 0)?t=1:t=Lr(t),ow(ko(e),t)}function G6(){var e=arguments,t=ko(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var V6="Expected a function";function W6(e,t){if(typeof e!="function")throw new TypeError(V6);return t=t===void 0?t:Lr(t),Zr(e,t)}function z6(e,t,n){t=CM(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[l_(t[o])];s===void 0&&(o=r,s=n),e=Nv(s)?s.call(e):s}return e}var H6=Array.prototype,X6=H6.reverse;function lw(e){return e==null?e:X6.call(e)}var Y6=Kw("round");const q6=Y6;function pP(e){var t=e.length;return t?e[uE(0,t-1)]:void 0}function K6(e){return pP(jv(e))}function Z6(e){var t=ci(e)?pP:K6;return t(e)}function w_(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=uE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function J6(e,t){return w_(Iu(e),Zp(t,0,e.length))}function Q6(e,t){var n=jv(e);return w_(n,Zp(t,0,n.length))}function eU(e,t,n){(n?hc(e,t,n):t===void 0)?t=1:t=Lr(t);var o=ci(e)?J6:Q6;return o(e,t)}function tU(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:$w(e,t,n,o)}function nU(e){return w_(Iu(e))}function rU(e){return w_(jv(e))}function oU(e){var t=ci(e)?nU:rU;return t(e)}var iU="[object Map]",aU="[object Set]";function lU(e){if(e==null)return 0;if(Mv(e))return b_(e)?Lv(e):e.length;var t=s_(e);return t==iU||t==aU?e.size:pI(e).length}function uU(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&hc(e,t,n)?(t=0,n=o):(t=t==null?0:Lr(t),n=n===void 0?o:Lr(n)),ms(e,t,n)):[]}var sU=Iv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const cU=sU;function fU(e,t){var n;return u_(e,function(o,r,s){return n=t(o,r,s),!n}),!!n}function dU(e,t,n){var o=ci(e)?FM:fU;return n&&hc(e,t,n)&&(t=void 0),o(e,qr(t))}var pU=4294967295,hU=pU-1,vU=Math.floor,yU=Math.min;function sE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,h=_v(t),g=t===void 0;r<s;){var _=vU((r+s)/2),w=n(e[_]),O=w!==void 0,S=w===null,P=w===w,A=_v(w);if(c)var R=o||P;else g?R=P&&(o||O):v?R=P&&O&&(o||!S):h?R=P&&O&&!S&&(o||!A):S||A?R=!1:R=o?w<=t:w<t;R?r=_+1:s=_}return yU(s,hU)}var mU=4294967295,gU=mU>>>1;function E_(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=gU){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!_v(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return sE(e,t,Dd,n)}function _U(e,t){return E_(e,t)}function bU(e,t,n){return sE(e,t,qr(n))}function wU(e,t){var n=e==null?0:e.length;if(n){var o=E_(e,t);if(o<n&&qy(e[o],t))return o}return-1}function EU(e,t){return E_(e,t,!0)}function OU(e,t,n){return sE(e,t,qr(n),!0)}function xU(e,t){var n=e==null?0:e.length;if(n){var o=E_(e,t,!0)-1;if(qy(e[o],t))return o}return-1}function hP(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],v=t?t(c):c;if(!n||!qy(v,h)){var h=v;s[r++]=c===0?0:c}}return s}function SU(e){return e&&e.length?hP(e):[]}function AU(e,t){return e&&e.length?hP(e,qr(t)):[]}var TU=4294967295;function MU(e,t,n){return n&&typeof n!="number"&&hc(e,t,n)&&(t=n=void 0),n=n===void 0?TU:n>>>0,n?(e=ko(e),e&&(typeof t=="string"||t!=null&&!nE(t))&&(t=ys(t),!t&&Dv(e))?Ld(gs(e),0,n):e.split(t,n)):[]}var PU="Expected a function",kU=Math.max;function NU(e,t){if(typeof e!="function")throw new TypeError(PU);return t=t==null?0:kU(Lr(t),0),Zr(function(n){var o=n[t],r=Ld(n,0,t);return o&&Xy(r,o),Lu(e,this,r)})}var RU=Iv(function(e,t,n){return e+(n?" ":"")+Yw(t)});const jU=RU;function CU(e,t,n){return e=ko(e),n=n==null?0:Zp(Lr(n),0,e.length),t=ys(t),e.slice(n,n+t.length)==t}function DU(){return{}}function IU(){return""}function LU(){return!0}var FU=p_(function(e,t){return e-t},0);const $U=FU;function BU(e){return e&&e.length?rE(e,Dd):0}function UU(e,t){return e&&e.length?rE(e,qr(t)):0}function GU(e){var t=e==null?0:e.length;return t?ms(e,1,t):[]}function VU(e,t,n){return e&&e.length?(t=n||t===void 0?1:Lr(t),ms(e,0,t<0?0:t)):[]}function WU(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Lr(t),t=o-t,ms(e,t<0?0:t,o)):[]}function zU(e,t){return e&&e.length?m_(e,qr(t),!1,!0):[]}function HU(e,t){return e&&e.length?m_(e,qr(t)):[]}function XU(e,t){return t(e),e}var vP=Object.prototype,YU=vP.hasOwnProperty;function QS(e,t,n,o){return e===void 0||qy(e,vP[n])&&!YU.call(o,n)?t:e}var qU={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function KU(e){return"\\"+qU[e]}var ZU=/<%=([\s\S]+?)%>/g;const yP=ZU;var JU=/<%-([\s\S]+?)%>/g;const QU=JU;var eG=/<%([\s\S]+?)%>/g;const tG=eG;var nG={escape:QU,evaluate:tG,interpolate:yP,variable:"",imports:{_:{escape:V2}}};const uw=nG;var rG="Invalid `variable` option passed into `_.template`",oG=/\b__p \+= '';/g,iG=/\b(__p \+=) '' \+/g,aG=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lG=/[()=,{}\[\]\/\s]/,uG=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ig=/($^)/,sG=/['\n\r\u2028\u2029\\]/g,cG=Object.prototype,eA=cG.hasOwnProperty;function fG(e,t,n){var o=uw.imports._.templateSettings||uw;n&&hc(e,t,n)&&(t=void 0),e=ko(e),t=kg({},t,o,QS);var r=kg({},t.imports,o.imports,QS),s=Gu(r),c=JM(r,s),v,h,g=0,_=t.interpolate||ig,w="__p += '",O=RegExp((t.escape||ig).source+"|"+_.source+"|"+(_===yP?uG:ig).source+"|"+(t.evaluate||ig).source+"|$","g"),S=eA.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(R,D,N,B,q,Z){return N||(N=B),w+=e.slice(g,Z).replace(sG,KU),D&&(v=!0,w+=`' +
__e(`+D+`) +
'`),q&&(h=!0,w+=`';
`+q+`;
__p += '`),N&&(w+=`' +
((__t = (`+N+`)) == null ? '' : __t) +
'`),g=Z+R.length,R}),w+=`';
`;var P=eA.call(t,"variable")&&t.variable;if(!P)w=`with (obj) {
`+w+`
}
`;else if(lG.test(P))throw new Error(rG);w=(h?w.replace(oG,""):w).replace(iG,"$1").replace(aG,"$1;"),w="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var A=u2(function(){return Function(s,S+"return "+w).apply(void 0,c)});if(A.source=w,zw(A))throw A;return A}function Qy(e,t){return t(e)}var dG=9007199254740991,T1=4294967295,pG=Math.min;function hG(e,t){if(e=Lr(e),e<1||e>dG)return[];var n=T1,o=pG(e,T1);t=Kp(t),e-=T1;for(var r=GM(o,t);++n<e;)t(n);return r}function vG(){return this}function mP(e,t){var n=e;return n instanceof Yr&&(n=n.value()),ZM(t,function(o,r){return r.func.apply(r.thisArg,Xy([o],r.args))},n)}function M1(){return mP(this.__wrapped__,this.__actions__)}function yG(e){return ko(e).toLowerCase()}function mG(e){return ci(e)?Sa(e,l_):_v(e)?[e]:Iu(hI(ko(e)))}var tA=9007199254740991;function gG(e){return e?Zp(Lr(e),-tA,tA):e===0?e:0}function _G(e){return ko(e).toUpperCase()}function bG(e,t,n){var o=ci(e),r=o||VM(e)||WM(e);if(t=qr(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:Sf(e)?n=Nv(s)?Vy(vI(e)):{}:n={}}return(r?pc:Yp)(e,function(c,v,h){return t(n,c,v,h)}),n}function gP(e,t){for(var n=e.length;n--&&Yy(t,e[n],0)>-1;);return n}function _P(e,t){for(var n=-1,o=e.length;++n<o&&Yy(t,e[n],0)>-1;);return n}function wG(e,t,n){if(e=ko(e),e&&(n||t===void 0))return yI(e);if(!e||!(t=ys(t)))return e;var o=gs(e),r=gs(t),s=_P(o,r),c=gP(o,r)+1;return Ld(o,s,c).join("")}function EG(e,t,n){if(e=ko(e),e&&(n||t===void 0))return e.slice(0,mI(e)+1);if(!e||!(t=ys(t)))return e;var o=gs(e),r=gP(o,gs(t))+1;return Ld(o,0,r).join("")}var OG=/^\s+/;function xG(e,t,n){if(e=ko(e),e&&(n||t===void 0))return e.replace(OG,"");if(!e||!(t=ys(t)))return e;var o=gs(e),r=_P(o,gs(t));return Ld(o,r).join("")}var SG=30,AG="...",TG=/\w*$/;function MG(e,t){var n=SG,o=AG;if(Sf(t)){var r="separator"in t?t.separator:r;n="length"in t?Lr(t.length):n,o="omission"in t?ys(t.omission):o}e=ko(e);var s=e.length;if(Dv(e)){var c=gs(e);s=c.length}if(n>=s)return e;var v=n-Lv(o);if(v<1)return o;var h=c?Ld(c,0,v).join(""):e.slice(0,v);if(r===void 0)return h+o;if(c&&(v+=h.length-v),nE(r)){if(e.slice(v).search(r)){var g,_=h;for(r.global||(r=RegExp(r.source,ko(TG.exec(r))+"g")),r.lastIndex=0;g=r.exec(_);)var w=g.index;h=h.slice(0,w===void 0?v:w)}}else if(e.indexOf(ys(r),v)!=v){var O=h.lastIndexOf(r);O>-1&&(h=h.slice(0,O))}return h+o}function PG(e){return l2(e,1)}var kG={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},NG=qw(kG);const RG=NG;var bP=/&(?:amp|lt|gt|quot|#39);/g,jG=RegExp(bP.source);function CG(e){return e=ko(e),e&&jG.test(e)?e.replace(bP,RG):e}var DG=Zr(function(e){var t=Fu(e);return ea(t)&&(t=void 0),$p(bs(e,1,ea,!0),qr(t))});const IG=DG;var LG=Zr(function(e){var t=Fu(e);return t=typeof t=="function"?t:void 0,$p(bs(e,1,ea,!0),void 0,t)});const FG=LG;function $G(e){return e&&e.length?$p(e):[]}function BG(e,t){return e&&e.length?$p(e,qr(t)):[]}function UG(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?$p(e,void 0,t):[]}function GG(e,t){return e==null?!0:UM(e,t)}var VG=Math.max;function cE(e){if(!(e&&e.length))return[];var t=0;return e=kv(e,function(n){if(ea(n))return t=VG(n.length,t),!0}),GM(t,function(n){return Sa(e,$M(n))})}function wP(e,t){if(!(e&&e.length))return[];var n=cE(e);return t==null?n:Sa(n,function(o){return Lu(t,void 0,o)})}function EP(e,t,n,o){return $w(e,t,n(BM(e,t)),o)}function WG(e,t,n){return e==null?e:EP(e,t,Kp(n))}function zG(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:EP(e,t,Kp(n),o)}var HG=Iv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const XG=HG;function YG(e){return e==null?[]:JM(e,Hp(e))}var qG=Zr(function(e,t){return ea(e)?Ky(e,t):[]});const KG=qG;function ZG(e,t){return cP(Kp(t),e)}var JG=Xp(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return Ww(s,e)};return t>1||this.__actions__.length||!(o instanceof Yr)||!Wy(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Qy,args:[r],thisArg:void 0}),new $u(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const QG=JG;function e7(){return C2(this)}function t7(){var e=this.__wrapped__;if(e instanceof Yr){var t=e;return this.__actions__.length&&(t=new Yr(this)),t=t.reverse(),t.__actions__.push({func:Qy,args:[lw],thisArg:void 0}),new $u(t,this.__chain__)}return this.thru(lw)}function fE(e,t,n){var o=e.length;if(o<2)return o?$p(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],v=-1;++v<o;)v!=r&&(s[r]=Ky(s[r]||c,e[v],t,n));return $p(bs(s,1),t,n)}var n7=Zr(function(e){return fE(kv(e,ea))});const r7=n7;var o7=Zr(function(e){var t=Fu(e);return ea(t)&&(t=void 0),fE(kv(e,ea),qr(t))});const i7=o7;var a7=Zr(function(e){var t=Fu(e);return t=typeof t=="function"?t:void 0,fE(kv(e,ea),void 0,t)});const l7=a7;var u7=Zr(cE);const s7=u7;function c7(e,t){return RL(e||[],t||[],$w)}var f7=Zr(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,wP(e,n)});const d7=f7,Ln={chunk:IF,compact:WF,concat:zF,difference:g4,differenceBy:b4,differenceWith:E4,drop:S4,dropRight:A4,dropRightWhile:T4,dropWhile:M4,fill:q4,findIndex:jL,findLastIndex:RM,first:HS,flatten:gI,flattenDeep:_I,flattenDepth:r$,fromPairs:bI,head:HS,indexOf:L$,initial:F$,intersection:U$,intersectionBy:V$,intersectionWith:z$,join:$5,last:Fu,lastIndexOf:X5,nth:EB,pull:_6,pullAll:fP,pullAllBy:b6,pullAllWith:w6,pullAt:S6,remove:B6,reverse:lw,slice:uU,sortedIndex:_U,sortedIndexBy:bU,sortedIndexOf:wU,sortedLastIndex:EU,sortedLastIndexBy:OU,sortedLastIndexOf:xU,sortedUniq:SU,sortedUniqBy:AU,tail:GU,take:VU,takeRight:WU,takeRightWhile:zU,takeWhile:HU,union:wI,unionBy:IG,unionWith:FG,uniq:$G,uniqBy:BG,uniqWith:UG,unzip:cE,unzipWith:wP,without:KG,xor:r7,xorBy:i7,xorWith:l7,zip:s7,zipObject:CL,zipObjectDeep:c7,zipWith:d7},No={countBy:r4,each:TS,eachRight:VS,every:H4,filter:OL,find:DL,findLast:J4,flatMap:EI,flatMapDeep:t$,flatMapDepth:n$,forEach:TS,forEachRight:VS,groupBy:x$,includes:D$,invokeMap:o5,keyBy:V5,map:Fw,orderBy:AB,partition:p6,reduce:xL,reduceRight:F6,reject:$6,sample:Z6,sampleSize:eU,shuffle:oU,size:lU,some:dU,sortBy:IL},p7={now:OI},Ai={after:JL,ary:l2,before:s2,bind:c2,bindKey:_8,curry:Zw,curryRight:Jw,debounce:xI,defer:p4,delay:v4,flip:i$,memoize:SI,negate:Jy,once:SB,overArgs:jB,partial:cP,partialRight:f6,rearg:I6,rest:W6,spread:NU,throttle:AI,unary:PG,wrap:ZG},lr={castArray:TI,clone:MI,cloneDeep:PI,cloneDeepWith:BF,cloneWith:GF,conformsTo:ZF,eq:qy,gt:A$,gte:M$,isArguments:kI,isArray:ci,isArrayBuffer:u5,isArrayLike:Mv,isArrayLikeObject:ea,isBoolean:c5,isBuffer:VM,isDate:h5,isElement:v5,isEmpty:NI,isEqual:RI,isEqualWith:y5,isError:zw,isFinite:g5,isFunction:Nv,isInteger:Z2,isLength:jI,isMap:CI,isMatch:_5,isMatchWith:b5,isNaN:E5,isNative:A5,isNil:DI,isNull:II,isNumber:J2,isObject:Sf,isObjectLike:Uu,isPlainObject:Lw,isRegExp:nE,isSafeInteger:k5,isSet:LI,isString:b_,isSymbol:_v,isTypedArray:WM,isUndefined:FI,isWeakMap:R5,isWeakSet:C5,lt:Q5,lte:tB,toArray:tP,toFinite:Cy,toInteger:Lr,toLength:H2,toNumber:Of,toPlainObject:$I,toSafeInteger:gG,toString:ko},ll={add:KL,ceil:jF,divide:x4,floor:l$,max:LL,maxBy:lB,mean:sB,meanBy:cB,min:FL,minBy:$L,multiply:yB,round:q6,subtract:$U,sum:BU,sumBy:UU},dE={clamp:LF,inRange:R$,random:N6},Er={assign:t8,assignIn:FS,assignInWith:kg,assignWith:i8,at:l8,create:o4,defaults:BL,defaultsDeep:c4,entries:WS,entriesIn:zS,extend:FS,extendWith:kg,findKey:K4,findLastKey:Q4,forIn:UL,forInRight:m$,forOwn:GL,forOwnRight:g$,functions:_$,functionsIn:b$,get:TM,has:SL,hasIn:BI,invert:K$,invertBy:e5,invoke:n5,keys:Gu,keysIn:Hp,mapKeys:nB,mapValues:VL,merge:UI,mergeWith:L2,omit:GI,omitBy:xB,pick:VI,pickBy:rP,result:z6,set:WI,setWith:tU,toPairs:WS,toPairsIn:zS,transform:bG,unset:GG,update:WG,updateWith:zG,values:jv,valuesIn:YG},vc={at:QG,chain:C2,commit:VF,lodash:le,next:wB,plant:h6,reverse:t7,tap:XU,thru:Qy,toIterator:vG,toJSON:M1,value:M1,valueOf:M1,wrapperChain:e7},ho={camelCase:PF,capitalize:g2,deburr:_2,endsWith:R4,escape:V2,escapeRegExp:W4,kebabCase:U5,lowerCase:q5,lowerFirst:Z5,pad:r6,padEnd:o6,padStart:i6,parseInt:u6,repeat:U6,replace:G6,snakeCase:cU,split:MU,startCase:jU,startsWith:CU,template:fG,templateSettings:uw,toLower:yG,toUpper:_G,trim:wG,trimEnd:EG,trimStart:xG,truncate:MG,unescape:CG,upperCase:XG,upperFirst:Yw,words:j2},go={attempt:u2,bindAll:v8,cond:XF,conforms:KF,constant:jM,defaultTo:l4,flow:h$,flowRight:y$,identity:Dd,iteratee:I5,matches:oB,matchesProperty:aB,method:dB,methodOf:hB,mixin:eP,noop:AM,nthArg:OB,over:MB,overEvery:DB,overSome:LB,property:zI,propertyOf:v6,range:WL,rangeRight:j6,stubArray:HI,stubFalse:LM,stubObject:DU,stubString:IU,stubTrue:LU,times:hG,toPath:mG,uniqueId:zL};function h7(){var e=new Yr(this.__wrapped__);return e.__actions__=Iu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Iu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Iu(this.__views__),e}function v7(){if(this.__filtered__){var e=new Yr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var y7=Math.max,m7=Math.min;function g7(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=m7(t,e+c);break;case"takeRight":e=y7(e,t-c);break}}return{start:e,end:t}}var _7=1,b7=2,w7=Math.min;function E7(){var e=this.__wrapped__.value(),t=this.__dir__,n=ci(e),o=t<0,r=n?e.length:0,s=g7(0,r,this.__views__),c=s.start,v=s.end,h=v-c,g=o?v:c-1,_=this.__iteratees__,w=_.length,O=0,S=w7(h,this.__takeCount__);if(!n||!o&&r==h&&S==h)return mP(e,this.__actions__);var P=[];e:for(;h--&&O<S;){g+=t;for(var A=-1,R=e[g];++A<w;){var D=_[A],N=D.iteratee,B=D.type,q=N(R);if(B==b7)R=q;else if(!q){if(B==_7)continue e;break e}}P[O++]=R}return P}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var O7="4.17.21",x7=2,S7=1,A7=3,OP=4294967295,T7=Array.prototype,M7=Object.prototype,xP=M7.hasOwnProperty,nA=Mg?Mg.iterator:void 0,P7=Math.max,rA=Math.min,pE=function(e){return function(t,n,o){if(o==null){var r=Sf(n),s=r&&Gu(n),c=s&&s.length&&g_(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(eP);le.after=Ai.after;le.ary=Ai.ary;le.assign=Er.assign;le.assignIn=Er.assignIn;le.assignInWith=Er.assignInWith;le.assignWith=Er.assignWith;le.at=Er.at;le.before=Ai.before;le.bind=Ai.bind;le.bindAll=go.bindAll;le.bindKey=Ai.bindKey;le.castArray=lr.castArray;le.chain=vc.chain;le.chunk=Ln.chunk;le.compact=Ln.compact;le.concat=Ln.concat;le.cond=go.cond;le.conforms=go.conforms;le.constant=go.constant;le.countBy=No.countBy;le.create=Er.create;le.curry=Ai.curry;le.curryRight=Ai.curryRight;le.debounce=Ai.debounce;le.defaults=Er.defaults;le.defaultsDeep=Er.defaultsDeep;le.defer=Ai.defer;le.delay=Ai.delay;le.difference=Ln.difference;le.differenceBy=Ln.differenceBy;le.differenceWith=Ln.differenceWith;le.drop=Ln.drop;le.dropRight=Ln.dropRight;le.dropRightWhile=Ln.dropRightWhile;le.dropWhile=Ln.dropWhile;le.fill=Ln.fill;le.filter=No.filter;le.flatMap=No.flatMap;le.flatMapDeep=No.flatMapDeep;le.flatMapDepth=No.flatMapDepth;le.flatten=Ln.flatten;le.flattenDeep=Ln.flattenDeep;le.flattenDepth=Ln.flattenDepth;le.flip=Ai.flip;le.flow=go.flow;le.flowRight=go.flowRight;le.fromPairs=Ln.fromPairs;le.functions=Er.functions;le.functionsIn=Er.functionsIn;le.groupBy=No.groupBy;le.initial=Ln.initial;le.intersection=Ln.intersection;le.intersectionBy=Ln.intersectionBy;le.intersectionWith=Ln.intersectionWith;le.invert=Er.invert;le.invertBy=Er.invertBy;le.invokeMap=No.invokeMap;le.iteratee=go.iteratee;le.keyBy=No.keyBy;le.keys=Gu;le.keysIn=Er.keysIn;le.map=No.map;le.mapKeys=Er.mapKeys;le.mapValues=Er.mapValues;le.matches=go.matches;le.matchesProperty=go.matchesProperty;le.memoize=Ai.memoize;le.merge=Er.merge;le.mergeWith=Er.mergeWith;le.method=go.method;le.methodOf=go.methodOf;le.mixin=pE;le.negate=Jy;le.nthArg=go.nthArg;le.omit=Er.omit;le.omitBy=Er.omitBy;le.once=Ai.once;le.orderBy=No.orderBy;le.over=go.over;le.overArgs=Ai.overArgs;le.overEvery=go.overEvery;le.overSome=go.overSome;le.partial=Ai.partial;le.partialRight=Ai.partialRight;le.partition=No.partition;le.pick=Er.pick;le.pickBy=Er.pickBy;le.property=go.property;le.propertyOf=go.propertyOf;le.pull=Ln.pull;le.pullAll=Ln.pullAll;le.pullAllBy=Ln.pullAllBy;le.pullAllWith=Ln.pullAllWith;le.pullAt=Ln.pullAt;le.range=go.range;le.rangeRight=go.rangeRight;le.rearg=Ai.rearg;le.reject=No.reject;le.remove=Ln.remove;le.rest=Ai.rest;le.reverse=Ln.reverse;le.sampleSize=No.sampleSize;le.set=Er.set;le.setWith=Er.setWith;le.shuffle=No.shuffle;le.slice=Ln.slice;le.sortBy=No.sortBy;le.sortedUniq=Ln.sortedUniq;le.sortedUniqBy=Ln.sortedUniqBy;le.split=ho.split;le.spread=Ai.spread;le.tail=Ln.tail;le.take=Ln.take;le.takeRight=Ln.takeRight;le.takeRightWhile=Ln.takeRightWhile;le.takeWhile=Ln.takeWhile;le.tap=vc.tap;le.throttle=Ai.throttle;le.thru=Qy;le.toArray=lr.toArray;le.toPairs=Er.toPairs;le.toPairsIn=Er.toPairsIn;le.toPath=go.toPath;le.toPlainObject=lr.toPlainObject;le.transform=Er.transform;le.unary=Ai.unary;le.union=Ln.union;le.unionBy=Ln.unionBy;le.unionWith=Ln.unionWith;le.uniq=Ln.uniq;le.uniqBy=Ln.uniqBy;le.uniqWith=Ln.uniqWith;le.unset=Er.unset;le.unzip=Ln.unzip;le.unzipWith=Ln.unzipWith;le.update=Er.update;le.updateWith=Er.updateWith;le.values=Er.values;le.valuesIn=Er.valuesIn;le.without=Ln.without;le.words=ho.words;le.wrap=Ai.wrap;le.xor=Ln.xor;le.xorBy=Ln.xorBy;le.xorWith=Ln.xorWith;le.zip=Ln.zip;le.zipObject=Ln.zipObject;le.zipObjectDeep=Ln.zipObjectDeep;le.zipWith=Ln.zipWith;le.entries=Er.toPairs;le.entriesIn=Er.toPairsIn;le.extend=Er.assignIn;le.extendWith=Er.assignInWith;pE(le,le);le.add=ll.add;le.attempt=go.attempt;le.camelCase=ho.camelCase;le.capitalize=ho.capitalize;le.ceil=ll.ceil;le.clamp=dE.clamp;le.clone=lr.clone;le.cloneDeep=lr.cloneDeep;le.cloneDeepWith=lr.cloneDeepWith;le.cloneWith=lr.cloneWith;le.conformsTo=lr.conformsTo;le.deburr=ho.deburr;le.defaultTo=go.defaultTo;le.divide=ll.divide;le.endsWith=ho.endsWith;le.eq=lr.eq;le.escape=ho.escape;le.escapeRegExp=ho.escapeRegExp;le.every=No.every;le.find=No.find;le.findIndex=Ln.findIndex;le.findKey=Er.findKey;le.findLast=No.findLast;le.findLastIndex=Ln.findLastIndex;le.findLastKey=Er.findLastKey;le.floor=ll.floor;le.forEach=No.forEach;le.forEachRight=No.forEachRight;le.forIn=Er.forIn;le.forInRight=Er.forInRight;le.forOwn=Er.forOwn;le.forOwnRight=Er.forOwnRight;le.get=Er.get;le.gt=lr.gt;le.gte=lr.gte;le.has=Er.has;le.hasIn=Er.hasIn;le.head=Ln.head;le.identity=Dd;le.includes=No.includes;le.indexOf=Ln.indexOf;le.inRange=dE.inRange;le.invoke=Er.invoke;le.isArguments=lr.isArguments;le.isArray=ci;le.isArrayBuffer=lr.isArrayBuffer;le.isArrayLike=lr.isArrayLike;le.isArrayLikeObject=lr.isArrayLikeObject;le.isBoolean=lr.isBoolean;le.isBuffer=lr.isBuffer;le.isDate=lr.isDate;le.isElement=lr.isElement;le.isEmpty=lr.isEmpty;le.isEqual=lr.isEqual;le.isEqualWith=lr.isEqualWith;le.isError=lr.isError;le.isFinite=lr.isFinite;le.isFunction=lr.isFunction;le.isInteger=lr.isInteger;le.isLength=lr.isLength;le.isMap=lr.isMap;le.isMatch=lr.isMatch;le.isMatchWith=lr.isMatchWith;le.isNaN=lr.isNaN;le.isNative=lr.isNative;le.isNil=lr.isNil;le.isNull=lr.isNull;le.isNumber=lr.isNumber;le.isObject=Sf;le.isObjectLike=lr.isObjectLike;le.isPlainObject=lr.isPlainObject;le.isRegExp=lr.isRegExp;le.isSafeInteger=lr.isSafeInteger;le.isSet=lr.isSet;le.isString=lr.isString;le.isSymbol=lr.isSymbol;le.isTypedArray=lr.isTypedArray;le.isUndefined=lr.isUndefined;le.isWeakMap=lr.isWeakMap;le.isWeakSet=lr.isWeakSet;le.join=Ln.join;le.kebabCase=ho.kebabCase;le.last=Fu;le.lastIndexOf=Ln.lastIndexOf;le.lowerCase=ho.lowerCase;le.lowerFirst=ho.lowerFirst;le.lt=lr.lt;le.lte=lr.lte;le.max=ll.max;le.maxBy=ll.maxBy;le.mean=ll.mean;le.meanBy=ll.meanBy;le.min=ll.min;le.minBy=ll.minBy;le.stubArray=go.stubArray;le.stubFalse=go.stubFalse;le.stubObject=go.stubObject;le.stubString=go.stubString;le.stubTrue=go.stubTrue;le.multiply=ll.multiply;le.nth=Ln.nth;le.noop=go.noop;le.now=p7.now;le.pad=ho.pad;le.padEnd=ho.padEnd;le.padStart=ho.padStart;le.parseInt=ho.parseInt;le.random=dE.random;le.reduce=No.reduce;le.reduceRight=No.reduceRight;le.repeat=ho.repeat;le.replace=ho.replace;le.result=Er.result;le.round=ll.round;le.sample=No.sample;le.size=No.size;le.snakeCase=ho.snakeCase;le.some=No.some;le.sortedIndex=Ln.sortedIndex;le.sortedIndexBy=Ln.sortedIndexBy;le.sortedIndexOf=Ln.sortedIndexOf;le.sortedLastIndex=Ln.sortedLastIndex;le.sortedLastIndexBy=Ln.sortedLastIndexBy;le.sortedLastIndexOf=Ln.sortedLastIndexOf;le.startCase=ho.startCase;le.startsWith=ho.startsWith;le.subtract=ll.subtract;le.sum=ll.sum;le.sumBy=ll.sumBy;le.template=ho.template;le.times=go.times;le.toFinite=lr.toFinite;le.toInteger=Lr;le.toLength=lr.toLength;le.toLower=ho.toLower;le.toNumber=lr.toNumber;le.toSafeInteger=lr.toSafeInteger;le.toString=lr.toString;le.toUpper=ho.toUpper;le.trim=ho.trim;le.trimEnd=ho.trimEnd;le.trimStart=ho.trimStart;le.truncate=ho.truncate;le.unescape=ho.unescape;le.uniqueId=go.uniqueId;le.upperCase=ho.upperCase;le.upperFirst=ho.upperFirst;le.each=No.forEach;le.eachRight=No.forEachRight;le.first=Ln.head;pE(le,function(){var e={};return Yp(le,function(t,n){xP.call(le.prototype,n)||(e[n]=t)}),e}(),{chain:!1});le.VERSION=O7;(le.templateSettings=ho.templateSettings).imports._=le;pc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){le[e].placeholder=le});pc(["drop","take"],function(e,t){Yr.prototype[e]=function(n){n=n===void 0?1:P7(Lr(n),0);var o=this.__filtered__&&!t?new Yr(this):this.clone();return o.__filtered__?o.__takeCount__=rA(n,o.__takeCount__):o.__views__.push({size:rA(n,OP),type:e+(o.__dir__<0?"Right":"")}),o},Yr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});pc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==S7||n==A7;Yr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:qr(r),type:n}),s.__filtered__=s.__filtered__||o,s}});pc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Yr.prototype[e]=function(){return this[n](1).value()[0]}});pc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Yr.prototype[e]=function(){return this.__filtered__?new Yr(this):this[n](1)}});Yr.prototype.compact=function(){return this.filter(Dd)};Yr.prototype.find=function(e){return this.filter(e).head()};Yr.prototype.findLast=function(e){return this.reverse().find(e)};Yr.prototype.invokeMap=Zr(function(e,t){return typeof e=="function"?new Yr(this):this.map(function(n){return Zy(n,e,t)})});Yr.prototype.reject=function(e){return this.filter(Jy(qr(e)))};Yr.prototype.slice=function(e,t){e=Lr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Yr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Lr(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Yr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Yr.prototype.toArray=function(){return this.take(OP)};Yp(Yr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=le[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(le.prototype[t]=function(){var c=this.__wrapped__,v=o?[1]:arguments,h=c instanceof Yr,g=v[0],_=h||ci(c),w=function(D){var N=r.apply(le,Xy([D],v));return o&&O?N[0]:N};_&&n&&typeof g=="function"&&g.length!=1&&(h=_=!1);var O=this.__chain__,S=!!this.__actions__.length,P=s&&!O,A=h&&!S;if(!s&&_){c=A?c:new Yr(this);var R=e.apply(c,v);return R.__actions__.push({func:Qy,args:[w],thisArg:void 0}),new $u(R,O)}return P&&A?e.apply(this,v):(R=this.thru(w),P?o?R.value()[0]:R.value():R)})});pc(["pop","push","shift","sort","splice","unshift"],function(e){var t=T7[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);le.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(ci(s)?s:[],r)}return this[n](function(c){return t.apply(ci(c)?c:[],r)})}});Yp(Yr.prototype,function(e,t){var n=le[t];if(n){var o=n.name+"";xP.call(fv,o)||(fv[o]=[]),fv[o].push({name:t,func:n})}});fv[v_(void 0,x7).name]=[{name:"wrapper",func:void 0}];Yr.prototype.clone=h7;Yr.prototype.reverse=v7;Yr.prototype.value=E7;le.prototype.at=vc.at;le.prototype.chain=vc.wrapperChain;le.prototype.commit=vc.commit;le.prototype.next=vc.next;le.prototype.plant=vc.plant;le.prototype.reverse=vc.reverse;le.prototype.toJSON=le.prototype.valueOf=le.prototype.value=vc.value;le.prototype.first=le.prototype.head;nA&&(le.prototype[nA]=vc.toIterator);const k7="/ui/assets/icon_or-51e130f2.svg",N7="/ui/assets/icon_and-7100a354.svg",R7={class:"workflow-dropdown-menu border border-r-4"},j7={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},C7={key:0},D7=["onClick","onMousedown"],I7={class:"pre-wrap"},L7={class:"lighter"},F7={key:1,class:"ml-16 mt-8"},$7={class:"pre-wrap"},B7={class:"lighter"},U7=["onClick","onMousedown"],G7={class:"pre-wrap"},V7=["title"],W7={key:0},z7=["onClick","onMousedown"],H7={class:"pre-wrap",style:{width:"60%"}},X7=["title"],Y7={class:"status-tag",style:{"margin-left":"auto"}},q7={key:1,class:"ml-16 mt-8"},K7=Cr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=wt(""),o=e,r=t,s=wt(!1),c=wt("base"),v=wt([]),h=po(()=>v.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=wt([]),_=po(()=>g.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),w=po(()=>XI.filter(A=>A.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function O(A,R,D){var N;if(R&&(A.properties.stepName=R.name,D=="function"&&(A.properties.node_data={...R,function_lib_id:R.id,input_field_list:R.input_field_list.map(B=>({...B,value:B.source=="reference"?[]:""}))}),D=="application"))if(vg(R.type)){const q=R.work_flow.nodes[0].properties.node_data.file_upload_setting;A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id,api_input_field_list:R.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:R.work_flow.nodes[0].properties.user_input_field_list,...q?{...q.document?{document_list:[]}:{},...q.image?{image_list:[]}:{},...q.audio?{audio_list:[]}:{}}:{}}}else A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id};(N=o.workflowRef)==null||N.addNode(A),r("clickNodes",A)}function S(A,R,D){var N;if(R&&(A.properties.stepName=R.name,D=="function"&&(A.properties.node_data={...R,function_lib_id:R.id,input_field_list:R.input_field_list.map(B=>({...B,value:B.source=="reference"?[]:""}))}),D=="application"))if(vg(R.type)){const q=R.work_flow.nodes[0].properties.node_data.file_upload_setting;A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id,api_input_field_list:R.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:R.work_flow.nodes[0].properties.user_input_field_list,...q?{...q.document?{document_list:[]}:{},...q.image?{image_list:[]}:{},...q.audio?{audio_list:[]}:{}}:{}}}else A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id};(N=o.workflowRef)==null||N.onmousedown(A),r("onmousedown",A)}function P(){Aa.listFunctionLib(o.id,s).then(A=>{v.value=A.data}),Aa.getApplicationList(o.id,s).then(A=>{g.value=A.data})}return Uo(()=>{P()}),(A,R)=>{const D=ue("search"),N=ue("el-icon"),B=ue("el-input"),q=ue("el-text"),Z=ue("el-scrollbar"),Y=ue("el-tab-pane"),te=ue("el-tag"),G=ue("el-tabs");return Pl((Ye(),Rn("div",R7,[L(G,{modelValue:c.value,"onUpdate:modelValue":R[3]||(R[3]=C=>c.value=C),class:"workflow-dropdown-tabs"},{default:U(()=>[me("div",j7,[L(B,{modelValue:n.value,"onUpdate:modelValue":R[0]||(R[0]=C=>n.value=C),style:{width:"240px"},placeholder:A.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:U(()=>[L(N,{class:"el-input__icon"},{default:U(()=>[L(D)]),_:1})]),_:1},8,["modelValue","placeholder"])]),L(Y,{label:A.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:U(()=>[L(Z,{height:"400"},{default:U(()=>[w.value.length>0?(Ye(),Rn("div",C7,[(Ye(!0),Rn(Bo,null,zi(w.value,(C,W)=>(Ye(),Rn("div",{key:W,class:"workflow-dropdown-item cursor flex p-8-12",onClick:_n(K=>O(C),["stop"]),onMousedown:_n(K=>S(C),["stop"])},[(Ye(),Bt(iv(vr(av)(`${C.type}-icon`)),{class:"mr-8 mt-4",size:32})),me("div",I7,[me("div",L7,$e(C.label),1),L(q,{type:"info",size:"small"},{default:U(()=>[Tt($e(C.text),1)]),_:2},1024)])],40,D7))),128))])):(Ye(),Rn("div",F7,[L(q,{type:"info"},{default:U(()=>[Tt($e(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),L(Y,{label:A.$t("views.functionLib.title"),name:"function"},{default:U(()=>[L(Z,{height:"400"},{default:U(()=>[me("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:R[1]||(R[1]=_n(C=>O(vr(rg)),["stop"])),onMousedown:R[2]||(R[2]=_n(C=>S(vr(rg)),["stop"]))},[(Ye(),Bt(iv(vr(av)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),me("div",$7,[me("div",B7,$e(vr(rg).label),1),L(q,{type:"info",size:"small"},{default:U(()=>[Tt($e(vr(rg).text),1)]),_:1})])],32),(Ye(!0),Rn(Bo,null,zi(h.value,(C,W)=>(Ye(),Rn("div",{key:W,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:_n(K=>O(vr(xS),C,"function"),["stop"]),onMousedown:_n(K=>S(vr(xS),C,"function"),["stop"])},[(Ye(),Bt(iv(vr(av)("function-lib-node-icon")),{class:"mr-8",size:32,item:C},null,8,["item"])),me("div",G7,[me("div",{class:"lighter ellipsis-1",title:C.name},$e(C.name),9,V7),me("p",null,[C.desc?(Ye(),Bt(q,{key:0,class:"ellipsis-1",type:"info",size:"small",title:C.desc},{default:U(()=>[Tt($e(C.desc),1)]),_:2},1032,["title"])):nr("",!0)])])],40,U7))),128))]),_:1})]),_:1},8,["label"]),L(Y,{label:A.$t("views.application.title"),name:"application"},{default:U(()=>[L(Z,{height:"400"},{default:U(()=>[_.value.length>0?(Ye(),Rn("div",W7,[(Ye(!0),Rn(Bo,null,zi(_.value,(C,W)=>(Ye(),Rn("div",{key:W,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:_n(K=>O(vr(SS),C,"application"),["stop"]),onMousedown:_n(K=>S(vr(SS),C,"application"),["stop"])},[(Ye(),Bt(iv(vr(av)("application-node-icon")),{class:"mr-8",size:32,item:C},null,8,["item"])),me("div",H7,[me("div",{class:"lighter ellipsis",title:C.name},$e(C.name),9,X7),me("p",null,[C.desc?(Ye(),Bt(q,{key:0,class:"ellipsis",type:"info",size:"small",title:C.desc},{default:U(()=>[Tt($e(C.desc),1)]),_:2},1032,["title"])):nr("",!0)])]),me("div",Y7,[vr(vg)(C.type)?(Ye(),Bt(te,{key:0,type:"warning",style:{height:"22px"}},{default:U(()=>[Tt($e(A.$t("views.application.workflow")),1)]),_:1})):(Ye(),Bt(te,{key:1,class:"blue-tag",style:{height:"22px"}},{default:U(()=>[Tt($e(A.$t("views.application.simple")),1)]),_:1}))])],40,z7))),128))])):(Ye(),Rn("div",q7,[L(q,{type:"info"},{default:U(()=>[Tt($e(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[wv,e.show]])}}});const SP=Rv(K7,[["__scopeId","data-v-70745e24"]]),Z7={class:"flex-between"},J7={class:"flex align-center",style:{width:"70%"}},Q7={class:"ellipsis-1 break-all"},e9={key:0,src:k7,alt:""},t9={key:1,src:N7,alt:""},n9={style:{width:"280px"},class:"p-12-16"},r9={class:"mt-8 lighter"},o9={class:"title-decoration-1 mb-8 mt-8"},i9=["onMouseenter"],a9={style:{"max-width":"92%"}},l9={class:"dialog-footer"},u9=Cr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Vu.config.globalProperties.$route,n=wt({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),o=wt(!1),r=wt(),s=wt(),c=wt(!1),v=wt({title:""}),h=po({set:C=>{et.set(q.nodeModel.properties,"condition",C)},get:()=>q.nodeModel.properties.condition?q.nodeModel.properties.condition:(et.set(q.nodeModel.properties,"condition","AND"),!0)}),g=po({set:C=>{et.set(q.nodeModel.properties,"showNode",C)},get:()=>q.nodeModel.properties.showNode!==void 0?q.nodeModel.properties.showNode:(et.set(q.nodeModel.properties,"showNode",!0),!0)}),_=C=>{C.ctrlKey||C.metaKey||C.stopPropagation()},w=po(()=>q.nodeModel.properties.status?q.nodeModel.properties.status:200);function O(){v.value.title=q.nodeModel.properties.stepName,c.value=!0}const S=async C=>{C&&await C.validate(W=>{var K;W&&((K=q.nodeModel.graphModel.nodes)!=null&&K.some(z=>z.properties.stepName===v.value.title)?xa(Qt("views.applicationWorkflow.tip.repeatedNodeError")):(et.set(q.nodeModel.properties,"stepName",v.value.title),c.value=!1,C.resetFields()))})},P=()=>{q.nodeModel.graphModel.clearSelectElements(),et.set(q.nodeModel,"isSelected",!0),et.set(q.nodeModel,"isHovered",!0),q.nodeModel.graphModel.toFront(q.nodeModel.id)},A=wt(null),R=()=>{q.nodeModel.graphModel.clearSelectElements();const C=q.nodeModel.graphModel.cloneNode(q.nodeModel.id);et.set(C,"isSelected",!0),et.set(C,"isHovered",!0),q.nodeModel.graphModel.toFront(C.id)},D=()=>{Bw(Qt("common.tip"),Qt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Qt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{q.nodeModel.graphModel.deleteNode(q.nodeModel.id)}),q.nodeModel.graphModel.eventCenter.emit("delete_node")},N=C=>{C.height&&(q.nodeModel.virtual||(n.value.stepContainerHeight=C.height,q.nodeModel.setHeight(n.value.stepContainerHeight)))};function B(C){var z,H,re;const W=C.properties.width?C.properties.width:214,K=q.nodeModel.graphModel.addNode({type:C.type,properties:C.properties,x:((z=r.value)==null?void 0:z.x)+W/2+200,y:((H=r.value)==null?void 0:H.y)-C.height});q.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:q.nodeModel.id,sourceAnchorId:(re=r.value)==null?void 0:re.id,targetNodeId:K.id}),G()}const q=e,Z=po(()=>{var C;return q.nodeModel.properties.config.fields?(C=q.nodeModel.properties.config.fields)==null?void 0:C.map(K=>({label:K.label,value:K.value,globeLabel:`{{${q.nodeModel.properties.stepName}.${K.value}}}`,globeValue:`{{context['${q.nodeModel.id}'].${K.value}}}`})):[]});function Y(C){return C!==si.Base&&C!==si.Start}const te=C=>{o.value=!0,r.value=C},G=()=>{o.value=!1,r.value=void 0};return Uo(()=>{et.set(q.nodeModel,"openNodeMenu",C=>{o.value?G():te(C)})}),(C,W)=>{var we;const K=ue("ArrowDownBold"),z=ue("el-icon"),H=ue("el-button"),re=ue("el-option"),fe=ue("el-select"),Se=ue("el-dropdown"),Te=ue("MoreFilled"),he=ue("el-dropdown-item"),_e=ue("el-dropdown-menu"),De=ue("el-alert"),Ve=ue("AppIcon"),vt=ue("el-tooltip"),rt=ue("el-collapse-transition"),gt=ue("el-input"),Nt=ue("el-form-item"),yt=ue("el-form"),Yt=ue("el-dialog"),Ce=Ev("resize");return Ye(),Rn("div",{onMousedown:P,class:"workflow-node-container p-16",style:{overflow:"visible"}},[me("div",{class:sc(["step-container app-card p-16",{isSelected:q.nodeModel.isSelected,error:w.value!==200}]),style:{overflow:"visible"}},[Pl((Ye(),Rn("div",null,[me("div",Z7,[me("div",J7,[(Ye(),Bt(iv(vr(av)(`${C.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(we=C.nodeModel)==null?void 0:we.properties.node_data},null,8,["item"])),me("h4",Q7,$e(C.nodeModel.properties.stepName),1)]),me("div",{onMousemove:W[2]||(W[2]=_n(()=>{},["stop"])),onMousedown:W[3]||(W[3]=_n(()=>{},["stop"])),onKeydown:W[4]||(W[4]=_n(()=>{},["stop"])),onClick:W[5]||(W[5]=_n(()=>{},["stop"]))},[L(H,{text:"",onClick:W[0]||(W[0]=ke=>g.value=!g.value)},{default:U(()=>[L(z,{class:sc(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:U(()=>[L(K)]),_:1},8,["class"])]),_:1}),Y(C.nodeModel.type)?(Ye(),Bt(Se,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:U(()=>[me("div",n9,[me("h5",null,$e(C.$t("views.applicationWorkflow.condition.title")),1),me("p",r9,[me("span",null,$e(C.$t("views.applicationWorkflow.condition.front")),1),L(fe,{modelValue:h.value,"onUpdate:modelValue":W[1]||(W[1]=ke=>h.value=ke),size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[L(re,{label:C.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),L(re,{label:C.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),me("span",null,$e(C.$t("views.applicationWorkflow.condition.text")),1)])])]),default:U(()=>[L(H,{text:""},{default:U(()=>[h.value==="OR"?(Ye(),Rn("img",e9)):nr("",!0),h.value==="AND"?(Ye(),Rn("img",t9)):nr("",!0)]),_:1})]),_:1})):nr("",!0),Y(C.nodeModel.type)?(Ye(),Bt(Se,{key:1,teleported:!1,trigger:"click"},{dropdown:U(()=>[L(_e,{style:{"min-width":"80px"}},{default:U(()=>[L(he,{onClick:O,class:"p-8"},{default:U(()=>[Tt($e(C.$t("common.rename")),1)]),_:1}),L(he,{onClick:R,class:"p-8"},{default:U(()=>[Tt($e(C.$t("common.copy")),1)]),_:1}),L(he,{onClick:D,class:"border-t p-8"},{default:U(()=>[Tt($e(C.$t("common.delete")),1)]),_:1})]),_:1})]),default:U(()=>[L(H,{text:""},{default:U(()=>[L(z,{class:"color-secondary"},{default:U(()=>[L(Te)]),_:1})]),_:1})]),_:1})):nr("",!0)],32)]),L(rt,null,{default:U(()=>[Pl(me("div",{onMousedown:W[7]||(W[7]=_n(()=>{},["stop"])),onKeydown:W[8]||(W[8]=_n(()=>{},["stop"])),onClick:W[9]||(W[9]=_n(()=>{},["stop"])),class:"mt-16"},[w.value!=200?(Ye(),Bt(De,{key:0,class:"mb-16",title:q.nodeModel.type==="application-node"?C.$t("views.applicationWorkflow.tip.applicationNodeError"):C.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):nr("",!0),YI(C.$slots,"default",{},void 0,!0),Z.value.length>0?(Ye(),Rn(Bo,{key:1},[me("h5",o9,$e(C.$t("common.param.outputParam")),1),(Ye(!0),Rn(Bo,null,zi(Z.value,(ke,dt)=>(Ye(),Rn("div",{key:dt,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:zt=>A.value=dt,onMouseleave:W[6]||(W[6]=zt=>A.value=null)},[me("span",a9,$e(ke.label)+" "+$e("{"+ke.value+"}"),1),A.value===dt?(Ye(),Bt(vt,{key:0,effect:"dark",content:C.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[L(H,{link:"",onClick:zt=>vr(zM)(ke.globeLabel),style:{padding:"0"}},{default:U(()=>[L(Ve,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):nr("",!0)],40,i9))),128))],64)):nr("",!0)],544),[[wv,g.value]])]),_:3})])),[[Ce,N]])],2),L(rt,null,{default:U(()=>[o.value?(Ye(),Bt(SP,{key:0,onMousemove:W[10]||(W[10]=_n(()=>{},["stop"])),onMousedown:W[11]||(W[11]=_n(()=>{},["stop"])),onClick:W[12]||(W[12]=_n(()=>{},["stop"])),onWheel:_,show:o.value,id:vr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:B},null,8,["show","id"])):nr("",!0)]),_:1}),L(Yt,{title:C.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":W[17]||(W[17]=ke=>c.value=ke),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:W[18]||(W[18]=_n(()=>{},["prevent"]))},{footer:U(()=>[me("span",l9,[L(H,{onClick:W[15]||(W[15]=_n(ke=>c.value=!1,["prevent"]))},{default:U(()=>[Tt($e(C.$t("common.cancel")),1)]),_:1}),L(H,{type:"primary",onClick:W[16]||(W[16]=ke=>S(s.value))},{default:U(()=>[Tt($e(C.$t("common.save")),1)]),_:1})])]),default:U(()=>[L(yt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:v.value},{default:U(()=>[L(Nt,{prop:"title",rules:[{required:!0,message:C.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:U(()=>[L(gt,{modelValue:v.value.title,"onUpdate:modelValue":W[13]||(W[13]=ke=>v.value.title=ke),onBlur:W[14]||(W[14]=ke=>v.value.title=v.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const Hi=Rv(u9,[["__scopeId","data-v-a66024dd"]]),s9={class:"dialog-footer"},c9=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,f9=Cr({__name:"McpServersDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=wt(),s=wt({mcp_servers:"",mcp_enable:!1}),c=wt(!1),v=wt(!1);c_(c,_=>{_||(s.value={mcp_servers:"",mcp_enable:!1})});const h=_=>{s.value={...s.value,..._},c.value=!0},g=()=>{r.value.validate().then(_=>{_&&(o("refresh",s.value),c.value=!1)})};return t({open:h}),(_,w)=>{const O=ue("el-switch"),S=ue("el-form-item"),P=ue("el-input"),A=ue("el-form"),R=ue("el-button"),D=ue("el-dialog");return Ye(),Bt(D,{"align-center":"",title:_.$t("common.setting"),modelValue:c.value,"onUpdate:modelValue":w[4]||(w[4]=N=>c.value=N),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[me("span",s9,[L(R,{onClick:w[2]||(w[2]=_n(N=>c.value=!1,["prevent"]))},{default:U(()=>[Tt($e(_.$t("common.cancel")),1)]),_:1}),L(R,{type:"primary",onClick:w[3]||(w[3]=N=>g()),loading:v.value},{default:U(()=>[Tt($e(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[L(A,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value,"require-asterisk-position":"right"},{default:U(()=>[L(S,{label:"MCP",prop:"mcp_enable"},{default:U(()=>[L(O,{modelValue:s.value.mcp_enable,"onUpdate:modelValue":w[0]||(w[0]=N=>s.value.mcp_enable=N)},null,8,["modelValue"])]),_:1}),s.value.mcp_enable?(Ye(),Bt(S,{key:0,label:_.$t("views.applicationWorkflow.nodes.mcpNode.configLabel"),prop:"mcp_servers",rules:[{required:!0,message:_.$t("common.required")}]},{default:U(()=>[L(P,{modelValue:s.value.mcp_servers,"onUpdate:modelValue":w[1]||(w[1]=N=>s.value.mcp_servers=N),rows:6,type:"textarea",placeholder:c9},null,8,["modelValue"])]),_:1},8,["label","rules"])):nr("",!0)]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),d9={class:"title-decoration-1 mb-8"},p9={class:"flex-between w-full"},h9={class:"flex align-center"},v9={class:"mr-4"},y9={class:"flex-between"},m9={class:"flex-between mb-16"},g9={class:"lighter"},_9={class:"flex-between w-full"},b9={class:"flex align-center"},w9={class:"mr-4"},E9=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),n=G=>G.ctrlKey===!0?(G.preventDefault(),!0):(G.stopPropagation(),!0);function o(G){et.set(_.nodeModel.properties.node_data,"system",G)}function r(G){et.set(_.nodeModel.properties.node_data,"prompt",G)}const s=G=>{var C;G?(C=S.value)==null||C.reset_default(G,c):B({})},{params:{id:c}}=Vu.config.globalProperties.$route,h={model_id:"",system:"",prompt:`${Qt("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Qt("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${Qt("views.problem.title")}：
{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:1,is_result:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",model_setting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},g=po({get:()=>_.nodeModel.properties.node_data?(_.nodeModel.properties.node_data.model_setting||et.set(_.nodeModel.properties.node_data,"model_setting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),_.nodeModel.properties.node_data):(et.set(_.nodeModel.properties,"node_data",h),_.nodeModel.properties.node_data),set:G=>{et.set(_.nodeModel.properties,"node_data",G)}}),_=e,w=wt(),O=wt(null),S=wt(),P=wt(),A=()=>{var G;return(G=w.value)==null?void 0:G.validate().catch(C=>Promise.reject({node:_.nodeModel,errMessage:C}))};function R(){c?Aa.getApplicationModel(c).then(G=>{O.value=et.groupBy(G==null?void 0:G.data,"provider")}):t.asyncGetModel().then(G=>{O.value=et.groupBy(G==null?void 0:G.data,"provider")})}const D=G=>{var C;G&&((C=S.value)==null||C.open(G,c,g.value.model_params_setting))},N=()=>{var G;(G=P.value)==null||G.open(g.value.model_setting)};function B(G){et.set(_.nodeModel.properties.node_data,"model_params_setting",G)}function q(G){let C=et.cloneDeep(_.nodeModel.properties.node_data.model_setting);C={...C,...G},et.set(_.nodeModel.properties.node_data,"model_setting",C)}const Z=wt();function Y(){const G={mcp_servers:g.value.mcp_servers,mcp_enable:g.value.mcp_enable};Z.value.open(G)}function te(G){et.set(_.nodeModel.properties.node_data,"mcp_servers",G.mcp_servers),et.set(_.nodeModel.properties.node_data,"mcp_enable",G.mcp_enable)}return Uo(()=>{var G;R(),typeof((G=_.nodeModel.properties.node_data)==null?void 0:G.is_result)>"u"&&qp(_.nodeModel)&&et.set(_.nodeModel.properties.node_data,"is_result",!0),et.set(_.nodeModel,"validate",A),g.value.dialogue_type||(g.value.dialogue_type="WORKFLOW")}),(G,C)=>{const W=ue("Setting"),K=ue("el-icon"),z=ue("el-button"),H=ue("ModelSelect"),re=ue("el-form-item"),fe=ue("MdEditorMagnify"),Se=ue("AppIcon"),Te=ue("el-tooltip"),he=ue("el-option"),_e=ue("el-select"),De=ue("el-input-number"),Ve=ue("el-switch"),vt=ue("el-form"),rt=ue("el-card");return Ye(),Bt(Hi,{nodeModel:G.nodeModel},{default:U(()=>[me("h5",d9,$e(G.$t("views.applicationWorkflow.nodeSetting")),1),L(rt,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[L(vt,{onSubmit:C[10]||(C[10]=_n(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:w,"hide-required-asterisk":""},{default:U(()=>[L(re,{label:G.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:G.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[me("div",p9,[me("div",null,[me("span",null,[Tt($e(G.$t("views.application.applicationForm.form.aiModel.label")),1),C[11]||(C[11]=me("span",{class:"danger"},"*",-1))])]),L(z,{disabled:!g.value.model_id,type:"primary",link:"",onClick:C[0]||(C[0]=gt=>D(g.value.model_id)),onRefreshForm:B},{default:U(()=>[L(K,null,{default:U(()=>[L(W)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[L(H,{onChange:s,onWheel:n,teleported:!1,modelValue:g.value.model_id,"onUpdate:modelValue":C[1]||(C[1]=gt=>g.value.model_id=gt),placeholder:G.$t("views.application.applicationForm.form.aiModel.placeholder"),options:O.value,onSubmitModel:R,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),L(re,{label:G.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[L(fe,{title:G.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:g.value.system,"onUpdate:modelValue":C[2]||(C[2]=gt=>g.value.system=gt),style:{height:"100px"},onSubmitDialog:o,placeholder:G.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),L(re,{label:G.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:G.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",h9,[me("div",v9,[me("span",null,[Tt($e(G.$t("views.application.applicationForm.form.prompt.label")),1),C[12]||(C[12]=me("span",{class:"danger"},"*",-1))])]),L(Te,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(G.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[L(Se,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(fe,{onWheel:n,title:G.$t("views.application.applicationForm.form.prompt.label"),modelValue:g.value.prompt,"onUpdate:modelValue":C[3]||(C[3]=gt=>g.value.prompt=gt),style:{height:"150px"},onSubmitDialog:r},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),L(re,{label:G.$t("views.application.applicationForm.form.historyRecord.label")},{label:U(()=>[me("div",y9,[me("div",null,$e(G.$t("views.application.applicationForm.form.historyRecord.label")),1),L(_e,{modelValue:g.value.dialogue_type,"onUpdate:modelValue":C[4]||(C[4]=gt=>g.value.dialogue_type=gt),type:"small",style:{width:"100px"}},{default:U(()=>[L(he,{label:G.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),L(he,{label:G.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[L(De,{modelValue:g.value.dialogue_number,"onUpdate:modelValue":C[5]||(C[5]=gt=>g.value.dialogue_number=gt),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),me("div",m9,[me("div",g9,$e(G.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),L(z,{type:"primary",link:"",onClick:Y,onRefreshForm:B},{default:U(()=>[L(K,null,{default:U(()=>[L(W)]),_:1})]),_:1})]),L(re,{onClick:C[7]||(C[7]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",_9,[me("div",null,[me("span",null,$e(G.$t("views.application.applicationForm.form.reasoningContent.label")),1)]),L(z,{type:"primary",link:"",onClick:N,onRefreshForm:B},{default:U(()=>[L(K,null,{default:U(()=>[L(W)]),_:1})]),_:1})])]),default:U(()=>[L(Ve,{size:"small",modelValue:g.value.model_setting.reasoning_content_enable,"onUpdate:modelValue":C[6]||(C[6]=gt=>g.value.model_setting.reasoning_content_enable=gt)},null,8,["modelValue"])]),_:1}),L(re,{onClick:C[9]||(C[9]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",b9,[me("div",w9,[me("span",null,$e(G.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(Te,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(G.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(Se,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(Ve,{size:"small",modelValue:g.value.is_result,"onUpdate:modelValue":C[8]||(C[8]=gt=>g.value.is_result=gt)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),L(d_,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:B},null,512),L(gL,{ref_key:"ReasoningParamSettingDialogRef",ref:P,onRefresh:q},null,512),L(f9,{ref_key:"mcpServersDialogRef",ref:Z,onRefresh:te},null,512)]),_:1},8,["nodeModel"])}}});var sw={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var h in s)r.d(v,h,(function(g){return s[g]}).bind(null,h));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return Z}),r.d(o,"b",function(){return q}),r.d(o,"c",function(){return yt}),r.d(o,"d",function(){return Yt}),r.d(o,"e",function(){return D}),r.d(o,"f",function(){return B}),r.d(o,"g",function(){return D}),r.d(o,"h",function(){return Nt}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return gt}),r.d(o,"k",function(){return z});var s,c,v,h,g,_,w,O={},S=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(Ce,we){for(var ke in we)Ce[ke]=we[ke];return Ce}function R(Ce){var we=Ce.parentNode;we&&we.removeChild(Ce)}function D(Ce,we,ke){var dt,zt,Ot,rn={};for(Ot in we)Ot=="key"?dt=we[Ot]:Ot=="ref"?zt=we[Ot]:rn[Ot]=we[Ot];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):ke),typeof Ce=="function"&&Ce.defaultProps!=null)for(Ot in Ce.defaultProps)rn[Ot]===void 0&&(rn[Ot]=Ce.defaultProps[Ot]);return N(Ce,rn,dt,zt,null)}function N(Ce,we,ke,dt,zt){var Ot={type:Ce,props:we,key:ke,ref:dt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:zt??++v};return zt==null&&c.vnode!=null&&c.vnode(Ot),Ot}function B(){return{current:null}}function q(Ce){return Ce.children}function Z(Ce,we){this.props=Ce,this.context=we}function Y(Ce,we){if(we==null)return Ce.__?Y(Ce.__,Ce.__.__k.indexOf(Ce)+1):null;for(var ke;we<Ce.__k.length;we++)if((ke=Ce.__k[we])!=null&&ke.__e!=null)return ke.__e;return typeof Ce.type=="function"?Y(Ce):null}function te(Ce){var we,ke;if((Ce=Ce.__)!=null&&Ce.__c!=null){for(Ce.__e=Ce.__c.base=null,we=0;we<Ce.__k.length;we++)if((ke=Ce.__k[we])!=null&&ke.__e!=null){Ce.__e=Ce.__c.base=ke.__e;break}return te(Ce)}}function G(Ce){(!Ce.__d&&(Ce.__d=!0)&&h.push(Ce)&&!C.__r++||_!==c.debounceRendering)&&((_=c.debounceRendering)||g)(C)}function C(){for(var Ce;C.__r=h.length;)Ce=h.sort(function(we,ke){return we.__v.__b-ke.__v.__b}),h=[],Ce.some(function(we){var ke,dt,zt,Ot,rn,yn;we.__d&&(rn=(Ot=(ke=we).__v).__e,(yn=ke.__P)&&(dt=[],(zt=A({},Ot)).__v=Ot.__v+1,he(yn,Ot,zt,ke.__n,yn.ownerSVGElement!==void 0,Ot.__h!=null?[rn]:null,dt,rn??Y(Ot),Ot.__h),_e(dt,Ot),Ot.__e!=rn&&te(Ot)))})}function W(Ce,we,ke,dt,zt,Ot,rn,yn,Tn,pn){var st,xn,Fe,mn,Kn,oe,$n,Sr=dt&&dt.__k||S,Gr=Sr.length;for(ke.__k=[],st=0;st<we.length;st++)if((mn=ke.__k[st]=(mn=we[st])==null||typeof mn=="boolean"?null:typeof mn=="string"||typeof mn=="number"||typeof mn=="bigint"?N(null,mn,null,null,mn):Array.isArray(mn)?N(q,{children:mn},null,null,null):mn.__b>0?N(mn.type,mn.props,mn.key,null,mn.__v):mn)!=null){if(mn.__=ke,mn.__b=ke.__b+1,(Fe=Sr[st])===null||Fe&&mn.key==Fe.key&&mn.type===Fe.type)Sr[st]=void 0;else for(xn=0;xn<Gr;xn++){if((Fe=Sr[xn])&&mn.key==Fe.key&&mn.type===Fe.type){Sr[xn]=void 0;break}Fe=null}he(Ce,mn,Fe=Fe||O,zt,Ot,rn,yn,Tn,pn),Kn=mn.__e,(xn=mn.ref)&&Fe.ref!=xn&&($n||($n=[]),Fe.ref&&$n.push(Fe.ref,null,mn),$n.push(xn,mn.__c||Kn,mn)),Kn!=null?(oe==null&&(oe=Kn),typeof mn.type=="function"&&mn.__k===Fe.__k?mn.__d=Tn=K(mn,Tn,Ce):Tn=H(Ce,mn,Fe,Sr,Kn,Tn),typeof ke.type=="function"&&(ke.__d=Tn)):Tn&&Fe.__e==Tn&&Tn.parentNode!=Ce&&(Tn=Y(Fe))}for(ke.__e=oe,st=Gr;st--;)Sr[st]!=null&&(typeof ke.type=="function"&&Sr[st].__e!=null&&Sr[st].__e==ke.__d&&(ke.__d=Y(dt,st+1)),vt(Sr[st],Sr[st]));if($n)for(st=0;st<$n.length;st++)Ve($n[st],$n[++st],$n[++st])}function K(Ce,we,ke){for(var dt,zt=Ce.__k,Ot=0;zt&&Ot<zt.length;Ot++)(dt=zt[Ot])&&(dt.__=Ce,we=typeof dt.type=="function"?K(dt,we,ke):H(ke,dt,dt,zt,dt.__e,we));return we}function z(Ce,we){return we=we||[],Ce==null||typeof Ce=="boolean"||(Array.isArray(Ce)?Ce.some(function(ke){z(ke,we)}):we.push(Ce)),we}function H(Ce,we,ke,dt,zt,Ot){var rn,yn,Tn;if(we.__d!==void 0)rn=we.__d,we.__d=void 0;else if(ke==null||zt!=Ot||zt.parentNode==null)e:if(Ot==null||Ot.parentNode!==Ce)Ce.appendChild(zt),rn=null;else{for(yn=Ot,Tn=0;(yn=yn.nextSibling)&&Tn<dt.length;Tn+=2)if(yn==zt)break e;Ce.insertBefore(zt,Ot),rn=Ot}return rn!==void 0?rn:zt.nextSibling}function re(Ce,we,ke){we[0]==="-"?Ce.setProperty(we,ke):Ce[we]=ke==null?"":typeof ke!="number"||P.test(we)?ke:ke+"px"}function fe(Ce,we,ke,dt,zt){var Ot;e:if(we==="style")if(typeof ke=="string")Ce.style.cssText=ke;else{if(typeof dt=="string"&&(Ce.style.cssText=dt=""),dt)for(we in dt)ke&&we in ke||re(Ce.style,we,"");if(ke)for(we in ke)dt&&ke[we]===dt[we]||re(Ce.style,we,ke[we])}else if(we[0]==="o"&&we[1]==="n")Ot=we!==(we=we.replace(/Capture$/,"")),we=we.toLowerCase()in Ce?we.toLowerCase().slice(2):we.slice(2),Ce.l||(Ce.l={}),Ce.l[we+Ot]=ke,ke?dt||Ce.addEventListener(we,Ot?Te:Se,Ot):Ce.removeEventListener(we,Ot?Te:Se,Ot);else if(we!=="dangerouslySetInnerHTML"){if(zt)we=we.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(we!=="href"&&we!=="list"&&we!=="form"&&we!=="tabIndex"&&we!=="download"&&we in Ce)try{Ce[we]=ke??"";break e}catch{}typeof ke=="function"||(ke!=null&&(ke!==!1||we[0]==="a"&&we[1]==="r")?Ce.setAttribute(we,ke):Ce.removeAttribute(we))}}function Se(Ce){this.l[Ce.type+!1](c.event?c.event(Ce):Ce)}function Te(Ce){this.l[Ce.type+!0](c.event?c.event(Ce):Ce)}function he(Ce,we,ke,dt,zt,Ot,rn,yn,Tn){var pn,st,xn,Fe,mn,Kn,oe,$n,Sr,Gr,eo,Dn=we.type;if(we.constructor!==void 0)return null;ke.__h!=null&&(Tn=ke.__h,yn=we.__e=ke.__e,we.__h=null,Ot=[yn]),(pn=c.__b)&&pn(we);try{e:if(typeof Dn=="function"){if($n=we.props,Sr=(pn=Dn.contextType)&&dt[pn.__c],Gr=pn?Sr?Sr.props.value:pn.__:dt,ke.__c?oe=(st=we.__c=ke.__c).__=st.__E:("prototype"in Dn&&Dn.prototype.render?we.__c=st=new Dn($n,Gr):(we.__c=st=new Z($n,Gr),st.constructor=Dn,st.render=rt),Sr&&Sr.sub(st),st.props=$n,st.state||(st.state={}),st.context=Gr,st.__n=dt,xn=st.__d=!0,st.__h=[]),st.__s==null&&(st.__s=st.state),Dn.getDerivedStateFromProps!=null&&(st.__s==st.state&&(st.__s=A({},st.__s)),A(st.__s,Dn.getDerivedStateFromProps($n,st.__s))),Fe=st.props,mn=st.state,xn)Dn.getDerivedStateFromProps==null&&st.componentWillMount!=null&&st.componentWillMount(),st.componentDidMount!=null&&st.__h.push(st.componentDidMount);else{if(Dn.getDerivedStateFromProps==null&&$n!==Fe&&st.componentWillReceiveProps!=null&&st.componentWillReceiveProps($n,Gr),!st.__e&&st.shouldComponentUpdate!=null&&st.shouldComponentUpdate($n,st.__s,Gr)===!1||we.__v===ke.__v){st.props=$n,st.state=st.__s,we.__v!==ke.__v&&(st.__d=!1),st.__v=we,we.__e=ke.__e,we.__k=ke.__k,we.__k.forEach(function(Ro){Ro&&(Ro.__=we)}),st.__h.length&&rn.push(st);break e}st.componentWillUpdate!=null&&st.componentWillUpdate($n,st.__s,Gr),st.componentDidUpdate!=null&&st.__h.push(function(){st.componentDidUpdate(Fe,mn,Kn)})}st.context=Gr,st.props=$n,st.state=st.__s,(pn=c.__r)&&pn(we),st.__d=!1,st.__v=we,st.__P=Ce,pn=st.render(st.props,st.state,st.context),st.state=st.__s,st.getChildContext!=null&&(dt=A(A({},dt),st.getChildContext())),xn||st.getSnapshotBeforeUpdate==null||(Kn=st.getSnapshotBeforeUpdate(Fe,mn)),eo=pn!=null&&pn.type===q&&pn.key==null?pn.props.children:pn,W(Ce,Array.isArray(eo)?eo:[eo],we,ke,dt,zt,Ot,rn,yn,Tn),st.base=we.__e,we.__h=null,st.__h.length&&rn.push(st),oe&&(st.__E=st.__=null),st.__e=!1}else Ot==null&&we.__v===ke.__v?(we.__k=ke.__k,we.__e=ke.__e):we.__e=De(ke.__e,we,ke,dt,zt,Ot,rn,Tn);(pn=c.diffed)&&pn(we)}catch(Ro){we.__v=null,(Tn||Ot!=null)&&(we.__e=yn,we.__h=!!Tn,Ot[Ot.indexOf(yn)]=null),c.__e(Ro,we,ke)}}function _e(Ce,we){c.__c&&c.__c(we,Ce),Ce.some(function(ke){try{Ce=ke.__h,ke.__h=[],Ce.some(function(dt){dt.call(ke)})}catch(dt){c.__e(dt,ke.__v)}})}function De(Ce,we,ke,dt,zt,Ot,rn,yn){var Tn,pn,st,xn=ke.props,Fe=we.props,mn=we.type,Kn=0;if(mn==="svg"&&(zt=!0),Ot!=null){for(;Kn<Ot.length;Kn++)if((Tn=Ot[Kn])&&"setAttribute"in Tn==!!mn&&(mn?Tn.localName===mn:Tn.nodeType===3)){Ce=Tn,Ot[Kn]=null;break}}if(Ce==null){if(mn===null)return document.createTextNode(Fe);Ce=zt?document.createElementNS("http://www.w3.org/2000/svg",mn):document.createElement(mn,Fe.is&&Fe),Ot=null,yn=!1}if(mn===null)xn===Fe||yn&&Ce.data===Fe||(Ce.data=Fe);else{if(Ot=Ot&&s.call(Ce.childNodes),pn=(xn=ke.props||O).dangerouslySetInnerHTML,st=Fe.dangerouslySetInnerHTML,!yn){if(Ot!=null)for(xn={},Kn=0;Kn<Ce.attributes.length;Kn++)xn[Ce.attributes[Kn].name]=Ce.attributes[Kn].value;(st||pn)&&(st&&(pn&&st.__html==pn.__html||st.__html===Ce.innerHTML)||(Ce.innerHTML=st&&st.__html||""))}if(function(oe,$n,Sr,Gr,eo){var Dn;for(Dn in Sr)Dn==="children"||Dn==="key"||Dn in $n||fe(oe,Dn,null,Sr[Dn],Gr);for(Dn in $n)eo&&typeof $n[Dn]!="function"||Dn==="children"||Dn==="key"||Dn==="value"||Dn==="checked"||Sr[Dn]===$n[Dn]||fe(oe,Dn,$n[Dn],Sr[Dn],Gr)}(Ce,Fe,xn,zt,yn),st)we.__k=[];else if(Kn=we.props.children,W(Ce,Array.isArray(Kn)?Kn:[Kn],we,ke,dt,zt&&mn!=="foreignObject",Ot,rn,Ot?Ot[0]:ke.__k&&Y(ke,0),yn),Ot!=null)for(Kn=Ot.length;Kn--;)Ot[Kn]!=null&&R(Ot[Kn]);yn||("value"in Fe&&(Kn=Fe.value)!==void 0&&(Kn!==xn.value||Kn!==Ce.value||mn==="progress"&&!Kn)&&fe(Ce,"value",Kn,xn.value,!1),"checked"in Fe&&(Kn=Fe.checked)!==void 0&&Kn!==Ce.checked&&fe(Ce,"checked",Kn,xn.checked,!1))}return Ce}function Ve(Ce,we,ke){try{typeof Ce=="function"?Ce(we):Ce.current=we}catch(dt){c.__e(dt,ke)}}function vt(Ce,we,ke){var dt,zt;if(c.unmount&&c.unmount(Ce),(dt=Ce.ref)&&(dt.current&&dt.current!==Ce.__e||Ve(dt,null,we)),(dt=Ce.__c)!=null){if(dt.componentWillUnmount)try{dt.componentWillUnmount()}catch(Ot){c.__e(Ot,we)}dt.base=dt.__P=null}if(dt=Ce.__k)for(zt=0;zt<dt.length;zt++)dt[zt]&&vt(dt[zt],we,typeof Ce.type!="function");ke||Ce.__e==null||R(Ce.__e),Ce.__e=Ce.__d=void 0}function rt(Ce,we,ke){return this.constructor(Ce,ke)}function gt(Ce,we,ke){var dt,zt,Ot;c.__&&c.__(Ce,we),zt=(dt=typeof ke=="function")?null:ke&&ke.__k||we.__k,Ot=[],he(we,Ce=(!dt&&ke||we).__k=D(q,null,[Ce]),zt||O,O,we.ownerSVGElement!==void 0,!dt&&ke?[ke]:zt?null:we.firstChild?s.call(we.childNodes):null,Ot,!dt&&ke?ke:zt?zt.__e:we.firstChild,dt),_e(Ot,Ce)}function Nt(Ce,we){gt(Ce,we,Nt)}function yt(Ce,we,ke){var dt,zt,Ot,rn=A({},Ce.props);for(Ot in we)Ot=="key"?dt=we[Ot]:Ot=="ref"?zt=we[Ot]:rn[Ot]=we[Ot];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):ke),N(Ce.type,rn,dt||Ce.key,zt||Ce.ref,null)}function Yt(Ce,we){var ke={__c:we="__cC"+w++,__:Ce,Consumer:function(dt,zt){return dt.children(zt)},Provider:function(dt){var zt,Ot;return this.getChildContext||(zt=[],(Ot={})[we]=this,this.getChildContext=function(){return Ot},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&zt.some(G)},this.sub=function(rn){zt.push(rn);var yn=rn.componentWillUnmount;rn.componentWillUnmount=function(){zt.splice(zt.indexOf(rn),1),yn&&yn.call(rn)}}),dt.children}};return ke.Provider.__=ke.Consumer.contextType=ke}s=S.slice,c={__e:function(Ce,we){for(var ke,dt,zt;we=we.__;)if((ke=we.__c)&&!ke.__)try{if((dt=ke.constructor)&&dt.getDerivedStateFromError!=null&&(ke.setState(dt.getDerivedStateFromError(Ce)),zt=ke.__d),ke.componentDidCatch!=null&&(ke.componentDidCatch(Ce),zt=ke.__d),zt)return ke.__E=ke}catch(Ot){Ce=Ot}throw Ce}},v=0,Z.prototype.setState=function(Ce,we){var ke;ke=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof Ce=="function"&&(Ce=Ce(A({},ke),this.props)),Ce&&A(ke,Ce),Ce!=null&&this.__v&&(we&&this.__h.push(we),G(this))},Z.prototype.forceUpdate=function(Ce){this.__v&&(this.__e=!0,Ce&&this.__h.push(Ce),G(this))},Z.prototype.render=q,h=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,C.__r=0,w=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return G}),r.d(o,"b",function(){return Nc}),r.d(o,"c",function(){return Ma}),r.d(o,"d",function(){return Xn}),r.d(o,"e",function(){return qt}),r.d(o,"f",function(){return en}),r.d(o,"g",function(){return Bn}),r.d(o,"h",function(){return Mi}),r.d(o,"i",function(){return eo}),r.d(o,"j",function(){return Sn}),r.d(o,"k",function(){return dl}),r.d(o,"l",function(){return xc}),r.d(o,"m",function(){return oe}),r.d(o,"n",function(){return lu}),r.d(o,"o",function(){return K}),r.d(o,"p",function(){return Gf}),r.d(o,"q",function(){return pa}),r.d(o,"r",function(){return uu}),r.d(o,"s",function(){return oa}),r.d(o,"t",function(){return jo}),r.d(o,"u",function(){return Os}),r.d(o,"v",function(){return Uf}),r.d(o,"w",function(){return Ac}),r.d(o,"x",function(){return ri}),r.d(o,"y",function(){return va}),r.d(o,"z",function(){return Vo}),r.d(o,"A",function(){return ii}),r.d(o,"B",function(){return na}),r.d(o,"C",function(){return pn}),r.d(o,"D",function(){return Tc}),r.d(o,"E",function(){return Vr}),r.d(o,"F",function(){return zr}),r.d(o,"G",function(){return Ec}),r.d(o,"H",function(){return wc}),r.d(o,"I",function(){return Mc}),r.d(o,"J",function(){return oi}),r.d(o,"K",function(){return He}),r.d(o,"L",function(){return to}),r.d(o,"M",function(){return As});var v=[];Object.freeze(v);var h={};function g(){return++Pn.mobxGuid}function _(T){throw w(!1,T),"X"}function w(T,M){if(!T)throw new Error("[mobx] "+(M||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(h);function O(T){var M=!1;return function(){if(!M)return M=!0,T.apply(this,arguments)}}var S=function(){};function P(T){return T!==null&&typeof T=="object"}function A(T){if(T===null||typeof T!="object")return!1;var M=Object.getPrototypeOf(T);return M===Object.prototype||M===null}function R(T,M,$){Object.defineProperty(T,M,{enumerable:!1,writable:!0,configurable:!0,value:$})}function D(T,M){var $="isMobX"+T;return M.prototype[$]=!0,function(ne){return P(ne)&&ne[$]===!0}}function N(T){return T instanceof Map}function B(T){return T instanceof Set}function q(T){var M=new Set;for(var $ in T)M.add($);return Object.getOwnPropertySymbols(T).forEach(function(ne){Object.getOwnPropertyDescriptor(T,ne).enumerable&&M.add(ne)}),Array.from(M)}function Z(T){return T&&T.toString?T.toString():new String(T).toString()}function Y(T){return T===null?null:typeof T=="object"?""+T:T}var te=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:Object.getOwnPropertyNames,G=Symbol("mobx administration"),C=function(){function T(M){M===void 0&&(M="Atom@"+g()),this.name=M,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=xn.NOT_TRACKING}return T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.reportObserved=function(){return Es(this)},T.prototype.reportChanged=function(){qi(),function(M){M.lowestObserverState!==xn.STALE&&(M.lowestObserverState=xn.STALE,M.observers.forEach(function($){$.dependenciesState===xn.UP_TO_DATE&&($.isTracing!==Fe.NONE&&Ta($,M),$.onBecomeStale()),$.dependenciesState=xn.STALE}))}(this),ta()},T.prototype.toString=function(){return this.name},T}(),W=D("Atom",C);function K(T,M,$){M===void 0&&(M=S),$===void 0&&($=S);var ne,ge=new C(T);return M!==S&&$f("onBecomeObserved",ge,M,ne),$!==S&&Vr(ge,$),ge}var z={identity:function(T,M){return T===M},structural:function(T,M){return Ct(T,M)},default:function(T,M){return Object.is(T,M)},shallow:function(T,M){return Ct(T,M,1)}},H=function(T,M){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ne){$.__proto__=ne}||function($,ne){for(var ge in ne)ne.hasOwnProperty(ge)&&($[ge]=ne[ge])},H(T,M)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var re=function(){return re=Object.assign||function(T){for(var M,$=1,ne=arguments.length;$<ne;$++)for(var ge in M=arguments[$])Object.prototype.hasOwnProperty.call(M,ge)&&(T[ge]=M[ge]);return T},re.apply(this,arguments)};function fe(T){var M=typeof Symbol=="function"&&T[Symbol.iterator],$=0;return M?M.call(T):{next:function(){return T&&$>=T.length&&(T=void 0),{value:T&&T[$++],done:!T}}}}function Se(T,M){var $=typeof Symbol=="function"&&T[Symbol.iterator];if(!$)return T;var ne,ge,Ge=$.call(T),pt=[];try{for(;(M===void 0||M-- >0)&&!(ne=Ge.next()).done;)pt.push(ne.value)}catch(Ht){ge={error:Ht}}finally{try{ne&&!ne.done&&($=Ge.return)&&$.call(Ge)}finally{if(ge)throw ge.error}}return pt}function Te(){for(var T=[],M=0;M<arguments.length;M++)T=T.concat(Se(arguments[M]));return T}var he=Symbol("mobx did run lazy initializers"),_e=Symbol("mobx pending decorators"),De={},Ve={};function vt(T,M){var $=M?De:Ve;return $[T]||($[T]={configurable:!0,enumerable:M,get:function(){return rt(this),this[T]},set:function(ne){rt(this),this[T]=ne}})}function rt(T){var M,$;if(T[he]!==!0){var ne=T[_e];if(ne){R(T,he,!0);var ge=Te(Object.getOwnPropertySymbols(ne),Object.keys(ne));try{for(var Ge=fe(ge),pt=Ge.next();!pt.done;pt=Ge.next()){var Ht=ne[pt.value];Ht.propertyCreator(T,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(bn){M={error:bn}}finally{try{pt&&!pt.done&&($=Ge.return)&&$.call(Ge)}finally{if(M)throw M.error}}}}}function gt(T,M){return function(){var $,ne=function(ge,Ge,pt,Ht){if(Ht===!0)return M(ge,Ge,pt,ge,$),null;if(!Object.prototype.hasOwnProperty.call(ge,_e)){var bn=ge[_e];R(ge,_e,re({},bn))}return ge[_e][Ge]={prop:Ge,propertyCreator:M,descriptor:pt,decoratorTarget:ge,decoratorArguments:$},vt(Ge,T)};return Nt(arguments)?($=v,ne.apply(null,arguments)):($=Array.prototype.slice.call(arguments),ne)}}function Nt(T){return(T.length===2||T.length===3)&&(typeof T[1]=="string"||typeof T[1]=="symbol")||T.length===4&&T[3]===!0}function yt(T,M,$){return ri(T)?T:Array.isArray(T)?pn.array(T,{name:$}):A(T)?pn.object(T,void 0,{name:$}):N(T)?pn.map(T,{name:$}):B(T)?pn.set(T,{name:$}):T}function Yt(T){return T}function Ce(T){w(T);var M=gt(!0,function(ne,ge,Ge,pt,Ht){var bn=Ge?Ge.initializer?Ge.initializer.call(ne):Ge.value:void 0;ra(ne).addObservableProp(ge,bn,T)}),$=(s!==void 0&&s.env,M);return $.enhancer=T,$}var we={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ke(T){return T==null?we:typeof T=="string"?{name:T,deep:!0,proxy:!0}:T}Object.freeze(we);var dt=Ce(yt),zt=Ce(function(T,M,$){return T==null||ii(T)||va(T)||Vo(T)||Yo(T)?T:Array.isArray(T)?pn.array(T,{name:$,deep:!1}):A(T)?pn.object(T,void 0,{name:$,deep:!1}):N(T)?pn.map(T,{name:$,deep:!1}):B(T)?pn.set(T,{name:$,deep:!1}):_(!1)}),Ot=Ce(Yt),rn=Ce(function(T,M,$){return Ct(T,M)?M:T});function yn(T){return T.defaultDecorator?T.defaultDecorator.enhancer:T.deep===!1?Yt:yt}var Tn={box:function(T,M){arguments.length>2&&st("box");var $=ke(M);return new Rr(T,yn($),$.name,!0,$.equals)},array:function(T,M){arguments.length>2&&st("array");var $=ke(M);return Dl(T,yn($),$.name)},map:function(T,M){arguments.length>2&&st("map");var $=ke(M);return new Nc(T,yn($),$.name)},set:function(T,M){arguments.length>2&&st("set");var $=ke(M);return new Wa(T,yn($),$.name)},object:function(T,M,$){typeof arguments[1]=="string"&&st("object");var ne=ke($);if(ne.proxy===!1)return pa({},T,M,ne);var ge=xs(ne),Ge=pa({},void 0,void 0,ne),pt=su(Ge);return Bf(pt,T,M,ge),pt},ref:Ot,shallow:zt,deep:dt,struct:rn},pn=function(T,M,$){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return dt.apply(null,arguments);if(ri(T))return T;var ne=A(T)?pn.object(T,M,$):Array.isArray(T)?pn.array(T,M):N(T)?pn.map(T,M):B(T)?pn.set(T,M):T;if(ne!==T)return ne;_(!1)};function st(T){_("Expected one or two arguments to observable."+T+". Did you accidentally try to use observable."+T+" as decorator?")}Object.keys(Tn).forEach(function(T){return pn[T]=Tn[T]});var xn,Fe,mn=gt(!1,function(T,M,$,ne,ge){var Ge=$.get,pt=$.set,Ht=ge[0]||{};ra(T).addComputedProp(T,M,re({get:Ge,set:pt,context:T},Ht))}),Kn=mn({equals:z.structural}),oe=function(T,M,$){if(typeof M=="string"||T!==null&&typeof T=="object"&&arguments.length===1)return mn.apply(null,arguments);var ne=typeof M=="object"?M:{};return ne.get=T,ne.set=typeof M=="function"?M:ne.set,ne.name=ne.name||T.name||"",new Ua(ne)};oe.struct=Kn,function(T){T[T.NOT_TRACKING=-1]="NOT_TRACKING",T[T.UP_TO_DATE=0]="UP_TO_DATE",T[T.POSSIBLY_STALE=1]="POSSIBLY_STALE",T[T.STALE=2]="STALE"}(xn||(xn={})),function(T){T[T.NONE=0]="NONE",T[T.LOG=1]="LOG",T[T.BREAK=2]="BREAK"}(Fe||(Fe={}));var $n=function(T){this.cause=T};function Sr(T){return T instanceof $n}function Gr(T){switch(T.dependenciesState){case xn.UP_TO_DATE:return!1;case xn.NOT_TRACKING:case xn.STALE:return!0;case xn.POSSIBLY_STALE:for(var M=en(!0),$=je(),ne=T.observing,ge=ne.length,Ge=0;Ge<ge;Ge++){var pt=ne[Ge];if(fl(pt)){if(Pn.disableErrorBoundaries)pt.get();else try{pt.get()}catch{return ot($),qt(M),!0}if(T.dependenciesState===xn.STALE)return ot($),qt(M),!0}}return kn(T),ot($),qt(M),!1}}function eo(){return Pn.trackingDerivation!==null}function Dn(T){var M=T.observers.size>0;Pn.computationDepth>0&&M&&_(!1),Pn.allowStateChanges||!M&&Pn.enforceActions!=="strict"||_(!1)}function Ro(T,M,$){var ne=en(!0);kn(T),T.newObserving=new Array(T.observing.length+100),T.unboundDepsCount=0,T.runId=++Pn.runId;var ge,Ge=Pn.trackingDerivation;if(Pn.trackingDerivation=T,Pn.disableErrorBoundaries===!0)ge=M.call($);else try{ge=M.call($)}catch(pt){ge=new $n(pt)}return Pn.trackingDerivation=Ge,function(pt){for(var Ht=pt.observing,bn=pt.observing=pt.newObserving,yr=xn.UP_TO_DATE,ln=0,Wr=pt.unboundDepsCount,pr=0;pr<Wr;pr++)(Dr=bn[pr]).diffValue===0&&(Dr.diffValue=1,ln!==pr&&(bn[ln]=Dr),ln++),Dr.dependenciesState>yr&&(yr=Dr.dependenciesState);for(bn.length=ln,pt.newObserving=null,Wr=Ht.length;Wr--;)(Dr=Ht[Wr]).diffValue===0&&vo(Dr,pt),Dr.diffValue=0;for(;ln--;){var Dr;(Dr=bn[ln]).diffValue===1&&(Dr.diffValue=0,Cf(Dr,pt))}yr!==xn.UP_TO_DATE&&(pt.dependenciesState=yr,pt.onBecomeStale())}(T),qt(ne),ge}function xe(T){var M=T.observing;T.observing=[];for(var $=M.length;$--;)vo(M[$],T);T.dependenciesState=xn.NOT_TRACKING}function He(T){var M=je();try{return T()}finally{ot(M)}}function je(){var T=Pn.trackingDerivation;return Pn.trackingDerivation=null,T}function ot(T){Pn.trackingDerivation=T}function en(T){var M=Pn.allowStateReads;return Pn.allowStateReads=T,M}function qt(T){Pn.allowStateReads=T}function kn(T){if(T.dependenciesState!==xn.UP_TO_DATE){T.dependenciesState=xn.UP_TO_DATE;for(var M=T.observing,$=M.length;$--;)M[$].lowestObserverState=xn.UP_TO_DATE}}var wr=0,ni=1,yi=Object.getOwnPropertyDescriptor(function(){},"name");yi&&yi.configurable;function Go(T,M,$){var ne=function(){return Xo(T,M,$||this,arguments)};return ne.isMobxAction=!0,ne}function Xo(T,M,$,ne){var ge=Sn();try{return M.apply($,ne)}catch(Ge){throw ge.error=Ge,Ge}finally{Bn(ge)}}function Sn(T,M,$){var ne=0,ge=je();qi();var Ge={prevDerivation:ge,prevAllowStateChanges:ir(!0),prevAllowStateReads:en(!0),notifySpy:!1,startTime:ne,actionId:ni++,parentActionId:wr};return wr=Ge.actionId,Ge}function Bn(T){wr!==T.actionId&&_("invalid action stack. did you forget to finish an action?"),wr=T.parentActionId,T.error!==void 0&&(Pn.suppressReactionErrors=!0),Kr(T.prevAllowStateChanges),qt(T.prevAllowStateReads),ta(),ot(T.prevDerivation),T.notifySpy,Pn.suppressReactionErrors=!1}function Xn(T,M){var $,ne=ir(T);try{$=M()}finally{Kr(ne)}return $}function ir(T){var M=Pn.allowStateChanges;return Pn.allowStateChanges=T,M}function Kr(T){Pn.allowStateChanges=T}var Rr=function(T){function M($,ne,ge,Ge,pt){ge===void 0&&(ge="ObservableValue@"+g()),pt===void 0&&(pt=z.default);var Ht=T.call(this,ge)||this;return Ht.enhancer=ne,Ht.name=ge,Ht.equals=pt,Ht.hasUnreportedChange=!1,Ht.value=ne($,void 0,ge),Ht}return function($,ne){function ge(){this.constructor=$}H($,ne),$.prototype=ne===null?Object.create(ne):(ge.prototype=ne.prototype,new ge)}(M,T),M.prototype.dehanceValue=function($){return this.dehancer!==void 0?this.dehancer($):$},M.prototype.set=function($){this.value,($=this.prepareNewValue($))!==Pn.UNCHANGED&&this.setNewValue($)},M.prototype.prepareNewValue=function($){if(Dn(this),Ki(this)){var ne=Mr(this,{object:this,type:"update",newValue:$});if(!ne)return Pn.UNCHANGED;$=ne.newValue}return $=this.enhancer($,this.value,this.name),this.equals(this.value,$)?Pn.UNCHANGED:$},M.prototype.setNewValue=function($){var ne=this.value;this.value=$,this.reportChanged(),Di(this)&&fi(this,{type:"update",object:this,newValue:$,oldValue:ne})},M.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},M.prototype.intercept=function($){return ha(this,$)},M.prototype.observe=function($,ne){return ne&&$({object:this,type:"update",newValue:this.value,oldValue:void 0}),Pa(this,$)},M.prototype.toJSON=function(){return this.get()},M.prototype.toString=function(){return this.name+"["+this.value+"]"},M.prototype.valueOf=function(){return Y(this.get())},M.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},M}(C),cl=D("ObservableValue",Rr),Ua=function(){function T(M){this.dependenciesState=xn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=xn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new $n(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Fe.NONE,w(M.get,"missing option for computed: get"),this.derivation=M.get,this.name=M.name||"ComputedValue@"+g(),M.set&&(this.setter=Go(this.name+"-setter",M.set)),this.equals=M.equals||(M.compareStructural||M.struct?z.structural:z.default),this.scope=M.context,this.requiresReaction=!!M.requiresReaction,this.keepAlive=!!M.keepAlive}return T.prototype.onBecomeStale=function(){(function(M){M.lowestObserverState===xn.UP_TO_DATE&&(M.lowestObserverState=xn.POSSIBLY_STALE,M.observers.forEach(function($){$.dependenciesState===xn.UP_TO_DATE&&($.dependenciesState=xn.POSSIBLY_STALE,$.isTracing!==Fe.NONE&&Ta($,M),$.onBecomeStale())}))})(this)},T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Es(this),Gr(this)&&this.trackAndCompute()&&function($){$.lowestObserverState!==xn.STALE&&($.lowestObserverState=xn.STALE,$.observers.forEach(function(ne){ne.dependenciesState===xn.POSSIBLY_STALE?ne.dependenciesState=xn.STALE:ne.dependenciesState===xn.UP_TO_DATE&&($.lowestObserverState=xn.UP_TO_DATE)}))}(this)):Gr(this)&&(this.warnAboutUntrackedRead(),qi(),this.value=this.computeValue(!1),ta());var M=this.value;if(Sr(M))throw M.cause;return M},T.prototype.peek=function(){var M=this.computeValue(!1);if(Sr(M))throw M.cause;return M},T.prototype.set=function(M){if(this.setter){w(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,M)}finally{this.isRunningSetter=!1}}else w(!1,!1)},T.prototype.trackAndCompute=function(){var M=this.value,$=this.dependenciesState===xn.NOT_TRACKING,ne=this.computeValue(!0),ge=$||Sr(M)||Sr(ne)||!this.equals(M,ne);return ge&&(this.value=ne),ge},T.prototype.computeValue=function(M){var $;if(this.isComputing=!0,Pn.computationDepth++,M)$=Ro(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)$=this.derivation.call(this.scope);else try{$=this.derivation.call(this.scope)}catch(ne){$=new $n(ne)}return Pn.computationDepth--,this.isComputing=!1,$},T.prototype.suspend=function(){this.keepAlive||(xe(this),this.value=void 0)},T.prototype.observe=function(M,$){var ne=this,ge=!0,Ge=void 0;return xc(function(){var pt=ne.get();if(!ge||$){var Ht=je();M({type:"update",object:ne,newValue:pt,oldValue:Ge}),ot(Ht)}ge=!1,Ge=pt})},T.prototype.warnAboutUntrackedRead=function(){},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},T.prototype.valueOf=function(){return Y(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(),fl=D("ComputedValue",Ua),au=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ud={};function mc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:Ud}var fa=!0,Wu=!1,Pn=function(){var T=mc();return T.__mobxInstanceCount>0&&!T.__mobxGlobals&&(fa=!1),T.__mobxGlobals&&T.__mobxGlobals.version!==new au().version&&(fa=!1),fa?T.__mobxGlobals?(T.__mobxInstanceCount+=1,T.__mobxGlobals.UNCHANGED||(T.__mobxGlobals.UNCHANGED={}),T.__mobxGlobals):(T.__mobxInstanceCount=1,T.__mobxGlobals=new au):(setTimeout(function(){Wu||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new au)}();function Cf(T,M){T.observers.add(M),T.lowestObserverState>M.dependenciesState&&(T.lowestObserverState=M.dependenciesState)}function vo(T,M){T.observers.delete(M),T.observers.size===0&&gc(T)}function gc(T){T.isPendingUnobservation===!1&&(T.isPendingUnobservation=!0,Pn.pendingUnobservations.push(T))}function qi(){Pn.inBatch++}function ta(){if(--Pn.inBatch==0){bc();for(var T=Pn.pendingUnobservations,M=0;M<T.length;M++){var $=T[M];$.isPendingUnobservation=!1,$.observers.size===0&&($.isBeingObserved&&($.isBeingObserved=!1,$.onBecomeUnobserved()),$ instanceof Ua&&$.suspend())}Pn.pendingUnobservations=[]}}function Es(T){var M=Pn.trackingDerivation;return M!==null?(M.runId!==T.lastAccessedBy&&(T.lastAccessedBy=M.runId,M.newObserving[M.unboundDepsCount++]=T,T.isBeingObserved||(T.isBeingObserved=!0,T.onBecomeObserved())),!0):(T.observers.size===0&&Pn.inBatch>0&&gc(T),!1)}function Ta(T,M){if(T.isTracing===Fe.BREAK){var $=[];da(jo(T),$,1),new Function(`debugger;
/*
Tracing '`+T.name+`'

You are entering this break point because derivation '`+T.name+"' is being traced and '"+M.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(T instanceof Ua?T.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+$.join(`
`)+`
*/
    `)()}}function da(T,M,$){M.length>=1e3?M.push("(and many more)"):(M.push(""+new Array($).join("	")+T.name),T.dependencies&&T.dependencies.forEach(function(ne){return da(ne,M,$+1)}))}var Ma=function(){function T(M,$,ne,ge){M===void 0&&(M="Reaction@"+g()),ge===void 0&&(ge=!1),this.name=M,this.onInvalidate=$,this.errorHandler=ne,this.requiresObservable=ge,this.observing=[],this.newObserving=[],this.dependenciesState=xn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Fe.NONE}return T.prototype.onBecomeStale=function(){this.schedule()},T.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),bc())},T.prototype.isScheduled=function(){return this._isScheduled},T.prototype.runReaction=function(){if(!this.isDisposed){if(qi(),this._isScheduled=!1,Gr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(M){this.reportExceptionInDerivation(M)}}ta()}},T.prototype.track=function(M){if(!this.isDisposed){qi(),this._isRunning=!0;var $=Ro(this,M,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&xe(this),Sr($)&&this.reportExceptionInDerivation($.cause),ta()}},T.prototype.reportExceptionInDerivation=function(M){var $=this;if(this.errorHandler)this.errorHandler(M,this);else{if(Pn.disableErrorBoundaries)throw M;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(ne){return ne(M,$)})}},T.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(qi(),xe(this),ta()))},T.prototype.getDisposer=function(){var M=this.dispose.bind(this);return M[G]=this,M},T.prototype.toString=function(){return"Reaction["+this.name+"]"},T.prototype.trace=function(M){M===void 0&&(M=!1),function(){for(var $=[],ne=0;ne<arguments.length;ne++)$[ne]=arguments[ne];var ge=!1;typeof $[$.length-1]=="boolean"&&(ge=$.pop());var Ge=Fr($);if(!Ge)return _(!1);Ge.isTracing,Fe.NONE,Ge.isTracing=ge?Fe.BREAK:Fe.LOG}(this,M)},T}(),_c=function(T){return T()};function bc(){Pn.inBatch>0||Pn.isRunningReactions||_c(Df)}function Df(){Pn.isRunningReactions=!0;for(var T=Pn.pendingReactions,M=0;T.length>0;){++M==100&&T.splice(0);for(var $=T.splice(0),ne=0,ge=$.length;ne<ge;ne++)$[ne].runReaction()}Pn.isRunningReactions=!1}var zu=D("Reaction",Ma);function If(T){var M=_c;_c=function($){return T(function(){return M($)})}}function wc(T){return function(){}}function Gd(){_(!1)}function Rl(T){return function(M,$,ne){if(ne){if(ne.value)return{value:Go(T,ne.value),enumerable:!1,configurable:!0,writable:!0};var ge=ne.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Go(T,ge.call(this))}}}return Lf(T).apply(this,arguments)}}function Lf(T){return function(M,$,ne){Object.defineProperty(M,$,{configurable:!0,enumerable:!1,get:function(){},set:function(ge){R(this,$,dl(T,ge))}})}}var dl=function(T,M,$,ne){return arguments.length===1&&typeof T=="function"?Go(T.name||"<unnamed action>",T):arguments.length===2&&typeof M=="function"?Go(T,M):arguments.length===1&&typeof T=="string"?Rl(T):ne!==!0?Rl(M).apply(null,arguments):void R(T,M,Go(T.name||M,$.value,this))};function Ec(T,M){return Xo(typeof T=="string"?T:T.name||"<unnamed action>",typeof T=="function"?T:M,this,void 0)}function Os(T){return typeof T=="function"&&T.isMobxAction===!0}function Oc(T,M,$){R(T,M,Go(M,$.bind(T)))}function xc(T,M){M===void 0&&(M=h);var $,ne=M&&M.name||T.name||"Autorun@"+g();if(!M.scheduler&&!M.delay)$=new Ma(ne,function(){this.track(pt)},M.onError,M.requiresObservable);else{var ge=Ff(M),Ge=!1;$=new Ma(ne,function(){Ge||(Ge=!0,ge(function(){Ge=!1,$.isDisposed||$.track(pt)}))},M.onError,M.requiresObservable)}function pt(){T($)}return $.schedule(),$.getDisposer()}dl.bound=function(T,M,$,ne){return ne===!0?(Oc(T,M,$.value),null):$?{configurable:!0,enumerable:!1,get:function(){return Oc(this,M,$.value||$.initializer.call(this)),this[M]},set:Gd}:{enumerable:!1,configurable:!0,set:function(ge){Oc(this,M,ge)},get:function(){}}};var Vd=function(T){return T()};function Ff(T){return T.scheduler?T.scheduler:T.delay?function(M){return setTimeout(M,T.delay)}:Vd}function zr(T,M,$){$===void 0&&($=h);var ne,ge,Ge,pt=$.name||"Reaction@"+g(),Ht=dl(pt,$.onError?(ne=$.onError,ge=M,function(){try{return ge.apply(this,arguments)}catch(_o){ne.call(this,_o)}}):M),bn=!$.scheduler&&!$.delay,yr=Ff($),ln=!0,Wr=!1,pr=$.compareStructural?z.structural:$.equals||z.default,Dr=new Ma(pt,function(){ln||bn?ia():Wr||(Wr=!0,yr(ia))},$.onError,$.requiresObservable);function ia(){if(Wr=!1,!Dr.isDisposed){var _o=!1;Dr.track(function(){var Ji=T(Dr);_o=ln||!pr(Ge,Ji),Ge=Ji}),ln&&$.fireImmediately&&Ht(Ge,Dr),ln||_o!==!0||Ht(Ge,Dr),ln&&(ln=!1)}}return Dr.schedule(),Dr.getDisposer()}function Vr(T,M,$){return $f("onBecomeUnobserved",T,M,$)}function $f(T,M,$,ne){var ge=typeof ne=="function"?oa(M,$):oa(M),Ge=typeof ne=="function"?ne:$,pt=T+"Listeners";return ge[pt]?ge[pt].add(Ge):ge[pt]=new Set([Ge]),typeof ge[T]!="function"?_(!1):function(){var Ht=ge[pt];Ht&&(Ht.delete(Ge),Ht.size===0&&delete ge[pt])}}function lu(T){var M=T.enforceActions,$=T.computedRequiresReaction,ne=T.computedConfigurable,ge=T.disableErrorBoundaries,Ge=T.reactionScheduler,pt=T.reactionRequiresObservable,Ht=T.observableRequiresReaction;if(T.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),Wu=!0,fa&&(--mc().__mobxInstanceCount==0&&(mc().__mobxGlobals=void 0),Pn=new au)),M!==void 0){var bn=void 0;switch(M){case!0:case"observed":bn=!0;break;case!1:case"never":bn=!1;break;case"strict":case"always":bn="strict";break;default:_("Invalid value for 'enforceActions': '"+M+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=bn,Pn.allowStateChanges=bn!==!0&&bn!=="strict"}$!==void 0&&(Pn.computedRequiresReaction=!!$),pt!==void 0&&(Pn.reactionRequiresObservable=!!pt),Ht!==void 0&&(Pn.observableRequiresReaction=!!Ht,Pn.allowStateReads=!Pn.observableRequiresReaction),ne!==void 0&&(Pn.computedConfigurable=!!ne),ge!==void 0&&(Pn.disableErrorBoundaries=!!ge),Ge&&If(Ge)}function pa(T,M,$,ne){var ge=xs(ne=ke(ne));return rt(T),ra(T,ne.name,ge.enhancer),M&&Bf(T,M,$,ge),T}function xs(T){return T.defaultDecorator||(T.deep===!1?Ot:dt)}function Bf(T,M,$,ne){var ge,Ge;qi();try{var pt=te(M);try{for(var Ht=fe(pt),bn=Ht.next();!bn.done;bn=Ht.next()){var yr=bn.value,ln=Object.getOwnPropertyDescriptor(M,yr),Wr=($&&yr in $?$[yr]:ln.get?mn:ne)(T,yr,ln,!0);Wr&&Object.defineProperty(T,yr,Wr)}}catch(pr){ge={error:pr}}finally{try{bn&&!bn.done&&(Ge=Ht.return)&&Ge.call(Ht)}finally{if(ge)throw ge.error}}}finally{ta()}}function jo(T,M){return jl(oa(T,M))}function jl(T){var M,$,ne={name:T.name};return T.observing&&T.observing.length>0&&(ne.dependencies=(M=T.observing,$=[],M.forEach(function(ge){$.indexOf(ge)===-1&&$.push(ge)}),$).map(jl)),ne}var Cl=0;function Ss(){this.message="FLOW_CANCELLED"}function uu(T){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var M=T.name||"<unnamed flow>";return function(){var $,ne=this,ge=arguments,Ge=++Cl,pt=dl(M+" - runid: "+Ge+" - init",T).apply(ne,ge),Ht=void 0,bn=new Promise(function(yr,ln){var Wr=0;function pr(_o){var Ji;Ht=void 0;try{Ji=dl(M+" - runid: "+Ge+" - yield "+Wr++,pt.next).call(pt,_o)}catch(pl){return ln(pl)}ia(Ji)}function Dr(_o){var Ji;Ht=void 0;try{Ji=dl(M+" - runid: "+Ge+" - yield "+Wr++,pt.throw).call(pt,_o)}catch(pl){return ln(pl)}ia(Ji)}function ia(_o){if(!_o||typeof _o.then!="function")return _o.done?yr(_o.value):(Ht=Promise.resolve(_o.value)).then(pr,Dr);_o.then(ia,ln)}$=ln,pr(void 0)});return bn.cancel=dl(M+" - runid: "+Ge+" - cancel",function(){try{Ht&&mi(Ht);var yr=pt.return(void 0),ln=Promise.resolve(yr.value);ln.then(S,S),mi(ln),$(new Ss)}catch(Wr){$(Wr)}}),bn}}function mi(T){typeof T.cancel=="function"&&T.cancel()}function Sc(T,M){if(T==null)return!1;if(M!==void 0){if(ii(T)===!1||!T[G].values.has(M))return!1;var $=oa(T,M);return fl($)}return fl(T)}function Uf(T){return arguments.length>1?_(!1):Sc(T)}function Ac(T,M){return typeof M!="string"?_(!1):Sc(T,M)}function Ni(T,M){return T!=null&&(M!==void 0?!!ii(T)&&T[G].values.has(M):ii(T)||!!T[G]||W(T)||zu(T)||fl(T))}function ri(T){return arguments.length!==1&&_(!1),Ni(T)}function na(T){return ii(T)?T[G].getKeys():Vo(T)||Yo(T)?Array.from(T.keys()):va(T)?T.map(function(M,$){return $}):_(!1)}function to(T){return ii(T)?na(T).map(function(M){return T[M]}):Vo(T)?na(T).map(function(M){return T.get(M)}):Yo(T)?Array.from(T.values()):va(T)?T.slice():_(!1)}function Gf(T){return ii(T)?na(T).map(function(M){return[M,T[M]]}):Vo(T)?na(T).map(function(M){return[M,T.get(M)]}):Yo(T)?Array.from(T.entries()):va(T)?T.map(function(M,$){return[$,M]}):_(!1)}function Ri(T,M,$){if(arguments.length!==2||Yo(T))if(ii(T)){var ne=T[G],ge=ne.values.get(M);ge?ne.write(M,$):ne.addObservableProp(M,$,ne.defaultEnhancer)}else if(Vo(T))T.set(M,$);else if(Yo(T))T.add(M);else{if(!va(T))return _(!1);typeof M!="number"&&(M=parseInt(M,10)),w(M>=0,"Not a valid index: '"+M+"'"),qi(),M>=T.length&&(T.length=M+1),T[M]=$,ta()}else{qi();var Ge=M;try{for(var pt in Ge)Ri(T,pt,Ge[pt])}finally{ta()}}}function Tc(T,M,$,ne){return typeof $=="function"?function(ge,Ge,pt,Ht){return Mi(ge,Ge).observe(pt,Ht)}(T,M,$,ne):function(ge,Ge,pt){return Mi(ge).observe(Ge,pt)}(T,M,$)}Ss.prototype=Object.create(Error.prototype);var Vf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ji(T,M,$,ne){return ne.detectCycles&&T.set(M,$),$}function Ti(T,M,$){if(!M.recurseEverything&&!ri(T)||typeof T!="object")return T;if(T===null)return null;if(T instanceof Date)return T;if(cl(T))return Ti(T.get(),M,$);if(ri(T)&&na(T),M.detectCycles===!0&&T!==null&&$.has(T))return $.get(T);if(va(T)||Array.isArray(T)){var ne=ji($,T,[],M),ge=T.map(function(pr){return Ti(pr,M,$)});ne.length=ge.length;for(var Ge=0,pt=ge.length;Ge<pt;Ge++)ne[Ge]=ge[Ge];return ne}if(Yo(T)||Object.getPrototypeOf(T)===Set.prototype){if(M.exportMapsAsObjects===!1){var Ht=ji($,T,new Set,M);return T.forEach(function(pr){Ht.add(Ti(pr,M,$))}),Ht}var bn=ji($,T,[],M);return T.forEach(function(pr){bn.push(Ti(pr,M,$))}),bn}if(Vo(T)||Object.getPrototypeOf(T)===Map.prototype){if(M.exportMapsAsObjects===!1){var yr=ji($,T,new Map,M);return T.forEach(function(pr,Dr){yr.set(Dr,Ti(pr,M,$))}),yr}var ln=ji($,T,{},M);return T.forEach(function(pr,Dr){ln[Dr]=Ti(pr,M,$)}),ln}var Wr=ji($,T,{},M);return q(T).forEach(function(pr){Wr[pr]=Ti(T[pr],M,$)}),Wr}function Mc(T,M){var $;return typeof M=="boolean"&&(M={detectCycles:M}),M||(M=Vf),M.detectCycles=M.detectCycles===void 0?M.recurseEverything===!0:M.detectCycles===!0,M.detectCycles&&($=new Map),Ti(T,M,$)}function Fr(T){switch(T.length){case 0:return Pn.trackingDerivation;case 1:return oa(T[0]);case 2:return oa(T[0],T[1])}}function oi(T,M){M===void 0&&(M=void 0),qi();try{return T.apply(M)}finally{ta()}}function As(T,M,$){return arguments.length===1||M&&typeof M=="object"?Pc(T,M):Wf(T,M,$||{})}function Wf(T,M,$){var ne;typeof $.timeout=="number"&&(ne=setTimeout(function(){if(!Ge[G].isDisposed){Ge();var pt=new Error("WHEN_TIMEOUT");if(!$.onError)throw pt;$.onError(pt)}},$.timeout)),$.name=$.name||"When@"+g();var ge=Go($.name+"-effect",M),Ge=xc(function(pt){T()&&(pt.dispose(),ne&&clearTimeout(ne),ge())},$);return Ge}function Pc(T,M){var $,ne=new Promise(function(ge,Ge){var pt=Wf(T,ge,re(re({},M),{onError:Ge}));$=function(){pt(),Ge("WHEN_CANCELLED")}});return ne.cancel=$,ne}function Ts(T){return T[G]}function Ga(T){return typeof T=="string"||typeof T=="number"||typeof T=="symbol"}var Ci={has:function(T,M){if(M===G||M==="constructor"||M===he)return!0;var $=Ts(T);return Ga(M)?$.has(M):M in T},get:function(T,M){if(M===G||M==="constructor"||M===he)return T[M];var $=Ts(T),ne=$.values.get(M);if(ne instanceof C){var ge=ne.get();return ge===void 0&&$.has(M),ge}return Ga(M)&&$.has(M),T[M]},set:function(T,M,$){return!!Ga(M)&&(Ri(T,M,$),!0)},deleteProperty:function(T,M){return!!Ga(M)&&(Ts(T).remove(M),!0)},ownKeys:function(T){return Ts(T).keysAtom.reportObserved(),Reflect.ownKeys(T)},preventExtensions:function(T){return _("Dynamic observable objects cannot be frozen"),!1}};function su(T){var M=new Proxy(T,Ci);return T[G].proxy=M,M}function Ki(T){return T.interceptors!==void 0&&T.interceptors.length>0}function ha(T,M){var $=T.interceptors||(T.interceptors=[]);return $.push(M),O(function(){var ne=$.indexOf(M);ne!==-1&&$.splice(ne,1)})}function Mr(T,M){var $=je();try{for(var ne=Te(T.interceptors||[]),ge=0,Ge=ne.length;ge<Ge&&(w(!(M=ne[ge](M))||M.type,"Intercept handlers should return nothing or a change object"),M);ge++);return M}finally{ot($)}}function Di(T){return T.changeListeners!==void 0&&T.changeListeners.length>0}function Pa(T,M){var $=T.changeListeners||(T.changeListeners=[]);return $.push(M),O(function(){var ne=$.indexOf(M);ne!==-1&&$.splice(ne,1)})}function fi(T,M){var $=je(),ne=T.changeListeners;if(ne){for(var ge=0,Ge=(ne=ne.slice()).length;ge<Ge;ge++)ne[ge](M);ot($)}}var cu={get:function(T,M){return M===G?T[G]:M==="length"?T[G].getArrayLength():typeof M=="number"?uo.get.call(T,M):typeof M!="string"||isNaN(M)?uo.hasOwnProperty(M)?uo[M]:T[M]:uo.get.call(T,parseInt(M))},set:function(T,M,$){return M==="length"&&T[G].setArrayLength($),typeof M=="number"&&uo.set.call(T,M,$),typeof M=="symbol"||isNaN(M)?T[M]=$:uo.set.call(T,parseInt(M),$),!0},preventExtensions:function(T){return _("Observable arrays cannot be frozen"),!1}};function Dl(T,M,$,ne){$===void 0&&($="ObservableArray@"+g()),ne===void 0&&(ne=!1);var ge,Ge,pt,Ht=new ka($,M,ne);ge=Ht.values,Ge=G,pt=Ht,Object.defineProperty(ge,Ge,{enumerable:!1,writable:!1,configurable:!0,value:pt});var bn=new Proxy(Ht.values,cu);if(Ht.proxy=bn,T&&T.length){var yr=ir(!0);Ht.spliceWithArray(0,0,T),Kr(yr)}return bn}var ka=function(){function T(M,$,ne){this.owned=ne,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new C(M||"ObservableArray@"+g()),this.enhancer=function(ge,Ge){return $(ge,Ge,M+"[..]")}}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.dehanceValues=function(M){return this.dehancer!==void 0&&M.length>0?M.map(this.dehancer):M},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.observe=function(M,$){return $===void 0&&($=!1),$&&M({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Pa(this,M)},T.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},T.prototype.setArrayLength=function(M){if(typeof M!="number"||M<0)throw new Error("[mobx.array] Out of range: "+M);var $=this.values.length;if(M!==$)if(M>$){for(var ne=new Array(M-$),ge=0;ge<M-$;ge++)ne[ge]=void 0;this.spliceWithArray($,0,ne)}else this.spliceWithArray(M,$-M)},T.prototype.updateArrayLength=function(M,$){if(M!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=$},T.prototype.spliceWithArray=function(M,$,ne){var ge=this;Dn(this.atom);var Ge=this.values.length;if(M===void 0?M=0:M>Ge?M=Ge:M<0&&(M=Math.max(0,Ge+M)),$=arguments.length===1?Ge-M:$==null?0:Math.max(0,Math.min($,Ge-M)),ne===void 0&&(ne=v),Ki(this)){var pt=Mr(this,{object:this.proxy,type:"splice",index:M,removedCount:$,added:ne});if(!pt)return v;$=pt.removedCount,ne=pt.added}ne=ne.length===0?ne:ne.map(function(bn){return ge.enhancer(bn,void 0)});var Ht=this.spliceItemsIntoValues(M,$,ne);return $===0&&ne.length===0||this.notifyArraySplice(M,ne,Ht),this.dehanceValues(Ht)},T.prototype.spliceItemsIntoValues=function(M,$,ne){var ge;if(ne.length<1e4)return(ge=this.values).splice.apply(ge,Te([M,$],ne));var Ge=this.values.slice(M,M+$);return this.values=this.values.slice(0,M).concat(ne,this.values.slice(M+$)),Ge},T.prototype.notifyArrayChildUpdate=function(M,$,ne){var ge=!this.owned&&!1,Ge=Di(this),pt=Ge||ge?{object:this.proxy,type:"update",index:M,newValue:$,oldValue:ne}:null;this.atom.reportChanged(),Ge&&fi(this,pt)},T.prototype.notifyArraySplice=function(M,$,ne){var ge=!this.owned&&!1,Ge=Di(this),pt=Ge||ge?{object:this.proxy,type:"splice",index:M,removed:ne,added:$,removedCount:ne.length,addedCount:$.length}:null;this.atom.reportChanged(),Ge&&fi(this,pt)},T}(),uo={intercept:function(T){return this[G].intercept(T)},observe:function(T,M){return M===void 0&&(M=!1),this[G].observe(T,M)},clear:function(){return this.splice(0)},replace:function(T){var M=this[G];return M.spliceWithArray(0,M.values.length,T)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(T,M){for(var $=[],ne=2;ne<arguments.length;ne++)$[ne-2]=arguments[ne];var ge=this[G];switch(arguments.length){case 0:return[];case 1:return ge.spliceWithArray(T);case 2:return ge.spliceWithArray(T,M)}return ge.spliceWithArray(T,M,$)},spliceWithArray:function(T,M,$){return this[G].spliceWithArray(T,M,$)},push:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var $=this[G];return $.spliceWithArray($.values.length,0,T),$.values.length},pop:function(){return this.splice(Math.max(this[G].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var $=this[G];return $.spliceWithArray(0,0,T),$.values.length},reverse:function(){var T=this.slice();return T.reverse.apply(T,arguments)},sort:function(T){var M=this.slice();return M.sort.apply(M,arguments)},remove:function(T){var M=this[G],$=M.dehanceValues(M.values).indexOf(T);return $>-1&&(this.splice($,1),!0)},get:function(T){var M=this[G];if(M&&T<M.values.length)return M.atom.reportObserved(),M.dehanceValue(M.values[T])},set:function(T,M){var $=this[G],ne=$.values;if(T<ne.length){Dn($.atom);var ge=ne[T];if(Ki($)){var Ge=Mr($,{type:"update",object:$.proxy,index:T,newValue:M});if(!Ge)return;M=Ge.newValue}(M=$.enhancer(M,ge))!==ge&&(ne[T]=M,$.notifyArrayChildUpdate(T,M,ge))}else{if(T!==ne.length)throw new Error("[mobx.array] Index out of bounds, "+T+" is larger than "+ne.length);$.spliceWithArray(T,0,[M])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(T){typeof Array.prototype[T]=="function"&&(uo[T]=function(){var M=this[G];M.atom.reportObserved();var $=M.dehanceValues(M.values);return $[T].apply($,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(T){typeof Array.prototype[T]=="function"&&(uo[T]=function(M,$){var ne=this,ge=this[G];return ge.atom.reportObserved(),ge.dehanceValues(ge.values)[T](function(Ge,pt){return M.call($,Ge,pt,ne)},$)})}),["reduce","reduceRight"].forEach(function(T){uo[T]=function(){var M=this,$=this[G];$.atom.reportObserved();var ne=arguments[0];return arguments[0]=function(ge,Ge,pt){return Ge=$.dehanceValue(Ge),ne(ge,Ge,pt,M)},$.values[T].apply($.values,arguments)}});var Hu,Va=D("ObservableArrayAdministration",ka);function va(T){return P(T)&&Va(T[G])}var kc,Wd={},Nc=function(){function T(M,$,ne){if($===void 0&&($=yt),ne===void 0&&(ne="ObservableMap@"+g()),this.enhancer=$,this.name=ne,this[Hu]=Wd,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(M)}return T.prototype._has=function(M){return this._data.has(M)},T.prototype.has=function(M){var $=this;if(!Pn.trackingDerivation)return this._has(M);var ne=this._hasMap.get(M);if(!ne){var ge=ne=new Rr(this._has(M),Yt,this.name+"."+Z(M)+"?",!1);this._hasMap.set(M,ge),Vr(ge,function(){return $._hasMap.delete(M)})}return ne.get()},T.prototype.set=function(M,$){var ne=this._has(M);if(Ki(this)){var ge=Mr(this,{type:ne?"update":"add",object:this,newValue:$,name:M});if(!ge)return this;$=ge.newValue}return ne?this._updateValue(M,$):this._addValue(M,$),this},T.prototype.delete=function(M){var $=this;if(Dn(this._keysAtom),Ki(this)&&!(ge=Mr(this,{type:"delete",object:this,name:M})))return!1;if(this._has(M)){var ne=Di(this),ge=ne?{type:"delete",object:this,oldValue:this._data.get(M).value,name:M}:null;return oi(function(){$._keysAtom.reportChanged(),$._updateHasMapEntry(M,!1),$._data.get(M).setNewValue(void 0),$._data.delete(M)}),ne&&fi(this,ge),!0}return!1},T.prototype._updateHasMapEntry=function(M,$){var ne=this._hasMap.get(M);ne&&ne.setNewValue($)},T.prototype._updateValue=function(M,$){var ne=this._data.get(M);if(($=ne.prepareNewValue($))!==Pn.UNCHANGED){var ge=Di(this),Ge=ge?{type:"update",object:this,oldValue:ne.value,name:M,newValue:$}:null;ne.setNewValue($),ge&&fi(this,Ge)}},T.prototype._addValue=function(M,$){var ne=this;Dn(this._keysAtom),oi(function(){var pt=new Rr($,ne.enhancer,ne.name+"."+Z(M),!1);ne._data.set(M,pt),$=pt.value,ne._updateHasMapEntry(M,!0),ne._keysAtom.reportChanged()});var ge=Di(this),Ge=ge?{type:"add",object:this,name:M,newValue:$}:null;ge&&fi(this,Ge)},T.prototype.get=function(M){return this.has(M)?this.dehanceValue(this._data.get(M).get()):this.dehanceValue(void 0)},T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},T.prototype.values=function(){var M=this,$=this.keys();return Pr({next:function(){var ne=$.next(),ge=ne.done,Ge=ne.value;return{done:ge,value:ge?void 0:M.get(Ge)}}})},T.prototype.entries=function(){var M=this,$=this.keys();return Pr({next:function(){var ne=$.next(),ge=ne.done,Ge=ne.value;return{done:ge,value:ge?void 0:[Ge,M.get(Ge)]}}})},T.prototype[Hu=G,Symbol.iterator]=function(){return this.entries()},T.prototype.forEach=function(M,$){var ne,ge;try{for(var Ge=fe(this),pt=Ge.next();!pt.done;pt=Ge.next()){var Ht=Se(pt.value,2),bn=Ht[0],yr=Ht[1];M.call($,yr,bn,this)}}catch(ln){ne={error:ln}}finally{try{pt&&!pt.done&&(ge=Ge.return)&&ge.call(Ge)}finally{if(ne)throw ne.error}}},T.prototype.merge=function(M){var $=this;return Vo(M)&&(M=M.toJS()),oi(function(){var ne=ir(!0);try{A(M)?q(M).forEach(function(ge){return $.set(ge,M[ge])}):Array.isArray(M)?M.forEach(function(ge){var Ge=Se(ge,2),pt=Ge[0],Ht=Ge[1];return $.set(pt,Ht)}):N(M)?(M.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+M.constructor.name),M.forEach(function(ge,Ge){return $.set(Ge,ge)})):M!=null&&_("Cannot initialize map from "+M)}finally{Kr(ne)}}),this},T.prototype.clear=function(){var M=this;oi(function(){He(function(){var $,ne;try{for(var ge=fe(M.keys()),Ge=ge.next();!Ge.done;Ge=ge.next()){var pt=Ge.value;M.delete(pt)}}catch(Ht){$={error:Ht}}finally{try{Ge&&!Ge.done&&(ne=ge.return)&&ne.call(ge)}finally{if($)throw $.error}}})})},T.prototype.replace=function(M){var $=this;return oi(function(){var ne,ge,Ge,pt,Ht=function(qo){if(N(qo)||Vo(qo))return qo;if(Array.isArray(qo))return new Map(qo);if(A(qo)){var Fl=new Map;for(var vl in qo)Fl.set(vl,qo[vl]);return Fl}return _("Cannot convert to map from '"+qo+"'")}(M),bn=new Map,yr=!1;try{for(var ln=fe($._data.keys()),Wr=ln.next();!Wr.done;Wr=ln.next()){var pr=Wr.value;if(!Ht.has(pr))if($.delete(pr))yr=!0;else{var Dr=$._data.get(pr);bn.set(pr,Dr)}}}catch(qo){ne={error:qo}}finally{try{Wr&&!Wr.done&&(ge=ln.return)&&ge.call(ln)}finally{if(ne)throw ne.error}}try{for(var ia=fe(Ht.entries()),_o=ia.next();!_o.done;_o=ia.next()){var Ji=Se(_o.value,2),pl=(pr=Ji[0],Dr=Ji[1],$._data.has(pr));if($.set(pr,Dr),$._data.has(pr)){var hl=$._data.get(pr);bn.set(pr,hl),pl||(yr=!0)}}}catch(qo){Ge={error:qo}}finally{try{_o&&!_o.done&&(pt=ia.return)&&pt.call(ia)}finally{if(Ge)throw Ge.error}}if(!yr)if($._data.size!==bn.size)$._keysAtom.reportChanged();else for(var Ll=$._data.keys(),fu=bn.keys(),za=Ll.next(),du=fu.next();!za.done;){if(za.value!==du.value){$._keysAtom.reportChanged();break}za=Ll.next(),du=fu.next()}$._data=bn}),this},Object.defineProperty(T.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.toPOJO=function(){var M,$,ne={};try{for(var ge=fe(this),Ge=ge.next();!Ge.done;Ge=ge.next()){var pt=Se(Ge.value,2),Ht=pt[0],bn=pt[1];ne[typeof Ht=="symbol"?Ht:Z(Ht)]=bn}}catch(yr){M={error:yr}}finally{try{Ge&&!Ge.done&&($=ge.return)&&$.call(ge)}finally{if(M)throw M.error}}return ne},T.prototype.toJS=function(){return new Map(this)},T.prototype.toJSON=function(){return this.toPOJO()},T.prototype.toString=function(){var M=this;return this.name+"[{ "+Array.from(this.keys()).map(function($){return Z($)+": "+M.get($)}).join(", ")+" }]"},T.prototype.observe=function(M,$){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T}(),Vo=D("ObservableMap",Nc),Il={},Wa=function(){function T(M,$,ne){if($===void 0&&($=yt),ne===void 0&&(ne="ObservableSet@"+g()),this.name=ne,this[kc]=Il,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(ge,Ge){return $(ge,Ge,ne)},M&&this.replace(M)}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.clear=function(){var M=this;oi(function(){He(function(){var $,ne;try{for(var ge=fe(M._data.values()),Ge=ge.next();!Ge.done;Ge=ge.next()){var pt=Ge.value;M.delete(pt)}}catch(Ht){$={error:Ht}}finally{try{Ge&&!Ge.done&&(ne=ge.return)&&ne.call(ge)}finally{if($)throw $.error}}})})},T.prototype.forEach=function(M,$){var ne,ge;try{for(var Ge=fe(this),pt=Ge.next();!pt.done;pt=Ge.next()){var Ht=pt.value;M.call($,Ht,Ht,this)}}catch(bn){ne={error:bn}}finally{try{pt&&!pt.done&&(ge=Ge.return)&&ge.call(Ge)}finally{if(ne)throw ne.error}}},Object.defineProperty(T.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.add=function(M){var $=this;if(Dn(this._atom),Ki(this)&&!(ge=Mr(this,{type:"add",object:this,newValue:M})))return this;if(!this.has(M)){oi(function(){$._data.add($.enhancer(M,void 0)),$._atom.reportChanged()});var ne=Di(this),ge=ne?{type:"add",object:this,newValue:M}:null;ne&&fi(this,ge)}return this},T.prototype.delete=function(M){var $=this;if(Ki(this)&&!(ge=Mr(this,{type:"delete",object:this,oldValue:M})))return!1;if(this.has(M)){var ne=Di(this),ge=ne?{type:"delete",object:this,oldValue:M}:null;return oi(function(){$._atom.reportChanged(),$._data.delete(M)}),ne&&fi(this,ge),!0}return!1},T.prototype.has=function(M){return this._atom.reportObserved(),this._data.has(this.dehanceValue(M))},T.prototype.entries=function(){var M=0,$=Array.from(this.keys()),ne=Array.from(this.values());return Pr({next:function(){var ge=M;return M+=1,ge<ne.length?{value:[$[ge],ne[ge]],done:!1}:{done:!0}}})},T.prototype.keys=function(){return this.values()},T.prototype.values=function(){this._atom.reportObserved();var M=this,$=0,ne=Array.from(this._data.values());return Pr({next:function(){return $<ne.length?{value:M.dehanceValue(ne[$++]),done:!1}:{done:!0}}})},T.prototype.replace=function(M){var $=this;return Yo(M)&&(M=M.toJS()),oi(function(){var ne=ir(!0);try{Array.isArray(M)||B(M)?($.clear(),M.forEach(function(ge){return $.add(ge)})):M!=null&&_("Cannot initialize set from "+M)}finally{Kr(ne)}}),this},T.prototype.observe=function(M,$){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.toJS=function(){return new Set(this)},T.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},T.prototype[kc=G,Symbol.iterator]=function(){return this.values()},T}(),Yo=D("ObservableSet",Wa),Rc=function(){function T(M,$,ne,ge){$===void 0&&($=new Map),this.target=M,this.values=$,this.name=ne,this.defaultEnhancer=ge,this.keysAtom=new C(ne+".keys")}return T.prototype.read=function(M){return this.values.get(M).get()},T.prototype.write=function(M,$){var ne=this.target,ge=this.values.get(M);if(ge instanceof Ua)ge.set($);else{if(Ki(this)){if(!(pt=Mr(this,{type:"update",object:this.proxy||ne,name:M,newValue:$})))return;$=pt.newValue}if(($=ge.prepareNewValue($))!==Pn.UNCHANGED){var Ge=Di(this),pt=Ge?{type:"update",object:this.proxy||ne,oldValue:ge.value,name:M,newValue:$}:null;ge.setNewValue($),Ge&&fi(this,pt)}}},T.prototype.has=function(M){var $=this.pendingKeys||(this.pendingKeys=new Map),ne=$.get(M);if(ne)return ne.get();var ge=!!this.values.get(M);return ne=new Rr(ge,Yt,this.name+"."+Z(M)+"?",!1),$.set(M,ne),ne.get()},T.prototype.addObservableProp=function(M,$,ne){ne===void 0&&(ne=this.defaultEnhancer);var ge=this.target;if(Ki(this)){var Ge=Mr(this,{object:this.proxy||ge,name:M,type:"add",newValue:$});if(!Ge)return;$=Ge.newValue}var pt=new Rr($,ne,this.name+"."+Z(M),!1);this.values.set(M,pt),$=pt.value,Object.defineProperty(ge,M,function(Ht){return ya[Ht]||(ya[Ht]={configurable:!0,enumerable:!0,get:function(){return this[G].read(Ht)},set:function(bn){this[G].write(Ht,bn)}})}(M)),this.notifyPropertyAddition(M,$)},T.prototype.addComputedProp=function(M,$,ne){var ge,Ge,pt,Ht=this.target;ne.name=ne.name||this.name+"."+Z($),this.values.set($,new Ua(ne)),(M===Ht||(ge=M,Ge=$,!(pt=Object.getOwnPropertyDescriptor(ge,Ge))||pt.configurable!==!1&&pt.writable!==!1))&&Object.defineProperty(M,$,function(bn){return Ms[bn]||(Ms[bn]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Ii(this).read(bn)},set:function(yr){Ii(this).write(bn,yr)}})}($))},T.prototype.remove=function(M){if(this.values.has(M)){var $=this.target;if(Ki(this)&&!(bn=Mr(this,{object:this.proxy||$,name:M,type:"remove"})))return;try{qi();var ne=Di(this),ge=!1,Ge=this.values.get(M),pt=Ge&&Ge.get();if(Ge&&Ge.set(void 0),this.keysAtom.reportChanged(),this.values.delete(M),this.pendingKeys){var Ht=this.pendingKeys.get(M);Ht&&Ht.set(!1)}delete this.target[M];var bn=ne?{type:"remove",object:this.proxy||$,oldValue:pt,name:M}:null;ne&&fi(this,bn)}finally{ta()}}},T.prototype.illegalAccess=function(M,$){},T.prototype.observe=function(M,$){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.notifyPropertyAddition=function(M,$){var ne=Di(this),ge=ne?{type:"add",object:this.proxy||this.target,name:M,newValue:$}:null;if(ne&&fi(this,ge),this.pendingKeys){var Ge=this.pendingKeys.get(M);Ge&&Ge.set(!0)}this.keysAtom.reportChanged()},T.prototype.getKeys=function(){var M,$;this.keysAtom.reportObserved();var ne=[];try{for(var ge=fe(this.values),Ge=ge.next();!Ge.done;Ge=ge.next()){var pt=Se(Ge.value,2),Ht=pt[0];pt[1]instanceof Rr&&ne.push(Ht)}}catch(bn){M={error:bn}}finally{try{Ge&&!Ge.done&&($=ge.return)&&$.call(ge)}finally{if(M)throw M.error}}return ne},T}();function ra(T,M,$){if(M===void 0&&(M=""),$===void 0&&($=yt),Object.prototype.hasOwnProperty.call(T,G))return T[G];A(T)||(M=(T.constructor.name||"ObservableObject")+"@"+g()),M||(M="ObservableObject@"+g());var ne=new Rc(T,new Map,Z(M),$);return R(T,G,ne),ne}var ya=Object.create(null),Ms=Object.create(null);function Ii(T){var M=T[G];return M||(rt(T),T[G])}var Zi=D("ObservableObjectAdministration",Rc);function ii(T){return!!P(T)&&(rt(T),Zi(T[G]))}function oa(T,M){if(typeof T=="object"&&T!==null){if(va(T))return M!==void 0&&_(!1),T[G].atom;if(Yo(T))return T[G];if(Vo(T)){var $=T;return M===void 0?$._keysAtom:((ne=$._data.get(M)||$._hasMap.get(M))||_(!1),ne)}var ne;if(rt(T),M&&!T[G]&&T[M],ii(T))return M?((ne=T[G].values.get(M))||_(!1),ne):_(!1);if(W(T)||fl(T)||zu(T))return T}else if(typeof T=="function"&&zu(T[G]))return T[G];return _(!1)}function Mi(T,M){return T||_("Expecting some object"),M!==void 0?Mi(oa(T,M)):W(T)||fl(T)||zu(T)||Vo(T)||Yo(T)?T:(rt(T),T[G]?T[G]:void _(!1))}var at=Object.prototype.toString;function Ct(T,M,$){return $===void 0&&($=-1),Ft(T,M,$)}function Ft(T,M,$,ne,ge){if(T===M)return T!==0||1/T==1/M;if(T==null||M==null)return!1;if(T!=T)return M!=M;var Ge=typeof T;if(Ge!=="function"&&Ge!=="object"&&typeof M!="object")return!1;var pt=at.call(T);if(pt!==at.call(M))return!1;switch(pt){case"[object RegExp]":case"[object String]":return""+T==""+M;case"[object Number]":return+T!=+T?+M!=+M:+T==0?1/+T==1/M:+T==+M;case"[object Date]":case"[object Boolean]":return+T==+M;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(T)===Symbol.valueOf.call(M);case"[object Map]":case"[object Set]":$>=0&&$++}T=fn(T),M=fn(M);var Ht=pt==="[object Array]";if(!Ht){if(typeof T!="object"||typeof M!="object")return!1;var bn=T.constructor,yr=M.constructor;if(bn!==yr&&!(typeof bn=="function"&&bn instanceof bn&&typeof yr=="function"&&yr instanceof yr)&&"constructor"in T&&"constructor"in M)return!1}if($===0)return!1;$<0&&($=-1),ge=ge||[];for(var ln=(ne=ne||[]).length;ln--;)if(ne[ln]===T)return ge[ln]===M;if(ne.push(T),ge.push(M),Ht){if((ln=T.length)!==M.length)return!1;for(;ln--;)if(!Ft(T[ln],M[ln],$-1,ne,ge))return!1}else{var Wr=Object.keys(T),pr=void 0;if(ln=Wr.length,Object.keys(M).length!==ln)return!1;for(;ln--;)if(!ur(M,pr=Wr[ln])||!Ft(T[pr],M[pr],$-1,ne,ge))return!1}return ne.pop(),ge.pop(),!0}function fn(T){return va(T)?T.slice():N(T)||Vo(T)||B(T)||Yo(T)?Array.from(T.entries()):T}function ur(T,M){return Object.prototype.hasOwnProperty.call(T,M)}function Pr(T){return T[Symbol.iterator]=so,T}function so(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:wc,extras:{getDebugName:function(T,M){return(M!==void 0?oa(T,M):ii(T)||Vo(T)||Yo(T)?Mi(T):oa(T)).name}},$mobx:G})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),v=r(80),h=r(58),g=r(116),_="Array Iterator",w=h.set,O=h.getterFor(_);n.exports=g(Array,"Array",function(S,P){w(this,{type:_,target:s(S),index:0,kind:P})},function(){var S=O(this),P=S.target,A=S.kind,R=S.index++;return!P||R>=P.length?(S.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:R,done:!1}:A=="values"?{value:P[R],done:!1}:{value:[R,P[R]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),v=r(46),h=r(76),g=r(34),_=r(15),w=r(71),O=r(36),S=r(108),P=r(18),A=r(35),R=r(96),D=r(30),N=r(33),B=r(54),q=r(87),Z=r(32),Y=r(40),te=r(41),G=r(86),C=r(39),W=r(69),K=r(60),z=r(77),H=r(74),re=r(139),fe=r(112),Se=r(50),Te=r(38),he=r(84),_e=r(98),De=r(42),Ve=r(89),vt=r(93),rt=r(72),gt=r(90),Nt=r(28),yt=r(140),Yt=r(141),Ce=r(78),we=r(58),ke=r(79).forEach,dt=vt("hidden"),zt="Symbol",Ot=Nt("toPrimitive"),rn=we.set,yn=we.getterFor(zt),Tn=Object.prototype,pn=c.Symbol,st=pn&&pn.prototype,xn=c.TypeError,Fe=c.QObject,mn=v("JSON","stringify"),Kn=Se.f,oe=Te.f,$n=re.f,Sr=he.f,Gr=_([].push),eo=Ve("symbols"),Dn=Ve("op-symbols"),Ro=Ve("string-to-symbol-registry"),xe=Ve("symbol-to-string-registry"),He=Ve("wks"),je=!Fe||!Fe.prototype||!Fe.prototype.findChild,ot=O&&P(function(){return K(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a!=7})?function(Sn,Bn,Xn){var ir=Kn(Tn,Bn);ir&&delete Tn[Bn],oe(Sn,Bn,Xn),ir&&Sn!==Tn&&oe(Tn,Bn,ir)}:oe,en=function(Sn,Bn){var Xn=eo[Sn]=K(st);return rn(Xn,{type:zt,tag:Sn,description:Bn}),O||(Xn.description=Bn),Xn},qt=function(Sn,Bn,Xn){Sn===Tn&&qt(Dn,Bn,Xn),Z(Sn);var ir=G(Bn);return Z(Xn),A(eo,ir)?(Xn.enumerable?(A(Sn,dt)&&Sn[dt][ir]&&(Sn[dt][ir]=!1),Xn=K(Xn,{enumerable:W(0,!1)})):(A(Sn,dt)||oe(Sn,dt,W(1,{})),Sn[dt][ir]=!0),ot(Sn,ir,Xn)):oe(Sn,ir,Xn)},kn=function(Sn,Bn){Z(Sn);var Xn=te(Bn),ir=z(Xn).concat(Go(Xn));return ke(ir,function(Kr){O&&!g(wr,Xn,Kr)||qt(Sn,Kr,Xn[Kr])}),Sn},wr=function(Sn){var Bn=G(Sn),Xn=g(Sr,this,Bn);return!(this===Tn&&A(eo,Bn)&&!A(Dn,Bn))&&(!(Xn||!A(this,Bn)||!A(eo,Bn)||A(this,dt)&&this[dt][Bn])||Xn)},ni=function(Sn,Bn){var Xn=te(Sn),ir=G(Bn);if(Xn!==Tn||!A(eo,ir)||A(Dn,ir)){var Kr=Kn(Xn,ir);return!Kr||!A(eo,ir)||A(Xn,dt)&&Xn[dt][ir]||(Kr.enumerable=!0),Kr}},yi=function(Sn){var Bn=$n(te(Sn)),Xn=[];return ke(Bn,function(ir){A(eo,ir)||A(rt,ir)||Gr(Xn,ir)}),Xn},Go=function(Sn){var Bn=Sn===Tn,Xn=$n(Bn?Dn:te(Sn)),ir=[];return ke(Xn,function(Kr){!A(eo,Kr)||Bn&&!A(Tn,Kr)||Gr(ir,eo[Kr])}),ir};if(S||(pn=function(){if(B(st,this))throw xn("Symbol is not a constructor");var Sn=arguments.length&&arguments[0]!==void 0?C(arguments[0]):void 0,Bn=gt(Sn),Xn=function(ir){this===Tn&&g(Xn,Dn,ir),A(this,dt)&&A(this[dt],Bn)&&(this[dt][Bn]=!1),ot(this,Bn,W(1,ir))};return O&&je&&ot(Tn,Bn,{configurable:!0,set:Xn}),en(Bn,Sn)},De(st=pn.prototype,"toString",function(){return yn(this).tag}),De(pn,"withoutSetter",function(Sn){return en(gt(Sn),Sn)}),he.f=wr,Te.f=qt,Se.f=ni,H.f=re.f=yi,fe.f=Go,yt.f=function(Sn){return en(Nt(Sn),Sn)},O&&(oe(st,"description",{configurable:!0,get:function(){return yn(this).description}}),w||De(Tn,"propertyIsEnumerable",wr,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:pn}),ke(z(He),function(Sn){Yt(Sn)}),s({target:zt,stat:!0,forced:!S},{for:function(Sn){var Bn=C(Sn);if(A(Ro,Bn))return Ro[Bn];var Xn=pn(Bn);return Ro[Bn]=Xn,xe[Xn]=Bn,Xn},keyFor:function(Sn){if(!q(Sn))throw xn(Sn+" is not a symbol");if(A(xe,Sn))return xe[Sn]},useSetter:function(){je=!0},useSimple:function(){je=!1}}),s({target:"Object",stat:!0,forced:!S,sham:!O},{create:function(Sn,Bn){return Bn===void 0?K(Sn):kn(K(Sn),Bn)},defineProperty:qt,defineProperties:kn,getOwnPropertyDescriptor:ni}),s({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:yi,getOwnPropertySymbols:Go}),s({target:"Object",stat:!0,forced:P(function(){fe.f(1)})},{getOwnPropertySymbols:function(Sn){return fe.f(Y(Sn))}}),mn&&s({target:"JSON",stat:!0,forced:!S||P(function(){var Sn=pn();return mn([Sn])!="[null]"||mn({a:Sn})!="{}"||mn(Object(Sn))!="{}"})},{stringify:function(Sn,Bn,Xn){var ir=_e(arguments),Kr=Bn;if((N(Bn)||Sn!==void 0)&&!q(Sn))return R(Bn)||(Bn=function(Rr,cl){if(D(Kr)&&(cl=g(Kr,this,Rr,cl)),!q(cl))return cl}),ir[1]=Bn,h(mn,null,ir)}}),!st[Ot]){var Xo=st.valueOf;De(st,Ot,function(Sn){return g(Xo,this)})}Ce(pn,zt),rt[dt]=!0},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(3),g=r(57),_=r(28),w=_("iterator"),O=_("toStringTag"),S=h.values,P=function(R,D){if(R){if(R[w]!==S)try{g(R,w,S)}catch{R[w]=S}if(R[O]||g(R,O,D),c[D]){for(var N in h)if(R[N]!==h[N])try{g(R,N,h[N])}catch{R[N]=h[N]}}}};for(var A in c)P(s[A]&&s[A].prototype,A);P(v,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),v=r(58),h=r(116),g="String Iterator",_=v.set,w=v.getterFor(g);h(String,"String",function(O){_(this,{type:g,string:c(O),index:0})},function(){var O,S=w(this),P=S.string,A=S.index;return A>=P.length?{value:void 0,done:!0}:(O=s(P,A),S.index+=O.length,{value:O,done:!1})})},function(n,o,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),v=r(7),h=r(15),g=r(35),_=r(30),w=r(54),O=r(39),S=r(38).f,P=r(134),A=v.Symbol,R=A&&A.prototype;if(c&&_(A)&&(!("description"in R)||A().description!==void 0)){var D={},N=function(){var C=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),W=w(R,this)?new A(C):C===void 0?A():A(C);return C===""&&(D[W]=!0),W};P(N,A),N.prototype=R,R.constructor=N;var B=String(A("test"))=="Symbol(test)",q=h(R.toString),Z=h(R.valueOf),Y=/^Symbol\((.*)\)[^)]+$/,te=h("".replace),G=h("".slice);S(R,"description",{configurable:!0,get:function(){var C=Z(this),W=q(C);if(g(D,C))return"";var K=B?G(W,7,-1):te(W,Y,"$1");return K===""?void 0:K}}),s({global:!0,forced:!0},{Symbol:N})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return h.a}),r.d(o,"c",function(){return h.e}),r.d(o,"h",function(){return Y}),r.d(o,"i",function(){return B}),r.d(o,"j",function(){return D}),r.d(o,"b",function(){return Se}),r.d(o,"e",function(){return De}),r.d(o,"f",function(){return Te}),r.d(o,"g",function(){return eo});var s,c,v,h=r(0),g=0,_=[],w=h.i.__b,O=h.i.__r,S=h.i.diffed,P=h.i.__c,A=h.i.unmount;function R(xe,He){h.i.__h&&h.i.__h(c,xe,g||He),g=0;var je=c.__H||(c.__H={__:[],__h:[]});return xe>=je.__.length&&je.__.push({}),je.__[xe]}function D(xe){return g=1,N(H,xe)}function N(xe,He,je){var ot=R(s++,2);return ot.t=xe,ot.__c||(ot.__=[je?je(He):H(void 0,He),function(en){var qt=ot.t(ot.__[0],en);ot.__[0]!==qt&&(ot.__=[qt,ot.__[1]],ot.__c.setState({}))}],ot.__c=c),ot.__}function B(xe,He){var je=R(s++,3);!h.i.__s&&z(je.__H,He)&&(je.__=xe,je.__H=He,c.__H.__h.push(je))}function q(xe,He){var je=R(s++,4);!h.i.__s&&z(je.__H,He)&&(je.__=xe,je.__H=He,c.__h.push(je))}function Z(xe,He){var je=R(s++,7);return z(je.__H,He)&&(je.__=xe(),je.__H=He,je.__h=xe),je.__}function Y(xe,He){return g=8,Z(function(){return xe},He)}function te(){var xe;for(_.sort(function(He,je){return He.__v.__b-je.__v.__b});xe=_.pop();)if(xe.__P)try{xe.__H.__h.forEach(W),xe.__H.__h.forEach(K),xe.__H.__h=[]}catch(He){xe.__H.__h=[],h.i.__e(He,xe.__v)}}h.i.__b=function(xe){c=null,w&&w(xe)},h.i.__r=function(xe){O&&O(xe),s=0;var He=(c=xe.__c).__H;He&&(He.__h.forEach(W),He.__h.forEach(K),He.__h=[])},h.i.diffed=function(xe){S&&S(xe);var He=xe.__c;He&&He.__H&&He.__H.__h.length&&(_.push(He)!==1&&v===h.i.requestAnimationFrame||((v=h.i.requestAnimationFrame)||C)(te)),c=null},h.i.__c=function(xe,He){He.some(function(je){try{je.__h.forEach(W),je.__h=je.__h.filter(function(ot){return!ot.__||K(ot)})}catch(ot){He.some(function(en){en.__h&&(en.__h=[])}),He=[],h.i.__e(ot,je.__v)}}),P&&P(xe,He)},h.i.unmount=function(xe){A&&A(xe);var He,je=xe.__c;je&&je.__H&&(je.__H.__.forEach(function(ot){try{W(ot)}catch(en){He=en}}),He&&h.i.__e(He,je.__v))};var G=typeof requestAnimationFrame=="function";function C(xe){var He,je=function(){clearTimeout(ot),G&&cancelAnimationFrame(He),setTimeout(xe)},ot=setTimeout(je,100);G&&(He=requestAnimationFrame(je))}function W(xe){var He=c,je=xe.__c;typeof je=="function"&&(xe.__c=void 0,je()),c=He}function K(xe){var He=c;xe.__c=xe.__(),c=He}function z(xe,He){return!xe||xe.length!==He.length||He.some(function(je,ot){return je!==xe[ot]})}function H(xe,He){return typeof He=="function"?He(xe):He}function re(xe,He){for(var je in He)xe[je]=He[je];return xe}function fe(xe,He){for(var je in xe)if(je!=="__source"&&!(je in He))return!0;for(var ot in He)if(ot!=="__source"&&xe[ot]!==He[ot])return!0;return!1}function Se(xe){this.props=xe}function Te(xe,He){function je(en){var qt=this.props.ref,kn=qt==en.ref;return!kn&&qt&&(qt.call?qt(null):qt.current=null),He?!He(this.props,en)||!kn:fe(this.props,en)}function ot(en){return this.shouldComponentUpdate=je,Object(h.e)(xe,en)}return ot.displayName="Memo("+(xe.displayName||xe.name)+")",ot.prototype.isReactComponent=!0,ot.__f=!0,ot}(Se.prototype=new h.a).isPureReactComponent=!0,Se.prototype.shouldComponentUpdate=function(xe,He){return fe(this.props,xe)||fe(this.state,He)};var he=h.i.__b;h.i.__b=function(xe){xe.type&&xe.type.__f&&xe.ref&&(xe.props.ref=xe.ref,xe.ref=null),he&&he(xe)};var _e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function De(xe){function He(je,ot){var en=re({},je);return delete en.ref,xe(en,!(ot=je.ref||ot)||typeof ot=="object"&&!("current"in ot)?null:ot)}return He.$$typeof=_e,He.render=He,He.prototype.isReactComponent=He.__f=!0,He.displayName="ForwardRef("+(xe.displayName||xe.name)+")",He}var Ve=function(xe,He){return xe==null?null:Object(h.k)(Object(h.k)(xe).map(He))},vt={map:Ve,forEach:Ve,count:function(xe){return xe?Object(h.k)(xe).length:0},only:function(xe){var He=Object(h.k)(xe);if(He.length!==1)throw"Children.only";return He[0]},toArray:h.k},rt=h.i.__e;h.i.__e=function(xe,He,je){if(xe.then){for(var ot,en=He;en=en.__;)if((ot=en.__c)&&ot.__c)return He.__e==null&&(He.__e=je.__e,He.__k=je.__k),ot.__c(xe,He)}rt(xe,He,je)};var gt=h.i.unmount;function Nt(xe,He,je){return xe&&(xe.__c&&xe.__c.__H&&(xe.__c.__H.__.forEach(function(ot){typeof ot.__c=="function"&&ot.__c()}),xe.__c.__H=null),(xe=re({},xe)).__c!=null&&(xe.__c.__P===je&&(xe.__c.__P=He),xe.__c=null),xe.__k=xe.__k&&xe.__k.map(function(ot){return Nt(ot,He,je)})),xe}function yt(xe,He,je){return xe&&(xe.__v=null,xe.__k=xe.__k&&xe.__k.map(function(ot){return yt(ot,He,je)}),xe.__c&&xe.__c.__P===He&&(xe.__e&&je.insertBefore(xe.__e,xe.__d),xe.__c.__e=!0,xe.__c.__P=je)),xe}function Yt(){this.__u=0,this.t=null,this.__b=null}function Ce(xe){var He=xe.__.__c;return He&&He.__e&&He.__e(xe)}function we(){this.u=null,this.o=null}h.i.unmount=function(xe){var He=xe.__c;He&&He.__R&&He.__R(),He&&xe.__h===!0&&(xe.type=null),gt&&gt(xe)},(Yt.prototype=new h.a).__c=function(xe,He){var je=He.__c,ot=this;ot.t==null&&(ot.t=[]),ot.t.push(je);var en=Ce(ot.__v),qt=!1,kn=function(){qt||(qt=!0,je.__R=null,en?en(wr):wr())};je.__R=kn;var wr=function(){if(!--ot.__u){if(ot.state.__e){var yi=ot.state.__e;ot.__v.__k[0]=yt(yi,yi.__c.__P,yi.__c.__O)}var Go;for(ot.setState({__e:ot.__b=null});Go=ot.t.pop();)Go.forceUpdate()}},ni=He.__h===!0;ot.__u++||ni||ot.setState({__e:ot.__b=ot.__v.__k[0]}),xe.then(kn,kn)},Yt.prototype.componentWillUnmount=function(){this.t=[]},Yt.prototype.render=function(xe,He){if(this.__b){if(this.__v.__k){var je=document.createElement("div"),ot=this.__v.__k[0].__c;this.__v.__k[0]=Nt(this.__b,je,ot.__O=ot.__P)}this.__b=null}var en=He.__e&&Object(h.e)(h.b,null,xe.fallback);return en&&(en.__h=null),[Object(h.e)(h.b,null,He.__e?null:xe.children),en]};var ke=function(xe,He,je){if(++je[1]===je[0]&&xe.o.delete(He),xe.props.revealOrder&&(xe.props.revealOrder[0]!=="t"||!xe.o.size))for(je=xe.u;je;){for(;je.length>3;)je.pop()();if(je[1]<je[0])break;xe.u=je=je[2]}};function dt(xe){return this.getChildContext=function(){return xe.context},xe.children}function zt(xe){var He=this,je=xe.i;He.componentWillUnmount=function(){Object(h.j)(null,He.l),He.l=null,He.i=null},He.i&&He.i!==je&&He.componentWillUnmount(),xe.__v?(He.l||(He.i=je,He.l={nodeType:1,parentNode:je,childNodes:[],appendChild:function(ot){this.childNodes.push(ot),He.i.appendChild(ot)},insertBefore:function(ot,en){this.childNodes.push(ot),He.i.appendChild(ot)},removeChild:function(ot){this.childNodes.splice(this.childNodes.indexOf(ot)>>>1,1),He.i.removeChild(ot)}}),Object(h.j)(Object(h.e)(dt,{context:He.context},xe.__v),He.l)):He.l&&He.componentWillUnmount()}(we.prototype=new h.a).__e=function(xe){var He=this,je=Ce(He.__v),ot=He.o.get(xe);return ot[0]++,function(en){var qt=function(){He.props.revealOrder?(ot.push(en),ke(He,xe,ot)):en()};je?je(qt):qt()}},we.prototype.render=function(xe){this.u=null,this.o=new Map;var He=Object(h.k)(xe.children);xe.revealOrder&&xe.revealOrder[0]==="b"&&He.reverse();for(var je=He.length;je--;)this.o.set(He[je],this.u=[1,0,this.u]);return xe.children},we.prototype.componentDidUpdate=we.prototype.componentDidMount=function(){var xe=this;this.o.forEach(function(He,je){ke(xe,je,He)})};var Ot=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=typeof document<"u",Tn=function(xe){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(xe)};h.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(xe){Object.defineProperty(h.a.prototype,xe,{configurable:!0,get:function(){return this["UNSAFE_"+xe]},set:function(He){Object.defineProperty(this,xe,{configurable:!0,writable:!0,value:He})}})});var pn=h.i.event;function st(){}function xn(){return this.cancelBubble}function Fe(){return this.defaultPrevented}h.i.event=function(xe){return pn&&(xe=pn(xe)),xe.persist=st,xe.isPropagationStopped=xn,xe.isDefaultPrevented=Fe,xe.nativeEvent=xe};var mn,Kn={configurable:!0,get:function(){return this.class}},oe=h.i.vnode;h.i.vnode=function(xe){var He=xe.type,je=xe.props,ot=je;if(typeof He=="string"){var en=He.indexOf("-")===-1;for(var qt in ot={},je){var kn=je[qt];yn&&qt==="children"&&He==="noscript"||qt==="value"&&"defaultValue"in je&&kn==null||(qt==="defaultValue"&&"value"in je&&je.value==null?qt="value":qt==="download"&&kn===!0?kn="":/ondoubleclick/i.test(qt)?qt="ondblclick":/^onchange(textarea|input)/i.test(qt+He)&&!Tn(je.type)?qt="oninput":/^onfocus$/i.test(qt)?qt="onfocusin":/^onblur$/i.test(qt)?qt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(qt)?qt=qt.toLowerCase():en&&rn.test(qt)?qt=qt.replace(/[A-Z0-9]/,"-$&").toLowerCase():kn===null&&(kn=void 0),ot[qt]=kn)}He=="select"&&ot.multiple&&Array.isArray(ot.value)&&(ot.value=Object(h.k)(je.children).forEach(function(wr){wr.props.selected=ot.value.indexOf(wr.props.value)!=-1})),He=="select"&&ot.defaultValue!=null&&(ot.value=Object(h.k)(je.children).forEach(function(wr){wr.props.selected=ot.multiple?ot.defaultValue.indexOf(wr.props.value)!=-1:ot.defaultValue==wr.props.value})),xe.props=ot,je.class!=je.className&&(Kn.enumerable="className"in je,je.className!=null&&(ot.class=je.className),Object.defineProperty(ot,"className",Kn))}xe.$$typeof=Ot,oe&&oe(xe)};var $n=h.i.__r;h.i.__r=function(xe){$n&&$n(xe),mn=xe.__c};var Sr={ReactCurrentDispatcher:{current:{readContext:function(xe){return mn.__n[xe.__c].props.value}}}};function Gr(xe){return!!xe&&xe.$$typeof===Ot}var eo=function(xe,He){return xe(He)},Dn=h.b,Ro={useState:D,useReducer:N,useEffect:B,useLayoutEffect:q,useRef:function(xe){return g=5,Z(function(){return{current:xe}},[])},useImperativeHandle:function(xe,He,je){g=6,q(function(){typeof xe=="function"?xe(He()):xe&&(xe.current=He())},je==null?je:je.concat(xe))},useMemo:Z,useCallback:Y,useContext:function(xe){var He=c.context[xe.__c],je=R(s++,9);return je.c=xe,He?(je.__==null&&(je.__=!0,He.sub(c)),He.props.value):xe.__},useDebugValue:function(xe,He){h.i.useDebugValue&&h.i.useDebugValue(He?He(xe):xe)},version:"17.0.2",Children:vt,render:function(xe,He,je){return He.__k==null&&(He.textContent=""),Object(h.j)(xe,He),typeof je=="function"&&je(),xe?xe.__c:null},hydrate:function(xe,He,je){return Object(h.h)(xe,He),typeof je=="function"&&je(),xe?xe.__c:null},unmountComponentAtNode:function(xe){return!!xe.__k&&(Object(h.j)(null,xe),!0)},createPortal:function(xe,He){return Object(h.e)(zt,{__v:xe,i:He})},createElement:h.e,createContext:h.d,createFactory:function(xe){return h.e.bind(null,xe)},cloneElement:function(xe){return Gr(xe)?h.c.apply(null,arguments):xe},createRef:h.f,Fragment:h.b,isValidElement:Gr,findDOMNode:function(xe){return xe&&(xe.base||xe.nodeType===1&&xe)||null},Component:h.a,PureComponent:Se,memo:Te,forwardRef:De,flushSync:function(xe,He){return xe(He)},unstable_batchedUpdates:eo,StrictMode:Dn,Suspense:Yt,SuspenseList:we,lazy:function(xe){var He,je,ot;function en(qt){if(He||(He=xe()).then(function(kn){je=kn.default||kn},function(kn){ot=kn}),ot)throw ot;if(!je)throw He;return Object(h.e)(je,qt)}return en.displayName="Lazy",en.__f=!0,en},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Sr};o.d=Ro},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(187),g=r(57),_=function(O){if(O&&O.forEach!==h)try{g(O,"forEach",h)}catch{O.forEach=h}};for(var w in c)c[w]&&_(s[w]&&s[w].prototype);_(v)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),v=r(40),h=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){h(1)}),sham:!g},{getPrototypeOf:function(_){return h(v(_))}})},function(n,o,r){var s=r(16),c=r(46),v=r(76),h=r(203),g=r(165),_=r(32),w=r(33),O=r(60),S=r(18),P=c("Reflect","construct"),A=Object.prototype,R=[].push,D=S(function(){function q(){}return!(P(function(){},[],q)instanceof q)}),N=!S(function(){P(function(){})}),B=D||N;s({target:"Reflect",stat:!0,forced:B,sham:B},{construct:function(q,Z){g(q),_(Z);var Y=arguments.length<3?q:g(arguments[2]);if(N&&!D)return P(q,Z,Y);if(q==Y){switch(Z.length){case 0:return new q;case 1:return new q(Z[0]);case 2:return new q(Z[0],Z[1]);case 3:return new q(Z[0],Z[1],Z[2]);case 4:return new q(Z[0],Z[1],Z[2],Z[3])}var te=[null];return v(R,te,Z),new(v(h,q,te))}var G=Y.prototype,C=O(w(G)?G:A),W=v(q,C,Z);return w(W)?W:C}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(h){return h&&v(c,h)}:function(h){return h&&function(){return c.apply(h,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,v=r(57),h=r(42),g=r(110),_=r(134),w=r(95);n.exports=function(O,S){var P,A,R,D,N,B=O.target,q=O.global,Z=O.stat;if(P=q?s:Z?s[B]||g(B,{}):(s[B]||{}).prototype)for(A in S){if(D=S[A],R=O.noTargetGet?(N=c(P,A))&&N.value:P[A],!w(q?A:B+(Z?".":"#")+A,O.forced)&&R!==void 0){if(typeof D==typeof R)continue;_(D,R)}(O.sham||R&&R.sham)&&v(D,"sham",!0),h(P,A,D,O)}}},function(n,o,r){var s=r(16),c=r(7),v=r(96),h=r(99),g=r(33),_=r(75),w=r(45),O=r(41),S=r(63),P=r(28),A=r(81),R=r(98),D=A("slice"),N=P("species"),B=c.Array,q=Math.max;s({target:"Array",proto:!0,forced:!D},{slice:function(Z,Y){var te,G,C,W=O(this),K=w(W),z=_(Z,K),H=_(Y===void 0?K:Y,K);if(v(W)&&(te=W.constructor,(h(te)&&(te===B||v(te.prototype))||g(te)&&(te=te[N])===null)&&(te=void 0),te===B||te===void 0))return R(W,z,H);for(G=new(te===void 0?B:te)(q(H-z,0)),C=0;z<H;z++,C++)z in W&&S(G,C,W[z]);return G.length=C,G}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(h){return v(c(h))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,v=r(15),h=r(38).f,g=Function.prototype,_=v(g.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=v(w.exec);s&&!c&&h(g,"name",{configurable:!0,get:function(){try{return O(w,_(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),v=r(41),h=r(50).f,g=r(36),_=c(function(){h(1)});s({target:"Object",stat:!0,forced:!g||_,sham:!g},{getOwnPropertyDescriptor:function(w,O){return h(v(w),O)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),v=r(135),h=r(41),g=r(50),_=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(w){for(var O,S,P=h(w),A=g.f,R=v(P),D={},N=0;R.length>N;)(S=A(P,O=R[N++]))!==void 0&&_(D,O,S);return D}})},,function(n,o,r){var s=r(16),c=r(7),v=r(18),h=r(96),g=r(33),_=r(40),w=r(45),O=r(63),S=r(115),P=r(81),A=r(28),R=r(70),D=A("isConcatSpreadable"),N=9007199254740991,B="Maximum allowed index exceeded",q=c.TypeError,Z=R>=51||!v(function(){var G=[];return G[D]=!1,G.concat()[0]!==G}),Y=P("concat"),te=function(G){if(!g(G))return!1;var C=G[D];return C!==void 0?!!C:h(G)};s({target:"Array",proto:!0,forced:!Z||!Y},{concat:function(G){var C,W,K,z,H,re=_(this),fe=S(re,0),Se=0;for(C=-1,K=arguments.length;C<K;C++)if(te(H=C===-1?re:arguments[C])){if(Se+(z=w(H))>N)throw q(B);for(W=0;W<z;W++,Se++)W in H&&O(fe,Se,H[W])}else{if(Se>=N)throw q(B);O(fe,Se++,H)}return fe.length=Se,fe}})},function(n,o,r){var s=r(7),c=r(89),v=r(35),h=r(90),g=r(108),_=r(132),w=c("wks"),O=s.Symbol,S=O&&O.for,P=_?O:O&&O.withoutSetter||h;n.exports=function(A){if(!v(w,A)||!g&&typeof w[A]!="string"){var R="Symbol."+A;g&&v(O,A)?w[A]=O[A]:w[A]=_&&S?S(R):P(R)}return w[A]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();o.a=v},function(n,o,r){var s=r(7),c=r(33),v=s.String,h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(h,g){return v(c(h),g)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),v=r(133),h=r(32),g=r(86),_=s.TypeError,w=Object.defineProperty;o.f=c?w:function(O,S,P){if(h(O),S=g(S),h(P),v)try{return w(O,S,P)}catch{}if("get"in P||"set"in P)throw _("Accessors not supported");return"value"in P&&(O[S]=P.value),O}},function(n,o,r){var s=r(7),c=r(97),v=s.String;n.exports=function(h){if(c(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(h)}},function(n,o,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(h){return v(c(h))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,o,r){var s=r(7),c=r(30),v=r(35),h=r(57),g=r(110),_=r(92),w=r(58),O=r(73).CONFIGURABLE,S=w.get,P=w.enforce,A=String(String).split("String");(n.exports=function(R,D,N,B){var q,Z=!!B&&!!B.unsafe,Y=!!B&&!!B.enumerable,te=!!B&&!!B.noTargetGet,G=B&&B.name!==void 0?B.name:D;c(N)&&(String(G).slice(0,7)==="Symbol("&&(G="["+String(G).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(N,"name")||O&&N.name!==G)&&h(N,"name",G),(q=P(N)).source||(q.source=A.join(typeof G=="string"?G:""))),R!==s?(Z?!te&&R[D]&&(Y=!0):delete R[D],Y?R[D]=N:h(R,D,N)):Y?R[D]=N:g(D,N)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||_(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return h}),r.d(o,"c",function(){return g}),r.d(o,"b",function(){return _}),r.d(o,"a",function(){return O});var c=r(10),v=function(S,P){var A=typeof Symbol=="function"&&S[Symbol.iterator];if(!A)return S;var R,D,N=A.call(S),B=[];try{for(;(P===void 0||P-- >0)&&!(R=N.next()).done;)B.push(R.value)}catch(q){D={error:q}}finally{try{R&&!R.done&&(A=N.return)&&A.call(N)}finally{if(D)throw D.error}}return B};function h(){var S=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){S(function(P){return P+1})},[])}function g(S){if(!S||typeof S!="object")return!1;var P=Object.getPrototypeOf(S);return!P||P===Object.prototype}function _(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var w={};function O(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:w}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),v=function(h){return c(h)?h:void 0};n.exports=function(h,g){return arguments.length<2?v(s[h]):s[h]&&s[h][g]}},function(n,o,r){var s=r(16),c=r(34),v=r(33),h=r(32),g=r(204),_=r(50),w=r(101);s({target:"Reflect",stat:!0},{get:function O(S,P){var A,R,D=arguments.length<3?S:arguments[2];return h(S)===D?S[P]:(A=_.f(S,P))?g(A)?A.value:A.get===void 0?void 0:c(A.get,D):v(R=w(S))?O(R,P,D):void 0}})},function(n,o,r){(function(s){var c=r(31),v=r(171),h=t&&!t.nodeType&&t,g=h&&typeof s=="object"&&s&&!s.nodeType&&s,_=g&&g.exports===h?c.a.Buffer:void 0,w=(_?_.isBuffer:void 0)||v.a;o.a=w}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v&&c.a.process,_=function(){try{var w=h&&h.require&&h.require("util").types;return w||g&&g.binding&&g.binding("util")}catch{}}();o.a=_}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),v=r(84),h=r(69),g=r(41),_=r(86),w=r(35),O=r(133),S=Object.getOwnPropertyDescriptor;o.f=s?S:function(P,A){if(P=g(P),A=_(A),O)try{return S(P,A)}catch{}if(w(P,A))return h(!c(v.f,P,A),P[A])}},function(n,o,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(h){return v(c(h),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(h,g,_){return c.f(h,g,v(1,_))}:function(h,g,_){return h[g]=_,h}},function(n,o,r){var s,c,v,h=r(175),g=r(7),_=r(15),w=r(33),O=r(57),S=r(35),P=r(109),A=r(93),R=r(72),D="Object already initialized",N=g.TypeError,B=g.WeakMap;if(h||P.state){var q=P.state||(P.state=new B),Z=_(q.get),Y=_(q.has),te=_(q.set);s=function(C,W){if(Y(q,C))throw new N(D);return W.facade=C,te(q,C,W),W},c=function(C){return Z(q,C)||{}},v=function(C){return Y(q,C)}}else{var G=A("state");R[G]=!0,s=function(C,W){if(S(C,G))throw new N(D);return W.facade=C,O(C,G,W),W},c=function(C){return S(C,G)?C[G]:{}},v=function(C){return S(C,G)}}n.exports={set:s,get:c,has:v,enforce:function(C){return v(C)?c(C):s(C,{})},getterFor:function(C){return function(W){var K;if(!w(W)||(K=c(W)).type!==C)throw N("Incompatible receiver, "+C+" required");return K}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,o,r){var s,c=r(32),v=r(176),h=r(111),g=r(72),_=r(138),w=r(91),O=r(93),S=O("IE_PROTO"),P=function(){},A=function(N){return"<script>"+N+"<\/script>"},R=function(N){N.write(A("")),N.close();var B=N.parentWindow.Object;return N=null,B},D=function(){try{s=new ActiveXObject("htmlfile")}catch{}var N,B;D=typeof document<"u"?document.domain&&s?R(s):((B=w("iframe")).style.display="none",_.appendChild(B),B.src="javascript:",(N=B.contentWindow.document).open(),N.write(A("document.F=Object")),N.close(),N.F):R(s);for(var q=h.length;q--;)delete D.prototype[h[q]];return D()};g[S]=!0,n.exports=Object.create||function(N,B){var q;return N!==null?(P.prototype=c(N),q=new P,P.prototype=null,q[S]=N):q=D(),B===void 0?q:v(q,B)}},function(n,o,r){var s=r(36),c=r(7),v=r(15),h=r(95),g=r(42),_=r(35),w=r(148),O=r(54),S=r(87),P=r(131),A=r(18),R=r(74).f,D=r(50).f,N=r(38).f,B=r(160),q=r(161).trim,Z="Number",Y=c.Number,te=Y.prototype,G=c.TypeError,C=v("".slice),W=v("".charCodeAt),K=function(Te){var he=P(Te,"number");return typeof he=="bigint"?he:z(he)},z=function(Te){var he,_e,De,Ve,vt,rt,gt,Nt,yt=P(Te,"number");if(S(yt))throw G("Cannot convert a Symbol value to a number");if(typeof yt=="string"&&yt.length>2){if(yt=q(yt),(he=W(yt,0))===43||he===45){if((_e=W(yt,2))===88||_e===120)return NaN}else if(he===48){switch(W(yt,1)){case 66:case 98:De=2,Ve=49;break;case 79:case 111:De=8,Ve=55;break;default:return+yt}for(rt=(vt=C(yt,2)).length,gt=0;gt<rt;gt++)if((Nt=W(vt,gt))<48||Nt>Ve)return NaN;return parseInt(vt,De)}}return+yt};if(h(Z,!Y(" 0o1")||!Y("0b1")||Y("+0x1"))){for(var H,re=function(Te){var he=arguments.length<1?0:Y(K(Te)),_e=this;return O(te,_e)&&A(function(){B(_e)})?w(Object(he),_e,re):he},fe=s?R(Y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Se=0;fe.length>Se;Se++)_(Y,H=fe[Se])&&!_(re,H)&&N(re,H,D(Y,H));re.prototype=te,te.constructor=re,g(c,Z,re)}},function(n,o,r){var s=r(56);n.exports=function(c,v){var h=c[v];return h==null?void 0:s(h)}},function(n,o,r){var s=r(86),c=r(38),v=r(69);n.exports=function(h,g,_){var w=s(g);w in h?c.f(h,w,v(0,_)):h[w]=_}},function(n,o,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(h,g){return c(h),g===void 0?h:v?v(h,g):function(){return h.apply(g,arguments)}}},function(n,o,r){var s=r(16),c=r(15),v=r(85),h=r(41),g=r(121),_=c([].join),w=v!=Object,O=g("join",",");s({target:"Array",proto:!0,forced:w||!O},{join:function(S){return _(h(this),S===void 0?",":S)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,v=r(42),h=r(32),g=r(54),_=r(39),w=r(18),O=r(154),S="toString",P=RegExp.prototype,A=P.toString,R=s(O),D=w(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),N=c&&A.name!=S;(D||N)&&v(RegExp.prototype,S,function(){var B=h(this),q=_(B.source),Z=B.flags;return"/"+q+"/"+_(Z===void 0&&g(P,B)&&!("flags"in P)?R(B):Z)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,v=r(7),h=r(55),g=v.process,_=v.Deno,w=g&&g.versions||_&&_.version,O=w&&w.v8;O&&(c=(s=O.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&h&&(!(s=h.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=h.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),v=Function.prototype,h=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),_=g&&(function(){}).name==="something",w=g&&(!s||s&&h(v,"name").configurable);n.exports={EXISTS:g,PROPER:_,CONFIGURABLE:w}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,o,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(h,g){var _=s(h);return _<0?c(_+g,0):v(_,g)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,o,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(h,g,_){h&&!c(h=_?h:h.prototype,v)&&s(h,v,{configurable:!0,value:g})}},function(n,o,r){var s=r(64),c=r(15),v=r(85),h=r(40),g=r(45),_=r(115),w=c([].push),O=function(S){var P=S==1,A=S==2,R=S==3,D=S==4,N=S==6,B=S==7,q=S==5||N;return function(Z,Y,te,G){for(var C,W,K=h(Z),z=v(K),H=s(Y,te),re=g(z),fe=0,Se=G||_,Te=P?Se(Z,re):A||B?Se(Z,0):void 0;re>fe;fe++)if((q||fe in z)&&(W=H(C=z[fe],fe,K),S))if(P)Te[fe]=W;else if(W)switch(S){case 3:return!0;case 5:return C;case 6:return fe;case 2:w(Te,C)}else switch(S){case 4:return!1;case 7:w(Te,C)}return N?-1:R||D?D:Te}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),v=r(70),h=c("species");n.exports=function(g){return v>=51||!s(function(){var _=[];return(_.constructor={})[h]=function(){return{foo:1}},_[g](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(159),_=r(32),w=r(44),O=r(164),S=r(124),P=r(94),A=r(39),R=r(62),D=r(114),N=r(125),B=r(103),q=r(155),Z=r(18),Y=q.UNSUPPORTED_Y,te=4294967295,G=Math.min,C=[].push,W=v(/./.exec),K=v(C),z=v("".slice),H=!Z(function(){var re=/(?:)/,fe=re.exec;re.exec=function(){return fe.apply(this,arguments)};var Se="ab".split(re);return Se.length!==2||Se[0]!=="a"||Se[1]!=="b"});h("split",function(re,fe,Se){var Te;return Te="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(he,_e){var De=A(w(this)),Ve=_e===void 0?te:_e>>>0;if(Ve===0)return[];if(he===void 0)return[De];if(!g(he))return c(fe,De,he,Ve);for(var vt,rt,gt,Nt=[],yt=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(he.sticky?"y":""),Yt=0,Ce=new RegExp(he.source,yt+"g");(vt=c(B,Ce,De))&&!((rt=Ce.lastIndex)>Yt&&(K(Nt,z(De,Yt,vt.index)),vt.length>1&&vt.index<De.length&&s(C,Nt,D(vt,1)),gt=vt[0].length,Yt=rt,Nt.length>=Ve));)Ce.lastIndex===vt.index&&Ce.lastIndex++;return Yt===De.length?!gt&&W(Ce,"")||K(Nt,""):K(Nt,z(De,Yt)),Nt.length>Ve?D(Nt,0,Ve):Nt}:"0".split(void 0,0).length?function(he,_e){return he===void 0&&_e===0?[]:c(fe,this,he,_e)}:fe,[function(he,_e){var De=w(this),Ve=he==null?void 0:R(he,re);return Ve?c(Ve,he,De,_e):c(Te,A(De),he,_e)},function(he,_e){var De=_(this),Ve=A(he),vt=Se(Te,De,Ve,_e,Te!==fe);if(vt.done)return vt.value;var rt=O(De,RegExp),gt=De.unicode,Nt=(De.ignoreCase?"i":"")+(De.multiline?"m":"")+(De.unicode?"u":"")+(Y?"g":"y"),yt=new rt(Y?"^(?:"+De.source+")":De,Nt),Yt=_e===void 0?te:_e>>>0;if(Yt===0)return[];if(Ve.length===0)return N(yt,Ve)===null?[Ve]:[];for(var Ce=0,we=0,ke=[];we<Ve.length;){yt.lastIndex=Y?0:we;var dt,zt=N(yt,Y?z(Ve,we):Ve);if(zt===null||(dt=G(P(yt.lastIndex+(Y?we:0)),Ve.length))===Ce)we=S(Ve,we,gt);else{if(K(ke,z(Ve,Ce,we)),ke.length===Yt)return ke;for(var Ot=1;Ot<=zt.length-1;Ot++)if(K(ke,zt[Ot]),ke.length===Yt)return ke;we=Ce=dt}}return K(ke,z(Ve,Ce)),ke}]},!H,Y)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);o.f=v?function(h){var g=c(this,h);return!!g&&g.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),v=r(18),h=r(51),g=s.Object,_=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(w){return h(w)=="String"?_(w,""):g(w)}:g},function(n,o,r){var s=r(131),c=r(87);n.exports=function(v){var h=s(v,"string");return c(h)?h:h+""}},function(n,o,r){var s=r(7),c=r(46),v=r(30),h=r(54),g=r(132),_=s.Object;n.exports=g?function(w){return typeof w=="symbol"}:function(w){var O=c("Symbol");return v(O)&&h(O.prototype,_(w))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(v,h){return c[v]||(c[v]=h!==void 0?h:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,v=Math.random(),h=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+h(++c+v,36)}},function(n,o,r){var s=r(7),c=r(33),v=s.document,h=c(v)&&c(v.createElement);n.exports=function(g){return h?v.createElement(g):{}}},function(n,o,r){var s=r(15),c=r(30),v=r(109),h=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return h(g)}),n.exports=v.inspectSource},function(n,o,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(h){return v[h]||(v[h]=c(h))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),v=/#|\.prototype\./,h=function(S,P){var A=_[g(S)];return A==O||A!=w&&(c(P)?s(P):!!P)},g=h.normalize=function(S){return String(S).replace(v,".").toLowerCase()},_=h.data={},w=h.NATIVE="N",O=h.POLYFILL="P";n.exports=h},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),v=r(30),h=r(51),g=r(28)("toStringTag"),_=s.Object,w=h(function(){return arguments}())=="Arguments";n.exports=c?h:function(O){var S,P,A;return O===void 0?"Undefined":O===null?"Null":typeof(P=function(R,D){try{return R[D]}catch{}}(S=_(O),g))=="string"?P:w?h(S):(A=h(S))=="Object"&&v(S.callee)?"Arguments":A}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),v=r(30),h=r(97),g=r(46),_=r(92),w=function(){},O=[],S=g("Reflect","construct"),P=/^\s*(?:class|function)\b/,A=s(P.exec),R=!P.exec(w),D=function(N){if(!v(N))return!1;try{return S(w,O,N),!0}catch{return!1}};n.exports=!S||c(function(){var N;return D(D.call)||!D(Object)||!D(function(){N=!0})||N})?function(N){if(!v(N))return!1;switch(h(N)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!A(P,_(N))}:D},function(n,o,r){var s=r(28),c=r(60),v=r(38),h=s("unscopables"),g=Array.prototype;g[h]==null&&v.f(g,h,{configurable:!0,value:c(null)}),n.exports=function(_){g[h][_]=!0}},function(n,o,r){var s=r(7),c=r(35),v=r(30),h=r(40),g=r(93),_=r(143),w=g("IE_PROTO"),O=s.Object,S=O.prototype;n.exports=_?O.getPrototypeOf:function(P){var A=h(P);if(c(A,w))return A[w];var R=A.constructor;return v(R)&&A instanceof R?R.prototype:A instanceof O?S:null}},function(n,o,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,g=!1,_={};try{(h=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),g=_ instanceof Array}catch{}return function(w,O){return c(w),v(O),g?h(w,O):w.__proto__=O,w}}():void 0)},function(n,o,r){var s,c,v=r(34),h=r(15),g=r(39),_=r(154),w=r(155),O=r(89),S=r(60),P=r(58).get,A=r(190),R=r(191),D=O("native-string-replace",String.prototype.replace),N=RegExp.prototype.exec,B=N,q=h("".charAt),Z=h("".indexOf),Y=h("".replace),te=h("".slice),G=(c=/b*/g,v(N,s=/a/,"a"),v(N,c,"a"),s.lastIndex!==0||c.lastIndex!==0),C=w.BROKEN_CARET,W=/()??/.exec("")[1]!==void 0;(G||W||C||A||R)&&(B=function(K){var z,H,re,fe,Se,Te,he,_e=this,De=P(_e),Ve=g(K),vt=De.raw;if(vt)return vt.lastIndex=_e.lastIndex,z=v(B,vt,Ve),_e.lastIndex=vt.lastIndex,z;var rt=De.groups,gt=C&&_e.sticky,Nt=v(_,_e),yt=_e.source,Yt=0,Ce=Ve;if(gt&&(Nt=Y(Nt,"y",""),Z(Nt,"g")===-1&&(Nt+="g"),Ce=te(Ve,_e.lastIndex),_e.lastIndex>0&&(!_e.multiline||_e.multiline&&q(Ve,_e.lastIndex-1)!==`
`)&&(yt="(?: "+yt+")",Ce=" "+Ce,Yt++),H=new RegExp("^(?:"+yt+")",Nt)),W&&(H=new RegExp("^"+yt+"$(?!\\s)",Nt)),G&&(re=_e.lastIndex),fe=v(N,gt?H:_e,Ce),gt?fe?(fe.input=te(fe.input,Yt),fe[0]=te(fe[0],Yt),fe.index=_e.lastIndex,_e.lastIndex+=fe[0].length):_e.lastIndex=0:G&&fe&&(_e.lastIndex=_e.global?fe.index+fe[0].length:re),W&&fe&&fe.length>1&&v(D,fe[0],H,function(){for(Se=1;Se<arguments.length-2;Se++)arguments[Se]===void 0&&(fe[Se]=void 0)}),fe&&rt)for(fe.groups=Te=S(null),Se=0;Se<rt.length;Se++)Te[(he=rt[Se])[0]]=fe[he[1]];return fe}),n.exports=B},function(n,o,r){var s=r(16),c=r(7),v=r(75),h=r(59),g=r(45),_=r(40),w=r(115),O=r(63),S=r(81)("splice"),P=c.TypeError,A=Math.max,R=Math.min,D=9007199254740991,N="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!S},{splice:function(B,q){var Z,Y,te,G,C,W,K=_(this),z=g(K),H=v(B,z),re=arguments.length;if(re===0?Z=Y=0:re===1?(Z=0,Y=z-H):(Z=re-2,Y=R(A(h(q),0),z-H)),z+Z-Y>D)throw P(N);for(te=w(K,Y),G=0;G<Y;G++)(C=H+G)in K&&O(te,G,K[C]);if(te.length=Y,Z<Y){for(G=H;G<z-Y;G++)W=G+Z,(C=G+Y)in K?K[W]=K[C]:delete K[W];for(G=z;G>z-Y+Z;G--)delete K[G-1]}else if(Z>Y)for(G=z-Y;G>H;G--)W=G+Z-1,(C=G+Y-1)in K?K[W]=K[C]:delete K[W];for(G=0;G<Z;G++)K[G+H]=arguments[G+2];return K.length=z-Y+Z,te}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v?c.a.Buffer:void 0,_=g?g.allocUnsafe:void 0;o.a=function(w,O){if(O)return w.slice();var S=w.length,P=_?_(S):new w.constructor(S);return w.copy(P),P}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),v="__core-js_shared__",h=s[v]||c(v,{});n.exports=h},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,h){try{c(s,v,{value:h,configurable:!0,writable:!0})}catch{s[v]=h}return h}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),v=r(45),h=r(63),g=s.Array,_=Math.max;n.exports=function(w,O,S){for(var P=v(w),A=c(O,P),R=c(S===void 0?P:S,P),D=g(_(R-A,0)),N=0;A<R;A++,N++)h(D,N,w[A]);return D.length=N,D}},function(n,o,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,o,r){var s=r(16),c=r(34),v=r(71),h=r(73),g=r(30),_=r(180),w=r(101),O=r(102),S=r(78),P=r(57),A=r(42),R=r(28),D=r(80),N=r(142),B=h.PROPER,q=h.CONFIGURABLE,Z=N.IteratorPrototype,Y=N.BUGGY_SAFARI_ITERATORS,te=R("iterator"),G="keys",C="values",W="entries",K=function(){return this};n.exports=function(z,H,re,fe,Se,Te,he){_(re,H,fe);var _e,De,Ve,vt=function(we){if(we===Se&&Yt)return Yt;if(!Y&&we in Nt)return Nt[we];switch(we){case G:case C:case W:return function(){return new re(this,we)}}return function(){return new re(this)}},rt=H+" Iterator",gt=!1,Nt=z.prototype,yt=Nt[te]||Nt["@@iterator"]||Se&&Nt[Se],Yt=!Y&&yt||vt(Se),Ce=H=="Array"&&Nt.entries||yt;if(Ce&&(_e=w(Ce.call(new z)))!==Object.prototype&&_e.next&&(v||w(_e)===Z||(O?O(_e,Z):g(_e[te])||A(_e,te,K)),S(_e,rt,!0,!0),v&&(D[rt]=K)),B&&Se==C&&yt&&yt.name!==C&&(!v&&q?P(Nt,"name",C):(gt=!0,Yt=function(){return c(yt,this)})),Se)if(De={values:vt(C),keys:Te?Yt:vt(G),entries:vt(W)},he)for(Ve in De)(Y||gt||!(Ve in Nt))&&A(Nt,Ve,De[Ve]);else s({target:H,proto:!0,forced:Y||gt},De);return v&&!he||Nt[te]===Yt||A(Nt,te,Yt,{name:Se}),D[H]=Yt,De}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(32),g=r(88),_=r(145),w=r(45),O=r(54),S=r(146),P=r(118),A=r(147),R=s.TypeError,D=function(B,q){this.stopped=B,this.result=q},N=D.prototype;n.exports=function(B,q,Z){var Y,te,G,C,W,K,z,H=Z&&Z.that,re=!(!Z||!Z.AS_ENTRIES),fe=!(!Z||!Z.IS_ITERATOR),Se=!(!Z||!Z.INTERRUPTED),Te=c(q,H),he=function(De){return Y&&A(Y,"normal",De),new D(!0,De)},_e=function(De){return re?(h(De),Se?Te(De[0],De[1],he):Te(De[0],De[1])):Se?Te(De,he):Te(De)};if(fe)Y=B;else{if(!(te=P(B)))throw R(g(B)+" is not iterable");if(_(te)){for(G=0,C=w(B);C>G;G++)if((W=_e(B[G]))&&O(N,W))return W;return new D(!1)}Y=S(B,te)}for(K=Y.next;!(z=v(K,Y)).done;){try{W=_e(z.value)}catch(De){A(Y,"throw",De)}if(typeof W=="object"&&W&&O(N,W))return W}return new D(!1)}},function(n,o,r){var s=r(97),c=r(62),v=r(80),h=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,h)||c(g,"@@iterator")||v[s(g)]}},function(n,o,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(h,g){if(c(g,h))return h;throw v("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var v=0,h={next:function(){return{done:!!v++}},return:function(){c=!0}};h[s]=function(){return this},Array.from(h,function(){throw 2})}catch{}n.exports=function(g,_){if(!_&&!c)return!1;var w=!1;try{var O={};O[s]=function(){return{next:function(){return{done:w=!0}}}},g(O)}catch{}return w}},function(n,o,r){var s=r(18);n.exports=function(c,v){var h=[][c];return!!h&&s(function(){h.call(null,v||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),v=r(103),h=r(18),g=r(28),_=r(57),w=g("species"),O=RegExp.prototype;n.exports=function(S,P,A,R){var D=g(S),N=!h(function(){var Y={};return Y[D]=function(){return 7},""[S](Y)!=7}),B=N&&!h(function(){var Y=!1,te=/a/;return S==="split"&&((te={}).constructor={},te.constructor[w]=function(){return te},te.flags="",te[D]=/./[D]),te.exec=function(){return Y=!0,null},te[D](""),!Y});if(!N||!B||A){var q=s(/./[D]),Z=P(D,""[S],function(Y,te,G,C,W){var K=s(Y),z=te.exec;return z===v||z===O.exec?N&&!W?{done:!0,value:q(te,G,C)}:{done:!0,value:K(G,te,C)}:{done:!1}});c(String.prototype,S,Z[0]),c(O,D,Z[1])}R&&_(O[D],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,v,h){return v+(h?s(c,v).length:1)}},function(n,o,r){var s=r(7),c=r(34),v=r(32),h=r(30),g=r(51),_=r(103),w=s.TypeError;n.exports=function(O,S){var P=O.exec;if(h(P)){var A=c(P,O,S);return A!==null&&v(A),A}if(g(O)==="RegExp")return c(_,O,S);throw w("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(18),_=r(32),w=r(30),O=r(59),S=r(94),P=r(39),A=r(44),R=r(124),D=r(62),N=r(201),B=r(125),q=r(28)("replace"),Z=Math.max,Y=Math.min,te=v([].concat),G=v([].push),C=v("".indexOf),W=v("".slice),K="a".replace(/./,"$0")==="$0",z=!!/./[q]&&/./[q]("a","$0")==="";h("replace",function(H,re,fe){var Se=z?"$":"$0";return[function(Te,he){var _e=A(this),De=Te==null?void 0:D(Te,q);return De?c(De,Te,_e,he):c(re,P(_e),Te,he)},function(Te,he){var _e=_(this),De=P(Te);if(typeof he=="string"&&C(he,Se)===-1&&C(he,"$<")===-1){var Ve=fe(re,_e,De,he);if(Ve.done)return Ve.value}var vt=w(he);vt||(he=P(he));var rt=_e.global;if(rt){var gt=_e.unicode;_e.lastIndex=0}for(var Nt=[];;){var yt=B(_e,De);if(yt===null||(G(Nt,yt),!rt))break;P(yt[0])===""&&(_e.lastIndex=R(De,S(_e.lastIndex),gt))}for(var Yt,Ce="",we=0,ke=0;ke<Nt.length;ke++){for(var dt=P((yt=Nt[ke])[0]),zt=Z(Y(O(yt.index),De.length),0),Ot=[],rn=1;rn<yt.length;rn++)G(Ot,(Yt=yt[rn])===void 0?Yt:String(Yt));var yn=yt.groups;if(vt){var Tn=te([dt],Ot,zt,De);yn!==void 0&&G(Tn,yn);var pn=P(s(he,void 0,Tn))}else pn=N(dt,De,zt,Ot,yn,he);zt>=we&&(Ce+=W(De,we,zt)+pn,we=zt+dt.length)}return Ce+W(De,we)}]},!!g(function(){var H=/./;return H.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(H,"$<a>")!=="7"})||!K||z)},function(n,o,r){var s=r(16),c=Math.hypot,v=Math.abs,h=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,_){for(var w,O,S=0,P=0,A=arguments.length,R=0;P<A;)R<(w=v(arguments[P++]))?(S=S*(O=R/w)*O+1,R=w):S+=w>0?(O=w/R)*O:w;return R===1/0?1/0:R*h(S)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var h,g="Expected a function",_="__lodash_hash_undefined__",w="__lodash_placeholder__",O=16,S=32,P=64,A=128,R=256,D=1/0,N=9007199254740991,B=NaN,q=4294967295,Z=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",S],["partialRight",P],["rearg",R]],Y="[object Arguments]",te="[object Array]",G="[object Boolean]",C="[object Date]",W="[object Error]",K="[object Function]",z="[object GeneratorFunction]",H="[object Map]",re="[object Number]",fe="[object Object]",Se="[object Promise]",Te="[object RegExp]",he="[object Set]",_e="[object String]",De="[object Symbol]",Ve="[object WeakMap]",vt="[object ArrayBuffer]",rt="[object DataView]",gt="[object Float32Array]",Nt="[object Float64Array]",yt="[object Int8Array]",Yt="[object Int16Array]",Ce="[object Int32Array]",we="[object Uint8Array]",ke="[object Uint8ClampedArray]",dt="[object Uint16Array]",zt="[object Uint32Array]",Ot=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,st=RegExp(Tn.source),xn=RegExp(pn.source),Fe=/<%-([\s\S]+?)%>/g,mn=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/,Sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gr=/[\\^$.*+?()[\]{}|]/g,eo=RegExp(Gr.source),Dn=/^\s+/,Ro=/\s/,xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,kn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wr=/\w*$/,ni=/^[-+]0x[0-9a-f]+$/i,yi=/^0b[01]+$/i,Go=/^\[object .+?Constructor\]$/,Xo=/^0o[0-7]+$/i,Sn=/^(?:0|[1-9]\d*)$/,Bn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xn=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,Kr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rr="\\u2700-\\u27bf",cl="a-z\\xdf-\\xf6\\xf8-\\xff",Ua="A-Z\\xc0-\\xd6\\xd8-\\xde",fl="\\ufe0e\\ufe0f",au="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ud="['’]",mc="[\\ud800-\\udfff]",fa="["+au+"]",Wu="["+Kr+"]",Pn="\\d+",Cf="[\\u2700-\\u27bf]",vo="["+cl+"]",gc="[^\\ud800-\\udfff"+au+Pn+Rr+cl+Ua+"]",qi="\\ud83c[\\udffb-\\udfff]",ta="[^\\ud800-\\udfff]",Es="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",da="["+Ua+"]",Ma="(?:"+vo+"|"+gc+")",_c="(?:"+da+"|"+gc+")",bc="(?:['’](?:d|ll|m|re|s|t|ve))?",Df="(?:['’](?:D|LL|M|RE|S|T|VE))?",zu="(?:"+Wu+"|"+qi+")?",If="[\\ufe0e\\ufe0f]?",wc=If+zu+("(?:\\u200d(?:"+[ta,Es,Ta].join("|")+")"+If+zu+")*"),Gd="(?:"+[Cf,Es,Ta].join("|")+")"+wc,Rl="(?:"+[ta+Wu+"?",Wu,Es,Ta,mc].join("|")+")",Lf=RegExp(Ud,"g"),dl=RegExp(Wu,"g"),Ec=RegExp(qi+"(?="+qi+")|"+Rl+wc,"g"),Os=RegExp([da+"?"+vo+"+"+bc+"(?="+[fa,da,"$"].join("|")+")",_c+"+"+Df+"(?="+[fa,da+Ma,"$"].join("|")+")",da+"?"+Ma+"+"+bc,da+"+"+Df,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,Gd].join("|"),"g"),Oc=RegExp("[\\u200d\\ud800-\\udfff"+Kr+fl+"]"),xc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ff=-1,zr={};zr[gt]=zr[Nt]=zr[yt]=zr[Yt]=zr[Ce]=zr[we]=zr[ke]=zr[dt]=zr[zt]=!0,zr[Y]=zr[te]=zr[vt]=zr[G]=zr[rt]=zr[C]=zr[W]=zr[K]=zr[H]=zr[re]=zr[fe]=zr[Te]=zr[he]=zr[_e]=zr[Ve]=!1;var Vr={};Vr[Y]=Vr[te]=Vr[vt]=Vr[rt]=Vr[G]=Vr[C]=Vr[gt]=Vr[Nt]=Vr[yt]=Vr[Yt]=Vr[Ce]=Vr[H]=Vr[re]=Vr[fe]=Vr[Te]=Vr[he]=Vr[_e]=Vr[De]=Vr[we]=Vr[ke]=Vr[dt]=Vr[zt]=!0,Vr[W]=Vr[K]=Vr[Ve]=!1;var $f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lu=parseFloat,pa=parseInt,xs=typeof s=="object"&&s&&s.Object===Object&&s,Bf=typeof self=="object"&&self&&self.Object===Object&&self,jo=xs||Bf||Function("return this")(),jl=o&&!o.nodeType&&o,Cl=jl&&typeof c=="object"&&c&&!c.nodeType&&c,Ss=Cl&&Cl.exports===jl,uu=Ss&&xs.process,mi=function(){try{var at=Cl&&Cl.require&&Cl.require("util").types;return at||uu&&uu.binding&&uu.binding("util")}catch{}}(),Sc=mi&&mi.isArrayBuffer,Uf=mi&&mi.isDate,Ac=mi&&mi.isMap,Ni=mi&&mi.isRegExp,ri=mi&&mi.isSet,na=mi&&mi.isTypedArray;function to(at,Ct,Ft){switch(Ft.length){case 0:return at.call(Ct);case 1:return at.call(Ct,Ft[0]);case 2:return at.call(Ct,Ft[0],Ft[1]);case 3:return at.call(Ct,Ft[0],Ft[1],Ft[2])}return at.apply(Ct,Ft)}function Gf(at,Ct,Ft,fn){for(var ur=-1,Pr=at==null?0:at.length;++ur<Pr;){var so=at[ur];Ct(fn,so,Ft(so),at)}return fn}function Ri(at,Ct){for(var Ft=-1,fn=at==null?0:at.length;++Ft<fn&&Ct(at[Ft],Ft,at)!==!1;);return at}function Tc(at,Ct){for(var Ft=at==null?0:at.length;Ft--&&Ct(at[Ft],Ft,at)!==!1;);return at}function Vf(at,Ct){for(var Ft=-1,fn=at==null?0:at.length;++Ft<fn;)if(!Ct(at[Ft],Ft,at))return!1;return!0}function ji(at,Ct){for(var Ft=-1,fn=at==null?0:at.length,ur=0,Pr=[];++Ft<fn;){var so=at[Ft];Ct(so,Ft,at)&&(Pr[ur++]=so)}return Pr}function Ti(at,Ct){return!!(at!=null&&at.length)&&su(at,Ct,0)>-1}function Mc(at,Ct,Ft){for(var fn=-1,ur=at==null?0:at.length;++fn<ur;)if(Ft(Ct,at[fn]))return!0;return!1}function Fr(at,Ct){for(var Ft=-1,fn=at==null?0:at.length,ur=Array(fn);++Ft<fn;)ur[Ft]=Ct(at[Ft],Ft,at);return ur}function oi(at,Ct){for(var Ft=-1,fn=Ct.length,ur=at.length;++Ft<fn;)at[ur+Ft]=Ct[Ft];return at}function As(at,Ct,Ft,fn){var ur=-1,Pr=at==null?0:at.length;for(fn&&Pr&&(Ft=at[++ur]);++ur<Pr;)Ft=Ct(Ft,at[ur],ur,at);return Ft}function Wf(at,Ct,Ft,fn){var ur=at==null?0:at.length;for(fn&&ur&&(Ft=at[--ur]);ur--;)Ft=Ct(Ft,at[ur],ur,at);return Ft}function Pc(at,Ct){for(var Ft=-1,fn=at==null?0:at.length;++Ft<fn;)if(Ct(at[Ft],Ft,at))return!0;return!1}var Ts=Di("length");function Ga(at,Ct,Ft){var fn;return Ft(at,function(ur,Pr,so){if(Ct(ur,Pr,so))return fn=Pr,!1}),fn}function Ci(at,Ct,Ft,fn){for(var ur=at.length,Pr=Ft+(fn?1:-1);fn?Pr--:++Pr<ur;)if(Ct(at[Pr],Pr,at))return Pr;return-1}function su(at,Ct,Ft){return Ct==Ct?function(fn,ur,Pr){for(var so=Pr-1,T=fn.length;++so<T;)if(fn[so]===ur)return so;return-1}(at,Ct,Ft):Ci(at,ha,Ft)}function Ki(at,Ct,Ft,fn){for(var ur=Ft-1,Pr=at.length;++ur<Pr;)if(fn(at[ur],Ct))return ur;return-1}function ha(at){return at!=at}function Mr(at,Ct){var Ft=at==null?0:at.length;return Ft?cu(at,Ct)/Ft:B}function Di(at){return function(Ct){return Ct==null?h:Ct[at]}}function Pa(at){return function(Ct){return at==null?h:at[Ct]}}function fi(at,Ct,Ft,fn,ur){return ur(at,function(Pr,so,T){Ft=fn?(fn=!1,Pr):Ct(Ft,Pr,so,T)}),Ft}function cu(at,Ct){for(var Ft,fn=-1,ur=at.length;++fn<ur;){var Pr=Ct(at[fn]);Pr!==h&&(Ft=Ft===h?Pr:Ft+Pr)}return Ft}function Dl(at,Ct){for(var Ft=-1,fn=Array(at);++Ft<at;)fn[Ft]=Ct(Ft);return fn}function ka(at){return at&&at.slice(0,ii(at)+1).replace(Dn,"")}function uo(at){return function(Ct){return at(Ct)}}function Hu(at,Ct){return Fr(Ct,function(Ft){return at[Ft]})}function Va(at,Ct){return at.has(Ct)}function va(at,Ct){for(var Ft=-1,fn=at.length;++Ft<fn&&su(Ct,at[Ft],0)>-1;);return Ft}function kc(at,Ct){for(var Ft=at.length;Ft--&&su(Ct,at[Ft],0)>-1;);return Ft}function Wd(at,Ct){for(var Ft=at.length,fn=0;Ft--;)at[Ft]===Ct&&++fn;return fn}var Nc=Pa({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Vo=Pa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Il(at){return"\\"+$f[at]}function Wa(at){return Oc.test(at)}function Yo(at){var Ct=-1,Ft=Array(at.size);return at.forEach(function(fn,ur){Ft[++Ct]=[ur,fn]}),Ft}function Rc(at,Ct){return function(Ft){return at(Ct(Ft))}}function ra(at,Ct){for(var Ft=-1,fn=at.length,ur=0,Pr=[];++Ft<fn;){var so=at[Ft];so!==Ct&&so!==w||(at[Ft]=w,Pr[ur++]=Ft)}return Pr}function ya(at){var Ct=-1,Ft=Array(at.size);return at.forEach(function(fn){Ft[++Ct]=fn}),Ft}function Ms(at){var Ct=-1,Ft=Array(at.size);return at.forEach(function(fn){Ft[++Ct]=[fn,fn]}),Ft}function Ii(at){return Wa(at)?function(Ct){for(var Ft=Ec.lastIndex=0;Ec.test(Ct);)++Ft;return Ft}(at):Ts(at)}function Zi(at){return Wa(at)?function(Ct){return Ct.match(Ec)||[]}(at):function(Ct){return Ct.split("")}(at)}function ii(at){for(var Ct=at.length;Ct--&&Ro.test(at.charAt(Ct)););return Ct}var oa=Pa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Mi=function at(Ct){var Ft,fn=(Ct=Ct==null?jo:Mi.defaults(jo.Object(),Ct,Mi.pick(jo,Vd))).Array,ur=Ct.Date,Pr=Ct.Error,so=Ct.Function,T=Ct.Math,M=Ct.Object,$=Ct.RegExp,ne=Ct.String,ge=Ct.TypeError,Ge=fn.prototype,pt=so.prototype,Ht=M.prototype,bn=Ct["__core-js_shared__"],yr=pt.toString,ln=Ht.hasOwnProperty,Wr=0,pr=(Ft=/[^.]+$/.exec(bn&&bn.keys&&bn.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",Dr=Ht.toString,ia=yr.call(M),_o=jo._,Ji=$("^"+yr.call(ln).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pl=Ss?Ct.Buffer:h,hl=Ct.Symbol,Ll=Ct.Uint8Array,fu=pl?pl.allocUnsafe:h,za=Rc(M.getPrototypeOf,M),du=M.create,qo=Ht.propertyIsEnumerable,Fl=Ge.splice,vl=hl?hl.isConcatSpreadable:h,Ha=hl?hl.iterator:h,Xa=hl?hl.toStringTag:h,Xu=function(){try{var d=Ja(M,"defineProperty");return d({},"",{}),d}catch{}}(),nh=Ct.clearTimeout!==jo.clearTimeout&&Ct.clearTimeout,rh=ur&&ur.now!==jo.Date.now&&ur.now,zd=Ct.setTimeout!==jo.setTimeout&&Ct.setTimeout,jc=T.ceil,Yu=T.floor,zf=M.getOwnPropertySymbols,oh=pl?pl.isBuffer:h,qu=Ct.isFinite,Cc=Ge.join,Hf=Rc(M.keys,M),Co=T.max,Li=T.min,Xf=ur.now,Yf=Ct.parseInt,Ps=T.random,Vv=Ge.reverse,ks=Ja(Ct,"DataView"),yl=Ja(Ct,"Map"),Dc=Ja(Ct,"Promise"),Ku=Ja(Ct,"Set"),pu=Ja(Ct,"WeakMap"),Ns=Ja(M,"create"),Ic=pu&&new pu,hu={},Wv=Au(ks),Lc=Au(yl),zv=Au(Dc),Hv=Au(Ku),ih=Au(pu),qf=hl?hl.prototype:h,Pi=qf?qf.valueOf:h,ah=qf?qf.toString:h;function ie(d){if(To(d)&&!mr(d)&&!(d instanceof kr)){if(d instanceof Na)return d;if(ln.call(d,"__wrapped__"))return md(d)}return new Na(d)}var Zu=function(){function d(){}return function(m){if(!Jr(m))return{};if(du)return du(m);d.prototype=m;var E=new d;return d.prototype=h,E}}();function $l(){}function Na(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=h}function kr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function gi(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var j=d[m];this.set(j[0],j[1])}}function $r(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var j=d[m];this.set(j[0],j[1])}}function Ya(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var j=d[m];this.set(j[0],j[1])}}function Bl(d){var m=-1,E=d==null?0:d.length;for(this.__data__=new Ya;++m<E;)this.add(d[m])}function ma(d){var m=this.__data__=new $r(d);this.size=m.size}function Kf(d,m){var E=mr(d),j=!E&&Mu(d),V=!E&&!j&&La(d),Q=!E&&!j&&!V&&Ke(d),pe=E||j||V||Q,Ee=pe?Dl(d.length,ne):[],Le=Ee.length;for(var ft in d)!m&&!ln.call(d,ft)||pe&&(ft=="length"||V&&(ft=="offset"||ft=="parent")||Q&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||no(ft,Le))||Ee.push(ft);return Ee}function Zf(d){var m=d.length;return m?d[np(0,m-1)]:h}function Hd(d,m){return xl(di(d),vu(m,0,d.length))}function lh(d){return xl(di(d))}function Ul(d,m,E){(E!==h&&!ua(d[m],E)||E===h&&!(m in d))&&qa(d,m,E)}function Do(d,m,E){var j=d[m];ln.call(d,m)&&ua(j,E)&&(E!==h||m in d)||qa(d,m,E)}function Rs(d,m){for(var E=d.length;E--;)if(ua(d[E][0],m))return E;return-1}function Xd(d,m,E,j){return yo(d,function(V,Q,pe){m(j,V,E(V),pe)}),j}function Gl(d,m){return d&&_l(m,It(m),d)}function qa(d,m,E){m=="__proto__"&&Xu?Xu(d,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):d[m]=E}function Fc(d,m){for(var E=-1,j=m.length,V=fn(j),Q=d==null;++E<j;)V[E]=Q?h:Wt(d,m[E]);return V}function vu(d,m,E){return d==d&&(E!==h&&(d=d<=E?d:E),m!==h&&(d=d>=m?d:m)),d}function ga(d,m,E,j,V,Q){var pe,Ee=1&m,Le=2&m,ft=4&m;if(E&&(pe=V?E(d,j,V,Q):E(d)),pe!==h)return pe;if(!Jr(d))return d;var mt=mr(d);if(mt){if(pe=function(Mt){var Jt=Mt.length,dr=new Mt.constructor(Jt);return Jt&&typeof Mt[0]=="string"&&ln.call(Mt,"index")&&(dr.index=Mt.index,dr.input=Mt.input),dr}(d),!Ee)return di(d,pe)}else{var Gt=So(d),An=Gt==K||Gt==z;if(La(d))return lp(d,Ee);if(Gt==fe||Gt==Y||An&&!V){if(pe=Le||An?{}:Ou(d),!Ee)return Le?function(Mt,Jt){return _l(Mt,Bs(Mt),Jt)}(d,function(Mt,Jt){return Mt&&_l(Jt,At(Jt),Mt)}(pe,d)):function(Mt,Jt){return _l(Mt,$s(Mt),Jt)}(d,Gl(pe,d))}else{if(!Vr[Gt])return V?d:{};pe=function(Mt,Jt,dr){var gn=Mt.constructor;switch(Jt){case vt:return Qu(Mt);case G:case C:return new gn(+Mt);case rt:return function(or,Ir){var Un=Ir?Qu(or.buffer):or.buffer;return new or.constructor(Un,or.byteOffset,or.byteLength)}(Mt,dr);case gt:case Nt:case yt:case Yt:case Ce:case we:case ke:case dt:case zt:return co(Mt,dr);case H:return new gn;case re:case _e:return new gn(Mt);case Te:return function(or){var Ir=new or.constructor(or.source,wr.exec(or));return Ir.lastIndex=or.lastIndex,Ir}(Mt);case he:return new gn;case De:return ar=Mt,Pi?M(Pi.call(ar)):{}}var ar}(d,Gt,Ee)}}Q||(Q=new ma);var On=Q.get(d);if(On)return On;Q.set(d,pe),be(d)?d.forEach(function(Mt){pe.add(ga(Mt,m,E,Mt,d,Q))}):_i(d)&&d.forEach(function(Mt,Jt){pe.set(Jt,ga(Mt,m,E,Jt,d,Q))});var Yn=mt?h:(ft?Le?hd:Kc:Le?At:It)(d);return Ri(Yn||d,function(Mt,Jt){Yn&&(Mt=d[Jt=Mt]),Do(pe,Jt,ga(Mt,m,E,Jt,d,Q))}),pe}function Yd(d,m,E){var j=E.length;if(d==null)return!j;for(d=M(d);j--;){var V=E[j],Q=m[V],pe=d[V];if(pe===h&&!(V in d)||!Q(pe))return!1}return!0}function qd(d,m,E){if(typeof d!="function")throw new ge(g);return ns(function(){d.apply(h,E)},m)}function Ka(d,m,E,j){var V=-1,Q=Ti,pe=!0,Ee=d.length,Le=[],ft=m.length;if(!Ee)return Le;E&&(m=Fr(m,uo(E))),j?(Q=Mc,pe=!1):m.length>=200&&(Q=Va,pe=!1,m=new Bl(m));e:for(;++V<Ee;){var mt=d[V],Gt=E==null?mt:E(mt);if(mt=j||mt!==0?mt:0,pe&&Gt==Gt){for(var An=ft;An--;)if(m[An]===Gt)continue e;Le.push(mt)}else Q(m,Gt,j)||Le.push(mt)}return Le}ie.templateSettings={escape:Fe,evaluate:mn,interpolate:Kn,variable:"",imports:{_:ie}},ie.prototype=$l.prototype,ie.prototype.constructor=ie,Na.prototype=Zu($l.prototype),Na.prototype.constructor=Na,kr.prototype=Zu($l.prototype),kr.prototype.constructor=kr,gi.prototype.clear=function(){this.__data__=Ns?Ns(null):{},this.size=0},gi.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},gi.prototype.get=function(d){var m=this.__data__;if(Ns){var E=m[d];return E===_?h:E}return ln.call(m,d)?m[d]:h},gi.prototype.has=function(d){var m=this.__data__;return Ns?m[d]!==h:ln.call(m,d)},gi.prototype.set=function(d,m){var E=this.__data__;return this.size+=this.has(d)?0:1,E[d]=Ns&&m===h?_:m,this},$r.prototype.clear=function(){this.__data__=[],this.size=0},$r.prototype.delete=function(d){var m=this.__data__,E=Rs(m,d);return!(E<0)&&(E==m.length-1?m.pop():Fl.call(m,E,1),--this.size,!0)},$r.prototype.get=function(d){var m=this.__data__,E=Rs(m,d);return E<0?h:m[E][1]},$r.prototype.has=function(d){return Rs(this.__data__,d)>-1},$r.prototype.set=function(d,m){var E=this.__data__,j=Rs(E,d);return j<0?(++this.size,E.push([d,m])):E[j][1]=m,this},Ya.prototype.clear=function(){this.size=0,this.__data__={hash:new gi,map:new(yl||$r),string:new gi}},Ya.prototype.delete=function(d){var m=Fs(this,d).delete(d);return this.size-=m?1:0,m},Ya.prototype.get=function(d){return Fs(this,d).get(d)},Ya.prototype.has=function(d){return Fs(this,d).has(d)},Ya.prototype.set=function(d,m){var E=Fs(this,d),j=E.size;return E.set(d,m),this.size+=E.size==j?0:1,this},Bl.prototype.add=Bl.prototype.push=function(d){return this.__data__.set(d,_),this},Bl.prototype.has=function(d){return this.__data__.has(d)},ma.prototype.clear=function(){this.__data__=new $r,this.size=0},ma.prototype.delete=function(d){var m=this.__data__,E=m.delete(d);return this.size=m.size,E},ma.prototype.get=function(d){return this.__data__.get(d)},ma.prototype.has=function(d){return this.__data__.has(d)},ma.prototype.set=function(d,m){var E=this.__data__;if(E instanceof $r){var j=E.__data__;if(!yl||j.length<199)return j.push([d,m]),this.size=++E.size,this;E=this.__data__=new Ya(j)}return E.set(d,m),this.size=E.size,this};var yo=es(Nn),uh=es(ao,!0);function Kd(d,m){var E=!0;return yo(d,function(j,V,Q){return E=!!m(j,V,Q)}),E}function Io(d,m,E){for(var j=-1,V=d.length;++j<V;){var Q=d[j],pe=m(Q);if(pe!=null&&(Ee===h?pe==pe&&!ct(pe):E(pe,Ee)))var Ee=pe,Le=Q}return Le}function Hr(d,m){var E=[];return yo(d,function(j,V,Q){m(j,V,Q)&&E.push(j)}),E}function Ko(d,m,E,j,V){var Q=-1,pe=d.length;for(E||(E=Jc),V||(V=[]);++Q<pe;){var Ee=d[Q];m>0&&E(Ee)?m>1?Ko(Ee,m-1,E,j,V):oi(V,Ee):j||(V[V.length]=Ee)}return V}var Or=ld(),io=ld(!0);function Nn(d,m){return d&&Or(d,m,It)}function ao(d,m){return d&&io(d,m,It)}function $c(d,m){return ji(m,function(E){return Al(d[E])})}function ml(d,m){for(var E=0,j=(m=_u(m,d)).length;d!=null&&E<j;)d=d[tl(m[E++])];return E&&E==j?d:h}function Jf(d,m,E){var j=m(d);return mr(d)?j:oi(j,E(d))}function bo(d){return d==null?d===h?"[object Undefined]":"[object Null]":Xa&&Xa in M(d)?function(m){var E=ln.call(m,Xa),j=m[Xa];try{m[Xa]=h;var V=!0}catch{}var Q=Dr.call(m);return V&&(E?m[Xa]=j:delete m[Xa]),Q}(d):function(m){return Dr.call(m)}(d)}function xo(d,m){return d>m}function Zd(d,m){return d!=null&&ln.call(d,m)}function Jd(d,m){return d!=null&&m in M(d)}function Bc(d,m,E){for(var j=E?Mc:Ti,V=d[0].length,Q=d.length,pe=Q,Ee=fn(Q),Le=1/0,ft=[];pe--;){var mt=d[pe];pe&&m&&(mt=Fr(mt,uo(m))),Le=Li(mt.length,Le),Ee[pe]=!E&&(m||V>=120&&mt.length>=120)?new Bl(pe&&mt):h}mt=d[0];var Gt=-1,An=Ee[0];e:for(;++Gt<V&&ft.length<Le;){var On=mt[Gt],Yn=m?m(On):On;if(On=E||On!==0?On:0,!(An?Va(An,Yn):j(ft,Yn,E))){for(pe=Q;--pe;){var Mt=Ee[pe];if(!(Mt?Va(Mt,Yn):j(d[pe],Yn,E)))continue e}An&&An.push(Yn),ft.push(On)}}return ft}function Fi(d,m,E){var j=(d=Su(d,m=_u(m,d)))==null?d:d[tl($i(m))];return j==null?h:to(j,d,E)}function Qf(d){return To(d)&&bo(d)==Y}function js(d,m,E,j,V){return d===m||(d==null||m==null||!To(d)&&!To(m)?d!=d&&m!=m:function(Q,pe,Ee,Le,ft,mt){var Gt=mr(Q),An=mr(pe),On=Gt?te:So(Q),Yn=An?te:So(pe),Mt=(On=On==Y?fe:On)==fe,Jt=(Yn=Yn==Y?fe:Yn)==fe,dr=On==Yn;if(dr&&La(Q)){if(!La(pe))return!1;Gt=!0,Mt=!1}if(dr&&!Mt)return mt||(mt=new ma),Gt||Ke(Q)?pd(Q,pe,Ee,Le,ft,mt):function(Un,er,zo,nt,Jl,bi,Pu){switch(zo){case rt:if(Un.byteLength!=er.byteLength||Un.byteOffset!=er.byteOffset)return!1;Un=Un.buffer,er=er.buffer;case vt:return!(Un.byteLength!=er.byteLength||!bi(new Ll(Un),new Ll(er)));case G:case C:case re:return ua(+Un,+er);case W:return Un.name==er.name&&Un.message==er.message;case Te:case _e:return Un==er+"";case H:var us=Yo;case he:var wd=1&nt;if(us||(us=ya),Un.size!=er.size&&!wd)return!1;var Ep=Pu.get(Un);if(Ep)return Ep==er;nt|=2,Pu.set(Un,er);var cf=pd(us(Un),us(er),nt,Jl,bi,Pu);return Pu.delete(Un),cf;case De:if(Pi)return Pi.call(Un)==Pi.call(er)}return!1}(Q,pe,On,Ee,Le,ft,mt);if(!(1&Ee)){var gn=Mt&&ln.call(Q,"__wrapped__"),ar=Jt&&ln.call(pe,"__wrapped__");if(gn||ar){var or=gn?Q.value():Q,Ir=ar?pe.value():pe;return mt||(mt=new ma),ft(or,Ir,Ee,Le,mt)}}return dr?(mt||(mt=new ma),function(Un,er,zo,nt,Jl,bi){var Pu=1&zo,us=Kc(Un),wd=us.length,Ep=Kc(er).length;if(wd!=Ep&&!Pu)return!1;for(var cf=wd;cf--;){var qs=us[cf];if(!(Pu?qs in er:ln.call(er,qs)))return!1}var Jv=bi.get(Un),Qv=bi.get(er);if(Jv&&Qv)return Jv==er&&Qv==Un;var Op=!0;bi.set(Un,er),bi.set(er,Un);for(var Mh=Pu;++cf<wd;){var Ks=Un[qs=us[cf]],xp=er[qs];if(nt)var ey=Pu?nt(xp,Ks,qs,er,Un,bi):nt(Ks,xp,qs,Un,er,bi);if(!(ey===h?Ks===xp||Jl(Ks,xp,zo,nt,bi):ey)){Op=!1;break}Mh||(Mh=qs=="constructor")}if(Op&&!Mh){var Zs=Un.constructor,Sp=er.constructor;Zs==Sp||!("constructor"in Un)||!("constructor"in er)||typeof Zs=="function"&&Zs instanceof Zs&&typeof Sp=="function"&&Sp instanceof Sp||(Op=!1)}return bi.delete(Un),bi.delete(er),Op}(Q,pe,Ee,Le,ft,mt)):!1}(d,m,E,j,js,V))}function Ra(d,m,E,j){var V=E.length,Q=V,pe=!j;if(d==null)return!Q;for(d=M(d);V--;){var Ee=E[V];if(pe&&Ee[2]?Ee[1]!==d[Ee[0]]:!(Ee[0]in d))return!1}for(;++V<Q;){var Le=(Ee=E[V])[0],ft=d[Le],mt=Ee[1];if(pe&&Ee[2]){if(ft===h&&!(Le in d))return!1}else{var Gt=new ma;if(j)var An=j(ft,mt,Le,d,m,Gt);if(!(An===h?js(mt,ft,3,j,Gt):An))return!1}}return!0}function yu(d){return!(!Jr(d)||(m=d,pr&&pr in m))&&(Al(d)?Ji:Go).test(Au(d));var m}function Vl(d){return typeof d=="function"?d:d==null?zn:typeof d=="object"?mr(d)?ep(d[0],d[1]):Qd(d):se(d)}function ja(d){if(!xu(d))return Hf(d);var m=[];for(var E in M(d))ln.call(d,E)&&E!="constructor"&&m.push(E);return m}function sh(d){if(!Jr(d))return function(V){var Q=[];if(V!=null)for(var pe in M(V))Q.push(pe);return Q}(d);var m=xu(d),E=[];for(var j in d)(j!="constructor"||!m&&ln.call(d,j))&&E.push(j);return E}function gl(d,m){return d<m}function _a(d,m){var E=-1,j=sa(d)?fn(d.length):[];return yo(d,function(V,Q,pe){j[++E]=m(V,Q,pe)}),j}function Qd(d){var m=Zc(d);return m.length==1&&m[0][2]?Gs(m[0][0],m[0][1]):function(E){return E===d||Ra(E,d,m)}}function ep(d,m){return Xl(d)&&Ol(m)?Gs(tl(d),m):function(E){var j=Wt(E,d);return j===h&&j===m?bt(E,d):js(m,j,3)}}function ed(d,m,E,j,V){d!==m&&Or(m,function(Q,pe){if(V||(V=new ma),Jr(Q))(function(Le,ft,mt,Gt,An,On,Yn){var Mt=Rt(Le,mt),Jt=Rt(ft,mt),dr=Yn.get(Jt);if(dr)return void Ul(Le,mt,dr);var gn=On?On(Mt,Jt,mt+"",Le,ft,Yn):h,ar=gn===h;if(ar){var or=mr(Jt),Ir=!or&&La(Jt),Un=!or&&!Ir&&Ke(Jt);gn=Jt,or||Ir||Un?mr(Mt)?gn=Mt:Qo(Mt)?gn=di(Mt):Ir?(ar=!1,gn=lp(Jt,!0)):Un?(ar=!1,gn=co(Jt,!0)):gn=[]:F(Jt)||Mu(Jt)?(gn=Mt,Mu(Mt)?gn=kt(Mt):Jr(Mt)&&!Al(Mt)||(gn=Ou(Jt))):ar=!1}ar&&(Yn.set(Jt,gn),An(gn,Jt,Gt,On,Yn),Yn.delete(Jt)),Ul(Le,mt,gn)})(d,m,pe,E,ed,j,V);else{var Ee=j?j(Rt(d,pe),Q,pe+"",d,m,V):h;Ee===h&&(Ee=Q),Ul(d,pe,Ee)}},At)}function ch(d,m){var E=d.length;if(E)return no(m+=m<0?E:0,E)?d[m]:h}function fh(d,m,E){m=m.length?Fr(m,function(Q){return mr(Q)?function(pe){return ml(pe,Q.length===1?Q[0]:Q)}:Q}):[zn];var j=-1;m=Fr(m,uo(Jn()));var V=_a(d,function(Q,pe,Ee){var Le=Fr(m,function(ft){return ft(Q)});return{criteria:Le,index:++j,value:Q}});return function(Q,pe){var Ee=Q.length;for(Q.sort(pe);Ee--;)Q[Ee]=Q[Ee].value;return Q}(V,function(Q,pe){return function(Ee,Le,ft){for(var mt=-1,Gt=Ee.criteria,An=Le.criteria,On=Gt.length,Yn=ft.length;++mt<On;){var Mt=zc(Gt[mt],An[mt]);if(Mt)return mt>=Yn?Mt:Mt*(ft[mt]=="desc"?-1:1)}return Ee.index-Le.index}(Q,pe,E)})}function dh(d,m,E){for(var j=-1,V=m.length,Q={};++j<V;){var pe=m[j],Ee=ml(d,pe);E(Ee,pe)&&mu(Q,_u(pe,d),Ee)}return Q}function tp(d,m,E,j){var V=j?Ki:su,Q=-1,pe=m.length,Ee=d;for(d===m&&(m=di(m)),E&&(Ee=Fr(d,uo(E)));++Q<pe;)for(var Le=0,ft=m[Q],mt=E?E(ft):ft;(Le=V(Ee,mt,Le,j))>-1;)Ee!==d&&Fl.call(Ee,Le,1),Fl.call(d,Le,1);return d}function Cs(d,m){for(var E=d?m.length:0,j=E-1;E--;){var V=m[E];if(E==j||V!==Q){var Q=V;no(V)?Fl.call(d,V,1):rd(d,V)}}return d}function np(d,m){return d+Yu(Ps()*(m-d+1))}function Uc(d,m){var E="";if(!d||m<1||m>N)return E;do m%2&&(E+=d),(m=Yu(m/2))&&(d+=d);while(m);return E}function xr(d,m){return ef(Qc(d,m,zn),d+"")}function Xv(d){return Zf(gr(d))}function rp(d,m){var E=gr(d);return xl(E,vu(m,0,E.length))}function mu(d,m,E,j){if(!Jr(d))return d;for(var V=-1,Q=(m=_u(m,d)).length,pe=Q-1,Ee=d;Ee!=null&&++V<Q;){var Le=tl(m[V]),ft=E;if(Le==="__proto__"||Le==="constructor"||Le==="prototype")return d;if(V!=pe){var mt=Ee[Le];(ft=j?j(mt,Le,Ee):h)===h&&(ft=Jr(mt)?mt:no(m[V+1])?[]:{})}Do(Ee,Le,ft),Ee=Ee[Le]}return d}var Gc=Ic?function(d,m){return Ic.set(d,m),d}:zn,Yv=Xu?function(d,m){return Xu(d,"toString",{configurable:!0,enumerable:!1,value:Nr(m),writable:!0})}:zn;function qv(d){return xl(gr(d))}function Ca(d,m,E){var j=-1,V=d.length;m<0&&(m=-m>V?0:V+m),(E=E>V?V:E)<0&&(E+=V),V=m>E?0:E-m>>>0,m>>>=0;for(var Q=fn(V);++j<V;)Q[j]=d[j+m];return Q}function op(d,m){var E;return yo(d,function(j,V,Q){return!(E=m(j,V,Q))}),!!E}function td(d,m,E){var j=0,V=d==null?j:d.length;if(typeof m=="number"&&m==m&&V<=2147483647){for(;j<V;){var Q=j+V>>>1,pe=d[Q];pe!==null&&!ct(pe)&&(E?pe<=m:pe<m)?j=Q+1:V=Q}return V}return nd(d,m,zn,E)}function nd(d,m,E,j){var V=0,Q=d==null?0:d.length;if(Q===0)return 0;for(var pe=(m=E(m))!=m,Ee=m===null,Le=ct(m),ft=m===h;V<Q;){var mt=Yu((V+Q)/2),Gt=E(d[mt]),An=Gt!==h,On=Gt===null,Yn=Gt==Gt,Mt=ct(Gt);if(pe)var Jt=j||Yn;else Jt=ft?Yn&&(j||An):Ee?Yn&&An&&(j||!On):Le?Yn&&An&&!On&&(j||!Mt):!On&&!Mt&&(j?Gt<=m:Gt<m);Jt?V=mt+1:Q=mt}return Li(Q,4294967294)}function ph(d,m){for(var E=-1,j=d.length,V=0,Q=[];++E<j;){var pe=d[E],Ee=m?m(pe):pe;if(!E||!ua(Ee,Le)){var Le=Ee;Q[V++]=pe===0?0:pe}}return Q}function ip(d){return typeof d=="number"?d:ct(d)?B:+d}function aa(d){if(typeof d=="string")return d;if(mr(d))return Fr(d,aa)+"";if(ct(d))return ah?ah.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function gu(d,m,E){var j=-1,V=Ti,Q=d.length,pe=!0,Ee=[],Le=Ee;if(E)pe=!1,V=Mc;else if(Q>=200){var ft=m?null:fd(d);if(ft)return ya(ft);pe=!1,V=Va,Le=new Bl}else Le=m?[]:Ee;e:for(;++j<Q;){var mt=d[j],Gt=m?m(mt):mt;if(mt=E||mt!==0?mt:0,pe&&Gt==Gt){for(var An=Le.length;An--;)if(Le[An]===Gt)continue e;m&&Le.push(Gt),Ee.push(mt)}else V(Le,Gt,E)||(Le!==Ee&&Le.push(Gt),Ee.push(mt))}return Ee}function rd(d,m){return(d=Su(d,m=_u(m,d)))==null||delete d[tl($i(m))]}function Ju(d,m,E,j){return mu(d,m,E(ml(d,m)),j)}function Vc(d,m,E,j){for(var V=d.length,Q=j?V:-1;(j?Q--:++Q<V)&&m(d[Q],Q,d););return E?Ca(d,j?0:Q,j?Q+1:V):Ca(d,j?Q+1:0,j?V:Q)}function hh(d,m){var E=d;return E instanceof kr&&(E=E.value()),As(m,function(j,V){return V.func.apply(V.thisArg,oi([j],V.args))},E)}function Wc(d,m,E){var j=d.length;if(j<2)return j?gu(d[0]):[];for(var V=-1,Q=fn(j);++V<j;)for(var pe=d[V],Ee=-1;++Ee<j;)Ee!=V&&(Q[V]=Ka(Q[V]||pe,d[Ee],m,E));return gu(Ko(Q,1),m,E)}function od(d,m,E){for(var j=-1,V=d.length,Q=m.length,pe={};++j<V;){var Ee=j<Q?m[j]:h;E(pe,d[j],Ee)}return pe}function id(d){return Qo(d)?d:[]}function ad(d){return typeof d=="function"?d:zn}function _u(d,m){return mr(d)?d:Xl(d,m)?[d]:hp(_t(d))}var vh=xr;function bu(d,m,E){var j=d.length;return E=E===h?j:E,!m&&E>=j?d:Ca(d,m,E)}var ap=nh||function(d){return jo.clearTimeout(d)};function lp(d,m){if(m)return d.slice();var E=d.length,j=fu?fu(E):new d.constructor(E);return d.copy(j),j}function Qu(d){var m=new d.constructor(d.byteLength);return new Ll(m).set(new Ll(d)),m}function co(d,m){var E=m?Qu(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.length)}function zc(d,m){if(d!==m){var E=d!==h,j=d===null,V=d==d,Q=ct(d),pe=m!==h,Ee=m===null,Le=m==m,ft=ct(m);if(!Ee&&!ft&&!Q&&d>m||Q&&pe&&Le&&!Ee&&!ft||j&&pe&&Le||!E&&Le||!V)return 1;if(!j&&!Q&&!ft&&d<m||ft&&E&&V&&!j&&!Q||Ee&&E&&V||!pe&&V||!Le)return-1}return 0}function wo(d,m,E,j){for(var V=-1,Q=d.length,pe=E.length,Ee=-1,Le=m.length,ft=Co(Q-pe,0),mt=fn(Le+ft),Gt=!j;++Ee<Le;)mt[Ee]=m[Ee];for(;++V<pe;)(Gt||V<Q)&&(mt[E[V]]=d[V]);for(;ft--;)mt[Ee++]=d[V++];return mt}function Wl(d,m,E,j){for(var V=-1,Q=d.length,pe=-1,Ee=E.length,Le=-1,ft=m.length,mt=Co(Q-Ee,0),Gt=fn(mt+ft),An=!j;++V<mt;)Gt[V]=d[V];for(var On=V;++Le<ft;)Gt[On+Le]=m[Le];for(;++pe<Ee;)(An||V<Q)&&(Gt[On+E[pe]]=d[V++]);return Gt}function di(d,m){var E=-1,j=d.length;for(m||(m=fn(j));++E<j;)m[E]=d[E];return m}function _l(d,m,E,j){var V=!E;E||(E={});for(var Q=-1,pe=m.length;++Q<pe;){var Ee=m[Q],Le=j?j(E[Ee],d[Ee],Ee,E,d):h;Le===h&&(Le=d[Ee]),V?qa(E,Ee,Le):Do(E,Ee,Le)}return E}function zl(d,m){return function(E,j){var V=mr(E)?Gf:Xd,Q=m?m():{};return V(E,d,Jn(j,2),Q)}}function wu(d){return xr(function(m,E){var j=-1,V=E.length,Q=V>1?E[V-1]:h,pe=V>2?E[2]:h;for(Q=d.length>3&&typeof Q=="function"?(V--,Q):h,pe&&Lo(E[0],E[1],pe)&&(Q=V<3?h:Q,V=1),m=M(m);++j<V;){var Ee=E[j];Ee&&d(m,Ee,j,Q)}return m})}function es(d,m){return function(E,j){if(E==null)return E;if(!sa(E))return d(E,j);for(var V=E.length,Q=m?V:-1,pe=M(E);(m?Q--:++Q<V)&&j(pe[Q],Q,pe)!==!1;);return E}}function ld(d){return function(m,E,j){for(var V=-1,Q=M(m),pe=j(m),Ee=pe.length;Ee--;){var Le=pe[d?Ee:++V];if(E(Q[Le],Le,Q)===!1)break}return m}}function ud(d){return function(m){var E=Wa(m=_t(m))?Zi(m):h,j=E?E[0]:m.charAt(0),V=E?bu(E,1).join(""):m.slice(1);return j[d]()+V}}function bl(d){return function(m){return As(Oo(cr(m).replace(Lf,"")),d,"")}}function ts(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=Zu(d.prototype),j=d.apply(E,m);return Jr(j)?j:E}}function sd(d){return function(m,E,j){var V=M(m);if(!sa(m)){var Q=Jn(E,3);m=It(m),E=function(Ee){return Q(V[Ee],Ee,V)}}var pe=d(m,E,j);return pe>-1?V[Q?m[pe]:pe]:h}}function Hc(d){return El(function(m){var E=m.length,j=E,V=Na.prototype.thru;for(d&&m.reverse();j--;){var Q=m[j];if(typeof Q!="function")throw new ge(g);if(V&&!pe&&Ls(Q)=="wrapper")var pe=new Na([],!0)}for(j=pe?j:E;++j<E;){var Ee=Ls(Q=m[j]),Le=Ee=="wrapper"?vd(Q):h;pe=Le&&Qa(Le[0])&&Le[1]==424&&!Le[4].length&&Le[9]==1?pe[Ls(Le[0])].apply(pe,Le[3]):Q.length==1&&Qa(Q)?pe[Ee]():pe.thru(Q)}return function(){var ft=arguments,mt=ft[0];if(pe&&ft.length==1&&mr(mt))return pe.plant(mt).value();for(var Gt=0,An=E?m[Gt].apply(this,ft):mt;++Gt<E;)An=m[Gt].call(this,An);return An}})}function Eu(d,m,E,j,V,Q,pe,Ee,Le,ft){var mt=m&A,Gt=1&m,An=2&m,On=24&m,Yn=512&m,Mt=An?h:ts(d);return function Jt(){for(var dr=arguments.length,gn=fn(dr),ar=dr;ar--;)gn[ar]=arguments[ar];if(On)var or=Hl(Jt),Ir=Wd(gn,or);if(j&&(gn=wo(gn,j,V,On)),Q&&(gn=Wl(gn,Q,pe,On)),dr-=Ir,On&&dr<ft){var Un=ra(gn,or);return Yc(d,m,Eu,Jt.placeholder,E,gn,Un,Ee,Le,ft-dr)}var er=Gt?E:this,zo=An?er[d]:d;return dr=gn.length,Ee?gn=Vs(gn,Ee):Yn&&dr>1&&gn.reverse(),mt&&Le<dr&&(gn.length=Le),this&&this!==jo&&this instanceof Jt&&(zo=Mt||ts(zo)),zo.apply(er,gn)}}function up(d,m){return function(E,j){return function(V,Q,pe,Ee){return Nn(V,function(Le,ft,mt){Q(Ee,pe(Le),ft,mt)}),Ee}(E,d,m(j),{})}}function Ds(d,m){return function(E,j){var V;if(E===h&&j===h)return m;if(E!==h&&(V=E),j!==h){if(V===h)return j;typeof E=="string"||typeof j=="string"?(E=aa(E),j=aa(j)):(E=ip(E),j=ip(j)),V=d(E,j)}return V}}function cd(d){return El(function(m){return m=Fr(m,uo(Jn())),xr(function(E){var j=this;return d(m,function(V){return to(V,j,E)})})})}function Xc(d,m){var E=(m=m===h?" ":aa(m)).length;if(E<2)return E?Uc(m,d):m;var j=Uc(m,jc(d/Ii(m)));return Wa(m)?bu(Zi(j),0,d).join(""):j.slice(0,d)}function wl(d){return function(m,E,j){return j&&typeof j!="number"&&Lo(m,E,j)&&(E=j=h),m=jt(m),E===h?(E=m,m=0):E=jt(E),function(V,Q,pe,Ee){for(var Le=-1,ft=Co(jc((Q-V)/(pe||1)),0),mt=fn(ft);ft--;)mt[Ee?ft:++Le]=V,V+=pe;return mt}(m,E,j=j===h?m<E?1:-1:jt(j),d)}}function Is(d){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ut(m),E=Ut(E)),d(m,E)}}function Yc(d,m,E,j,V,Q,pe,Ee,Le,ft){var mt=8&m;m|=mt?S:P,4&(m&=~(mt?P:S))||(m&=-4);var Gt=[d,m,V,mt?Q:h,mt?pe:h,mt?h:Q,mt?h:pe,Ee,Le,ft],An=E.apply(h,Gt);return Qa(d)&&dp(An,Gt),An.placeholder=j,yd(An,d,m)}function qc(d){var m=T[d];return function(E,j){if(E=Ut(E),(j=j==null?0:Li(ut(j),292))&&qu(E)){var V=(_t(E)+"e").split("e");return+((V=(_t(m(V[0]+"e"+(+V[1]+j)))+"e").split("e"))[0]+"e"+(+V[1]-j))}return m(E)}}var fd=Ku&&1/ya(new Ku([,-0]))[1]==D?function(d){return new Ku(d)}:tt;function dd(d){return function(m){var E=So(m);return E==H?Yo(m):E==he?Ms(m):function(j,V){return Fr(V,function(Q){return[Q,j[Q]]})}(m,d(m))}}function Za(d,m,E,j,V,Q,pe,Ee){var Le=2&m;if(!Le&&typeof d!="function")throw new ge(g);var ft=j?j.length:0;if(ft||(m&=-97,j=V=h),pe=pe===h?pe:Co(ut(pe),0),Ee=Ee===h?Ee:ut(Ee),ft-=V?V.length:0,m&P){var mt=j,Gt=V;j=V=h}var An=Le?h:vd(d),On=[d,m,E,j,V,mt,Gt,Q,pe,Ee];if(An&&function(Mt,Jt){var dr=Mt[1],gn=Jt[1],ar=dr|gn,or=ar<131,Ir=gn==A&&dr==8||gn==A&&dr==R&&Mt[7].length<=Jt[8]||gn==384&&Jt[7].length<=Jt[8]&&dr==8;if(!or&&!Ir)return Mt;1&gn&&(Mt[2]=Jt[2],ar|=1&dr?0:4);var Un=Jt[3];if(Un){var er=Mt[3];Mt[3]=er?wo(er,Un,Jt[4]):Un,Mt[4]=er?ra(Mt[3],w):Jt[4]}(Un=Jt[5])&&(er=Mt[5],Mt[5]=er?Wl(er,Un,Jt[6]):Un,Mt[6]=er?ra(Mt[5],w):Jt[6]),(Un=Jt[7])&&(Mt[7]=Un),gn&A&&(Mt[8]=Mt[8]==null?Jt[8]:Li(Mt[8],Jt[8])),Mt[9]==null&&(Mt[9]=Jt[9]),Mt[0]=Jt[0],Mt[1]=ar}(On,An),d=On[0],m=On[1],E=On[2],j=On[3],V=On[4],!(Ee=On[9]=On[9]===h?Le?0:d.length:Co(On[9]-ft,0))&&24&m&&(m&=-25),m&&m!=1)Yn=m==8||m==O?function(Mt,Jt,dr){var gn=ts(Mt);return function ar(){for(var or=arguments.length,Ir=fn(or),Un=or,er=Hl(ar);Un--;)Ir[Un]=arguments[Un];var zo=or<3&&Ir[0]!==er&&Ir[or-1]!==er?[]:ra(Ir,er);return(or-=zo.length)<dr?Yc(Mt,Jt,Eu,ar.placeholder,h,Ir,zo,h,h,dr-or):to(this&&this!==jo&&this instanceof ar?gn:Mt,this,Ir)}}(d,m,Ee):m!=S&&m!=33||V.length?Eu.apply(h,On):function(Mt,Jt,dr,gn){var ar=1&Jt,or=ts(Mt);return function Ir(){for(var Un=-1,er=arguments.length,zo=-1,nt=gn.length,Jl=fn(nt+er),bi=this&&this!==jo&&this instanceof Ir?or:Mt;++zo<nt;)Jl[zo]=gn[zo];for(;er--;)Jl[zo++]=arguments[++Un];return to(bi,ar?dr:this,Jl)}}(d,m,E,j);else var Yn=function(Mt,Jt,dr){var gn=1&Jt,ar=ts(Mt);return function or(){return(this&&this!==jo&&this instanceof or?ar:Mt).apply(gn?dr:this,arguments)}}(d,m,E);return yd((An?Gc:dp)(Yn,On),d,m)}function sp(d,m,E,j){return d===h||ua(d,Ht[E])&&!ln.call(j,E)?m:d}function cp(d,m,E,j,V,Q){return Jr(d)&&Jr(m)&&(Q.set(m,d),ed(d,m,h,cp,Q),Q.delete(m)),d}function fp(d){return F(d)?h:d}function pd(d,m,E,j,V,Q){var pe=1&E,Ee=d.length,Le=m.length;if(Ee!=Le&&!(pe&&Le>Ee))return!1;var ft=Q.get(d),mt=Q.get(m);if(ft&&mt)return ft==m&&mt==d;var Gt=-1,An=!0,On=2&E?new Bl:h;for(Q.set(d,m),Q.set(m,d);++Gt<Ee;){var Yn=d[Gt],Mt=m[Gt];if(j)var Jt=pe?j(Mt,Yn,Gt,m,d,Q):j(Yn,Mt,Gt,d,m,Q);if(Jt!==h){if(Jt)continue;An=!1;break}if(On){if(!Pc(m,function(dr,gn){if(!Va(On,gn)&&(Yn===dr||V(Yn,dr,E,j,Q)))return On.push(gn)})){An=!1;break}}else if(Yn!==Mt&&!V(Yn,Mt,E,j,Q)){An=!1;break}}return Q.delete(d),Q.delete(m),An}function El(d){return ef(Qc(d,h,mp),d+"")}function Kc(d){return Jf(d,It,$s)}function hd(d){return Jf(d,At,Bs)}var vd=Ic?function(d){return Ic.get(d)}:tt;function Ls(d){for(var m=d.name+"",E=hu[m],j=ln.call(hu,m)?E.length:0;j--;){var V=E[j],Q=V.func;if(Q==null||Q==d)return V.name}return m}function Hl(d){return(ln.call(ie,"placeholder")?ie:d).placeholder}function Jn(){var d=ie.iteratee||lo;return d=d===lo?Vl:d,arguments.length?d(arguments[0],arguments[1]):d}function Fs(d,m){var E,j,V=d.__data__;return((j=typeof(E=m))=="string"||j=="number"||j=="symbol"||j=="boolean"?E!=="__proto__":E===null)?V[typeof m=="string"?"string":"hash"]:V.map}function Zc(d){for(var m=It(d),E=m.length;E--;){var j=m[E],V=d[j];m[E]=[j,V,Ol(V)]}return m}function Ja(d,m){var E=function(j,V){return j==null?h:j[V]}(d,m);return yu(E)?E:h}var $s=zf?function(d){return d==null?[]:(d=M(d),ji(zf(d),function(m){return qo.call(d,m)}))}:Ue,Bs=zf?function(d){for(var m=[];d;)oi(m,$s(d)),d=za(d);return m}:Ue,So=bo;function Us(d,m,E){for(var j=-1,V=(m=_u(m,d)).length,Q=!1;++j<V;){var pe=tl(m[j]);if(!(Q=d!=null&&E(d,pe)))break;d=d[pe]}return Q||++j!=V?Q:!!(V=d==null?0:d.length)&&Kl(V)&&no(pe,V)&&(mr(d)||Mu(d))}function Ou(d){return typeof d.constructor!="function"||xu(d)?{}:Zu(za(d))}function Jc(d){return mr(d)||Mu(d)||!!(vl&&d&&d[vl])}function no(d,m){var E=typeof d;return!!(m=m??N)&&(E=="number"||E!="symbol"&&Sn.test(d))&&d>-1&&d%1==0&&d<m}function Lo(d,m,E){if(!Jr(E))return!1;var j=typeof m;return!!(j=="number"?sa(E)&&no(m,E.length):j=="string"&&m in E)&&ua(E[m],d)}function Xl(d,m){if(mr(d))return!1;var E=typeof d;return!(E!="number"&&E!="symbol"&&E!="boolean"&&d!=null&&!ct(d))||$n.test(d)||!oe.test(d)||m!=null&&d in M(m)}function Qa(d){var m=Ls(d),E=ie[m];if(typeof E!="function"||!(m in kr.prototype))return!1;if(d===E)return!0;var j=vd(E);return!!j&&d===j[0]}(ks&&So(new ks(new ArrayBuffer(1)))!=rt||yl&&So(new yl)!=H||Dc&&So(Dc.resolve())!=Se||Ku&&So(new Ku)!=he||pu&&So(new pu)!=Ve)&&(So=function(d){var m=bo(d),E=m==fe?d.constructor:h,j=E?Au(E):"";if(j)switch(j){case Wv:return rt;case Lc:return H;case zv:return Se;case Hv:return he;case ih:return Ve}return m});var el=bn?Al:ze;function xu(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function Ol(d){return d==d&&!Jr(d)}function Gs(d,m){return function(E){return E!=null&&E[d]===m&&(m!==h||d in M(E))}}function Qc(d,m,E){return m=Co(m===h?d.length-1:m,0),function(){for(var j=arguments,V=-1,Q=Co(j.length-m,0),pe=fn(Q);++V<Q;)pe[V]=j[m+V];V=-1;for(var Ee=fn(m+1);++V<m;)Ee[V]=j[V];return Ee[m]=E(pe),to(d,this,Ee)}}function Su(d,m){return m.length<2?d:ml(d,Ca(m,0,-1))}function Vs(d,m){for(var E=d.length,j=Li(m.length,E),V=di(d);j--;){var Q=m[j];d[j]=no(Q,E)?V[Q]:h}return d}function Rt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var dp=pp(Gc),ns=zd||function(d,m){return jo.setTimeout(d,m)},ef=pp(Yv);function yd(d,m,E){var j=m+"";return ef(d,function(V,Q){var pe=Q.length;if(!pe)return V;var Ee=pe-1;return Q[Ee]=(pe>1?"& ":"")+Q[Ee],Q=Q.join(pe>2?", ":" "),V.replace(xe,`{
/* [wrapped with `+Q+`] */
`)}(j,function(V,Q){return Ri(Z,function(pe){var Ee="_."+pe[0];Q&pe[1]&&!Ti(V,Ee)&&V.push(Ee)}),V.sort()}(function(V){var Q=V.match(He);return Q?Q[1].split(je):[]}(j),E)))}function pp(d){var m=0,E=0;return function(){var j=Xf(),V=16-(j-E);if(E=j,V>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(h,arguments)}}function xl(d,m){var E=-1,j=d.length,V=j-1;for(m=m===h?j:m;++E<m;){var Q=np(E,V),pe=d[Q];d[Q]=d[E],d[E]=pe}return d.length=m,d}var hp=function(d){var m=Tu(d,function(j){return E.size===500&&E.clear(),j}),E=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(Sr,function(E,j,V,Q){m.push(V?Q.replace(qt,"$1"):j||E)}),m});function tl(d){if(typeof d=="string"||ct(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function Au(d){if(d!=null){try{return yr.call(d)}catch{}try{return d+""}catch{}}return""}function md(d){if(d instanceof kr)return d.clone();var m=new Na(d.__wrapped__,d.__chain__);return m.__actions__=di(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var yh=xr(function(d,m){return Qo(d)?Ka(d,Ko(m,1,Qo,!0)):[]}),mh=xr(function(d,m){var E=$i(m);return Qo(E)&&(E=h),Qo(d)?Ka(d,Ko(m,1,Qo,!0),Jn(E,2)):[]}),gh=xr(function(d,m){var E=$i(m);return Qo(E)&&(E=h),Qo(d)?Ka(d,Ko(m,1,Qo,!0),h,E):[]});function vp(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=E==null?0:ut(E);return V<0&&(V=Co(j+V,0)),Ci(d,Jn(m,3),V)}function yp(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=j-1;return E!==h&&(V=ut(E),V=E<0?Co(j+V,0):Li(V,j-1)),Ci(d,Jn(m,3),V,!0)}function mp(d){return d!=null&&d.length?Ko(d,1):[]}function gp(d){return d&&d.length?d[0]:h}var _h=xr(function(d){var m=Fr(d,id);return m.length&&m[0]===d[0]?Bc(m):[]}),bh=xr(function(d){var m=$i(d),E=Fr(d,id);return m===$i(E)?m=h:E.pop(),E.length&&E[0]===d[0]?Bc(E,Jn(m,2)):[]}),wh=xr(function(d){var m=$i(d),E=Fr(d,id);return(m=typeof m=="function"?m:h)&&E.pop(),E.length&&E[0]===d[0]?Bc(E,h,m):[]});function $i(d){var m=d==null?0:d.length;return m?d[m-1]:h}var rs=xr(tf);function tf(d,m){return d&&d.length&&m&&m.length?tp(d,m):d}var la=El(function(d,m){var E=d==null?0:d.length,j=Fc(d,m);return Cs(d,Fr(m,function(V){return no(V,E)?+V:V}).sort(zc)),j});function Da(d){return d==null?d:Vv.call(d)}var gd=xr(function(d){return gu(Ko(d,1,Qo,!0))}),Bi=xr(function(d){var m=$i(d);return Qo(m)&&(m=h),gu(Ko(d,1,Qo,!0),Jn(m,2))}),nf=xr(function(d){var m=$i(d);return m=typeof m=="function"?m:h,gu(Ko(d,1,Qo,!0),h,m)});function os(d){if(!d||!d.length)return[];var m=0;return d=ji(d,function(E){if(Qo(E))return m=Co(E.length,m),!0}),Dl(m,function(E){return Fr(d,Di(E))})}function Ws(d,m){if(!d||!d.length)return[];var E=os(d);return m==null?E:Fr(E,function(j){return to(m,h,j)})}var rf=xr(function(d,m){return Qo(d)?Ka(d,m):[]}),of=xr(function(d){return Wc(ji(d,Qo))}),zs=xr(function(d){var m=$i(d);return Qo(m)&&(m=h),Wc(ji(d,Qo),Jn(m,2))}),Hs=xr(function(d){var m=$i(d);return m=typeof m=="function"?m:h,Wc(ji(d,Qo),h,m)}),is=xr(os),Yl=xr(function(d){var m=d.length,E=m>1?d[m-1]:h;return E=typeof E=="function"?(d.pop(),E):h,Ws(d,E)});function Zo(d){var m=ie(d);return m.__chain__=!0,m}function af(d,m){return m(d)}var lf=El(function(d){var m=d.length,E=m?d[0]:0,j=this.__wrapped__,V=function(Q){return Fc(Q,d)};return!(m>1||this.__actions__.length)&&j instanceof kr&&no(E)?((j=j.slice(E,+E+(m?1:0))).__actions__.push({func:af,args:[V],thisArg:h}),new Na(j,this.__chain__).thru(function(Q){return m&&!Q.length&&Q.push(h),Q})):this.thru(V)}),ql=zl(function(d,m,E){ln.call(d,E)?++d[E]:qa(d,E,1)}),_p=sd(vp),Ui=sd(yp);function Jo(d,m){return(mr(d)?Ri:yo)(d,Jn(m,3))}function Eh(d,m){return(mr(d)?Tc:uh)(d,Jn(m,3))}var Ia=zl(function(d,m,E){ln.call(d,E)?d[E].push(m):qa(d,E,[m])}),Fn=xr(function(d,m,E){var j=-1,V=typeof m=="function",Q=sa(d)?fn(d.length):[];return yo(d,function(pe){Q[++j]=V?to(m,pe,E):Fi(pe,m,E)}),Q}),_d=zl(function(d,m,E){qa(d,E,m)});function as(d,m){return(mr(d)?Fr:_a)(d,Jn(m,3))}var bd=zl(function(d,m,E){d[E?0:1].push(m)},function(){return[[],[]]}),Oh=xr(function(d,m){if(d==null)return[];var E=m.length;return E>1&&Lo(d,m[0],m[1])?m=[]:E>2&&Lo(m[0],m[1],m[2])&&(m=[m[0]]),fh(d,Ko(m,1),[])}),Xs=rh||function(){return jo.Date.now()};function xh(d,m,E){return m=E?h:m,m=d&&m==null?d.length:m,Za(d,A,h,h,h,h,m)}function nl(d,m){var E;if(typeof m!="function")throw new ge(g);return d=ut(d),function(){return--d>0&&(E=m.apply(this,arguments)),d<=1&&(m=h),E}}var Ys=xr(function(d,m,E){var j=1;if(E.length){var V=ra(E,Hl(Ys));j|=S}return Za(d,j,m,E,V)}),ls=xr(function(d,m,E){var j=3;if(E.length){var V=ra(E,Hl(ls));j|=S}return Za(m,j,d,E,V)});function rl(d,m,E){var j,V,Q,pe,Ee,Le,ft=0,mt=!1,Gt=!1,An=!0;if(typeof d!="function")throw new ge(g);function On(ar){var or=j,Ir=V;return j=V=h,ft=ar,pe=d.apply(Ir,or)}function Yn(ar){return ft=ar,Ee=ns(Jt,m),mt?On(ar):pe}function Mt(ar){var or=ar-Le;return Le===h||or>=m||or<0||Gt&&ar-ft>=Q}function Jt(){var ar=Xs();if(Mt(ar))return dr(ar);Ee=ns(Jt,function(or){var Ir=m-(or-Le);return Gt?Li(Ir,Q-(or-ft)):Ir}(ar))}function dr(ar){return Ee=h,An&&j?On(ar):(j=V=h,pe)}function gn(){var ar=Xs(),or=Mt(ar);if(j=arguments,V=this,Le=ar,or){if(Ee===h)return Yn(Le);if(Gt)return ap(Ee),Ee=ns(Jt,m),On(Le)}return Ee===h&&(Ee=ns(Jt,m)),pe}return m=Ut(m)||0,Jr(E)&&(mt=!!E.leading,Q=(Gt="maxWait"in E)?Co(Ut(E.maxWait)||0,m):Q,An="trailing"in E?!!E.trailing:An),gn.cancel=function(){Ee!==h&&ap(Ee),ft=0,j=Le=V=Ee=h},gn.flush=function(){return Ee===h?pe:dr(Xs())},gn}var Sh=xr(function(d,m){return qd(d,1,m)}),bp=xr(function(d,m,E){return qd(d,Ut(m)||0,E)});function Tu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new ge(g);var E=function(){var j=arguments,V=m?m.apply(this,j):j[0],Q=E.cache;if(Q.has(V))return Q.get(V);var pe=d.apply(this,j);return E.cache=Q.set(V,pe)||Q,pe};return E.cache=new(Tu.Cache||Ya),E}function Sl(d){if(typeof d!="function")throw new ge(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}Tu.Cache=Ya;var Gi=vh(function(d,m){var E=(m=m.length==1&&mr(m[0])?Fr(m[0],uo(Jn())):Fr(Ko(m,1),uo(Jn()))).length;return xr(function(j){for(var V=-1,Q=Li(j.length,E);++V<Q;)j[V]=m[V].call(this,j[V]);return to(d,this,j)})}),Gn=xr(function(d,m){var E=ra(m,Hl(Gn));return Za(d,S,h,m,E)}),Ao=xr(function(d,m){var E=ra(m,Hl(Ao));return Za(d,P,h,m,E)}),ki=El(function(d,m){return Za(d,R,h,h,h,m)});function ua(d,m){return d===m||d!=d&&m!=m}var Kv=Is(xo),Ah=Is(function(d,m){return d>=m}),Mu=Qf(function(){return arguments}())?Qf:function(d){return To(d)&&ln.call(d,"callee")&&!qo.call(d,"callee")},mr=fn.isArray,Th=Sc?uo(Sc):function(d){return To(d)&&bo(d)==vt};function sa(d){return d!=null&&Kl(d.length)&&!Al(d)}function Qo(d){return To(d)&&sa(d)}var La=oh||ze,Zv=Uf?uo(Uf):function(d){return To(d)&&bo(d)==C};function uf(d){if(!To(d))return!1;var m=bo(d);return m==W||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!F(d)}function Al(d){if(!Jr(d))return!1;var m=bo(d);return m==K||m==z||m=="[object AsyncFunction]"||m=="[object Proxy]"}function wp(d){return typeof d=="number"&&d==ut(d)}function Kl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=N}function Jr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function To(d){return d!=null&&typeof d=="object"}var _i=Ac?uo(Ac):function(d){return To(d)&&So(d)==H};function sf(d){return typeof d=="number"||To(d)&&bo(d)==re}function F(d){if(!To(d)||bo(d)!=fe)return!1;var m=za(d);if(m===null)return!0;var E=ln.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&yr.call(E)==ia}var ae=Ni?uo(Ni):function(d){return To(d)&&bo(d)==Te},be=ri?uo(ri):function(d){return To(d)&&So(d)==he};function Qe(d){return typeof d=="string"||!mr(d)&&To(d)&&bo(d)==_e}function ct(d){return typeof d=="symbol"||To(d)&&bo(d)==De}var Ke=na?uo(na):function(d){return To(d)&&Kl(d.length)&&!!zr[bo(d)]},lt=Is(gl),Pt=Is(function(d,m){return d<=m});function Dt(d){if(!d)return[];if(sa(d))return Qe(d)?Zi(d):di(d);if(Ha&&d[Ha])return function(E){for(var j,V=[];!(j=E.next()).done;)V.push(j.value);return V}(d[Ha]());var m=So(d);return(m==H?Yo:m==he?ya:gr)(d)}function jt(d){return d?(d=Ut(d))===D||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function ut(d){var m=jt(d),E=m%1;return m==m?E?m-E:m:0}function Vt(d){return d?vu(ut(d),0,q):0}function Ut(d){if(typeof d=="number")return d;if(ct(d))return B;if(Jr(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Jr(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=ka(d);var E=yi.test(d);return E||Xo.test(d)?pa(d.slice(2),E?2:8):ni.test(d)?B:+d}function kt(d){return _l(d,At(d))}function _t(d){return d==null?"":aa(d)}var We=wu(function(d,m){if(xu(m)||sa(m))_l(m,It(m),d);else for(var E in m)ln.call(m,E)&&Do(d,E,m[E])}),it=wu(function(d,m){_l(m,At(m),d)}),Lt=wu(function(d,m,E,j){_l(m,At(m),d,j)}),Kt=wu(function(d,m,E,j){_l(m,It(m),d,j)}),xt=El(Fc),Zt=xr(function(d,m){d=M(d);var E=-1,j=m.length,V=j>2?m[2]:h;for(V&&Lo(m[0],m[1],V)&&(j=1);++E<j;)for(var Q=m[E],pe=At(Q),Ee=-1,Le=pe.length;++Ee<Le;){var ft=pe[Ee],mt=d[ft];(mt===h||ua(mt,Ht[ft])&&!ln.call(d,ft))&&(d[ft]=Q[ft])}return d}),St=xr(function(d){return d.push(h,cp),to(Cn,h,d)});function Wt(d,m,E){var j=d==null?h:ml(d,m);return j===h?E:j}function bt(d,m){return d!=null&&Us(d,m,Jd)}var Xt=up(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Dr.call(m)),d[m]=E},Nr(zn)),Mn=up(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Dr.call(m)),ln.call(d,m)?d[m].push(E):d[m]=[E]},Jn),Wn=xr(Fi);function It(d){return sa(d)?Kf(d):ja(d)}function At(d){return sa(d)?Kf(d,!0):sh(d)}var Et=wu(function(d,m,E){ed(d,m,E)}),Cn=wu(function(d,m,E,j){ed(d,m,E,j)}),tr=El(function(d,m){var E={};if(d==null)return E;var j=!1;m=Fr(m,function(Q){return Q=_u(Q,d),j||(j=Q.length>1),Q}),_l(d,hd(d),E),j&&(E=ga(E,7,fp));for(var V=m.length;V--;)rd(E,m[V]);return E}),un=El(function(d,m){return d==null?{}:function(E,j){return dh(E,j,function(V,Q){return bt(E,Q)})}(d,m)});function Qn(d,m){if(d==null)return{};var E=Fr(hd(d),function(j){return[j]});return m=Jn(m),dh(d,E,function(j,V){return m(j,V[0])})}var Vn=dd(It),rr=dd(At);function gr(d){return d==null?[]:Hu(d,It(d))}var Mo=bl(function(d,m,E){return m=m.toLowerCase(),d+(E?Fo(m):m)});function Fo(d){return ei(_t(d).toLowerCase())}function cr(d){return(d=_t(d))&&d.replace(Bn,Nc).replace(dl,"")}var Wo=bl(function(d,m,E){return d+(E?"-":"")+m.toLowerCase()}),Qr=bl(function(d,m,E){return d+(E?" ":"")+m.toLowerCase()}),Po=ud("toLowerCase"),$o=bl(function(d,m,E){return d+(E?"_":"")+m.toLowerCase()}),Eo=bl(function(d,m,E){return d+(E?" ":"")+ei(m)}),mo=bl(function(d,m,E){return d+(E?" ":"")+m.toUpperCase()}),ei=ud("toUpperCase");function Oo(d,m,E){return d=_t(d),(m=E?h:m)===h?function(j){return xc.test(j)}(d)?function(j){return j.match(Os)||[]}(d):function(j){return j.match(ot)||[]}(d):d.match(m)||[]}var Zn=xr(function(d,m){try{return to(d,h,m)}catch(E){return uf(E)?E:new Pr(E)}}),ai=El(function(d,m){return Ri(m,function(E){E=tl(E),qa(d,E,Ys(d[E],d))}),d});function Nr(d){return function(){return d}}var jn=Hc(),fr=Hc(!0);function zn(d){return d}function lo(d){return Vl(typeof d=="function"?d:ga(d,1))}var Fa=xr(function(d,m){return function(E){return Fi(E,d,m)}}),Zl=xr(function(d,m){return function(E){return Fi(d,E,m)}});function ye(d,m,E){var j=It(m),V=$c(m,j);E!=null||Jr(m)&&(V.length||!j.length)||(E=m,m=d,d=this,V=$c(m,It(m)));var Q=!(Jr(E)&&"chain"in E&&!E.chain),pe=Al(d);return Ri(V,function(Ee){var Le=m[Ee];d[Ee]=Le,pe&&(d.prototype[Ee]=function(){var ft=this.__chain__;if(Q||ft){var mt=d(this.__wrapped__),Gt=mt.__actions__=di(this.__actions__);return Gt.push({func:Le,args:arguments,thisArg:d}),mt.__chain__=ft,mt}return Le.apply(d,oi([this.value()],arguments))})}),d}function tt(){}var qe=cd(Fr),tn=cd(Vf),hr=cd(Pc);function se(d){return Xl(d)?Di(tl(d)):function(m){return function(E){return ml(E,m)}}(d)}var ee=wl(),Me=wl(!0);function Ue(){return[]}function ze(){return!1}var Ne=Ds(function(d,m){return d+m},0),Pe=qc("ceil"),Ie=Ds(function(d,m){return d/m},1),de=qc("floor"),Oe,ce=Ds(function(d,m){return d*m},1),Be=qc("round"),Xe=Ds(function(d,m){return d-m},0);return ie.after=function(d,m){if(typeof m!="function")throw new ge(g);return d=ut(d),function(){if(--d<1)return m.apply(this,arguments)}},ie.ary=xh,ie.assign=We,ie.assignIn=it,ie.assignInWith=Lt,ie.assignWith=Kt,ie.at=xt,ie.before=nl,ie.bind=Ys,ie.bindAll=ai,ie.bindKey=ls,ie.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return mr(d)?d:[d]},ie.chain=Zo,ie.chunk=function(d,m,E){m=(E?Lo(d,m,E):m===h)?1:Co(ut(m),0);var j=d==null?0:d.length;if(!j||m<1)return[];for(var V=0,Q=0,pe=fn(jc(j/m));V<j;)pe[Q++]=Ca(d,V,V+=m);return pe},ie.compact=function(d){for(var m=-1,E=d==null?0:d.length,j=0,V=[];++m<E;){var Q=d[m];Q&&(V[j++]=Q)}return V},ie.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),E=arguments[0],j=d;j--;)m[j-1]=arguments[j];return oi(mr(E)?di(E):[E],Ko(m,1))},ie.cond=function(d){var m=d==null?0:d.length,E=Jn();return d=m?Fr(d,function(j){if(typeof j[1]!="function")throw new ge(g);return[E(j[0]),j[1]]}):[],xr(function(j){for(var V=-1;++V<m;){var Q=d[V];if(to(Q[0],this,j))return to(Q[1],this,j)}})},ie.conforms=function(d){return function(m){var E=It(m);return function(j){return Yd(j,m,E)}}(ga(d,1))},ie.constant=Nr,ie.countBy=ql,ie.create=function(d,m){var E=Zu(d);return m==null?E:Gl(E,m)},ie.curry=function d(m,E,j){var V=Za(m,8,h,h,h,h,h,E=j?h:E);return V.placeholder=d.placeholder,V},ie.curryRight=function d(m,E,j){var V=Za(m,O,h,h,h,h,h,E=j?h:E);return V.placeholder=d.placeholder,V},ie.debounce=rl,ie.defaults=Zt,ie.defaultsDeep=St,ie.defer=Sh,ie.delay=bp,ie.difference=yh,ie.differenceBy=mh,ie.differenceWith=gh,ie.drop=function(d,m,E){var j=d==null?0:d.length;return j?Ca(d,(m=E||m===h?1:ut(m))<0?0:m,j):[]},ie.dropRight=function(d,m,E){var j=d==null?0:d.length;return j?Ca(d,0,(m=j-(m=E||m===h?1:ut(m)))<0?0:m):[]},ie.dropRightWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!0,!0):[]},ie.dropWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!0):[]},ie.fill=function(d,m,E,j){var V=d==null?0:d.length;return V?(E&&typeof E!="number"&&Lo(d,m,E)&&(E=0,j=V),function(Q,pe,Ee,Le){var ft=Q.length;for((Ee=ut(Ee))<0&&(Ee=-Ee>ft?0:ft+Ee),(Le=Le===h||Le>ft?ft:ut(Le))<0&&(Le+=ft),Le=Ee>Le?0:Vt(Le);Ee<Le;)Q[Ee++]=pe;return Q}(d,m,E,j)):[]},ie.filter=function(d,m){return(mr(d)?ji:Hr)(d,Jn(m,3))},ie.flatMap=function(d,m){return Ko(as(d,m),1)},ie.flatMapDeep=function(d,m){return Ko(as(d,m),D)},ie.flatMapDepth=function(d,m,E){return E=E===h?1:ut(E),Ko(as(d,m),E)},ie.flatten=mp,ie.flattenDeep=function(d){return d!=null&&d.length?Ko(d,D):[]},ie.flattenDepth=function(d,m){return d!=null&&d.length?Ko(d,m=m===h?1:ut(m)):[]},ie.flip=function(d){return Za(d,512)},ie.flow=jn,ie.flowRight=fr,ie.fromPairs=function(d){for(var m=-1,E=d==null?0:d.length,j={};++m<E;){var V=d[m];j[V[0]]=V[1]}return j},ie.functions=function(d){return d==null?[]:$c(d,It(d))},ie.functionsIn=function(d){return d==null?[]:$c(d,At(d))},ie.groupBy=Ia,ie.initial=function(d){return d!=null&&d.length?Ca(d,0,-1):[]},ie.intersection=_h,ie.intersectionBy=bh,ie.intersectionWith=wh,ie.invert=Xt,ie.invertBy=Mn,ie.invokeMap=Fn,ie.iteratee=lo,ie.keyBy=_d,ie.keys=It,ie.keysIn=At,ie.map=as,ie.mapKeys=function(d,m){var E={};return m=Jn(m,3),Nn(d,function(j,V,Q){qa(E,m(j,V,Q),j)}),E},ie.mapValues=function(d,m){var E={};return m=Jn(m,3),Nn(d,function(j,V,Q){qa(E,V,m(j,V,Q))}),E},ie.matches=function(d){return Qd(ga(d,1))},ie.matchesProperty=function(d,m){return ep(d,ga(m,1))},ie.memoize=Tu,ie.merge=Et,ie.mergeWith=Cn,ie.method=Fa,ie.methodOf=Zl,ie.mixin=ye,ie.negate=Sl,ie.nthArg=function(d){return d=ut(d),xr(function(m){return ch(m,d)})},ie.omit=tr,ie.omitBy=function(d,m){return Qn(d,Sl(Jn(m)))},ie.once=function(d){return nl(2,d)},ie.orderBy=function(d,m,E,j){return d==null?[]:(mr(m)||(m=m==null?[]:[m]),mr(E=j?h:E)||(E=E==null?[]:[E]),fh(d,m,E))},ie.over=qe,ie.overArgs=Gi,ie.overEvery=tn,ie.overSome=hr,ie.partial=Gn,ie.partialRight=Ao,ie.partition=bd,ie.pick=un,ie.pickBy=Qn,ie.property=se,ie.propertyOf=function(d){return function(m){return d==null?h:ml(d,m)}},ie.pull=rs,ie.pullAll=tf,ie.pullAllBy=function(d,m,E){return d&&d.length&&m&&m.length?tp(d,m,Jn(E,2)):d},ie.pullAllWith=function(d,m,E){return d&&d.length&&m&&m.length?tp(d,m,h,E):d},ie.pullAt=la,ie.range=ee,ie.rangeRight=Me,ie.rearg=ki,ie.reject=function(d,m){return(mr(d)?ji:Hr)(d,Sl(Jn(m,3)))},ie.remove=function(d,m){var E=[];if(!d||!d.length)return E;var j=-1,V=[],Q=d.length;for(m=Jn(m,3);++j<Q;){var pe=d[j];m(pe,j,d)&&(E.push(pe),V.push(j))}return Cs(d,V),E},ie.rest=function(d,m){if(typeof d!="function")throw new ge(g);return xr(d,m=m===h?m:ut(m))},ie.reverse=Da,ie.sampleSize=function(d,m,E){return m=(E?Lo(d,m,E):m===h)?1:ut(m),(mr(d)?Hd:rp)(d,m)},ie.set=function(d,m,E){return d==null?d:mu(d,m,E)},ie.setWith=function(d,m,E,j){return j=typeof j=="function"?j:h,d==null?d:mu(d,m,E,j)},ie.shuffle=function(d){return(mr(d)?lh:qv)(d)},ie.slice=function(d,m,E){var j=d==null?0:d.length;return j?(E&&typeof E!="number"&&Lo(d,m,E)?(m=0,E=j):(m=m==null?0:ut(m),E=E===h?j:ut(E)),Ca(d,m,E)):[]},ie.sortBy=Oh,ie.sortedUniq=function(d){return d&&d.length?ph(d):[]},ie.sortedUniqBy=function(d,m){return d&&d.length?ph(d,Jn(m,2)):[]},ie.split=function(d,m,E){return E&&typeof E!="number"&&Lo(d,m,E)&&(m=E=h),(E=E===h?q:E>>>0)?(d=_t(d))&&(typeof m=="string"||m!=null&&!ae(m))&&!(m=aa(m))&&Wa(d)?bu(Zi(d),0,E):d.split(m,E):[]},ie.spread=function(d,m){if(typeof d!="function")throw new ge(g);return m=m==null?0:Co(ut(m),0),xr(function(E){var j=E[m],V=bu(E,0,m);return j&&oi(V,j),to(d,this,V)})},ie.tail=function(d){var m=d==null?0:d.length;return m?Ca(d,1,m):[]},ie.take=function(d,m,E){return d&&d.length?Ca(d,0,(m=E||m===h?1:ut(m))<0?0:m):[]},ie.takeRight=function(d,m,E){var j=d==null?0:d.length;return j?Ca(d,(m=j-(m=E||m===h?1:ut(m)))<0?0:m,j):[]},ie.takeRightWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!1,!0):[]},ie.takeWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3)):[]},ie.tap=function(d,m){return m(d),d},ie.throttle=function(d,m,E){var j=!0,V=!0;if(typeof d!="function")throw new ge(g);return Jr(E)&&(j="leading"in E?!!E.leading:j,V="trailing"in E?!!E.trailing:V),rl(d,m,{leading:j,maxWait:m,trailing:V})},ie.thru=af,ie.toArray=Dt,ie.toPairs=Vn,ie.toPairsIn=rr,ie.toPath=function(d){return mr(d)?Fr(d,tl):ct(d)?[d]:di(hp(_t(d)))},ie.toPlainObject=kt,ie.transform=function(d,m,E){var j=mr(d),V=j||La(d)||Ke(d);if(m=Jn(m,4),E==null){var Q=d&&d.constructor;E=V?j?new Q:[]:Jr(d)&&Al(Q)?Zu(za(d)):{}}return(V?Ri:Nn)(d,function(pe,Ee,Le){return m(E,pe,Ee,Le)}),E},ie.unary=function(d){return xh(d,1)},ie.union=gd,ie.unionBy=Bi,ie.unionWith=nf,ie.uniq=function(d){return d&&d.length?gu(d):[]},ie.uniqBy=function(d,m){return d&&d.length?gu(d,Jn(m,2)):[]},ie.uniqWith=function(d,m){return m=typeof m=="function"?m:h,d&&d.length?gu(d,h,m):[]},ie.unset=function(d,m){return d==null||rd(d,m)},ie.unzip=os,ie.unzipWith=Ws,ie.update=function(d,m,E){return d==null?d:Ju(d,m,ad(E))},ie.updateWith=function(d,m,E,j){return j=typeof j=="function"?j:h,d==null?d:Ju(d,m,ad(E),j)},ie.values=gr,ie.valuesIn=function(d){return d==null?[]:Hu(d,At(d))},ie.without=rf,ie.words=Oo,ie.wrap=function(d,m){return Gn(ad(m),d)},ie.xor=of,ie.xorBy=zs,ie.xorWith=Hs,ie.zip=is,ie.zipObject=function(d,m){return od(d||[],m||[],Do)},ie.zipObjectDeep=function(d,m){return od(d||[],m||[],mu)},ie.zipWith=Yl,ie.entries=Vn,ie.entriesIn=rr,ie.extend=it,ie.extendWith=Lt,ye(ie,ie),ie.add=Ne,ie.attempt=Zn,ie.camelCase=Mo,ie.capitalize=Fo,ie.ceil=Pe,ie.clamp=function(d,m,E){return E===h&&(E=m,m=h),E!==h&&(E=(E=Ut(E))==E?E:0),m!==h&&(m=(m=Ut(m))==m?m:0),vu(Ut(d),m,E)},ie.clone=function(d){return ga(d,4)},ie.cloneDeep=function(d){return ga(d,5)},ie.cloneDeepWith=function(d,m){return ga(d,5,m=typeof m=="function"?m:h)},ie.cloneWith=function(d,m){return ga(d,4,m=typeof m=="function"?m:h)},ie.conformsTo=function(d,m){return m==null||Yd(d,m,It(m))},ie.deburr=cr,ie.defaultTo=function(d,m){return d==null||d!=d?m:d},ie.divide=Ie,ie.endsWith=function(d,m,E){d=_t(d),m=aa(m);var j=d.length,V=E=E===h?j:vu(ut(E),0,j);return(E-=m.length)>=0&&d.slice(E,V)==m},ie.eq=ua,ie.escape=function(d){return(d=_t(d))&&xn.test(d)?d.replace(pn,Vo):d},ie.escapeRegExp=function(d){return(d=_t(d))&&eo.test(d)?d.replace(Gr,"\\$&"):d},ie.every=function(d,m,E){var j=mr(d)?Vf:Kd;return E&&Lo(d,m,E)&&(m=h),j(d,Jn(m,3))},ie.find=_p,ie.findIndex=vp,ie.findKey=function(d,m){return Ga(d,Jn(m,3),Nn)},ie.findLast=Ui,ie.findLastIndex=yp,ie.findLastKey=function(d,m){return Ga(d,Jn(m,3),ao)},ie.floor=de,ie.forEach=Jo,ie.forEachRight=Eh,ie.forIn=function(d,m){return d==null?d:Or(d,Jn(m,3),At)},ie.forInRight=function(d,m){return d==null?d:io(d,Jn(m,3),At)},ie.forOwn=function(d,m){return d&&Nn(d,Jn(m,3))},ie.forOwnRight=function(d,m){return d&&ao(d,Jn(m,3))},ie.get=Wt,ie.gt=Kv,ie.gte=Ah,ie.has=function(d,m){return d!=null&&Us(d,m,Zd)},ie.hasIn=bt,ie.head=gp,ie.identity=zn,ie.includes=function(d,m,E,j){d=sa(d)?d:gr(d),E=E&&!j?ut(E):0;var V=d.length;return E<0&&(E=Co(V+E,0)),Qe(d)?E<=V&&d.indexOf(m,E)>-1:!!V&&su(d,m,E)>-1},ie.indexOf=function(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=E==null?0:ut(E);return V<0&&(V=Co(j+V,0)),su(d,m,V)},ie.inRange=function(d,m,E){return m=jt(m),E===h?(E=m,m=0):E=jt(E),function(j,V,Q){return j>=Li(V,Q)&&j<Co(V,Q)}(d=Ut(d),m,E)},ie.invoke=Wn,ie.isArguments=Mu,ie.isArray=mr,ie.isArrayBuffer=Th,ie.isArrayLike=sa,ie.isArrayLikeObject=Qo,ie.isBoolean=function(d){return d===!0||d===!1||To(d)&&bo(d)==G},ie.isBuffer=La,ie.isDate=Zv,ie.isElement=function(d){return To(d)&&d.nodeType===1&&!F(d)},ie.isEmpty=function(d){if(d==null)return!0;if(sa(d)&&(mr(d)||typeof d=="string"||typeof d.splice=="function"||La(d)||Ke(d)||Mu(d)))return!d.length;var m=So(d);if(m==H||m==he)return!d.size;if(xu(d))return!ja(d).length;for(var E in d)if(ln.call(d,E))return!1;return!0},ie.isEqual=function(d,m){return js(d,m)},ie.isEqualWith=function(d,m,E){var j=(E=typeof E=="function"?E:h)?E(d,m):h;return j===h?js(d,m,h,E):!!j},ie.isError=uf,ie.isFinite=function(d){return typeof d=="number"&&qu(d)},ie.isFunction=Al,ie.isInteger=wp,ie.isLength=Kl,ie.isMap=_i,ie.isMatch=function(d,m){return d===m||Ra(d,m,Zc(m))},ie.isMatchWith=function(d,m,E){return E=typeof E=="function"?E:h,Ra(d,m,Zc(m),E)},ie.isNaN=function(d){return sf(d)&&d!=+d},ie.isNative=function(d){if(el(d))throw new Pr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yu(d)},ie.isNil=function(d){return d==null},ie.isNull=function(d){return d===null},ie.isNumber=sf,ie.isObject=Jr,ie.isObjectLike=To,ie.isPlainObject=F,ie.isRegExp=ae,ie.isSafeInteger=function(d){return wp(d)&&d>=-9007199254740991&&d<=N},ie.isSet=be,ie.isString=Qe,ie.isSymbol=ct,ie.isTypedArray=Ke,ie.isUndefined=function(d){return d===h},ie.isWeakMap=function(d){return To(d)&&So(d)==Ve},ie.isWeakSet=function(d){return To(d)&&bo(d)=="[object WeakSet]"},ie.join=function(d,m){return d==null?"":Cc.call(d,m)},ie.kebabCase=Wo,ie.last=$i,ie.lastIndexOf=function(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=j;return E!==h&&(V=(V=ut(E))<0?Co(j+V,0):Li(V,j-1)),m==m?function(Q,pe,Ee){for(var Le=Ee+1;Le--;)if(Q[Le]===pe)return Le;return Le}(d,m,V):Ci(d,ha,V,!0)},ie.lowerCase=Qr,ie.lowerFirst=Po,ie.lt=lt,ie.lte=Pt,ie.max=function(d){return d&&d.length?Io(d,zn,xo):h},ie.maxBy=function(d,m){return d&&d.length?Io(d,Jn(m,2),xo):h},ie.mean=function(d){return Mr(d,zn)},ie.meanBy=function(d,m){return Mr(d,Jn(m,2))},ie.min=function(d){return d&&d.length?Io(d,zn,gl):h},ie.minBy=function(d,m){return d&&d.length?Io(d,Jn(m,2),gl):h},ie.stubArray=Ue,ie.stubFalse=ze,ie.stubObject=function(){return{}},ie.stubString=function(){return""},ie.stubTrue=function(){return!0},ie.multiply=ce,ie.nth=function(d,m){return d&&d.length?ch(d,ut(m)):h},ie.noConflict=function(){return jo._===this&&(jo._=_o),this},ie.noop=tt,ie.now=Xs,ie.pad=function(d,m,E){d=_t(d);var j=(m=ut(m))?Ii(d):0;if(!m||j>=m)return d;var V=(m-j)/2;return Xc(Yu(V),E)+d+Xc(jc(V),E)},ie.padEnd=function(d,m,E){d=_t(d);var j=(m=ut(m))?Ii(d):0;return m&&j<m?d+Xc(m-j,E):d},ie.padStart=function(d,m,E){d=_t(d);var j=(m=ut(m))?Ii(d):0;return m&&j<m?Xc(m-j,E)+d:d},ie.parseInt=function(d,m,E){return E||m==null?m=0:m&&(m=+m),Yf(_t(d).replace(Dn,""),m||0)},ie.random=function(d,m,E){if(E&&typeof E!="boolean"&&Lo(d,m,E)&&(m=E=h),E===h&&(typeof m=="boolean"?(E=m,m=h):typeof d=="boolean"&&(E=d,d=h)),d===h&&m===h?(d=0,m=1):(d=jt(d),m===h?(m=d,d=0):m=jt(m)),d>m){var j=d;d=m,m=j}if(E||d%1||m%1){var V=Ps();return Li(d+V*(m-d+lu("1e-"+((V+"").length-1))),m)}return np(d,m)},ie.reduce=function(d,m,E){var j=mr(d)?As:fi,V=arguments.length<3;return j(d,Jn(m,4),E,V,yo)},ie.reduceRight=function(d,m,E){var j=mr(d)?Wf:fi,V=arguments.length<3;return j(d,Jn(m,4),E,V,uh)},ie.repeat=function(d,m,E){return m=(E?Lo(d,m,E):m===h)?1:ut(m),Uc(_t(d),m)},ie.replace=function(){var d=arguments,m=_t(d[0]);return d.length<3?m:m.replace(d[1],d[2])},ie.result=function(d,m,E){var j=-1,V=(m=_u(m,d)).length;for(V||(V=1,d=h);++j<V;){var Q=d==null?h:d[tl(m[j])];Q===h&&(j=V,Q=E),d=Al(Q)?Q.call(d):Q}return d},ie.round=Be,ie.runInContext=at,ie.sample=function(d){return(mr(d)?Zf:Xv)(d)},ie.size=function(d){if(d==null)return 0;if(sa(d))return Qe(d)?Ii(d):d.length;var m=So(d);return m==H||m==he?d.size:ja(d).length},ie.snakeCase=$o,ie.some=function(d,m,E){var j=mr(d)?Pc:op;return E&&Lo(d,m,E)&&(m=h),j(d,Jn(m,3))},ie.sortedIndex=function(d,m){return td(d,m)},ie.sortedIndexBy=function(d,m,E){return nd(d,m,Jn(E,2))},ie.sortedIndexOf=function(d,m){var E=d==null?0:d.length;if(E){var j=td(d,m);if(j<E&&ua(d[j],m))return j}return-1},ie.sortedLastIndex=function(d,m){return td(d,m,!0)},ie.sortedLastIndexBy=function(d,m,E){return nd(d,m,Jn(E,2),!0)},ie.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var E=td(d,m,!0)-1;if(ua(d[E],m))return E}return-1},ie.startCase=Eo,ie.startsWith=function(d,m,E){return d=_t(d),E=E==null?0:vu(ut(E),0,d.length),m=aa(m),d.slice(E,E+m.length)==m},ie.subtract=Xe,ie.sum=function(d){return d&&d.length?cu(d,zn):0},ie.sumBy=function(d,m){return d&&d.length?cu(d,Jn(m,2)):0},ie.template=function(d,m,E){var j=ie.templateSettings;E&&Lo(d,m,E)&&(m=h),d=_t(d),m=Lt({},m,j,sp);var V,Q,pe=Lt({},m.imports,j.imports,sp),Ee=It(pe),Le=Hu(pe,Ee),ft=0,mt=m.interpolate||Xn,Gt="__p += '",An=$((m.escape||Xn).source+"|"+mt.source+"|"+(mt===Kn?kn:Xn).source+"|"+(m.evaluate||Xn).source+"|$","g"),On="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ff+"]")+`
`;d.replace(An,function(Jt,dr,gn,ar,or,Ir){return gn||(gn=ar),Gt+=d.slice(ft,Ir).replace(ir,Il),dr&&(V=!0,Gt+=`' +
__e(`+dr+`) +
'`),or&&(Q=!0,Gt+=`';
`+or+`;
__p += '`),gn&&(Gt+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),ft=Ir+Jt.length,Jt}),Gt+=`';
`;var Yn=ln.call(m,"variable")&&m.variable;if(Yn){if(en.test(Yn))throw new Pr("Invalid `variable` option passed into `_.template`")}else Gt=`with (obj) {
`+Gt+`
}
`;Gt=(Q?Gt.replace(Ot,""):Gt).replace(rn,"$1").replace(yn,"$1;"),Gt="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var Mt=Zn(function(){return so(Ee,On+"return "+Gt).apply(h,Le)});if(Mt.source=Gt,uf(Mt))throw Mt;return Mt},ie.times=function(d,m){if((d=ut(d))<1||d>N)return[];var E=q,j=Li(d,q);m=Jn(m),d-=q;for(var V=Dl(j,m);++E<d;)m(E);return V},ie.toFinite=jt,ie.toInteger=ut,ie.toLength=Vt,ie.toLower=function(d){return _t(d).toLowerCase()},ie.toNumber=Ut,ie.toSafeInteger=function(d){return d?vu(ut(d),-9007199254740991,N):d===0?d:0},ie.toString=_t,ie.toUpper=function(d){return _t(d).toUpperCase()},ie.trim=function(d,m,E){if((d=_t(d))&&(E||m===h))return ka(d);if(!d||!(m=aa(m)))return d;var j=Zi(d),V=Zi(m);return bu(j,va(j,V),kc(j,V)+1).join("")},ie.trimEnd=function(d,m,E){if((d=_t(d))&&(E||m===h))return d.slice(0,ii(d)+1);if(!d||!(m=aa(m)))return d;var j=Zi(d);return bu(j,0,kc(j,Zi(m))+1).join("")},ie.trimStart=function(d,m,E){if((d=_t(d))&&(E||m===h))return d.replace(Dn,"");if(!d||!(m=aa(m)))return d;var j=Zi(d);return bu(j,va(j,Zi(m))).join("")},ie.truncate=function(d,m){var E=30,j="...";if(Jr(m)){var V="separator"in m?m.separator:V;E="length"in m?ut(m.length):E,j="omission"in m?aa(m.omission):j}var Q=(d=_t(d)).length;if(Wa(d)){var pe=Zi(d);Q=pe.length}if(E>=Q)return d;var Ee=E-Ii(j);if(Ee<1)return j;var Le=pe?bu(pe,0,Ee).join(""):d.slice(0,Ee);if(V===h)return Le+j;if(pe&&(Ee+=Le.length-Ee),ae(V)){if(d.slice(Ee).search(V)){var ft,mt=Le;for(V.global||(V=$(V.source,_t(wr.exec(V))+"g")),V.lastIndex=0;ft=V.exec(mt);)var Gt=ft.index;Le=Le.slice(0,Gt===h?Ee:Gt)}}else if(d.indexOf(aa(V),Ee)!=Ee){var An=Le.lastIndexOf(V);An>-1&&(Le=Le.slice(0,An))}return Le+j},ie.unescape=function(d){return(d=_t(d))&&st.test(d)?d.replace(Tn,oa):d},ie.uniqueId=function(d){var m=++Wr;return _t(d)+m},ie.upperCase=mo,ie.upperFirst=ei,ie.each=Jo,ie.eachRight=Eh,ie.first=gp,ye(ie,(Oe={},Nn(ie,function(d,m){ln.call(ie.prototype,m)||(Oe[m]=d)}),Oe),{chain:!1}),ie.VERSION="4.17.21",Ri(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){ie[d].placeholder=ie}),Ri(["drop","take"],function(d,m){kr.prototype[d]=function(E){E=E===h?1:Co(ut(E),0);var j=this.__filtered__&&!m?new kr(this):this.clone();return j.__filtered__?j.__takeCount__=Li(E,j.__takeCount__):j.__views__.push({size:Li(E,q),type:d+(j.__dir__<0?"Right":"")}),j},kr.prototype[d+"Right"]=function(E){return this.reverse()[d](E).reverse()}}),Ri(["filter","map","takeWhile"],function(d,m){var E=m+1,j=E==1||E==3;kr.prototype[d]=function(V){var Q=this.clone();return Q.__iteratees__.push({iteratee:Jn(V,3),type:E}),Q.__filtered__=Q.__filtered__||j,Q}}),Ri(["head","last"],function(d,m){var E="take"+(m?"Right":"");kr.prototype[d]=function(){return this[E](1).value()[0]}}),Ri(["initial","tail"],function(d,m){var E="drop"+(m?"":"Right");kr.prototype[d]=function(){return this.__filtered__?new kr(this):this[E](1)}}),kr.prototype.compact=function(){return this.filter(zn)},kr.prototype.find=function(d){return this.filter(d).head()},kr.prototype.findLast=function(d){return this.reverse().find(d)},kr.prototype.invokeMap=xr(function(d,m){return typeof d=="function"?new kr(this):this.map(function(E){return Fi(E,d,m)})}),kr.prototype.reject=function(d){return this.filter(Sl(Jn(d)))},kr.prototype.slice=function(d,m){d=ut(d);var E=this;return E.__filtered__&&(d>0||m<0)?new kr(E):(d<0?E=E.takeRight(-d):d&&(E=E.drop(d)),m!==h&&(E=(m=ut(m))<0?E.dropRight(-m):E.take(m-d)),E)},kr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},kr.prototype.toArray=function(){return this.take(q)},Nn(kr.prototype,function(d,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),j=/^(?:head|last)$/.test(m),V=ie[j?"take"+(m=="last"?"Right":""):m],Q=j||/^find/.test(m);V&&(ie.prototype[m]=function(){var pe=this.__wrapped__,Ee=j?[1]:arguments,Le=pe instanceof kr,ft=Ee[0],mt=Le||mr(pe),Gt=function(dr){var gn=V.apply(ie,oi([dr],Ee));return j&&An?gn[0]:gn};mt&&E&&typeof ft=="function"&&ft.length!=1&&(Le=mt=!1);var An=this.__chain__,On=!!this.__actions__.length,Yn=Q&&!An,Mt=Le&&!On;if(!Q&&mt){pe=Mt?pe:new kr(this);var Jt=d.apply(pe,Ee);return Jt.__actions__.push({func:af,args:[Gt],thisArg:h}),new Na(Jt,An)}return Yn&&Mt?d.apply(this,Ee):(Jt=this.thru(Gt),Yn?j?Jt.value()[0]:Jt.value():Jt)})}),Ri(["pop","push","shift","sort","splice","unshift"],function(d){var m=Ge[d],E=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",j=/^(?:pop|shift)$/.test(d);ie.prototype[d]=function(){var V=arguments;if(j&&!this.__chain__){var Q=this.value();return m.apply(mr(Q)?Q:[],V)}return this[E](function(pe){return m.apply(mr(pe)?pe:[],V)})}}),Nn(kr.prototype,function(d,m){var E=ie[m];if(E){var j=E.name+"";ln.call(hu,j)||(hu[j]=[]),hu[j].push({name:m,func:E})}}),hu[Eu(h,2).name]=[{name:"wrapper",func:h}],kr.prototype.clone=function(){var d=new kr(this.__wrapped__);return d.__actions__=di(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=di(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=di(this.__views__),d},kr.prototype.reverse=function(){if(this.__filtered__){var d=new kr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},kr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,E=mr(d),j=m<0,V=E?d.length:0,Q=function(Ir,Un,er){for(var zo=-1,nt=er.length;++zo<nt;){var Jl=er[zo],bi=Jl.size;switch(Jl.type){case"drop":Ir+=bi;break;case"dropRight":Un-=bi;break;case"take":Un=Li(Un,Ir+bi);break;case"takeRight":Ir=Co(Ir,Un-bi)}}return{start:Ir,end:Un}}(0,V,this.__views__),pe=Q.start,Ee=Q.end,Le=Ee-pe,ft=j?Ee:pe-1,mt=this.__iteratees__,Gt=mt.length,An=0,On=Li(Le,this.__takeCount__);if(!E||!j&&V==Le&&On==Le)return hh(d,this.__actions__);var Yn=[];e:for(;Le--&&An<On;){for(var Mt=-1,Jt=d[ft+=m];++Mt<Gt;){var dr=mt[Mt],gn=dr.iteratee,ar=dr.type,or=gn(Jt);if(ar==2)Jt=or;else if(!or){if(ar==1)continue e;break e}}Yn[An++]=Jt}return Yn},ie.prototype.at=lf,ie.prototype.chain=function(){return Zo(this)},ie.prototype.commit=function(){return new Na(this.value(),this.__chain__)},ie.prototype.next=function(){this.__values__===h&&(this.__values__=Dt(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?h:this.__values__[this.__index__++]}},ie.prototype.plant=function(d){for(var m,E=this;E instanceof $l;){var j=md(E);j.__index__=0,j.__values__=h,m?V.__wrapped__=j:m=j;var V=j;E=E.__wrapped__}return V.__wrapped__=d,m},ie.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof kr){var m=d;return this.__actions__.length&&(m=new kr(this)),(m=m.reverse()).__actions__.push({func:af,args:[Da],thisArg:h}),new Na(m,this.__chain__)}return this.thru(Da)},ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=function(){return hh(this.__wrapped__,this.__actions__)},ie.prototype.first=ie.prototype.head,Ha&&(ie.prototype[Ha]=function(){return this}),ie}();jo._=Mi,(v=(function(){return Mi}).call(o,r,o,c))===h||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),v=r(33),h=r(87),g=r(62),_=r(174),w=r(28),O=s.TypeError,S=w("toPrimitive");n.exports=function(P,A){if(!v(P)||h(P))return P;var R,D=g(P,S);if(D){if(A===void 0&&(A="default"),R=c(D,P,A),!v(R)||h(R))return R;throw O("Can't convert object to primitive value")}return A===void 0&&(A="number"),_(P,A)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),v=r(50),h=r(38);n.exports=function(g,_){for(var w=c(_),O=h.f,S=v.f,P=0;P<w.length;P++){var A=w[P];s(g,A)||O(g,A,S(_,A))}}},function(n,o,r){var s=r(46),c=r(15),v=r(74),h=r(112),g=r(32),_=c([].concat);n.exports=s("Reflect","ownKeys")||function(w){var O=v.f(g(w)),S=h.f;return S?_(O,S(w)):O}},function(n,o,r){var s=r(15),c=r(35),v=r(41),h=r(137).indexOf,g=r(72),_=s([].push);n.exports=function(w,O){var S,P=v(w),A=0,R=[];for(S in P)!c(g,S)&&c(P,S)&&_(R,S);for(;O.length>A;)c(P,S=O[A++])&&(~h(R,S)||_(R,S));return R}},function(n,o,r){var s=r(41),c=r(75),v=r(45),h=function(g){return function(_,w,O){var S,P=s(_),A=v(P),R=c(O,A);if(g&&w!=w){for(;A>R;)if((S=P[R++])!=S)return!0}else for(;A>R;R++)if((g||R in P)&&P[R]===w)return g||R||0;return!g&&-1}};n.exports={includes:h(!0),indexOf:h(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),v=r(74).f,h=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(_){return g&&s(_)=="Window"?function(w){try{return v(w)}catch{return h(g)}}(_):v(c(_))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),v=r(140),h=r(38).f;n.exports=function(g){var _=s.Symbol||(s.Symbol={});c(_,g)||h(_,g,{value:v.f(g)})}},function(n,o,r){var s,c,v,h=r(18),g=r(30),_=r(60),w=r(101),O=r(42),S=r(28),P=r(71),A=S("iterator"),R=!1;[].keys&&("next"in(v=[].keys())?(c=w(w(v)))!==Object.prototype&&(s=c):R=!0),s==null||h(function(){var D={};return s[A].call(D)!==D})?s={}:P&&(s=_(s)),g(s[A])||O(s,A,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:R}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),v=r(72),h=r(33),g=r(35),_=r(38).f,w=r(74),O=r(139),S=r(183),P=r(90),A=r(185),R=!1,D=P("meta"),N=0,B=function(Z){_(Z,D,{value:{objectID:"O"+N++,weakData:{}}})},q=n.exports={enable:function(){q.enable=function(){},R=!0;var Z=w.f,Y=c([].splice),te={};te[D]=1,Z(te).length&&(w.f=function(G){for(var C=Z(G),W=0,K=C.length;W<K;W++)if(C[W]===D){Y(C,W,1);break}return C},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(Z,Y){if(!h(Z))return typeof Z=="symbol"?Z:(typeof Z=="string"?"S":"P")+Z;if(!g(Z,D)){if(!S(Z))return"F";if(!Y)return"E";B(Z)}return Z[D].objectID},getWeakData:function(Z,Y){if(!g(Z,D)){if(!S(Z))return!0;if(!Y)return!1;B(Z)}return Z[D].weakData},onFreeze:function(Z){return A&&R&&S(Z)&&!g(Z,D)&&B(Z),Z}};v[D]=!0},function(n,o,r){var s=r(28),c=r(80),v=s("iterator"),h=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||h[v]===g)}},function(n,o,r){var s=r(7),c=r(34),v=r(56),h=r(32),g=r(88),_=r(118),w=s.TypeError;n.exports=function(O,S){var P=arguments.length<2?_(O):S;if(v(P))return h(c(P,O));throw w(g(O)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),v=r(62);n.exports=function(h,g,_){var w,O;c(h);try{if(!(w=v(h,"return"))){if(g==="throw")throw _;return _}w=s(w,h)}catch(S){O=!0,w=S}if(g==="throw")throw _;if(O)throw w;return c(w),_}},function(n,o,r){var s=r(30),c=r(33),v=r(102);n.exports=function(h,g,_){var w,O;return v&&s(w=g.constructor)&&w!==_&&c(O=w.prototype)&&O!==_.prototype&&v(h,O),h}},function(n,o,r){var s=r(42);n.exports=function(c,v,h){for(var g in v)s(c,g,v[g],h);return c}},function(n,o,r){var s=r(46),c=r(38),v=r(28),h=r(36),g=v("species");n.exports=function(_){var w=s(_),O=c.f;h&&w&&!w[g]&&O(w,g,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),v=r(39),h=r(44),g=s("".charAt),_=s("".charCodeAt),w=s("".slice),O=function(S){return function(P,A){var R,D,N=v(h(P)),B=c(A),q=N.length;return B<0||B>=q?S?"":void 0:(R=_(N,B))<55296||R>56319||B+1===q||(D=_(N,B+1))<56320||D>57343?S?g(N,B):R:S?w(N,B,B+2):D-56320+(R-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,o,r){var s=r(18),c=r(7).RegExp,v=s(function(){var _=c("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),h=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var _=c("^r","gy");return _.lastIndex=2,_.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:v}},function(n,o,r){var s=r(16),c=r(79).find,v=r(100),h="find",g=!0;h in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(_){return c(this,_,arguments.length>1?arguments[1]:void 0)}}),v(h)},function(n,o,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,o,r){var s=r(16),c=r(15),v=r(197),h=r(44),g=r(39),_=r(198),w=c("".indexOf);s({target:"String",proto:!0,forced:!_("includes")},{includes:function(O){return!!~w(g(h(this)),g(v(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(h){var g;return s(h)&&((g=h[v])!==void 0?!!g:c(h)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=r(162),g=s("".replace),_="["+h+"]",w=RegExp("^"+_+_+"*"),O=RegExp(_+_+"*$"),S=function(P){return function(A){var R=v(c(A));return 1&P&&(R=g(R,w,"")),2&P&&(R=g(R,O,"")),R}};n.exports={start:S(1),end:S(2),trim:S(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function g(N){if(r===setTimeout)return setTimeout(N,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(N,0);try{return r(N,0)}catch{try{return r.call(null,N,0)}catch{return r.call(this,N,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:h}catch{s=h}})();var _,w=[],O=!1,S=-1;function P(){O&&_&&(O=!1,_.length?w=_.concat(w):S=-1,w.length&&A())}function A(){if(!O){var N=g(P);O=!0;for(var B=w.length;B;){for(_=w,w=[];++S<B;)_&&_[S].run();S=-1,B=w.length}_=null,O=!1,function(q){if(s===clearTimeout)return clearTimeout(q);if((s===h||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(q);try{s(q)}catch{try{return s.call(null,q)}catch{return s.call(this,q)}}}(N)}}function R(N,B){this.fun=N,this.array=B}function D(){}c.nextTick=function(N){var B=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)B[q-1]=arguments[q];w.push(new R(N,B)),w.length!==1||O||g(A)},R.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=D,c.addListener=D,c.once=D,c.off=D,c.removeListener=D,c.removeAllListeners=D,c.emit=D,c.prependListener=D,c.prependOnceListener=D,c.listeners=function(N){return[]},c.binding=function(N){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(N){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(h,g){var _,w=s(h).constructor;return w===void 0||(_=s(w)[v])==null?g:c(_)}},function(n,o,r){var s=r(7),c=r(99),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),v=r(32),h=r(94),g=r(39),_=r(44),w=r(62),O=r(124),S=r(125);c("match",function(P,A,R){return[function(D){var N=_(this),B=D==null?void 0:w(D,P);return B?s(B,D,N):new RegExp(D)[P](g(N))},function(D){var N=v(this),B=g(D),q=R(A,N,B);if(q.done)return q.value;if(!N.global)return S(N,B);var Z=N.unicode;N.lastIndex=0;for(var Y,te=[],G=0;(Y=S(N,B))!==null;){var C=g(Y[0]);te[G]=C,C===""&&(N.lastIndex=O(B,h(N.lastIndex),Z)),G++}return G===0?null:te}]})},function(n,o,r){var s,c,v,h,g=r(7),_=r(76),w=r(64),O=r(30),S=r(35),P=r(18),A=r(138),R=r(98),D=r(91),N=r(169),B=r(128),q=g.setImmediate,Z=g.clearImmediate,Y=g.process,te=g.Dispatch,G=g.Function,C=g.MessageChannel,W=g.String,K=0,z={},H="onreadystatechange";try{s=g.location}catch{}var re=function(he){if(S(z,he)){var _e=z[he];delete z[he],_e()}},fe=function(he){return function(){re(he)}},Se=function(he){re(he.data)},Te=function(he){g.postMessage(W(he),s.protocol+"//"+s.host)};q&&Z||(q=function(he){var _e=R(arguments,1);return z[++K]=function(){_(O(he)?he:G(he),void 0,_e)},c(K),K},Z=function(he){delete z[he]},B?c=function(he){Y.nextTick(fe(he))}:te&&te.now?c=function(he){te.now(fe(he))}:C&&!N?(h=(v=new C).port2,v.port1.onmessage=Se,c=w(h.postMessage,h)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!P(Te)?(c=Te,g.addEventListener("message",Se,!1)):c=H in D("script")?function(he){A.appendChild(D("script")).onreadystatechange=function(){A.removeChild(this),re(he)}}:function(he){setTimeout(fe(he),0)}),n.exports={set:q,clear:Z}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(v){var h,g;this.promise=new v(function(_,w){if(h!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");h=_,g=w}),this.resolve=s(h),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return Y});var c=r(1);function v(C){throw new Error("[mobx-utils] "+C)}function h(C,W){W===void 0&&(W="Illegal state"),C||v(W)}var g=function(C){return C&&C!==Object.prototype&&Object.getOwnPropertyNames(C).concat(g(Object.getPrototypeOf(C))||[])},_=function(C){return function(W){var K=g(W);return K.filter(function(z,H){return K.indexOf(z)===H})}(C).filter(function(W){return W!=="constructor"&&!~W.indexOf("__")})},w="pending",O="fulfilled",S="rejected";function P(C){switch(this.state){case w:return C.pending&&C.pending(this.value);case S:return C.rejected&&C.rejected(this.value);case O:return C.fulfilled?C.fulfilled(this.value):this.value}}function A(C,W){if(h(arguments.length<=2,"fromPromise expects up to two arguments"),h(typeof C=="function"||typeof C=="object"&&C&&typeof C.then=="function","Please pass a promise or function to fromPromise"),C.isPromiseBasedObservable===!0)return C;typeof C=="function"&&(C=new Promise(C));var K=C;C.then(Object(c.k)("observableFromPromise-resolve",function(H){K.value=H,K.state=O}),Object(c.k)("observableFromPromise-reject",function(H){K.value=H,K.state=S})),K.isPromiseBasedObservable=!0,K.case=P;var z=W&&W.state===O?W.value:void 0;return Object(c.q)(K,{value:z,state:w},{},{deep:!1}),K}(function(C){C.reject=Object(c.k)("fromPromise.reject",function(W){var K=C(Promise.reject(W));return K.state=S,K.value=W,K}),C.resolve=Object(c.k)("fromPromise.resolve",function(W){W===void 0&&(W=void 0);var K=C(Promise.resolve(W));return K.state=O,K.value=W,K})})(A||(A={}));var R=function(C,W,K,z){var H,re=arguments.length,fe=re<3?W:z===null?z=Object.getOwnPropertyDescriptor(W,K):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")fe=Reflect.decorate(C,W,K,z);else for(var Se=C.length-1;Se>=0;Se--)(H=C[Se])&&(fe=(re<3?H(fe):re>3?H(W,K,fe):H(W,K))||fe);return re>3&&fe&&Object.defineProperty(W,K,fe),fe};(function(){function C(W,K){var z=this;Object(c.G)(function(){z.current=K,z.subscription=W.subscribe(z)})}C.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},C.prototype.next=function(W){this.current=W},C.prototype.complete=function(){this.dispose()},C.prototype.error=function(W){this.current=W,this.dispose()},R([c.C.ref],C.prototype,"current",void 0),R([c.k.bound],C.prototype,"next",null),R([c.k.bound],C.prototype,"complete",null),R([c.k.bound],C.prototype,"error",null)})();var D=function(){return D=Object.assign||function(C){for(var W,K=1,z=arguments.length;K<z;K++)for(var H in W=arguments[K])Object.prototype.hasOwnProperty.call(W,H)&&(C[H]=W[H]);return C},D.apply(this,arguments)},N=function(C,W,K,z){var H,re=arguments.length,fe=re<3?W:z===null?z=Object.getOwnPropertyDescriptor(W,K):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")fe=Reflect.decorate(C,W,K,z);else for(var Se=C.length-1;Se>=0;Se--)(H=C[Se])&&(fe=(re<3?H(fe):re>3?H(W,K,fe):H(W,K))||fe);return re>3&&fe&&Object.defineProperty(W,K,fe),fe},B=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function C(W){var K=this;this.model=W,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(z){return K.localValues.has(z)},h(Object(c.A)(W),"createViewModel expects an observable object"),_(W).forEach(function(z){if(z!==c.a&&z!=="__mobxDidRunLazyInitializers"){if(h(B.indexOf(z)===-1,"The propertyname "+z+" is reserved and cannot be used with viewModels"),Object(c.w)(W,z)){var H=Object(c.h)(W,z).derivation;K.localComputedValues.set(z,Object(c.m)(H.bind(K)))}var re=Object.getOwnPropertyDescriptor(W,z),fe=re?{enumerable:re.enumerable}:{};Object.defineProperty(K,z,D(D({},fe),{configurable:!0,get:function(){return Object(c.w)(W,z)?K.localComputedValues.get(z).get():K.isPropertyDirty(z)?K.localValues.get(z):K.model[z]},set:Object(c.k)(function(Se){Se!==K.model[z]?K.localValues.set(z,Se):K.localValues.delete(z)})}))}})}Object.defineProperty(C.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),C.prototype.submit=function(){var W=this;Object(c.B)(this.localValues).forEach(function(K){var z=W.localValues.get(K),H=W.model[K];Object(c.y)(H)?H.replace(z):Object(c.z)(H)?(H.clear(),H.merge(z)):Object(c.v)(z)||(W.model[K]=z)}),this.localValues.clear()},C.prototype.reset=function(){this.localValues.clear()},C.prototype.resetProperty=function(W){this.localValues.delete(W)},N([c.m],C.prototype,"isDirty",null),N([c.m],C.prototype,"changedValues",null),N([c.k.bound],C.prototype,"submit",null),N([c.k.bound],C.prototype,"reset",null),N([c.k.bound],C.prototype,"resetProperty",null)})();function q(C){if(!C)return"ROOT";for(var W=[];C.parent;)W.push(C.path),C=C.parent;return W.reverse().join("/")}function Z(C){return Object(c.A)(C)||Object(c.y)(C)||Object(c.z)(C)}function Y(C,W){var K=new WeakMap;function z(fe){var Se=K.get(fe.object);(function(Te,he){switch(Te.type){case"add":H(Te.newValue,he,Te.name);break;case"update":re(Te.oldValue),H(Te.newValue,he,Te.name||""+Te.index);break;case"remove":case"delete":re(Te.oldValue);break;case"splice":Te.removed.map(re),Te.added.forEach(function(Ve,vt){return H(Ve,he,""+(Te.index+vt))});for(var _e=Te.index+Te.addedCount;_e<Te.object.length;_e++)if(Z(Te.object[_e])){var De=K.get(Te.object[_e]);De&&(De.path=""+_e)}}})(fe,Se),W(fe,q(Se),C)}function H(fe,Se,Te){if(Z(fe)){var he=K.get(fe);if(he){if(he.parent!==Se||he.path!==Te)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+q(Se)+"/"+Te+"', but it already exists at '"+q(he.parent)+"/"+he.path+"'")}else{var _e={parent:Se,path:Te,dispose:Object(c.D)(fe,z)};K.set(fe,_e),Object(c.p)(fe).forEach(function(De){var Ve=De[0];return H(De[1],_e,Ve)})}}}function re(fe){if(Z(fe)){var Se=K.get(fe);if(!Se)return;K.delete(fe),Se.dispose(),Object(c.L)(fe).forEach(re)}}return H(C,void 0,""),function(){re(C)}}var te,G=(te=function(C,W){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,z){K.__proto__=z}||function(K,z){for(var H in z)z.hasOwnProperty(H)&&(K[H]=z[H])},te(C,W)},function(C,W){function K(){this.constructor=C}te(C,W),C.prototype=W===null?Object.create(W):(K.prototype=W.prototype,new K)});(function(C){function W(K,z,H){var re=H===void 0?{}:H,fe=re.name,Se=fe===void 0?"ogm"+(1e3*Math.random()|0):fe,Te=re.keyToName,he=Te===void 0?function(Ve){return""+Ve}:Te,_e=C.call(this)||this;_e._keyToName=he,_e._groupBy=z,_e._ogmInfoKey=Symbol("ogmInfo"+Se),_e._base=K;for(var De=0;De<K.length;De++)_e._addItem(K[De]);return _e._disposeBaseObserver=Object(c.D)(_e._base,function(Ve){if(Ve.type==="splice")Object(c.J)(function(){for(var vt=0,rt=Ve.removed;vt<rt.length;vt++){var gt=rt[vt];_e._removeItem(gt)}for(var Nt=0,yt=Ve.added;Nt<yt.length;Nt++){var Yt=yt[Nt];_e._addItem(Yt)}});else{if(Ve.type!=="update")throw new Error("illegal state");Object(c.J)(function(){_e._removeItem(Ve.oldValue),_e._addItem(Ve.newValue)})}}),_e}G(W,C),W.prototype.clear=function(){throw new Error("not supported")},W.prototype.delete=function(K){throw new Error("not supported")},W.prototype.set=function(K,z){throw new Error("not supported")},W.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var z=this._base[K];z[this._ogmInfoKey].reaction(),delete z[this._ogmInfoKey]}},W.prototype._getGroupArr=function(K){var z=C.prototype.get.call(this,K);return z===void 0&&(z=Object(c.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),C.prototype.set.call(this,K,z)),z},W.prototype._removeFromGroupArr=function(K,z){var H=C.prototype.get.call(this,K);H.length===1?C.prototype.delete.call(this,K):(z===H.length-1||(H[z]=H[H.length-1],H[z][this._ogmInfoKey].groupArrIndex=z),H.length--)},W.prototype._addItem=function(K){var z=this,H=this._groupBy(K),re=this._getGroupArr(H),fe={groupByValue:H,groupArrIndex:re.length,reaction:Object(c.F)(function(){return z._groupBy(K)},function(Se,Te){var he=K[z._ogmInfoKey];z._removeFromGroupArr(he.groupByValue,he.groupArrIndex);var _e=z._getGroupArr(Se),De=_e.length;_e.push(K),he.groupByValue=Se,he.groupArrIndex=De})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:fe}),re.push(K)},W.prototype._removeItem=function(K){var z=K[this._ogmInfoKey];this._removeFromGroupArr(z.groupByValue,z.groupArrIndex),z.reaction(),delete K[this._ogmInfoKey]}})(c.b),function(){function C(W,K){this.base=W,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var z=this.closest=this.root=W,H=0;H<this.args.length-1&&(z=z.get(K[H]));H++)this.closest=z;this.closestIdx=H}return C.prototype.exists=function(){this.assertNotDisposed();var W=this.args.length;return this.closestIdx>=W-1&&this.closest.has(this.args[W-1])},C.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},C.prototype.set=function(W){this.assertNotDisposed();for(var K=this.args.length,z=this.closest,H=this.closestIdx;H<K-1;H++){var re=new Map;z.set(this.args[H],re),z=re}this.closestIdx=K-1,this.closest=z,z.set(this.args[K-1],W)},C.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var W=this.args.length;this.closest.delete(this.args[W-1]);for(var K=this.root,z=[K],H=0;H<W-1;H++)K=K.get(this.args[H]),z.push(K);for(H=z.length-1;H>0;H--)z[H].size===0&&z[H-1].delete(this.args[H-1]);this.isDisposed=!0},C.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},C}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,v,h){if(c){for(var g,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)_[111+P]="f"+P;for(P=0;P<=9;++P)_[P+96]=P.toString();Z.prototype.bind=function(Y,te,G){var C=this;return Y=Y instanceof Array?Y:[Y],C._bindMultiple.call(C,Y,te,G),C},Z.prototype.unbind=function(Y,te){return this.bind.call(this,Y,function(){},te)},Z.prototype.trigger=function(Y,te){var G=this;return G._directMap[Y+":"+te]&&G._directMap[Y+":"+te]({},Y),G},Z.prototype.reset=function(){var Y=this;return Y._callbacks={},Y._directMap={},Y},Z.prototype.stopCallback=function(Y,te){if((" "+te.className+" ").indexOf(" mousetrap ")>-1||q(te,this.target))return!1;if("composedPath"in Y&&typeof Y.composedPath=="function"){var G=Y.composedPath()[0];G!==Y.target&&(te=G)}return te.tagName=="INPUT"||te.tagName=="SELECT"||te.tagName=="TEXTAREA"||te.isContentEditable},Z.prototype.handleKey=function(){var Y=this;return Y._handleKey.apply(Y,arguments)},Z.addKeycodes=function(Y){for(var te in Y)Y.hasOwnProperty(te)&&(_[te]=Y[te]);g=null},Z.init=function(){var Y=Z(v);for(var te in Y)te.charAt(0)!=="_"&&(Z[te]=function(G){return function(){return Y[G].apply(Y,arguments)}}(te))},Z.init(),c.Mousetrap=Z,n.exports&&(n.exports=Z),(s=(function(){return Z}).call(o,r,o,n))===void 0||(n.exports=s)}function A(Y,te,G){Y.addEventListener?Y.addEventListener(te,G,!1):Y.attachEvent("on"+te,G)}function R(Y){if(Y.type=="keypress"){var te=String.fromCharCode(Y.which);return Y.shiftKey||(te=te.toLowerCase()),te}return _[Y.which]?_[Y.which]:w[Y.which]?w[Y.which]:String.fromCharCode(Y.which).toLowerCase()}function D(Y){return Y=="shift"||Y=="ctrl"||Y=="alt"||Y=="meta"}function N(Y,te,G){return G||(G=function(){if(!g)for(var C in g={},_)C>95&&C<112||_.hasOwnProperty(C)&&(g[_[C]]=C);return g}()[Y]?"keydown":"keypress"),G=="keypress"&&te.length&&(G="keydown"),G}function B(Y,te){var G,C,W,K=[];for(G=function(z){return z==="+"?["+"]:(z=z.replace(/\+{2}/g,"+plus")).split("+")}(Y),W=0;W<G.length;++W)C=G[W],S[C]&&(C=S[C]),te&&te!="keypress"&&O[C]&&(C=O[C],K.push("shift")),D(C)&&K.push(C);return{key:C,modifiers:K,action:te=N(C,K,te)}}function q(Y,te){return Y!==null&&Y!==v&&(Y===te||q(Y.parentNode,te))}function Z(Y){var te=this;if(Y=Y||v,!(te instanceof Z))return new Z(Y);te.target=Y,te._callbacks={},te._directMap={};var G,C={},W=!1,K=!1,z=!1;function H(_e){_e=_e||{};var De,Ve=!1;for(De in C)_e[De]?Ve=!0:C[De]=0;Ve||(z=!1)}function re(_e,De,Ve,vt,rt,gt){var Nt,yt,Yt,Ce,we=[],ke=Ve.type;if(!te._callbacks[_e])return[];for(ke=="keyup"&&D(_e)&&(De=[_e]),Nt=0;Nt<te._callbacks[_e].length;++Nt)if(yt=te._callbacks[_e][Nt],(vt||!yt.seq||C[yt.seq]==yt.level)&&ke==yt.action&&(ke=="keypress"&&!Ve.metaKey&&!Ve.ctrlKey||(Yt=De,Ce=yt.modifiers,Yt.sort().join(",")===Ce.sort().join(",")))){var dt=!vt&&yt.combo==rt,zt=vt&&yt.seq==vt&&yt.level==gt;(dt||zt)&&te._callbacks[_e].splice(Nt,1),we.push(yt)}return we}function fe(_e,De,Ve,vt){te.stopCallback(De,De.target||De.srcElement,Ve,vt)||_e(De,Ve)===!1&&(function(rt){rt.preventDefault?rt.preventDefault():rt.returnValue=!1}(De),function(rt){rt.stopPropagation?rt.stopPropagation():rt.cancelBubble=!0}(De))}function Se(_e){typeof _e.which!="number"&&(_e.which=_e.keyCode);var De=R(_e);De&&(_e.type!="keyup"||W!==De?te.handleKey(De,function(Ve){var vt=[];return Ve.shiftKey&&vt.push("shift"),Ve.altKey&&vt.push("alt"),Ve.ctrlKey&&vt.push("ctrl"),Ve.metaKey&&vt.push("meta"),vt}(_e),_e):W=!1)}function Te(_e,De,Ve,vt){function rt(Yt){return function(){z=Yt,++C[_e],clearTimeout(G),G=setTimeout(H,1e3)}}function gt(Yt){fe(Ve,Yt,_e),vt!=="keyup"&&(W=R(Yt)),setTimeout(H,10)}C[_e]=0;for(var Nt=0;Nt<De.length;++Nt){var yt=Nt+1===De.length?gt:rt(vt||B(De[Nt+1]).action);he(De[Nt],yt,vt,_e,Nt)}}function he(_e,De,Ve,vt,rt){te._directMap[_e+":"+Ve]=De;var gt,Nt=(_e=_e.replace(/\s+/g," ")).split(" ");Nt.length>1?Te(_e,Nt,De,Ve):(gt=B(_e,Ve),te._callbacks[gt.key]=te._callbacks[gt.key]||[],re(gt.key,gt.modifiers,{type:gt.action},vt,_e,rt),te._callbacks[gt.key][vt?"unshift":"push"]({callback:De,modifiers:gt.modifiers,action:gt.action,seq:vt,level:rt,combo:_e}))}te._handleKey=function(_e,De,Ve){var vt,rt=re(_e,De,Ve),gt={},Nt=0,yt=!1;for(vt=0;vt<rt.length;++vt)rt[vt].seq&&(Nt=Math.max(Nt,rt[vt].level));for(vt=0;vt<rt.length;++vt)if(rt[vt].seq){if(rt[vt].level!=Nt)continue;yt=!0,gt[rt[vt].seq]=1,fe(rt[vt].callback,Ve,rt[vt].combo,rt[vt].seq)}else yt||fe(rt[vt].callback,Ve,rt[vt].combo);var Yt=Ve.type=="keypress"&&K;Ve.type!=z||D(_e)||Yt||H(gt),K=yt&&Ve.type=="keydown"},te._bindMultiple=function(_e,De,Ve){for(var vt=0;vt<_e.length;++vt)he(_e[vt],De,Ve)},A(Y,"keypress",Se),A(Y,"keydown",Se),A(Y,"keyup",Se)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),v=r(30),h=r(33),g=s.TypeError;n.exports=function(_,w){var O,S;if(w==="string"&&v(O=_.toString)&&!h(S=c(O,_))||v(O=_.valueOf)&&!h(S=c(O,_))||w!=="string"&&v(O=_.toString)&&!h(S=c(O,_)))return S;throw g("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),v=r(92),h=s.WeakMap;n.exports=c(h)&&/native code/.test(v(h))},function(n,o,r){var s=r(36),c=r(38),v=r(32),h=r(41),g=r(77);n.exports=s?Object.defineProperties:function(_,w){v(_);for(var O,S=h(w),P=g(w),A=P.length,R=0;A>R;)c.f(_,O=P[R++],S[O]);return _}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),v=r(99),h=r(33),g=r(28)("species"),_=s.Array;n.exports=function(w){var O;return c(w)&&(O=w.constructor,(v(O)&&(O===_||c(O.prototype))||h(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?_:O}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),h=r(78),g=r(80),_=function(){return this};n.exports=function(w,O,S,P){var A=O+" Iterator";return w.prototype=c(s,{next:v(+!P,S)}),h(w,A,!1,!0),g[A]=_,w}},function(n,o,r){var s=r(7),c=r(30),v=s.String,h=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw h("Can't set "+v(g)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(95),g=r(42),_=r(144),w=r(117),O=r(119),S=r(30),P=r(33),A=r(18),R=r(120),D=r(78),N=r(148);n.exports=function(B,q,Z){var Y=B.indexOf("Map")!==-1,te=B.indexOf("Weak")!==-1,G=Y?"set":"add",C=c[B],W=C&&C.prototype,K=C,z={},H=function(_e){var De=v(W[_e]);g(W,_e,_e=="add"?function(Ve){return De(this,Ve===0?0:Ve),this}:_e=="delete"?function(Ve){return!(te&&!P(Ve))&&De(this,Ve===0?0:Ve)}:_e=="get"?function(Ve){return te&&!P(Ve)?void 0:De(this,Ve===0?0:Ve)}:_e=="has"?function(Ve){return!(te&&!P(Ve))&&De(this,Ve===0?0:Ve)}:function(Ve,vt){return De(this,Ve===0?0:Ve,vt),this})};if(h(B,!S(C)||!(te||W.forEach&&!A(function(){new C().entries().next()}))))K=Z.getConstructor(q,B,Y,G),_.enable();else if(h(B,!0)){var re=new K,fe=re[G](te?{}:-0,1)!=re,Se=A(function(){re.has(1)}),Te=R(function(_e){new C(_e)}),he=!te&&A(function(){for(var _e=new C,De=5;De--;)_e[G](De,De);return!_e.has(-0)});Te||((K=q(function(_e,De){O(_e,W);var Ve=N(new C,_e,K);return De!=null&&w(De,Ve[G],{that:Ve,AS_ENTRIES:Y}),Ve})).prototype=W,W.constructor=K),(Se||he)&&(H("delete"),H("has"),Y&&H("get")),(he||fe)&&H(G),te&&W.clear&&delete W.clear}return z[B]=K,s({global:!0,forced:K!=C},z),D(K,B),te||Z.setStrong(K,B,Y),K}},function(n,o,r){var s=r(18),c=r(33),v=r(51),h=r(184),g=Object.isExtensible,_=s(function(){});n.exports=_||h?function(w){return!!c(w)&&(!h||v(w)!="ArrayBuffer")&&(!g||g(w))}:g},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),v=r(149),h=r(64),g=r(119),_=r(117),w=r(116),O=r(150),S=r(36),P=r(144).fastKey,A=r(58),R=A.set,D=A.getterFor;n.exports={getConstructor:function(N,B,q,Z){var Y=N(function(K,z){g(K,te),R(K,{type:B,index:c(null),first:void 0,last:void 0,size:0}),S||(K.size=0),z!=null&&_(z,K[Z],{that:K,AS_ENTRIES:q})}),te=Y.prototype,G=D(B),C=function(K,z,H){var re,fe,Se=G(K),Te=W(K,z);return Te?Te.value=H:(Se.last=Te={index:fe=P(z,!0),key:z,value:H,previous:re=Se.last,next:void 0,removed:!1},Se.first||(Se.first=Te),re&&(re.next=Te),S?Se.size++:K.size++,fe!=="F"&&(Se.index[fe]=Te)),K},W=function(K,z){var H,re=G(K),fe=P(z);if(fe!=="F")return re.index[fe];for(H=re.first;H;H=H.next)if(H.key==z)return H};return v(te,{clear:function(){for(var K=G(this),z=K.index,H=K.first;H;)H.removed=!0,H.previous&&(H.previous=H.previous.next=void 0),delete z[H.index],H=H.next;K.first=K.last=void 0,S?K.size=0:this.size=0},delete:function(K){var z=this,H=G(z),re=W(z,K);if(re){var fe=re.next,Se=re.previous;delete H.index[re.index],re.removed=!0,Se&&(Se.next=fe),fe&&(fe.previous=Se),H.first==re&&(H.first=fe),H.last==re&&(H.last=Se),S?H.size--:z.size--}return!!re},forEach:function(K){for(var z,H=G(this),re=h(K,arguments.length>1?arguments[1]:void 0);z=z?z.next:H.first;)for(re(z.value,z.key,this);z&&z.removed;)z=z.previous},has:function(K){return!!W(this,K)}}),v(te,q?{get:function(K){var z=W(this,K);return z&&z.value},set:function(K,z){return C(this,K===0?0:K,z)}}:{add:function(K){return C(this,K=K===0?0:K,K)}}),S&&s(te,"size",{get:function(){return G(this).size}}),Y},setStrong:function(N,B,q){var Z=B+" Iterator",Y=D(B),te=D(Z);w(N,B,function(G,C){R(this,{type:Z,target:G,state:Y(G),kind:C,last:void 0})},function(){for(var G=te(this),C=G.kind,W=G.last;W&&W.removed;)W=W.previous;return G.target&&(G.last=W=W?W.next:G.state.first)?C=="keys"?{value:W.key,done:!1}:C=="values"?{value:W.value,done:!1}:{value:[W.key,W.value],done:!1}:(G.target=void 0,{value:void 0,done:!0})},q?"entries":"values",!q,!0),O(B)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(40),g=r(189),_=r(145),w=r(99),O=r(45),S=r(63),P=r(146),A=r(118),R=s.Array;n.exports=function(D){var N=h(D),B=w(this),q=arguments.length,Z=q>1?arguments[1]:void 0,Y=Z!==void 0;Y&&(Z=c(Z,q>2?arguments[2]:void 0));var te,G,C,W,K,z,H=A(N),re=0;if(!H||this==R&&_(H))for(te=O(N),G=B?new this(te):R(te);te>re;re++)z=Y?Z(N[re],re):N[re],S(G,re,z);else for(K=(W=P(N,H)).next,G=B?new this:[];!(C=v(K,W)).done;re++)z=Y?g(W,Z,[C.value,re],!0):C.value,S(G,re,z);return G.length=re,G}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(v,h,g,_){try{return _?h(s(g)[0],g[1]):h(g)}catch(w){c(v,"throw",w)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),v=r(56),h=r(40),g=r(45),_=r(39),w=r(18),O=r(193),S=r(121),P=r(194),A=r(195),R=r(70),D=r(196),N=[],B=c(N.sort),q=c(N.push),Z=w(function(){N.sort(void 0)}),Y=w(function(){N.sort(null)}),te=S("sort"),G=!w(function(){if(R)return R<70;if(!(P&&P>3)){if(A)return!0;if(D)return D<603;var C,W,K,z,H="";for(C=65;C<76;C++){switch(W=String.fromCharCode(C),C){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(z=0;z<47;z++)N.push({k:W+z,v:K})}for(N.sort(function(re,fe){return fe.v-re.v}),z=0;z<N.length;z++)W=N[z].k.charAt(0),H.charAt(H.length-1)!==W&&(H+=W);return H!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:Z||!Y||!te||!G},{sort:function(C){C!==void 0&&v(C);var W=h(this);if(G)return C===void 0?B(W):B(W,C);var K,z,H=[],re=g(W);for(z=0;z<re;z++)z in W&&q(H,W[z]);for(O(H,function(fe){return function(Se,Te){return Te===void 0?-1:Se===void 0?1:fe!==void 0?+fe(Se,Te)||0:_(Se)>_(Te)?1:-1}}(C)),K=H.length,z=0;z<K;)W[z]=H[z++];for(;z<re;)delete W[z++];return W}})},function(n,o,r){var s=r(114),c=Math.floor,v=function(_,w){var O=_.length,S=c(O/2);return O<8?h(_,w):g(_,v(s(_,0,S),w),v(s(_,S),w),w)},h=function(_,w){for(var O,S,P=_.length,A=1;A<P;){for(S=A,O=_[A];S&&w(_[S-1],O)>0;)_[S]=_[--S];S!==A++&&(_[S]=O)}return _},g=function(_,w,O,S){for(var P=w.length,A=O.length,R=0,D=0;R<P||D<A;)_[R+D]=R<P&&D<A?S(w[R],O[D])<=0?w[R++]:O[D++]:R<P?w[R++]:O[D++];return _};n.exports=v},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(h){if(c(h))throw v("The method doesn't accept regular expressions");return h}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(h){return c(function(){return!!v[h]()||"​᠎"[h]()!=="​᠎"||s&&v[h].name!==h})}},function(n,o,r){var s=r(15),c=r(40),v=Math.floor,h=s("".charAt),g=s("".replace),_=s("".slice),w=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(S,P,A,R,D,N){var B=A+S.length,q=R.length,Z=O;return D!==void 0&&(D=c(D),Z=w),g(N,Z,function(Y,te){var G;switch(h(te,0)){case"$":return"$";case"&":return S;case"`":return _(P,0,A);case"'":return _(P,B);case"<":G=D[_(te,1,-1)];break;default:var C=+te;if(C===0)return Y;if(C>q){var W=v(C/10);return W===0?Y:W<=q?R[W-1]===void 0?h(te,1):R[W-1]+h(te,1):Y}G=R[C-1]}return G===void 0?"":G})}},function(n,o,r){var s=r(36),c=r(15),v=r(34),h=r(18),g=r(77),_=r(112),w=r(84),O=r(40),S=r(85),P=Object.assign,A=Object.defineProperty,R=c([].concat);n.exports=!P||h(function(){if(s&&P({b:1},P(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},N={},B=Symbol(),q="abcdefghijklmnopqrst";return D[B]=7,q.split("").forEach(function(Z){N[Z]=Z}),P({},D)[B]!=7||g(P({},N)).join("")!=q})?function(D,N){for(var B=O(D),q=arguments.length,Z=1,Y=_.f,te=w.f;q>Z;)for(var G,C=S(arguments[Z++]),W=Y?R(g(C),Y(C)):g(C),K=W.length,z=0;K>z;)G=W[z++],s&&!v(te,C,G)||(B[G]=C[G]);return B}:P},function(n,o,r){var s=r(7),c=r(15),v=r(56),h=r(33),g=r(35),_=r(98),w=s.Function,O=c([].concat),S=c([].join),P={},A=function(R,D,N){if(!g(P,D)){for(var B=[],q=0;q<D;q++)B[q]="a["+q+"]";P[D]=w("C,a","return new C("+S(B,",")+")")}return P[D](R,N)};n.exports=w.bind||function(R){var D=v(this),N=D.prototype,B=_(arguments,1),q=function(){var Z=O(B,_(arguments));return this instanceof q?A(D,Z.length,Z):D.apply(R,Z)};return h(N)&&(q.prototype=N),q}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=/"/g,g=s("".replace);n.exports=function(_,w,O,S){var P=v(c(_)),A="<"+w;return O!==""&&(A+=" "+O+'="'+g(v(S),h,"&quot;")+'"'),A+">"+P+"</"+w+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,v,h,g=r(16),_=r(71),w=r(7),O=r(46),S=r(34),P=r(209),A=r(42),R=r(149),D=r(102),N=r(78),B=r(150),q=r(56),Z=r(30),Y=r(33),te=r(119),G=r(92),C=r(117),W=r(120),K=r(164),z=r(168).set,H=r(210),re=r(213),fe=r(214),Se=r(170),Te=r(215),he=r(58),_e=r(95),De=r(28),Ve=r(216),vt=r(128),rt=r(70),gt=De("species"),Nt="Promise",yt=he.getterFor(Nt),Yt=he.set,Ce=he.getterFor(Nt),we=P&&P.prototype,ke=P,dt=we,zt=w.TypeError,Ot=w.document,rn=w.process,yn=Se.f,Tn=yn,pn=!!(Ot&&Ot.createEvent&&w.dispatchEvent),st=Z(w.PromiseRejectionEvent),xn="unhandledrejection",Fe=!1,mn=_e(Nt,function(){var je=G(ke),ot=je!==String(ke);if(!ot&&rt===66||_&&!dt.finally)return!0;if(rt>=51&&/native code/.test(je))return!1;var en=new ke(function(kn){kn(1)}),qt=function(kn){kn(function(){},function(){})};return(en.constructor={})[gt]=qt,!(Fe=en.then(function(){})instanceof qt)||!ot&&Ve&&!st}),Kn=mn||!W(function(je){ke.all(je).catch(function(){})}),oe=function(je){var ot;return!(!Y(je)||!Z(ot=je.then))&&ot},$n=function(je,ot){if(!je.notified){je.notified=!0;var en=je.reactions;H(function(){for(var qt=je.value,kn=je.state==1,wr=0;en.length>wr;){var ni,yi,Go,Xo=en[wr++],Sn=kn?Xo.ok:Xo.fail,Bn=Xo.resolve,Xn=Xo.reject,ir=Xo.domain;try{Sn?(kn||(je.rejection===2&&Dn(je),je.rejection=1),Sn===!0?ni=qt:(ir&&ir.enter(),ni=Sn(qt),ir&&(ir.exit(),Go=!0)),ni===Xo.promise?Xn(zt("Promise-chain cycle")):(yi=oe(ni))?S(yi,ni,Bn,Xn):Bn(ni)):Xn(qt)}catch(Kr){ir&&!Go&&ir.exit(),Xn(Kr)}}je.reactions=[],je.notified=!1,ot&&!je.rejection&&Gr(je)})}},Sr=function(je,ot,en){var qt,kn;pn?((qt=Ot.createEvent("Event")).promise=ot,qt.reason=en,qt.initEvent(je,!1,!0),w.dispatchEvent(qt)):qt={promise:ot,reason:en},!st&&(kn=w["on"+je])?kn(qt):je===xn&&fe("Unhandled promise rejection",en)},Gr=function(je){S(z,w,function(){var ot,en=je.facade,qt=je.value;if(eo(je)&&(ot=Te(function(){vt?rn.emit("unhandledRejection",qt,en):Sr(xn,en,qt)}),je.rejection=vt||eo(je)?2:1,ot.error))throw ot.value})},eo=function(je){return je.rejection!==1&&!je.parent},Dn=function(je){S(z,w,function(){var ot=je.facade;vt?rn.emit("rejectionHandled",ot):Sr("rejectionhandled",ot,je.value)})},Ro=function(je,ot,en){return function(qt){je(ot,qt,en)}},xe=function(je,ot,en){je.done||(je.done=!0,en&&(je=en),je.value=ot,je.state=2,$n(je,!0))},He=function(je,ot,en){if(!je.done){je.done=!0,en&&(je=en);try{if(je.facade===ot)throw zt("Promise can't be resolved itself");var qt=oe(ot);qt?H(function(){var kn={done:!1};try{S(qt,ot,Ro(He,kn,je),Ro(xe,kn,je))}catch(wr){xe(kn,wr,je)}}):(je.value=ot,je.state=1,$n(je,!1))}catch(kn){xe({done:!1},kn,je)}}};if(mn&&(dt=(ke=function(je){te(this,dt),q(je),S(s,this);var ot=yt(this);try{je(Ro(He,ot),Ro(xe,ot))}catch(en){xe(ot,en)}}).prototype,(s=function(je){Yt(this,{type:Nt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=R(dt,{then:function(je,ot){var en=Ce(this),qt=en.reactions,kn=yn(K(this,ke));return kn.ok=!Z(je)||je,kn.fail=Z(ot)&&ot,kn.domain=vt?rn.domain:void 0,en.parent=!0,qt[qt.length]=kn,en.state!=0&&$n(en,!1),kn.promise},catch:function(je){return this.then(void 0,je)}}),c=function(){var je=new s,ot=yt(je);this.promise=je,this.resolve=Ro(He,ot),this.reject=Ro(xe,ot)},Se.f=yn=function(je){return je===ke||je===v?new c(je):Tn(je)},!_&&Z(P)&&we!==Object.prototype)){h=we.then,Fe||(A(we,"then",function(je,ot){var en=this;return new ke(function(qt,kn){S(h,en,qt,kn)}).then(je,ot)},{unsafe:!0}),A(we,"catch",dt.catch,{unsafe:!0}));try{delete we.constructor}catch{}D&&D(we,dt)}g({global:!0,wrap:!0,forced:mn},{Promise:ke}),N(ke,Nt,!1,!0),B(Nt),v=O(Nt),g({target:Nt,stat:!0,forced:mn},{reject:function(je){var ot=yn(this);return S(ot.reject,void 0,je),ot.promise}}),g({target:Nt,stat:!0,forced:_||mn},{resolve:function(je){return re(_&&this===v?ke:this,je)}}),g({target:Nt,stat:!0,forced:Kn},{all:function(je){var ot=this,en=yn(ot),qt=en.resolve,kn=en.reject,wr=Te(function(){var ni=q(ot.resolve),yi=[],Go=0,Xo=1;C(je,function(Sn){var Bn=Go++,Xn=!1;Xo++,S(ni,ot,Sn).then(function(ir){Xn||(Xn=!0,yi[Bn]=ir,--Xo||qt(yi))},kn)}),--Xo||qt(yi)});return wr.error&&kn(wr.value),en.promise},race:function(je){var ot=this,en=yn(ot),qt=en.reject,kn=Te(function(){var wr=q(ot.resolve);C(je,function(ni){S(wr,ot,ni).then(en.resolve,qt)})});return kn.error&&qt(kn.value),en.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,v,h,g,_,w,O,S=r(7),P=r(64),A=r(50).f,R=r(168).set,D=r(169),N=r(211),B=r(212),q=r(128),Z=S.MutationObserver||S.WebKitMutationObserver,Y=S.document,te=S.process,G=S.Promise,C=A(S,"queueMicrotask"),W=C&&C.value;W||(s=function(){var K,z;for(q&&(K=te.domain)&&K.exit();c;){z=c.fn,c=c.next;try{z()}catch(H){throw c?h():v=void 0,H}}v=void 0,K&&K.enter()},D||q||B||!Z||!Y?!N&&G&&G.resolve?((w=G.resolve(void 0)).constructor=G,O=P(w.then,w),h=function(){O(s)}):q?h=function(){te.nextTick(s)}:(R=P(R,S),h=function(){R(s)}):(g=!0,_=Y.createTextNode(""),new Z(s).observe(_,{characterData:!0}),h=function(){_.data=g=!g})),n.exports=W||function(K){var z={fn:K,next:void 0};v&&(v.next=z),c||(c=z,h()),v=z}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),v=r(170);n.exports=function(h,g){if(s(h),c(g)&&g.constructor===h)return g;var _=v.f(h);return(0,_.resolve)(g),_.promise}},function(n,o,r){var s=r(7);n.exports=function(c,v){var h=s.console;h&&h.error&&(arguments.length==1?h.error(c):h.error(c,v))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),v=r(45);n.exports=function(h){for(var g=s(this),_=v(g),w=arguments.length,O=c(w>1?arguments[1]:void 0,_),S=w>2?arguments[2]:void 0,P=S===void 0?_:c(S,_);P>O;)g[O++]=h;return g}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(59),g=r(160),_=r(219),w=r(18),O=c.RangeError,S=c.String,P=Math.floor,A=v(_),R=v("".slice),D=v(1 .toFixed),N=function(Y,te,G){return te===0?G:te%2==1?N(Y,te-1,G*Y):N(Y*Y,te/2,G)},B=function(Y,te,G){for(var C=-1,W=G;++C<6;)W+=te*Y[C],Y[C]=W%1e7,W=P(W/1e7)},q=function(Y,te){for(var G=6,C=0;--G>=0;)C+=Y[G],Y[G]=P(C/te),C=C%te*1e7},Z=function(Y){for(var te=6,G="";--te>=0;)if(G!==""||te===0||Y[te]!==0){var C=S(Y[te]);G=G===""?C:G+A("0",7-C.length)+C}return G};s({target:"Number",proto:!0,forced:w(function(){return D(8e-5,3)!=="0.000"||D(.9,0)!=="1"||D(1.255,2)!=="1.25"||D(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!w(function(){D({})})},{toFixed:function(Y){var te,G,C,W,K=g(this),z=h(Y),H=[0,0,0,0,0,0],re="",fe="0";if(z<0||z>20)throw O("Incorrect fraction digits");if(K!=K)return"NaN";if(K<=-1e21||K>=1e21)return S(K);if(K<0&&(re="-",K=-K),K>1e-21)if(G=(te=function(Se){for(var Te=0,he=Se;he>=4096;)Te+=12,he/=4096;for(;he>=2;)Te+=1,he/=2;return Te}(K*N(2,69,1))-69)<0?K*N(2,-te,1):K/N(2,te,1),G*=4503599627370496,(te=52-te)>0){for(B(H,0,G),C=z;C>=7;)B(H,1e7,0),C-=7;for(B(H,N(10,C,1),0),C=te-1;C>=23;)q(H,1<<23),C-=23;q(H,1<<C),B(H,1,1),q(H,2),fe=Z(H)}else B(H,0,G),B(H,1<<-te,0),fe=Z(H)+A("0",z);return fe=z>0?re+((W=fe.length)<=z?"0."+A("0",z-W)+fe:R(fe,0,W-z)+"."+R(fe,W-z)):re+fe}})},function(n,o,r){var s=r(7),c=r(59),v=r(39),h=r(44),g=s.RangeError;n.exports=function(_){var w=v(h(this)),O="",S=c(_);if(S<0||S==1/0)throw g("Wrong number of repetitions");for(;S>0;(S>>>=1)&&(w+=w))1&S&&(O+=w);return O}},function(n,o,r){var s=r(36),c=r(15),v=r(77),h=r(41),g=c(r(84).f),_=c([].push),w=function(O){return function(S){for(var P,A=h(S),R=v(A),D=R.length,N=0,B=[];D>N;)P=R[N++],s&&!g(A,P)||_(B,O?[P,A[P]]:A[P]);return B}};n.exports={entries:w(!0),values:w(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return ps}),r.d(o,"LogicFlow",function(){return _1}),r.d(o,"h",function(){return Fe.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return vf}),r.d(o,"RectNode",function(){return c0}),r.d(o,"CircleNode",function(){return h0}),r.d(o,"PolygonNode",function(){return _0}),r.d(o,"DiamondNode",function(){return O0}),r.d(o,"EllipseNode",function(){return M0}),r.d(o,"TextNode",function(){return N0}),r.d(o,"HtmlNode",function(){return D0}),r.d(o,"BaseEdge",function(){return cy}),r.d(o,"LineEdge",function(){return q0}),r.d(o,"PolylineEdge",function(){return e1}),r.d(o,"BezierEdge",function(){return o1}),r.d(o,"Arrow",function(){return ED}),r.d(o,"BaseEdgeModel",function(){return _d}),r.d(o,"BezierEdgeModel",function(){return yb}),r.d(o,"LineEdgeModel",function(){return ki}),r.d(o,"PolylineEdgeModel",function(){return sf}),r.d(o,"BaseNodeModel",function(){return hf}),r.d(o,"CircleNodeModel",function(){return Eb}),r.d(o,"DiamondNodeModel",function(){return Tb}),r.d(o,"EllipseNodeModel",function(){return Nb}),r.d(o,"PolygonNodeModel",function(){return Lb}),r.d(o,"RectNodeModel",function(){return Ub}),r.d(o,"TextNodeModel",function(){return zb}),r.d(o,"HtmlNodeModel",function(){return Yb}),r.d(o,"EditConfigModel",function(){return Jf}),r.d(o,"GraphModel",function(){return HE}),r.d(o,"SnaplineModel",function(){return kx}),r.d(o,"Keyboard",function(){return yS}),r.d(o,"get",function(){return yO}),r.d(o,"defaults",function(){return gO}),r.d(o,"ElementState",function(){return Hr}),r.d(o,"ModelType",function(){return Or}),r.d(o,"ElementType",function(){return io}),r.d(o,"EventType",function(){return Nn}),r.d(o,"formateAnchorConnectValidateData",function(){return Yl});var s={};r.r(s),r.d(s,"createUuid",function(){return el}),r.d(s,"refreshGraphId",function(){return xu}),r.d(s,"StepDrag",function(){return ee}),r.d(s,"setupEdgeModel",function(){return _t}),r.d(s,"isBboxOverLapping",function(){return We}),r.d(s,"filterRepeatPoints",function(){return it}),r.d(s,"getSimplePolyline",function(){return Lt}),r.d(s,"getExpandedBBox",function(){return Kt}),r.d(s,"pointDirection",function(){return xt}),r.d(s,"getExpandedBBoxPoint",function(){return Zt}),r.d(s,"mergeBBox",function(){return St}),r.d(s,"getBBoxOfPoints",function(){return Wt}),r.d(s,"getPointsFromBBox",function(){return bt}),r.d(s,"isPointOutsideBBox",function(){return Xt}),r.d(s,"getBBoxXCrossPoints",function(){return Mn}),r.d(s,"getBBoxYCrossPoints",function(){return Wn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return It}),r.d(s,"estimateDistance",function(){return At}),r.d(s,"costByPoints",function(){return Et}),r.d(s,"heuristicCostEstimate",function(){return Cn}),r.d(s,"rebuildPath",function(){return tr}),r.d(s,"removeClosePointFromOpenList",function(){return un}),r.d(s,"isSegmentsIntersected",function(){return Qn}),r.d(s,"isSegmentCrossingBBox",function(){return Vn}),r.d(s,"getNextNeighborPoints",function(){return rr}),r.d(s,"pathFinder",function(){return gr}),r.d(s,"getBoxByOriginNode",function(){return Mo}),r.d(s,"pointFilter",function(){return Fo}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return Wo}),r.d(s,"isSegmentsInNode",function(){return Qr}),r.d(s,"isSegmentsCrossNode",function(){return Po}),r.d(s,"getCrossPointInRect",function(){return $o}),r.d(s,"segmentDirection",function(){return Eo}),r.d(s,"points2PointsList",function(){return mo}),r.d(s,"getSimplePoints",function(){return ei}),r.d(s,"getBytesLength",function(){return Zn}),r.d(s,"getTextWidth",function(){return Nr}),r.d(s,"getAppendAttributes",function(){return jn}),r.d(s,"getBezierControlPoints",function(){return fr}),r.d(s,"getBezierPoints",function(){return zn}),r.d(s,"getEndTangent",function(){return Fa}),r.d(s,"getClosestPointOfPolyline",function(){return Zl}),r.d(s,"pickEdgeConfig",function(){return ye}),r.d(s,"twoPointDistance",function(){return tt}),r.d(s,"createEdgeGenerator",function(){return qe}),r.d(s,"snapToGrid",function(){return wl}),r.d(s,"getGridOffset",function(){return Is}),r.d(s,"sampleCubic",function(){return be}),r.d(s,"getThetaOfVector",function(){return ct}),r.d(s,"degrees",function(){return Ke}),r.d(s,"Vector",function(){return Q}),r.d(s,"Point",function(){return pe}),r.d(s,"Matrix",function(){return Ks}),r.d(s,"RotateMatrix",function(){return xp}),r.d(s,"ScaleMatrix",function(){return ey}),r.d(s,"TranslateMatrix",function(){return Zs});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var h=r(43),g=Object(h.b)("observerBatching");function _(a){a()}var w=!1;function O(){return w}function S(a){return Object(c.t)(a)}var P,A=1e4,R=new Set;function D(){P===void 0&&(P=setTimeout(N,1e4))}function N(){P=void 0;var a=Date.now();R.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,R.delete(i))}),R.size>0&&D()}var B=!1,q=[],Z={};function Y(a){return"observer"+a}function te(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=Z),O();var u,p=function(k){return function(){B?q.push(k):k()}}((l.useForceUpdate||h.d)()),f=v.d.useRef(null);if(!f.current){var y=new c.c(Y(i),function(){b.mounted?p():(y.dispose(),f.current=null)}),b=function(k){return{cleanAt:Date.now()+A,reaction:k}}(y);f.current=b,u=f,R.add(u),D()}var x=f.current.reaction;return v.d.useDebugValue(x,S),v.d.useEffect(function(){var k;return k=f,R.delete(k),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(Y(i),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(k){B=!0,q=[];try{var I=k();B=!1;var X=q.length>0?q:void 0;return v.d.useLayoutEffect(function(){X&&X.forEach(function(J){return J()})},[X]),I}finally{B=!1}}(function(){var k,I;if(x.track(function(){try{k=a()}catch(X){I=X}}),I)throw I;return k})}var G=function(){return G=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var p in i=arguments[l])Object.prototype.hasOwnProperty.call(i,p)&&(a[p]=i[p]);return a},G.apply(this,arguments)};function C(a,i){var l,u,p,f=G({forwardRef:!1},i),y=a.displayName||a.name,b=function(x,k){return te(function(){return a(x,k)},y)};return b.displayName=y,l=f.forwardRef?Object(v.f)(Object(v.e)(b)):Object(v.f)(b),u=a,p=l,Object.keys(u).forEach(function(x){W[x]||Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(u,x))}),l.displayName=y,l}var W={$$typeof:!0,render:!0,compare:!0,type:!0};function K(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:te(u)}function z(a,i,l,u,p){var f=i==="children"?"render":"children",y=typeof a[i]=="function",b=typeof a[f]=="function";return y&&b?new Error("MobX Observer: Do not use children and render in the same time in`"+l):y||b?null:new Error("Invalid prop `"+p+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}K.propTypes={children:z,render:z},K.displayName="Observer";var H;(H=v.g)||(H=_),Object(c.n)({reactionScheduler:H}),Object(h.a)()[g]=!0;var re=0,fe={};function Se(a){return fe[a]||(fe[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+re+")";return re++,l}(a)),fe[a]}function Te(a,i){if(he(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var p=0;p<l.length;p++)if(!Object.hasOwnProperty.call(i,l[p])||!he(a[l[p]],i[l[p]]))return!1;return!0}function he(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function _e(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var De=Se("patchMixins"),Ve=Se("patchedDefinition");function vt(a,i){for(var l=this,u=arguments.length,p=new Array(u>2?u-2:0),f=2;f<u;f++)p[f-2]=arguments[f];i.locks++;try{var y;return a!=null&&(y=a.apply(this,p)),y}finally{i.locks--,i.locks===0&&i.methods.forEach(function(b){b.apply(l,p)})}}function rt(a,i){return function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];vt.call.apply(vt,[this,a,i].concat(u))}}function gt(a,i,l){var u=function(b,x){var k=b[De]=b[De]||{},I=k[x]=k[x]||{};return I.locks=I.locks||0,I.methods=I.methods||[],I}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var p=Object.getOwnPropertyDescriptor(a,i);if(!p||!p[Ve]){var f=a[i],y=Nt(a,i,p?p.enumerable:void 0,u,f);Object.defineProperty(a,i,y)}}function Nt(a,i,l,u,p){var f,y=rt(p,u);return(f={})[Ve]=!0,f.get=function(){return y},f.set=function(b){if(this===a)y=rt(b,u);else{var x=Nt(this,i,l,u,b);Object.defineProperty(this,i,x)}},f.configurable=!0,f.enumerable=l,f}var yt=c.a||"$mobx",Yt=Se("isMobXReactObserver"),Ce=Se("isUnmounted"),we=Se("skipRender"),ke=Se("isForcingUpdate");function dt(a){var i=a.prototype;if(a[Yt]?zt(i):a[Yt]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==v.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=rn;yn(i,"props"),yn(i,"state");var l=i.render;return i.render=function(){return Ot.call(this,l)},gt(i,"componentWillUnmount",function(){var u;(u=this.render[yt])===null||u===void 0||u.dispose(),this[Ce]=!0,!this.render[yt]&&zt(this)}),a}function zt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function Ot(a){var i=this;_e(this,we,!1),_e(this,ke,!1);var l=zt(this),u=a.bind(this),p=!1,f=new c.c(l+".render()",function(){if(!p&&(p=!0,i[Ce]!==!0)){var b=!0;try{_e(i,ke,!0),i[we]||v.a.prototype.forceUpdate.call(i),b=!1}finally{_e(i,ke,!1),b&&f.dispose()}}});function y(){p=!1;var b=void 0,x=void 0;if(f.track(function(){try{x=Object(c.d)(!1,u)}catch(k){b=k}}),b)throw b;return x}return f.reactComponent=this,y[yt]=f,this.render=y,y.call(this)}function rn(a,i){return this.state!==i||!Te(this.props,a)}function yn(a,i){var l=Se("reactProp_"+i+"_valueHolder"),u=Se("reactProp_"+i+"_atomHolder");function p(){return this[u]||_e(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[ke]||Te(this[l],f)?_e(this,l,f):(_e(this,l,f),_e(this,we,!0),p.call(this).reportChanged(),_e(this,we,!1))}})}var Tn=typeof Symbol=="function"&&Symbol.for,pn=Tn?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(a){return null}).$$typeof,st=Tn?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(a){return null}).$$typeof;function xn(a){if(a.isMobxInjector,st&&a.$$typeof===st)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&a.$$typeof===pn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(K,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(v.a,a)?dt(a):C(a)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Fe=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var mn=function(a,i){for(var l=-1,u=a==null?0:a.length,p=Array(u);++l<u;)p[l]=i(a[l],l,a);return p},Kn=function(){this.__data__=[],this.size=0},oe=function(a,i){return a===i||a!=a&&i!=i},$n=function(a,i){for(var l=a.length;l--;)if(oe(a[l][0],i))return l;return-1},Sr=Array.prototype.splice,Gr=function(a){var i=this.__data__,l=$n(i,a);return!(l<0)&&(l==i.length-1?i.pop():Sr.call(i,l,1),--this.size,!0)},eo=function(a){var i=this.__data__,l=$n(i,a);return l<0?void 0:i[l][1]},Dn=function(a){return $n(this.__data__,a)>-1},Ro=function(a,i){var l=this.__data__,u=$n(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function xe(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}xe.prototype.clear=Kn,xe.prototype.delete=Gr,xe.prototype.get=eo,xe.prototype.has=Dn,xe.prototype.set=Ro;var He=xe,je=function(){this.__data__=new He,this.size=0},ot=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},en=function(a){return this.__data__.get(a)},qt=function(a){return this.__data__.has(a)},kn=r(31),wr=kn.a.Symbol,ni=Object.prototype,yi=ni.hasOwnProperty,Go=ni.toString,Xo=wr?wr.toStringTag:void 0,Sn=function(a){var i=yi.call(a,Xo),l=a[Xo];try{a[Xo]=void 0;var u=!0}catch{}var p=Go.call(a);return u&&(i?a[Xo]=l:delete a[Xo]),p},Bn=Object.prototype.toString,Xn=function(a){return Bn.call(a)},ir=wr?wr.toStringTag:void 0,Kr=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":ir&&ir in Object(a)?Sn(a):Xn(a)},Rr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},cl,Ua=function(a){if(!Rr(a))return!1;var i=Kr(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},fl=kn.a["__core-js_shared__"],au=(cl=/[^.]+$/.exec(fl&&fl.keys&&fl.keys.IE_PROTO||""))?"Symbol(src)_1."+cl:"",Ud=function(a){return!!au&&au in a},mc=Function.prototype.toString,fa=function(a){if(a!=null){try{return mc.call(a)}catch{}try{return a+""}catch{}}return""},Wu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,Cf=Object.prototype,vo=Pn.toString,gc=Cf.hasOwnProperty,qi=RegExp("^"+vo.call(gc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=function(a){return!(!Rr(a)||Ud(a))&&(Ua(a)?qi:Wu).test(fa(a))},Es=function(a,i){return a==null?void 0:a[i]},Ta=function(a,i){var l=Es(a,i);return ta(l)?l:void 0},da=Ta(kn.a,"Map"),Ma=Ta(Object,"create"),_c=function(){this.__data__=Ma?Ma(null):{},this.size=0},bc=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},Df=Object.prototype.hasOwnProperty,zu=function(a){var i=this.__data__;if(Ma){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return Df.call(i,a)?i[a]:void 0},If=Object.prototype.hasOwnProperty,wc=function(a){var i=this.__data__;return Ma?i[a]!==void 0:If.call(i,a)},Gd=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=Ma&&i===void 0?"__lodash_hash_undefined__":i,this};function Rl(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Rl.prototype.clear=_c,Rl.prototype.delete=bc,Rl.prototype.get=zu,Rl.prototype.has=wc,Rl.prototype.set=Gd;var Lf=Rl,dl=function(){this.size=0,this.__data__={hash:new Lf,map:new(da||He),string:new Lf}},Ec=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Os=function(a,i){var l=a.__data__;return Ec(i)?l[typeof i=="string"?"string":"hash"]:l.map},Oc=function(a){var i=Os(this,a).delete(a);return this.size-=i?1:0,i},xc=function(a){return Os(this,a).get(a)},Vd=function(a){return Os(this,a).has(a)},Ff=function(a,i){var l=Os(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function zr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}zr.prototype.clear=dl,zr.prototype.delete=Oc,zr.prototype.get=xc,zr.prototype.has=Vd,zr.prototype.set=Ff;var Vr=zr,$f=function(a,i){var l=this.__data__;if(l instanceof He){var u=l.__data__;if(!da||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new Vr(u)}return l.set(a,i),this.size=l.size,this};function lu(a){var i=this.__data__=new He(a);this.size=i.size}lu.prototype.clear=je,lu.prototype.delete=ot,lu.prototype.get=en,lu.prototype.has=qt,lu.prototype.set=$f;var pa=lu,xs=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Bf=function(a){return this.__data__.has(a)};function jo(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new Vr;++i<l;)this.add(a[i])}jo.prototype.add=jo.prototype.push=xs,jo.prototype.has=Bf;var jl=jo,Cl=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Ss=function(a,i){return a.has(i)},uu=function(a,i,l,u,p,f){var y=1&l,b=a.length,x=i.length;if(b!=x&&!(y&&x>b))return!1;var k=f.get(a),I=f.get(i);if(k&&I)return k==i&&I==a;var X=-1,J=!0,ve=2&l?new jl:void 0;for(f.set(a,i),f.set(i,a);++X<b;){var Ae=a[X],Re=i[X];if(u)var Ze=y?u(Re,Ae,X,i,a,f):u(Ae,Re,X,a,i,f);if(Ze!==void 0){if(Ze)continue;J=!1;break}if(ve){if(!Cl(i,function(Je,ht){if(!Ss(ve,ht)&&(Ae===Je||p(Ae,Je,l,u,f)))return ve.push(ht)})){J=!1;break}}else if(Ae!==Re&&!p(Ae,Re,l,u,f)){J=!1;break}}return f.delete(a),f.delete(i),J},mi=kn.a.Uint8Array,Sc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,p){l[++i]=[p,u]}),l},Uf=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Ac=wr?wr.prototype:void 0,Ni=Ac?Ac.valueOf:void 0,ri=function(a,i,l,u,p,f,y){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!f(new mi(a),new mi(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return oe(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var b=Sc;case"[object Set]":var x=1&u;if(b||(b=Uf),a.size!=i.size&&!x)return!1;var k=y.get(a);if(k)return k==i;u|=2,y.set(a,i);var I=uu(b(a),b(i),u,p,f,y);return y.delete(a),I;case"[object Symbol]":if(Ni)return Ni.call(a)==Ni.call(i)}return!1},na=function(a,i){for(var l=-1,u=i.length,p=a.length;++l<u;)a[p+l]=i[l];return a},to=Array.isArray,Gf=function(a,i,l){var u=i(a);return to(a)?u:na(u,l(a))},Ri=function(a,i){for(var l=-1,u=a==null?0:a.length,p=0,f=[];++l<u;){var y=a[l];i(y,l,a)&&(f[p++]=y)}return f},Tc=function(){return[]},Vf=Object.prototype.propertyIsEnumerable,ji=Object.getOwnPropertySymbols,Ti=ji?function(a){return a==null?[]:(a=Object(a),Ri(ji(a),function(i){return Vf.call(a,i)}))}:Tc,Mc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},Fr=function(a){return a!=null&&typeof a=="object"},oi=function(a){return Fr(a)&&Kr(a)=="[object Arguments]"},As=Object.prototype,Wf=As.hasOwnProperty,Pc=As.propertyIsEnumerable,Ts=oi(function(){return arguments}())?oi:function(a){return Fr(a)&&Wf.call(a,"callee")&&!Pc.call(a,"callee")},Ga=Ts,Ci=r(48),su=/^(?:0|[1-9]\d*)$/,Ki=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&su.test(a))&&a>-1&&a%1==0&&a<i},ha=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Mr={};Mr["[object Float32Array]"]=Mr["[object Float64Array]"]=Mr["[object Int8Array]"]=Mr["[object Int16Array]"]=Mr["[object Int32Array]"]=Mr["[object Uint8Array]"]=Mr["[object Uint8ClampedArray]"]=Mr["[object Uint16Array]"]=Mr["[object Uint32Array]"]=!0,Mr["[object Arguments]"]=Mr["[object Array]"]=Mr["[object ArrayBuffer]"]=Mr["[object Boolean]"]=Mr["[object DataView]"]=Mr["[object Date]"]=Mr["[object Error]"]=Mr["[object Function]"]=Mr["[object Map]"]=Mr["[object Number]"]=Mr["[object Object]"]=Mr["[object RegExp]"]=Mr["[object Set]"]=Mr["[object String]"]=Mr["[object WeakMap]"]=!1;var Di=function(a){return Fr(a)&&ha(a.length)&&!!Mr[Kr(a)]},Pa=function(a){return function(i){return a(i)}},fi=r(49),cu=fi.a&&fi.a.isTypedArray,Dl=cu?Pa(cu):Di,ka=Object.prototype.hasOwnProperty,uo=function(a,i){var l=to(a),u=!l&&Ga(a),p=!l&&!u&&Object(Ci.a)(a),f=!l&&!u&&!p&&Dl(a),y=l||u||p||f,b=y?Mc(a.length,String):[],x=b.length;for(var k in a)!i&&!ka.call(a,k)||y&&(k=="length"||p&&(k=="offset"||k=="parent")||f&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||Ki(k,x))||b.push(k);return b},Hu=Object.prototype,Va=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Hu)},va=function(a,i){return function(l){return a(i(l))}},kc=va(Object.keys,Object),Wd=Object.prototype.hasOwnProperty,Nc=function(a){if(!Va(a))return kc(a);var i=[];for(var l in Object(a))Wd.call(a,l)&&l!="constructor"&&i.push(l);return i},Vo=function(a){return a!=null&&ha(a.length)&&!Ua(a)},Il=function(a){return Vo(a)?uo(a):Nc(a)},Wa=function(a){return Gf(a,Il,Ti)},Yo=Object.prototype.hasOwnProperty,Rc=function(a,i,l,u,p,f){var y=1&l,b=Wa(a),x=b.length;if(x!=Wa(i).length&&!y)return!1;for(var k=x;k--;){var I=b[k];if(!(y?I in i:Yo.call(i,I)))return!1}var X=f.get(a),J=f.get(i);if(X&&J)return X==i&&J==a;var ve=!0;f.set(a,i),f.set(i,a);for(var Ae=y;++k<x;){var Re=a[I=b[k]],Ze=i[I];if(u)var Je=y?u(Ze,Re,I,i,a,f):u(Re,Ze,I,a,i,f);if(!(Je===void 0?Re===Ze||p(Re,Ze,l,u,f):Je)){ve=!1;break}Ae||(Ae=I=="constructor")}if(ve&&!Ae){var ht=a.constructor,$t=i.constructor;ht==$t||!("constructor"in a)||!("constructor"in i)||typeof ht=="function"&&ht instanceof ht&&typeof $t=="function"&&$t instanceof $t||(ve=!1)}return f.delete(a),f.delete(i),ve},ra=Ta(kn.a,"DataView"),ya=Ta(kn.a,"Promise"),Ms=Ta(kn.a,"Set"),Ii=Ta(kn.a,"WeakMap"),Zi="[object Map]",ii="[object Promise]",oa="[object Set]",Mi="[object WeakMap]",at="[object DataView]",Ct=fa(ra),Ft=fa(da),fn=fa(ya),ur=fa(Ms),Pr=fa(Ii),so=Kr;(ra&&so(new ra(new ArrayBuffer(1)))!=at||da&&so(new da)!=Zi||ya&&so(ya.resolve())!=ii||Ms&&so(new Ms)!=oa||Ii&&so(new Ii)!=Mi)&&(so=function(a){var i=Kr(a),l=i=="[object Object]"?a.constructor:void 0,u=l?fa(l):"";if(u)switch(u){case Ct:return at;case Ft:return Zi;case fn:return ii;case ur:return oa;case Pr:return Mi}return i});var T=so,M="[object Arguments]",$="[object Array]",ne="[object Object]",ge=Object.prototype.hasOwnProperty,Ge=function(a,i,l,u,p,f){var y=to(a),b=to(i),x=y?$:T(a),k=b?$:T(i),I=(x=x==M?ne:x)==ne,X=(k=k==M?ne:k)==ne,J=x==k;if(J&&Object(Ci.a)(a)){if(!Object(Ci.a)(i))return!1;y=!0,I=!1}if(J&&!I)return f||(f=new pa),y||Dl(a)?uu(a,i,l,u,p,f):ri(a,i,x,l,u,p,f);if(!(1&l)){var ve=I&&ge.call(a,"__wrapped__"),Ae=X&&ge.call(i,"__wrapped__");if(ve||Ae){var Re=ve?a.value():a,Ze=Ae?i.value():i;return f||(f=new pa),p(Re,Ze,l,u,f)}}return!!J&&(f||(f=new pa),Rc(a,i,l,u,p,f))},pt=function a(i,l,u,p,f){return i===l||(i==null||l==null||!Fr(i)&&!Fr(l)?i!=i&&l!=l:Ge(i,l,u,p,a,f))},Ht=function(a,i,l,u){var p=l.length,f=p,y=!u;if(a==null)return!f;for(a=Object(a);p--;){var b=l[p];if(y&&b[2]?b[1]!==a[b[0]]:!(b[0]in a))return!1}for(;++p<f;){var x=(b=l[p])[0],k=a[x],I=b[1];if(y&&b[2]){if(k===void 0&&!(x in a))return!1}else{var X=new pa;if(u)var J=u(k,I,x,a,i,X);if(!(J===void 0?pt(I,k,3,u,X):J))return!1}}return!0},bn=function(a){return a==a&&!Rr(a)},yr=function(a){for(var i=Il(a),l=i.length;l--;){var u=i[l],p=a[u];i[l]=[u,p,bn(p)]}return i},ln=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Wr=function(a){var i=yr(a);return i.length==1&&i[0][2]?ln(i[0][0],i[0][1]):function(l){return l===a||Ht(l,a,i)}},pr=function(a){return typeof a=="symbol"||Fr(a)&&Kr(a)=="[object Symbol]"},Dr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ia=/^\w*$/,_o=function(a,i){if(to(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!pr(a))||ia.test(a)||!Dr.test(a)||i!=null&&a in Object(i)};function Ji(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,p=i?i.apply(this,u):u[0],f=l.cache;if(f.has(p))return f.get(p);var y=a.apply(this,u);return l.cache=f.set(p,y)||f,y};return l.cache=new(Ji.Cache||Vr),l}Ji.Cache=Vr;var pl=Ji,hl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ll=/\\(\\)?/g,fu=function(a){var i=pl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(hl,function(l,u,p,f){i.push(p?f.replace(Ll,"$1"):u||l)}),i}),za=wr?wr.prototype:void 0,du=za?za.toString:void 0,qo=function a(i){if(typeof i=="string")return i;if(to(i))return mn(i,a)+"";if(pr(i))return du?du.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},Fl=function(a){return a==null?"":qo(a)},vl=function(a,i){return to(a)?a:_o(a,i)?[a]:fu(Fl(a))},Ha=function(a){if(typeof a=="string"||pr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},Xa=function(a,i){for(var l=0,u=(i=vl(i,a)).length;a!=null&&l<u;)a=a[Ha(i[l++])];return l&&l==u?a:void 0},Xu=function(a,i,l){var u=a==null?void 0:Xa(a,i);return u===void 0?l:u},nh=function(a,i){return a!=null&&i in Object(a)},rh=function(a,i,l){for(var u=-1,p=(i=vl(i,a)).length,f=!1;++u<p;){var y=Ha(i[u]);if(!(f=a!=null&&l(a,y)))break;a=a[y]}return f||++u!=p?f:!!(p=a==null?0:a.length)&&ha(p)&&Ki(y,p)&&(to(a)||Ga(a))},zd=function(a,i){return a!=null&&rh(a,i,nh)},jc=function(a,i){return _o(a)&&bn(i)?ln(Ha(a),i):function(l){var u=Xu(l,a);return u===void 0&&u===i?zd(l,a):pt(i,u,3)}},Yu=function(a){return a},zf=function(a){return function(i){return i==null?void 0:i[a]}},oh=function(a){return function(i){return Xa(i,a)}},qu=function(a){return _o(a)?zf(Ha(a)):oh(a)},Cc=function(a){return typeof a=="function"?a:a==null?Yu:typeof a=="object"?to(a)?jc(a[0],a[1]):Wr(a):qu(a)},Hf=function(a){return function(i,l,u){for(var p=-1,f=Object(i),y=u(i),b=y.length;b--;){var x=y[a?b:++p];if(l(f[x],x,f)===!1)break}return i}}(),Co=function(a,i){return function(l,u){if(l==null)return l;if(!Vo(l))return a(l,u);for(var p=l.length,f=i?p:-1,y=Object(l);(i?f--:++f<p)&&u(y[f],f,y)!==!1;);return l}}(function(a,i){return a&&Hf(a,i,Il)}),Li=function(a,i){var l=-1,u=Vo(a)?Array(a.length):[];return Co(a,function(p,f,y){u[++l]=i(p,f,y)}),u},Xf=function(a,i){return(to(a)?mn:Li)(a,Cc(i))};Object(c.n)({isolateGlobalState:!0});var Yf=function(){try{var a=Ta(Object,"defineProperty");return a({},"",{}),a}catch{}}(),Ps=function(a,i,l){i=="__proto__"&&Yf?Yf(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Vv=Object.prototype.hasOwnProperty,ks=function(a,i,l){var u=a[i];Vv.call(a,i)&&oe(u,l)&&(l!==void 0||i in a)||Ps(a,i,l)},yl=function(a,i,l,u){var p=!l;l||(l={});for(var f=-1,y=i.length;++f<y;){var b=i[f],x=u?u(l[b],a[b],b,l,a):void 0;x===void 0&&(x=a[b]),p?Ps(l,b,x):ks(l,b,x)}return l},Dc=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},Ku=Math.max,pu=function(a,i,l){return i=Ku(i===void 0?a.length-1:i,0),function(){for(var u=arguments,p=-1,f=Ku(u.length-i,0),y=Array(f);++p<f;)y[p]=u[i+p];p=-1;for(var b=Array(i+1);++p<i;)b[p]=u[p];return b[i]=l(y),Dc(a,this,b)}},Ns=function(a){return function(){return a}},Ic=Yf?function(a,i){return Yf(a,"toString",{configurable:!0,enumerable:!1,value:Ns(i),writable:!0})}:Yu,hu=Date.now,Wv=function(a){var i=0,l=0;return function(){var u=hu(),p=16-(u-l);if(l=u,p>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},Lc=Wv(Ic),zv=function(a,i){return Lc(pu(a,i,Yu),a+"")},Hv=function(a,i,l){if(!Rr(l))return!1;var u=typeof i;return!!(u=="number"?Vo(l)&&Ki(i,l.length):u=="string"&&i in l)&&oe(l[i],a)},ih=function(a){return zv(function(i,l){var u=-1,p=l.length,f=p>1?l[p-1]:void 0,y=p>2?l[2]:void 0;for(f=a.length>3&&typeof f=="function"?(p--,f):void 0,y&&Hv(l[0],l[1],y)&&(f=p<3?void 0:f,p=1),i=Object(i);++u<p;){var b=l[u];b&&a(i,b,u,f)}return i})},qf=Object.prototype.hasOwnProperty,Pi=ih(function(a,i){if(Va(i)||Vo(i))yl(i,Il(i),a);else for(var l in i)qf.call(i,l)&&ks(a,l,i[l])}),ah=function(a,i,l,u){if(!Rr(a))return a;for(var p=-1,f=(i=vl(i,a)).length,y=f-1,b=a;b!=null&&++p<f;){var x=Ha(i[p]),k=l;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(p!=y){var I=b[x];(k=u?u(I,x,b):void 0)===void 0&&(k=Rr(I)?I:Ki(i[p+1])?[]:{})}ks(b,x,k),b=b[x]}return a},ie=function(a,i,l){for(var u=-1,p=i.length,f={};++u<p;){var y=i[u],b=Xa(a,y);l(b,y)&&ah(f,vl(y,a),b)}return f},Zu=function(a,i){return ie(a,i,function(l,u){return zd(a,u)})},$l=wr?wr.isConcatSpreadable:void 0,Na=function(a){return to(a)||Ga(a)||!!($l&&a&&a[$l])},kr=function a(i,l,u,p,f){var y=-1,b=i.length;for(u||(u=Na),f||(f=[]);++y<b;){var x=i[y];l>0&&u(x)?l>1?a(x,l-1,u,p,f):na(f,x):p||(f[f.length]=x)}return f},gi=function(a){return a!=null&&a.length?kr(a,1):[]},$r,Ya,Bl,ma,Kf,Zf,Hd,lh,Ul,Do,Rs,Xd,Gl,qa,Fc,vu,ga,Yd,qd,Ka=function(a){return Lc(pu(a,void 0,gi),a+"")}(function(a,i){return a==null?{}:Zu(a,i)});function yo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Kd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Io(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Hr,Ko,Or,io,Nn,ao,$c={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},ml=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Jf=(Ya=Io(($r=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),yo(this,"isSilentMode",Ya,this),yo(this,"stopZoomGraph",Bl,this),yo(this,"stopScrollGraph",ma,this),yo(this,"stopMoveGraph",Kf,this),yo(this,"adjustEdge",Zf,this),yo(this,"adjustEdgeMiddle",Hd,this),yo(this,"adjustEdgeStartAndEnd",lh,this),yo(this,"adjustNodePosition",Ul,this),yo(this,"hideAnchors",Do,this),yo(this,"allowRotation",Rs,this),yo(this,"hoverOutline",Xd,this),yo(this,"nodeSelectedOutline",Gl,this),yo(this,"edgeSelectedOutline",qa,this),yo(this,"nodeTextEdit",Fc,this),yo(this,"edgeTextEdit",vu,this),yo(this,"nodeTextDraggable",ga,this),yo(this,"edgeTextDraggable",Yd,this),yo(this,"autoExpand",qd,this),Kd(this,"multipleSelectKey",""),Kd(this,"defaultConfig",{}),Pi(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var p=this.getConfigDetail(u);Pi(this,p)}},{key:"getConfigDetail",value:function(u){var p=u.isSilentMode,f=u.textEdit,y={};if(p===!1&&Pi(y,this.defaultConfig),p===!0&&p!==this.isSilentMode){var b=Ka($c,ml);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Pi(y,b)}f===!1&&Pi(y,{nodeTextEdit:!1,edgeTextEdit:!1});var x=Ka(u,ml);return Pi(y,x)}},{key:"getConfig",value:function(){return Ka(this,ml)}}])&&uh(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bl=Io($r.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ma=Io($r.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=Io($r.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=Io($r.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hd=Io($r.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lh=Io($r.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ul=Io($r.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Do=Io($r.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rs=Io($r.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xd=Io($r.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gl=Io($r.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qa=Io($r.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fc=Io($r.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vu=Io($r.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ga=Io($r.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yd=Io($r.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qd=Io($r.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Io($r.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor($r.prototype,"updateEditConfig"),$r.prototype),$r);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Hr||(Hr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(Ko||(Ko={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(Or||(Or={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(io||(io={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(Nn||(Nn={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(ao||(ao={}));var bo,xo,Zd,Jd,Bc,Fi,Qf,js,Ra;function yu(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Vl(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Vl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ja(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function gl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _a(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(bo||(bo={}));var Qd={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},ep=(xo=function(){function a(u,p){(function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")})(this,a),gl(this,"MINI_SCALE_SIZE",.2),gl(this,"MAX_SCALE_SIZE",16),ja(this,"SCALE_X",Zd,this),ja(this,"SKEW_Y",Jd,this),ja(this,"SKEW_X",Bc,this),ja(this,"SCALE_Y",Fi,this),ja(this,"TRANSLATE_X",Qf,this),ja(this,"TRANSLATE_Y",js,this),ja(this,"ZOOM_SIZE",Ra,this),gl(this,"eventCenter",void 0),gl(this,"translateLimitMinX",void 0),gl(this,"translateLimitMinY",void 0),gl(this,"translateLimitMaxX",void 0),gl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=p.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var p=yu(u,2),f=p[0],y=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var p=yu(u,2),f=p[0],y=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,p,f){var y=yu(u,2),b=y[0],x=y[1];return[b+p/this.SCALE_X,x+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,p){return[u/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,y=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Nn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,p){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,p,f,y){var b=yu(this.CanvasPointToHtmlPoint([u,p]),2),x=f/2-b[0],k=y/2-b[1];this.TRANSLATE_X+=x,this.TRANSLATE_Y+=k,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var p=yu(Array.isArray(u)&&u.length===4?u:Qd[u.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],l&&sh(i.prototype,l),a}(),Zd=_a(xo.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Jd=_a(xo.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bc=_a(xo.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fi=_a(xo.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Qf=_a(xo.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),js=_a(xo.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ra=_a(xo.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),_a(xo.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"zoom"),xo.prototype),_a(xo.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"resetZoom"),xo.prototype),_a(xo.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"translate"),xo.prototype),_a(xo.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(xo.prototype,"focusOn"),xo.prototype),xo),ed=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},ch=function(a,i){return a&&yl(i,Il(i),a)},fh=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},dh=Object.prototype.hasOwnProperty,tp=function(a){if(!Rr(a))return fh(a);var i=Va(a),l=[];for(var u in a)(u!="constructor"||!i&&dh.call(a,u))&&l.push(u);return l},Cs=function(a){return Vo(a)?uo(a,!0):tp(a)},np=function(a,i){return a&&yl(i,Cs(i),a)},Uc=r(107),xr=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},Xv=function(a,i){return yl(a,Ti(a),i)},rp=va(Object.getPrototypeOf,Object),mu=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)na(i,Ti(a)),a=rp(a);return i}:Tc,Gc=function(a,i){return yl(a,mu(a),i)},Yv=function(a){return Gf(a,Cs,mu)},qv=Object.prototype.hasOwnProperty,Ca=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&qv.call(a,"index")&&(l.index=a.index,l.input=a.input),l},op=function(a){var i=new a.constructor(a.byteLength);return new mi(i).set(new mi(a)),i},td=function(a,i){var l=i?op(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.byteLength)},nd=/\w*$/,ph=function(a){var i=new a.constructor(a.source,nd.exec(a));return i.lastIndex=a.lastIndex,i},ip=wr?wr.prototype:void 0,aa=ip?ip.valueOf:void 0,gu=function(a){return aa?Object(aa.call(a)):{}},rd=function(a,i){var l=i?op(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},Ju=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return op(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return td(a,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rd(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return ph(a);case"[object Symbol]":return gu(a)}},Vc=Object.create,hh=function(){function a(){}return function(i){if(!Rr(i))return{};if(Vc)return Vc(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),Wc=function(a){return typeof a.constructor!="function"||Va(a)?{}:hh(rp(a))},od=function(a){return Fr(a)&&T(a)=="[object Map]"},id=fi.a&&fi.a.isMap,ad=id?Pa(id):od,_u=function(a){return Fr(a)&&T(a)=="[object Set]"},vh=fi.a&&fi.a.isSet,bu=vh?Pa(vh):_u,ap="[object Arguments]",lp="[object Function]",Qu="[object Object]",co={};co[ap]=co["[object Array]"]=co["[object ArrayBuffer]"]=co["[object DataView]"]=co["[object Boolean]"]=co["[object Date]"]=co["[object Float32Array]"]=co["[object Float64Array]"]=co["[object Int8Array]"]=co["[object Int16Array]"]=co["[object Int32Array]"]=co["[object Map]"]=co["[object Number]"]=co["[object Object]"]=co["[object RegExp]"]=co["[object Set]"]=co["[object String]"]=co["[object Symbol]"]=co["[object Uint8Array]"]=co["[object Uint8ClampedArray]"]=co["[object Uint16Array]"]=co["[object Uint32Array]"]=!0,co["[object Error]"]=co[lp]=co["[object WeakMap]"]=!1;var zc=function a(i,l,u,p,f,y){var b,x=1&l,k=2&l,I=4&l;if(u&&(b=f?u(i,p,f,y):u(i)),b!==void 0)return b;if(!Rr(i))return i;var X=to(i);if(X){if(b=Ca(i),!x)return xr(i,b)}else{var J=T(i),ve=J==lp||J=="[object GeneratorFunction]";if(Object(Ci.a)(i))return Object(Uc.a)(i,x);if(J==Qu||J==ap||ve&&!f){if(b=k||ve?{}:Wc(i),!x)return k?Gc(i,np(b,i)):Xv(i,ch(b,i))}else{if(!co[J])return f?i:{};b=Ju(i,J,x)}}y||(y=new pa);var Ae=y.get(i);if(Ae)return Ae;y.set(i,b),bu(i)?i.forEach(function(Ze){b.add(a(Ze,l,u,Ze,i,y))}):ad(i)&&i.forEach(function(Ze,Je){b.set(Je,a(Ze,l,u,Je,i,y))});var Re=X?void 0:(I?k?Yv:Wa:k?Cs:Il)(i);return ed(Re||i,function(Ze,Je){Re&&(Ze=i[Je=Ze]),ks(b,Je,a(Ze,l,u,Je,i,y))}),b},wo=function(a){return zc(a,5)},Wl=function(a,i,l){(l!==void 0&&!oe(a[i],l)||l===void 0&&!(i in a))&&Ps(a,i,l)},di=function(a){return Fr(a)&&Vo(a)},_l=Function.prototype,zl=Object.prototype,wu=_l.toString,es=zl.hasOwnProperty,ld=wu.call(Object),ud=function(a){if(!Fr(a)||Kr(a)!="[object Object]")return!1;var i=rp(a);if(i===null)return!0;var l=es.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&wu.call(l)==ld},bl=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ts=function(a){return yl(a,Cs(a))},sd=function(a,i,l,u,p,f,y){var b=bl(a,l),x=bl(i,l),k=y.get(x);if(k)Wl(a,l,k);else{var I=f?f(b,x,l+"",a,i,y):void 0,X=I===void 0;if(X){var J=to(x),ve=!J&&Object(Ci.a)(x),Ae=!J&&!ve&&Dl(x);I=x,J||ve||Ae?to(b)?I=b:di(b)?I=xr(b):ve?(X=!1,I=Object(Uc.a)(x,!0)):Ae?(X=!1,I=rd(x,!0)):I=[]:ud(x)||Ga(x)?(I=b,Ga(b)?I=ts(b):Rr(b)&&!Ua(b)||(I=Wc(x))):X=!1}X&&(y.set(x,I),p(I,x,u,f,y),y.delete(x)),Wl(a,l,I)}},Hc=function a(i,l,u,p,f){i!==l&&Hf(l,function(y,b){if(f||(f=new pa),Rr(y))sd(i,l,b,u,a,p,f);else{var x=p?p(bl(i,b),y,b+"",i,l,f):void 0;x===void 0&&(x=y),Wl(i,b,x)}},Cs)},Eu=ih(function(a,i,l){Hc(a,i,l)}),up={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Ds=function(a){var i=wo(up);return a&&(i=Eu(i,a)),i};r(82),r(166);function cd(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var Xc=function(){function a(){var u,p,f;(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),f={},(p="_events")in(u=this)?Object.defineProperty(u,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[p]=f}var i,l;return i=a,(l=[{key:"on",value:function(u,p,f){var y=this;return u==null||u.split(",").forEach(function(b){b=b.trim(),y._events[b]||(y._events[b]=[]),y._events[b].push({callback:p,once:!!f})}),this}},{key:"once",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){return y=y.trim(),f.on(y,p,!0)})}},{key:"emit",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){var b=f._events[y]||[],x=f._events["*"]||[],k=function(I){for(var X=I.length,J=0;J<X;J++)if(I[J]){var ve=I[J],Ae=ve.callback;ve.once&&(I.splice(J,1),I.length===0&&delete f._events[y],X--,J--),Ae.apply(f,[p])}};k(b),k(x)})}},{key:"off",value:function(u,p){var f=this;return u||(this._events={}),u.split(",").forEach(function(y){if(p){for(var b=f._events[y]||[],x=b.length,k=0;k<x;k++)b[k].callback===p&&(b.splice(k,1),x--,k--);b.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&cd(i.prototype,l),a}();function wl(a,i){return i*Math.round(a/i)||a}function Is(a,i){return a%i}function Yc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qc(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qc(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qc(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var fd=function(a,i,l){var u=Yc(a,2),p=u[0],f=u[1],y=Yc(i,2),b=y[0],x=y[1],k=Yc(l,2),I=k[0],X=k[1];return p>b&&p<I&&f>x&&f<X},dd=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Za=function(a){return function(i,l,u){var p=Object(i);if(!Vo(i)){var f=Cc(l);i=Il(i),l=function(b){return f(p[b],b,p)}}var y=a(i,l,u);return y>-1?p[f?i[y]:y]:void 0}},sp=function(a,i,l,u){for(var p=a.length,f=l+(u?1:-1);u?f--:++f<p;)if(i(a[f],f,a))return f;return-1},cp=/\s/,fp=function(a){for(var i=a.length;i--&&cp.test(a.charAt(i)););return i},pd=/^\s+/,El=function(a){return a&&a.slice(0,fp(a)+1).replace(pd,"")},Kc=/^[-+]0x[0-9a-f]+$/i,hd=/^0b[01]+$/i,vd=/^0o[0-7]+$/i,Ls=parseInt,Hl=function(a){if(typeof a=="number")return a;if(pr(a))return NaN;if(Rr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Rr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=El(a);var l=hd.test(a);return l||vd.test(a)?Ls(a.slice(2),l?2:8):Kc.test(a)?NaN:+a},Jn=1/0,Fs=function(a){return a?(a=Hl(a))===Jn||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},Zc=function(a){var i=Fs(a),l=i%1;return i==i?l?i-l:i:0},Ja=Math.max,$s,Bs=Za(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var p=l==null?0:Zc(l);return p<0&&(p=Ja(u+p,0)),sp(a,Cc(i),p)}),So=new Uint8Array(16);function Us(){if(!$s&&!($s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(So)}for(var Ou=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Jc=function(a){return typeof a=="string"&&Ou.test(a)},no=[],Lo=0;Lo<256;++Lo)no.push((Lo+256).toString(16).substr(1));var Xl=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(no[a[i+0]]+no[a[i+1]]+no[a[i+2]]+no[a[i+3]]+"-"+no[a[i+4]]+no[a[i+5]]+"-"+no[a[i+6]]+no[a[i+7]]+"-"+no[a[i+8]]+no[a[i+9]]+"-"+no[a[i+10]]+no[a[i+11]]+no[a[i+12]]+no[a[i+13]]+no[a[i+14]]+no[a[i+15]]).toLowerCase();if(!Jc(l))throw TypeError("Stringified UUID is invalid");return l},Qa=function(a,i,l){var u=(a=a||{}).random||(a.rng||Us)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){l=l||0;for(var p=0;p<16;++p)i[l+p]=u[p];return i}return Xl(u)},el=function(){return Qa()},xu=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,p){return u[p.id]=i+Qa(),p.id=u[p.id],u},{});return a.edges.forEach(function(u){u.id=i+Qa(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},Ol=(r(105),r(127),r(207),function(a,i,l){var u=a.x,p=a.y,f=i.x,y=i.y,b=l.x,x=l.y,k=(x-y)/(b-f),I=y-k*f;return u>=f&&u<=b&&p>=y&&p<=x&&Math.abs(p-k*u+I)<Number.EPSILON});function Gs(a){return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gs(a)}function Qc(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Su(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Qc(Object(l),!0).forEach(function(u){Vs(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Qc(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Vs(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Rt,dp,ns,ef,yd,pp,xl,hp,tl,Au,md,yh,mh,gh,vp,yp,mp,gp,_h,bh,wh,$i=function(a){return a.anchors},rs=function(a,i){for(var l,u=i.nodes,p=u.length-1;p>=0;p--){var f=u[p];if(gd(a,f)){var y=f.getTargetAnchor(a);if(y){var b={node:f,anchorIndex:y.index,anchor:y.anchor};l&&!tf(f,l.node,i)||(l=b)}}}return l},tf=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},la=function(a,i,l,u){return Math.hypot(a-l,i-u)},Da=function(a,i){var l=!1,u=Bi(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},gd=function(a,i){var l=!1,u=Bi(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Bi=function(a){var i=a.x,l=a.y,u=a.width,p=a.height;return{minX:i-u/2,minY:l-p/2,maxX:i+u/2,maxY:l+p/2,x:i,y:l,width:u,height:p,centerX:i,centerY:l}},nf=function(a,i,l){var u,p=function(y){var b=y,x=b.x,k=b.y,I=b.width,X=b.height,J=b.radius;return[{x:x-I/2+J,y:k-X/2+J,r:J},{x:x+I/2-J,y:k-X/2+J,r:J},{x:x-I/2+J,y:k+X/2-J,r:J},{x:x+I/2-J,y:k+X/2-J,r:J}]}(l),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(y){var b=la(a.x,a.y,y.x,y.y);b<f&&(f=b,u=y)}),os(a,i,u)},os=function(a,i,l){var u,p=l,f=p.x,y=p.y,b=p.r;if(i===ao.HORIZONTAL){var x=f-Math.sqrt(b*b-(a.y-y)*(a.y-y)),k=f+Math.sqrt(b*b-(a.y-y)*(a.y-y));u={x:Math.abs(x-a.x)<Math.abs(k-a.x)?x:k,y:a.y}}else if(i===ao.VERTICAL){var I=y-Math.sqrt(b*b-(a.x-f)*(a.x-f)),X=y+Math.sqrt(b*b-(a.x-f)*(a.x-f)),J=Math.abs(I-a.y)<Math.abs(X-a.y)?I:X;u={x:a.x,y:J}}return u},Ws=function(a,i){var l=i,u=!1,p=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,y=l.y-l.height/2+l.radius,b=l.y+l.height/2-l.radius,x=l.x,k=l.y,I=l.width,X=l.height;return a.y===k+X/2||a.y===k-X/2?u=a.x>p&&a.x<f:a.x!==x+I/2&&a.x!==x-I/2||(u=a.y>y&&a.y<b),u},rf=function(a,i,l){var u,p=l,f=p.x,y=p.y,b=p.rx,x=p.ry;if(i===ao.HORIZONTAL){var k=f-Math.sqrt(b*b-(a.y-y)*(a.y-y)*b*b/(x*x)),I=f+Math.sqrt(b*b-(a.y-y)*(a.y-y)*b*b/(x*x));u={x:Math.abs(k-a.x)<Math.abs(I-a.x)?k:I,y:a.y}}else if(i===ao.VERTICAL){var X=y-Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(b*b)),J=y+Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(b*b)),ve=Math.abs(X-a.y)<Math.abs(J-a.y)?X:J;u={x:a.x,y:ve}}return u},of=function(a,i,l){for(var u,p=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],b=0;b<p.length;b++)y.push({start:p[b],end:p[(b+1)%p.length]});return y.forEach(function(x){var k=x.start,I=x.end,X=k,J=I;k.x>I.x&&(X=I,J=k);var ve={x:a.x,y:a.y};if(X.x===J.x&&i===ao.HORIZONTAL&&(ve={x:X.x,y:a.y}),X.y===J.y&&i===ao.VERTICAL&&(ve={x:a.x,y:X.y}),X.x!==J.x&&X.y!==J.y){var Ae=(J.y-X.y)/(J.x-X.x),Re=(X.x*J.y-J.x*X.y)/(X.x-J.x);i===ao.HORIZONTAL?ve={x:(a.y-Re)/Ae,y:a.y}:i===ao.VERTICAL&&(ve={x:a.x,y:Ae*a.x+Re})}if(Ol(ve,k,I)){var Ze=la(ve.x,ve.y,a.x,a.y);Ze<f&&(f=Ze,u=ve)}}),u},zs=function(a,i,l,u){var p=a.x,f=a.y;return i.x>a.x?p=a.x+l/2:i.x<a.x&&(p=a.x-l/2),i.y>a.y?f=a.y+u/2:i.y<a.y&&(f=a.y-u/2),{x:p,y:f}},Hs=function(a){var i=a.rows,l=a.style,u=a.rowsLength,p=a.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=p,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?i.forEach(function(b){var x=document.createElement("div");x.textContent=b,f.appendChild(x)}):f.textContent=i,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},is=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,p=0;return i&&i.forEach(function(f){var y=Zn(f);p=y>p?y:p}),{width:Math.ceil(p/2)*u+u/4,height:l*(u+2)+u/4}},Yl=function(a){return Gs(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},Zo=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},af=1e3,lf=999,ql=function(){return++af};function _p(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Ui(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?_p(Object(l),!0).forEach(function(u){Ia(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):_p(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Jo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Eh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ia(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Fn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var _d=(Rt=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Ia(this,"id",""),Jo(this,"type",dp,this),Jo(this,"sourceNodeId",ns,this),Jo(this,"targetNodeId",ef,this),Jo(this,"startPoint",yd,this),Jo(this,"endPoint",pp,this),Jo(this,"text",xl,this),Jo(this,"properties",hp,this),Jo(this,"points",tl,this),Jo(this,"pointsList",Au,this),Jo(this,"isSelected",md,this),Jo(this,"isHovered",yh,this),Jo(this,"isHitable",mh,this),Jo(this,"draggable",gh,this),Jo(this,"visible",vp,this),Ia(this,"virtual",!1),Jo(this,"isAnimation",yp,this),Jo(this,"isShowAdjustPoint",mp,this),Ia(this,"graphModel",void 0),Jo(this,"zIndex",gp,this),Ia(this,"BaseType",io.EDGE),Ia(this,"modelType",Or.EDGE),Jo(this,"state",_h,this),Ia(this,"additionStateData",void 0),Ia(this,"sourceAnchorId",""),Ia(this,"targetAnchorId",""),Ia(this,"menu",void 0),Ia(this,"customTextPosition",!1),Jo(this,"style",bh,this),Jo(this,"arrowConfig",wh,this),this.graphModel=p,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||el()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var b=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=b,Pi(this,ye(u)),this.graphModel.overlapMode===bo.INCREASE&&(this.zIndex=u.zIndex||ql()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ui(Ui({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ui({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return wo(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return wo(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?p.stroke:u.stroke;return Ui(Ui({},u),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return wo(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,p,f){var y,b,x=$i(u);return f&&(y=Bs(x,function(k){return k.id===f}))||x.forEach(function(k){var I=tt(k,p);(b===void 0||I<b)&&(b=I,y=k)}),y}},{key:"getEndAnchor",value:function(u,p){var f,y,b=this,x=$i(u);return p&&(f=Bs(x,function(k){return k.id===p}))||x.forEach(function(k){var I=tt(k,b.startPoint);(y===void 0||I<y)&&(y=I,f=k)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,b={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(b.text={x:p,y:f,value:y}),this.graphModel.overlapMode===bo.INCREASE&&(b.zIndex=this.zIndex),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,p){this.properties[u]=Zo(p),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Ui(Ui({},Object(c.I)(this.properties)),Zo(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var p=this.arrowConfig,f=p.markerEnd,y=p.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,p){this.style=Ui(Ui({},this.style),{},Ia({},u,Zo(p)))}},{key:"setStyles",value:function(u){this.style=Ui(Ui({},this.style),Zo(u))}},{key:"updateStyles",value:function(u){this.style=Ui({},Zo(u))}},{key:"formatText",value:function(u){var p=this.textPosition,f=p.x,y=p.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||y,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,p=u.x,f=u.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(u,p){if(this.text){var f=this.text,y=f.x,b=f.y,x=f.value,k=f.draggable,I=f.editable;this.text={value:x,draggable:k,x:y+u,y:b+p,editable:I}}}},{key:"setText",value:function(u){u&&Pi(this.text,u)}},{key:"updateText",value:function(u){this.text=Ui(Ui({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,p){this.startPoint.x+=u,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,p){this.endPoint.x+=u,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Pi(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var p=u.startPoint,f=u.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&Eh(i.prototype,l),a}(),dp=Fn(Rt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ns=Fn(Rt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Fn(Rt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yd=Fn(Rt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pp=Fn(Rt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xl=Fn(Rt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),hp=Fn(Rt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tl=Fn(Rt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Au=Fn(Rt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),md=Fn(Rt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yh=Fn(Rt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mh=Fn(Rt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gh=Fn(Rt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vp=Fn(Rt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yp=Fn(Rt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mp=Fn(Rt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gp=Fn(Rt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_h=Fn(Rt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),bh=Fn(Rt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),wh=Fn(Rt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Fn(Rt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Rt.prototype,"sourceNode"),Rt.prototype),Fn(Rt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Rt.prototype,"targetNode"),Rt.prototype),Fn(Rt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Rt.prototype,"textPosition"),Rt.prototype),Fn(Rt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setProperty"),Rt.prototype),Fn(Rt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"deleteProperty"),Rt.prototype),Fn(Rt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setProperties"),Rt.prototype),Fn(Rt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"changeEdgeId"),Rt.prototype),Fn(Rt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setStyle"),Rt.prototype),Fn(Rt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setStyles"),Rt.prototype),Fn(Rt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"updateStyles"),Rt.prototype),Fn(Rt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"formatText"),Rt.prototype),Fn(Rt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"resetTextPosition"),Rt.prototype),Fn(Rt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"moveText"),Rt.prototype),Fn(Rt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setText"),Rt.prototype),Fn(Rt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"updateText"),Rt.prototype),Fn(Rt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setAnchors"),Rt.prototype),Fn(Rt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setSelected"),Rt.prototype),Fn(Rt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setHovered"),Rt.prototype),Fn(Rt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setHitable"),Rt.prototype),Fn(Rt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"openEdgeAnimation"),Rt.prototype),Fn(Rt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"closeEdgeAnimation"),Rt.prototype),Fn(Rt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setElementState"),Rt.prototype),Fn(Rt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"updateStartPoint"),Rt.prototype),Fn(Rt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"moveStartPoint"),Rt.prototype),Fn(Rt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"updateEndPoint"),Rt.prototype),Fn(Rt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"moveEndPoint"),Rt.prototype),Fn(Rt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"setZIndex"),Rt.prototype),Fn(Rt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"initPoints"),Rt.prototype),Fn(Rt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"updateAttributes"),Rt.prototype),Fn(Rt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"getAdjustStart"),Rt.prototype),Fn(Rt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"getAdjustEnd"),Rt.prototype),Fn(Rt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Rt.prototype,"updateAfterAdjustStartAndEnd"),Rt.prototype),Rt),as=_d;function bd(a){return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},bd(a)}function Oh(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xs(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Oh(Object(l),!0).forEach(function(u){Gi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Oh(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ys(){return Ys=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ls(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ys.apply(this,arguments)}function ls(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Sl(a))!==null;);return a}function rl(a,i){return rl=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},rl(a,i)}function Sh(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Sl(a);if(i){var p=Sl(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return bp(this,l)}}function bp(a,i){if(i&&(bd(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tu(a)}function Tu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Sl(a){return Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Sl(a)}function Gi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Gn,Ao,ki=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&rl(f,y)})(p,a);var i,l,u=Sh(p);function p(){var f;xh(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Gi(Tu(f=u.call.apply(u,[this].concat(b))),"modelType",Or.LINE_EDGE),f}return i=p,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Xs(Xs({},Ys(Sl(p.prototype),"getEdgeStyle",this).call(this)),wo(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&nl(i.prototype,l),p}(as);function ua(a){return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ua(a)}function Kv(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Ah(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Ah(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ah(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Mu(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mr(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Mu(Object(l),!0).forEach(function(u){To(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Mu(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Th(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sa(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Qo(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function La(){return La=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Zv(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},La.apply(this,arguments)}function Zv(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Jr(a))!==null;);return a}function uf(a,i){return uf=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},uf(a,i)}function Al(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jr(a);if(i){var p=Jr(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wp(this,l)}}function wp(a,i){if(i&&(ua(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kl(a)}function Kl(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jr(a){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jr(a)}function To(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _i(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var sf=(Gn=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&uf(f,y)})(p,a);var i,l,u=Al(p);function p(){var f;sa(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return To(Kl(f=u.call.apply(u,[this].concat(b))),"modelType",Or.POLYLINE_EDGE),To(Kl(f),"draggingPointList",void 0),Th(Kl(f),"dbClickPosition",Ao,Kl(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=30,La(Jr(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return mr(mr({},La(Jr(p.prototype),"getEdgeStyle",this).call(this)),wo(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var b=this.dbClickPosition;return{x:b.x,y:b.y}}var x=mo(this.points),k=Kv(Wo(x),2),I=k[0],X=k[1];return{x:(I.x+X.x)/2,y:(I.y+X.y)/2}}},{key:"getAfterAnchor",value:function(f,y,b){var x,k;return b.forEach(function(I){var X;f===ao.HORIZONTAL?X=Math.abs(y.y-I.y):f===ao.VERTICAL&&(X=Math.abs(y.x-I.x)),(!k||k>X)&&(k=X,x=I)}),x}},{key:"getCrossPoint",value:function(f,y,b){var x;return f===ao.HORIZONTAL?x={x:b.x,y:y.y}:f===ao.VERTICAL&&(x={x:y.x,y:b.y}),x}},{key:"removeCrossPoints",value:function(f,y,b){var x=b.map(function(Je){return Je});if(f===1){var k=x[f],I=x[y],X=x[f-1];if(Qr(X,k,this.sourceNode)){if(Po(k,I,this.sourceNode)){var J=$o(k,I,this.sourceNode);J&&(x[f]=J,x.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(Je){(Je.x===X.x&&Je.x===k.x||Je.y===X.y&&Je.y===k.y)&&la(Je.x,Je.y,k.x,k.y)<la(X.x,X.y,k.x,k.y)&&(x[f-1]=Je)})}if(y===b.length-2){var ve=x[f],Ae=x[y],Re=x[y+1];if(Qr(Ae,Re,this.targetNode)){if(Po(ve,Ae,this.targetNode)){var Ze=$o(ve,Ae,this.targetNode);Ze&&(x[y]=Ze,x.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(Je){(Je.x===Re.x&&Je.x===Ae.x||Je.y===Re.y&&Je.y===Ae.y)&&la(Je.x,Je.y,Ae.x,Ae.y)<la(Re.x,Re.y,Ae.x,Ae.y)&&(x[y+1]=Je)})}return x}},{key:"getDraggingPoints",value:function(f,y,b,x,k){var I=k.map(function(ve){return ve}),X=this.getAfterAnchor(f,b,x),J=this.getCrossPoint(f,b,X);return y==="start"?(I.unshift(J),I.unshift(X)):(I.push(J),I.push(X)),I}},{key:"updateCrossPoints",value:function(f){var y=f.map(function($t){return $t}),b=f[0],x=f[1],k=f[y.length-2],I=f[y.length-1],X=this.sourceNode,J=this.targetNode,ve=X.modelType,Ae=J.modelType,Re=Eo(b,x),Ze=y[0];switch(ve){case Or.RECT_NODE:X.radius!==0&&(Ws(b,X)||(Ze=nf(b,Re,X)));break;case Or.CIRCLE_NODE:Ze=os(b,Re,X);break;case Or.ELLIPSE_NODE:Ze=rf(b,Re,X);break;case Or.DIAMOND_NODE:case Or.POLYGON_NODE:Ze=of(b,Re,X)}Ze&&(y[0]=Ze);var Je=Eo(k,I),ht=y[y.length-1];switch(Ae){case Or.RECT_NODE:J.radius!==0&&(Ws(I,J)||(ht=nf(I,Je,J)));break;case Or.CIRCLE_NODE:ht=os(I,Je,J);break;case Or.ELLIPSE_NODE:ht=rf(I,Je,J);break;case Or.DIAMOND_NODE:case Or.POLYGON_NODE:ht=of(I,Je,J)}return ht&&(y[y.length-1]=ht),y}},{key:"getData",value:function(){var f=La(Jr(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(b){return{x:b.x,y:b.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(k){k.x+=f,k.y+=y});var b=this.pointsList[0];this.startPoint=Object.assign({},b);var x=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},x),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var b=f.start,x=f.end,k=f.startIndex,I=f.endIndex,X=f.direction,J=this.pointsList,ve=J;return X===ao.HORIZONTAL?(J[k]={x:b.x,y:b.y+y.y},J[I]={x:x.x,y:x.y+y.y},ve=this.pointsList.map(function(Ae){return Ae})):X===ao.VERTICAL&&(J[k]={x:b.x+y.x,y:b.y},J[I]={x:x.x+y.x,y:x.y},ve=this.pointsList.map(function(Ae){return Ae})),this.updatePointsAfterDrag(ve),this.draggingPointList=ve,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},J[k]),end:Object.assign({},J[I]),startIndex:k,endIndex:I,direction:X}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var b=f.start,x=f.end,k=f.startIndex,I=f.endIndex,X=f.direction,J=this.pointsList;if(X===ao.HORIZONTAL){J[k]={x:b.x,y:b.y+y.y},J[I]={x:x.x,y:x.y+y.y};var ve=this.pointsList.map(function(sn){return sn});if(k!==0&&I!==this.pointsList.length-1&&(ve=this.removeCrossPoints(k,I,ve)),k===0){var Ae={x:b.x,y:b.y+y.y};if(!Da(Ae,this.sourceNode)){var Re=this.sourceNode.anchors;ve=this.getDraggingPoints(X,"start",Ae,Re,ve)}}if(I===this.pointsList.length-1){var Ze={x:x.x,y:x.y+y.y};if(!Da(Ze,this.targetNode)){var Je=this.targetNode.anchors;ve=this.getDraggingPoints(X,"end",Ze,Je,ve)}}this.updatePointsAfterDrag(ve),this.draggingPointList=ve}else if(X===ao.VERTICAL){J[k]={x:b.x+y.x,y:b.y},J[I]={x:x.x+y.x,y:x.y};var ht=this.pointsList.map(function(sn){return sn});if(k!==0&&I!==this.pointsList.length-1&&(ht=this.removeCrossPoints(k,I,ht)),k===0){var $t={x:b.x+y.x,y:b.y};if(!Da($t,this.sourceNode)){var hn=this.sourceNode.anchors;ht=this.getDraggingPoints(X,"start",$t,hn,ht)}}if(I===this.pointsList.length-1){var dn={x:x.x+y.x,y:x.y};if(!Da(dn,this.targetNode)){var Hn=this.targetNode.anchors;ht=this.getDraggingPoints(X,"end",dn,Hn,ht)}}this.updatePointsAfterDrag(ht),this.draggingPointList=ht}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},J[k]),end:Object.assign({},J[I]),startIndex:k,endIndex:I,direction:X}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Fo(mo(this.points));this.pointsList=f.map(function(x){return x}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var b=f[f.length-1];this.endPoint=Object.assign({},b)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(b){return"".concat(b.x,",").concat(b.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,b=f.endPoint,x=f.sourceNode,k=f.targetNode,I=cr({x:y.x,y:y.y},{x:b.x,y:b.y},x,k,this.offset||0);this.pointsList=I,this.initPoints()}}])&&Qo(i.prototype,l),p}(as),Ao=_i(Gn.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i(Gn.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"initPoints"),Gn.prototype),_i(Gn.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePoints"),Gn.prototype),_i(Gn.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateStartPoint"),Gn.prototype),_i(Gn.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveStartPoint"),Gn.prototype),_i(Gn.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateEndPoint"),Gn.prototype),_i(Gn.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"moveEndPoint"),Gn.prototype),_i(Gn.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsList"),Gn.prototype),_i(Gn.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendStart"),Gn.prototype),_i(Gn.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendSimple"),Gn.prototype),_i(Gn.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppend"),Gn.prototype),_i(Gn.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"dragAppendEnd"),Gn.prototype),_i(Gn.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updatePointsAfterDrag"),Gn.prototype),_i(Gn.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustStart"),Gn.prototype),_i(Gn.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"getAdjustEnd"),Gn.prototype),_i(Gn.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"updateAfterAdjustStartAndEnd"),Gn.prototype),Gn),F=function(a){var i=a.start,l=a.end,u=a.offset,p=a.verticalLength,f=a.type,y={leftX:0,leftY:0,rightX:0,rightY:0},b=Math.atan((l.y-i.y)/(l.x-i.x)),x=Math.atan(u/p),k=Math.sqrt(p*p+u*u);return f==="start"?l.x>=i.x?(y.leftX=i.x+k*Math.sin(b+x),y.leftY=i.y-k*Math.cos(b+x),y.rightX=i.x-k*Math.sin(b-x),y.rightY=i.y+k*Math.cos(b-x)):(y.leftX=i.x-k*Math.sin(b+x),y.leftY=i.y+k*Math.cos(b+x),y.rightX=i.x+k*Math.sin(b-x),y.rightY=i.y-k*Math.cos(b-x)):f==="end"&&(l.x>=i.x?(y.leftX=l.x+k*Math.sin(b-x),y.leftY=l.y-k*Math.cos(b-x),y.rightX=l.x-k*Math.sin(b+x),y.rightY=l.y+k*Math.cos(b+x)):(y.leftX=l.x-k*Math.sin(b-x),y.leftY=l.y+k*Math.cos(b-x),y.rightX=l.x+k*Math.sin(b+x),y.rightY=l.y-k*Math.cos(b+x))),y},ae={x:1,y:0,z:0};function be(a,i,l,u,p){for(var f=function(Ae){if(Ae<0||Ae>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-Ae,3)+3*i.x*Ae*Math.pow(1-Ae,2)+3*l.x*Math.pow(Ae,2)*(1-Ae)+u.x*Math.pow(Ae,3),y:a.y*Math.pow(1-Ae,3)+3*i.y*Ae*Math.pow(1-Ae,2)+3*l.y*Math.pow(Ae,2)*(1-Ae)+u.y*Math.pow(Ae,3)}},y=0,b=2,x=u.x,k=u.y,I=u;y<p&&b<50;){var X=I=f(1-b/100),J=X.x,ve=X.y;y=la(x,k,J,ve),b++}return I}function Qe(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function ct(a){return u=function(f,y){return f.x*y.y-f.y*y.x}(i=ae,l=a),p=Math.acos(function(f,y){var b=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(x,k,I){return x+k*b[I]})}(Qe(i),Qe(l))),u>=0?p:-p;var i,l,u,p}function Ke(a){return a*(180/Math.PI)}function lt(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Pt(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?lt(Object(l),!0).forEach(function(u){Dt(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):lt(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Dt(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function jt(a){return function(i){if(Array.isArray(i))return kt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Ut(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ut(a){return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ut(a)}function Vt(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||Ut(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ut(a,i){if(a){if(typeof a=="string")return kt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?kt(a,i):void 0}}function kt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var _t=function(a,i){var l;switch(a.type){case"line":default:l=new ki(a,i);break;case"polyline":l=new sf(a,i)}return l},We=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},it=function(a){var i=[],l={};return a.forEach(function(u){var p="".concat(u.x,"-").concat(u.y);u.id=p,l[p]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Lt=function(a,i){var l=[a,{x:a.x,y:i.y},i];return it(l)},Kt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},xt=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?ao.HORIZONTAL:ao.VERTICAL},Zt=function(a,i,l){return xt(l,i)===ao.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},St=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),p=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return{centerX:(l+p)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:p,maxY:f,height:f-u,width:p-l}},Wt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(I){l.push(I.x),u.push(I.y)});var p=Math.min.apply(Math,l),f=Math.max.apply(Math,l),y=Math.min.apply(Math,u),b=Math.max.apply(Math,u),x=f-p,k=b-y;return i&&(x+=i,k+=i),{centerX:(p+f)/2,centerY:(y+b)/2,maxX:f,maxY:b,minX:p,minY:y,x:(p+f)/2,y:(y+b)/2,height:k,width:x}},bt=function(a){var i=a.minX,l=a.minY,u=a.maxX,p=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:p},{x:i,y:p}]},Xt=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},Mn=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},Wn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},It=function(a,i){return Mn(a,i.x).concat(Wn(a,i.y))},At=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},Et=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Cn=function(a,i,l,u,p){return At(a,i)+At(a,l)+Et(a,[i,l,u,p])},tr=function a(i,l,u,p,f){f||(f=0),i.unshift(l[p]),u[p]&&u[p]!==p&&f<=100&&a(i,l,u,u[p],f+1)},un=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},Qn=function(a,i,l,u){var p=i.x-a.x,f=i.y-a.y,y=u.x-l.x,b=u.y-l.y,x=(-f*(a.x-l.x)+p*(a.y-l.y))/(-y*f+p*b),k=(y*(a.y-l.y)-b*(a.x-l.x))/(-y*f+p*b);return x>=0&&x<=1&&k>=0&&k<=1},Vn=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=Vt(bt(l),4),p=u[0],f=u[1],y=u[2],b=u[3];return Qn(a,i,p,f)||Qn(a,i,p,b)||Qn(a,i,f,y)||Qn(a,i,y,b)},rr=function(a,i,l,u){var p=[];return a.forEach(function(f){f!==i&&(f.x!==i.x&&f.y!==i.y||Vn(f,i,l)||Vn(f,i,u)||p.push(f))}),it(p)},gr=function(a,i,l,u,p,f,y){var b=[],x=[i],k={},I={},X={};I[i.id]=0,X[i.id]=Cn(i,l,i);var J={};a.forEach(function(Re){J[Re.id]=Re});for(var ve=function(){var Re=void 0,Ze=1/0;if(x.forEach(function(ht){X[ht.id]<Ze&&(Ze=X[ht.id],Re=ht)}),Re===l){var Je=[];return tr(Je,J,k,l.id),{v:Je}}un(x,Re),b.push(Re),rr(a,Re,u,p).forEach(function(ht){if(b.indexOf(ht)===-1){x.indexOf(ht)===-1&&x.push(ht);var $t=X[Re.id]+At(Re,ht);I[ht.id]&&$t>=I[ht.id]||(k[ht.id]=Re.id,I[ht.id]=$t,X[ht.id]=I[ht.id]+Cn(ht,l,i,f,y))}})};x.length;){var Ae=ve();if(ut(Ae)==="object")return Ae.v}return[i,l]},Mo=function(a){return Bi(a)},Fo=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],p=a[i+1];l.x===u.x&&u.x===p.x||l.y===u.y&&u.y===p.y?a.splice(i,1):i++}return a},cr=function(a,i,l,u,p){var f=Mo(l),y=Mo(u),b=Kt(f,p),x=Kt(y,p),k=Zt(b,f,a),I=Zt(x,y,i);if(We(b,x)){var X=ei(a,i,k,I);return[a,k].concat(jt(X),[I,i])}var J=Wt([k,I]),ve=St(b,J),Ae=St(x,J),Re=[];Re=(Re=Re.concat(bt(ve))).concat(bt(Ae));var Ze={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[J,ve,Ae].forEach(function(ht){Re=Re.concat(It(ht,Ze).filter(function($t){return Xt($t,b)&&Xt($t,x)}))}),[{x:k.x,y:I.y},{x:I.x,y:k.y}].forEach(function(ht){Xt(ht,b)&&Xt(ht,x)&&Re.push(ht)}),Re.unshift(k),Re.push(I),Re=it(Re);var Je=gr(Re,k,I,f,y,a,i);return Je.unshift(a),Je.push(i),Je.length>2&&(Je=Fo(Je)),it(Je)},Wo=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],p=la(l.x,l.y,u.x,u.y),f=1;f<a.length-1;f++){var y=a[f],b=a[f+1],x=la(y.x,y.y,b.x,b.y);x>p&&(p=x,l=y,u=b)}i=[l,u]}return i},Qr=function(a,i,l){var u=Da(a,l),p=Da(i,l);return u&&p},Po=function(a,i,l){var u=Da(a,l),p=Da(i,l);return!(u&&p)&&(u||p)},$o=function(a,i,l){for(var u,p,f=Bi(l),y=bt(f),b=0;b<y.length;b++)Qn(a,i,y[b],y[(b+1)%y.length])&&(p=[y[b],y[(b+1)%y.length]]);return p&&(u=function(x,k,I,X){var J=(k.y-x.y)*(X.x-I.x)-(x.x-k.x)*(I.y-X.y);if(J===0)return!1;var ve=((k.x-x.x)*(X.x-I.x)*(I.y-x.y)+(k.y-x.y)*(X.x-I.x)*x.x-(X.y-I.y)*(k.x-x.x)*I.x)/J,Ae=-((k.y-x.y)*(X.y-I.y)*(I.x-x.x)+(k.x-x.x)*(X.y-I.y)*x.y-(X.x-I.x)*(k.y-x.y)*I.y)/J;return(ve-x.x)*(ve-k.x)<=0&&(Ae-x.y)*(Ae-k.y)<=0&&(ve-I.x)*(ve-X.x)<=0&&(Ae-I.y)*(Ae-X.y)<=0&&{x:ve,y:Ae}}(a,i,p[0],p[1])),u},Eo=function(a,i){var l;return a.x===i.x?l=ao.VERTICAL:a.y===i.y&&(l=ao.HORIZONTAL),l},mo=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var p=Vt(u.split(","),2),f=p[0],y=p[1];l.push({x:Number(f),y:Number(y)})}),l},ei=function(a,i,l,u){var p=[];if(Eo(a,l)===Eo(i,u))a.y===l.y?(p.push({x:l.x,y:(l.y+u.y)/2}),p.push({x:u.x,y:(l.y+u.y)/2})):(p.push({x:(l.x+u.x)/2,y:l.y}),p.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},y=Ol(f,a,l),b=Ol(f,i,u);if(y||b)f={x:u.x,y:l.y};else{var x=Oo(f,a,l),k=Oo(f,i,u);x&&k&&(f={x:u.x,y:l.y})}p.push(f)}return p},Oo=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Zn=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},ai=null,Nr=function(a,i){ai||(ai=document.createElement("canvas"));var l=ai.getContext("2d");return l.font=i,l.measureText(a).width},jn=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var p={start:l,end:u,offset:10,verticalLength:5},f=F(Pt(Pt({},p),{},{type:"start"})),y=F(Pt(Pt({},p),{},{type:"end"}));i="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},fr=function(a){var i=a.start,l=a.end,u=a.sourceNode,p=a.targetNode,f=a.offset,y=Bi(u),b=Bi(p),x=Kt(y,f),k=Kt(b,f);return{sNext:Zt(x,y,i),ePre:Zt(k,b,l)}},zn=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[lo(i[0]),lo(i[1]),lo(i[2]),lo(i[3])]},lo=function(a){var i=Vt(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},Fa=function(a,i){var l=Vt(a,4);return[be(l[0],l[1],l[2],l[3],i),a[3]]},Zl=function(a,i){for(var l,u=a.x,p=a.y,f=mo(i),y=Number.MAX_SAFE_INTEGER,b=[],x=0;x<f.length;x++)b.push({start:f[x],end:f[(x+1)%f.length]});if(b.forEach(function(J){var ve=J.start,Ae=J.end;if(ve.x===Ae.x){var Re={x:ve.x,y:p};if(Ol(Re,ve,Ae)){var Ze=Math.abs(ve.x-u);Ze<y&&(y=Ze,l=Re)}}else if(ve.y===Ae.y){var Je={x:u,y:ve.y};if(Ol(Je,ve,Ae)){var ht=Math.abs(ve.y-p);ht<y&&(y=ht,l=Je)}}}),!l){var k=b[0],I=k.start,X=k.end;l={x:I.x+(X.x-I.x)/2,y:I.y+(X.y-I.y)/2}}return l},ye=function(a){return Ka(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},tt=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function qe(a,i){return typeof i!="function"?function(l,u,p){return Object.assign({type:a.edgeType},p)}:function(l,u,p){var f=i(l,u,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:a.edgeType}}}r(208);var tn=function(){};function hr(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function se(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ee=function(){function a(u){var p=this,f=u.onDragStart,y=f===void 0?tn:f,b=u.onDragging,x=b===void 0?tn:b,k=u.onDragEnd,I=k===void 0?tn:k,X=u.eventType,J=X===void 0?"":X,ve=u.eventCenter,Ae=ve===void 0?null:ve,Re=u.step,Ze=Re===void 0?1:Re,Je=u.isStopPropagation,ht=Je===void 0||Je,$t=u.model,hn=$t===void 0?null:$t,dn=u.data,Hn=dn===void 0?null:dn;(function(sn,In){if(!(sn instanceof In))throw new TypeError("Cannot call a class as a function")})(this,a),se(this,"onDragStart",void 0),se(this,"onDragging",void 0),se(this,"onDragEnd",void 0),se(this,"step",void 0),se(this,"isStopPropagation",void 0),se(this,"isDragging",!1),se(this,"isStartDragging",!1),se(this,"startX",0),se(this,"startY",0),se(this,"sumDeltaX",0),se(this,"sumDeltaY",0),se(this,"eventType",void 0),se(this,"eventCenter",void 0),se(this,"model",void 0),se(this,"data",void 0),se(this,"startTime",void 0),se(this,"handleMouseDown",function(sn){var In,wn,jr,Br=(In=window)===null||In===void 0?void 0:In.document;if(sn.button===0){p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging=!0,p.startX=sn.clientX,p.startY=sn.clientY,Br.addEventListener("mousemove",p.handleMouseMove,!1),Br.addEventListener("mouseup",p.handleMouseUp,!1);var sr=(wn=p.model)===null||wn===void 0?void 0:wn.getData();(jr=p.eventCenter)===null||jr===void 0||jr.emit(Nn["".concat(p.eventType,"_MOUSEDOWN")],{e:sn,data:p.data||sr}),p.startTime=new Date().getTime()}}),se(this,"handleMouseMove",function(sn){if(p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=sn.clientX-p.startX,p.sumDeltaY+=sn.clientY-p.startY,p.startX=sn.clientX,p.startY=sn.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var In,wn=p.sumDeltaX%p.step,jr=p.sumDeltaY%p.step,Br=p.sumDeltaX-wn,sr=p.sumDeltaY-jr;p.sumDeltaX=wn,p.sumDeltaY=jr;var Xr,pi=(In=p.model)===null||In===void 0?void 0:In.getData();p.isDragging||((Xr=p.eventCenter)===null||Xr===void 0||Xr.emit(Nn["".concat(p.eventType,"_DRAGSTART")],{e:sn,data:p.data||pi}),p.onDragStart({event:sn})),p.isDragging=!0,Promise.resolve().then(function(){var hi,ba;p.onDragging({deltaX:Br,deltaY:sr,event:sn}),(hi=p.eventCenter)===null||hi===void 0||hi.emit(Nn["".concat(p.eventType,"_MOUSEMOVE")],{e:sn,data:p.data||pi}),(ba=p.eventCenter)===null||ba===void 0||ba.emit(Nn["".concat(p.eventType,"_DRAG")],{e:sn,data:p.data||pi})})}}),se(this,"handleMouseUp",function(sn){var In=window.document;p.isStartDragging=!1,p.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var wn,jr,Br;In.removeEventListener("mousemove",p.handleMouseMove,!1),In.removeEventListener("mouseup",p.handleMouseUp,!1);var sr=(wn=p.model)===null||wn===void 0?void 0:wn.getData();(jr=p.eventCenter)===null||jr===void 0||jr.emit(Nn["".concat(p.eventType,"_MOUSEUP")],{e:sn,data:p.data||sr}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:sn}),(Br=p.eventCenter)===null||Br===void 0||Br.emit(Nn["".concat(p.eventType,"_DROP")],{e:sn,data:p.data||sr}))})}),se(this,"cancelDrag",function(){var sn,In=(sn=window)===null||sn===void 0?void 0:sn.document;In.removeEventListener("mousemove",p.handleMouseMove,!1),In.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=y,this.onDragging=x,this.onDragEnd=I,this.step=Ze,this.isStopPropagation=ht,this.eventType=J,this.eventCenter=Ae,this.model=hn,this.data=Hn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&hr(i.prototype,l),a}();function Me(a){return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Me(a)}function Ue(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ze(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ne(a,i,l){return i&&ze(a.prototype,i),l&&ze(a,l),a}function Pe(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&d(a,i)}function Ie(a){var i=Xe();return function(){var l,u=m(a);if(i){var p=m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return de(this,l)}}function de(a,i){if(i&&(Me(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oe(a)}function Oe(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ce(a){var i=typeof Map=="function"?new Map:void 0;return ce=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return Be(l,arguments,m(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,l)},ce(a)}function Be(a,i,l){return Be=Xe()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(u,y));return f&&d(b,f.prototype),b},Be.apply(null,arguments)}function Xe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a,i){return d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d(a,i)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},m(a)}function E(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function j(a,i){return a instanceof Q&&i instanceof Q}var V=function(a){Pe(l,a);var i=Ie(l);function l(u,p,f){var y;return Ue(this,l),E(Oe(y=i.call(this,3)),"x",void 0),E(Oe(y),"y",void 0),E(Oe(y),"z",void 0),y[0]=u,y[1]=p,y[2]=f,y.x=u,y.y=p,y.z=f,Object.setPrototypeOf(Oe(y),l.prototype),y}return Ne(l,[{key:"add",value:function(u){if(j(this,u))return new Q(this.x+u.x,this.y+u.y);var p=this.z+u.z;return new pe((this.x+u.x)/p,(this.y+u.y)/p)}},{key:"subtract",value:function(u){if(j(this,u))return new Q(this.x-u.x,this.y-u.y);var p=this.z-u.z;return p===0?new Q(this.x-u.x,this.y-u.y):new pe((this.x-u.x)/p,(this.y-u.y)/p)}}]),l}(ce(Array)),Q=function(a){Pe(l,a);var i=Ie(l);function l(u,p,f){var y;return Ue(this,l),y=i.call(this,u,p,f??0),Object.setPrototypeOf(Oe(y),l.prototype),y}return Ne(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var p=this;return u.reduce(function(f,y,b){return f+y*p[b]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var p=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return p>=0?f:-f}}]),l}(V),pe=function(a){Pe(l,a);var i=Ie(l);function l(u,p){var f;return Ue(this,l),f=i.call(this,u,p,1),Object.setPrototypeOf(Oe(f),l.prototype),f}return Ne(l,[{key:"toString",value:function(){return"Point"}}]),l}(V);r(67),r(218);function Ee(a){return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ee(a)}function Le(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||mt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ft(a){return function(i){if(Array.isArray(i))return Gt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||mt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mt(a,i){if(a){if(typeof a=="string")return Gt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Gt(a,i):void 0}}function Gt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function An(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function On(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Yn(a,i,l){return i&&On(a.prototype,i),l&&On(a,l),a}function Mt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Un(a,i)}function Jt(a){var i=Ir();return function(){var l,u=er(a);if(i){var p=er(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dr(this,l)}}function dr(a,i){if(i&&(Ee(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(a)}function gn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ar(a){var i=typeof Map=="function"?new Map:void 0;return ar=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return or(l,arguments,er(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Un(p,l)},ar(a)}function or(a,i,l){return or=Ir()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(u,y));return f&&Un(b,f.prototype),b},or.apply(null,arguments)}function Ir(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Un(a,i){return Un=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Un(a,i)}function er(a){return er=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},er(a)}function zo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var nt,Jl,bi,Pu,us,wd,Ep,cf,qs,Jv,Qv,Op,Mh,Ks=function(a){Mt(l,a);var i=Jt(l);function l(){var u;An(this,l);for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];return zo(gn(u=i.call(this,f.length)),"rows",void 0),zo(gn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(b,x){u[x]=b}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(gn(u),l.prototype),u}return Yn(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return ft(this.map(function(p){return p[u]}))}},{key:"transpose",value:function(){for(var u=[],p=0;p<this.columns;p++)u.push(this.getColumn(p));return or(l,u)}},{key:"cross",value:function(u){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),b=function(k){var I=u.getColumn(k);p[f][k]=y.reduce(function(X,J,ve){return X+J*I[ve]},0)},x=0;x<u.columns;x++)b(x);return or(l,ft(p))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new pe(u[0],u[1])})}},{key:"toString",value:function(){var u=Le(this[0],2),p=u[0],f=u[1],y=Le(this[1],2),b=y[0],x=y[1],k=Le(this[2],2),I=k[0],X=k[1];return"matrix(".concat(p," ").concat(f," ").concat(b," ").concat(x," ").concat(I," ").concat(X,")")}},{key:"translate",value:function(u,p){return this.cross(new Zs(u,p))}},{key:"rotate",value:function(u){return this.cross(new xp(u))}},{key:"scale",value:function(u,p){return this.cross(new ey(u,p))}}]),l}(ar(Array)),xp=function(a){Mt(l,a);var i=Jt(l);function l(u){var p;return An(this,l),p=i.call(this,new Q(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new Q(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new Q(0,0,1)),Object.setPrototypeOf(gn(p),l.prototype),p}return Yn(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ks),ey=function(a){Mt(l,a);var i=Jt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new Q(u,0,0),new Q(0,p,0),new Q(0,0,1))),"sx",void 0),zo(gn(f),"sy",void 0),f.sx=u,f.sy=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ks),Zs=function(a){Mt(l,a);var i=Jt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new Q(1,0,0),new Q(0,1,0),new Q(u,p,1))),"tx",void 0),zo(gn(f),"ty",void 0),f.tx=u,f.ty=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Yn(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ks),Sp={node:!1,edge:!1},YN={node:!0,edge:!0};function GE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function am(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?GE(Object(l),!0).forEach(function(u){ss(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):GE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ph(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||VE(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kh(a){return function(i){if(Array.isArray(i))return G_(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||VE(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function VE(a,i){if(a){if(typeof a=="string")return G_(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?G_(a,i):void 0}}function G_(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lm(a){return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lm(a)}function ku(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function qN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ss(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function qn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var WE,zE=200,HE=(nt=function(){function a(u){(function(ve,Ae){if(!(ve instanceof Ae))throw new TypeError("Cannot call a class as a function")})(this,a),ss(this,"rootEl",void 0),ku(this,"width",Jl,this),ku(this,"height",bi,this),ss(this,"theme",void 0),ss(this,"eventCenter",void 0),ss(this,"modelMap",new Map),ss(this,"topElement",void 0),ss(this,"animation",void 0),ss(this,"idGenerator",void 0),ss(this,"edgeGenerator",void 0),ss(this,"nodeMoveRules",[]),ss(this,"customTrajectory",void 0),ku(this,"edgeType",Pu,this),ku(this,"nodes",us,this),ku(this,"edges",wd,this),ku(this,"overlapMode",Ep,this),ku(this,"background",cf,this),ku(this,"transformModel",qs,this),ku(this,"editConfigModel",Jv,this),ku(this,"gridSize",Qv,this),ku(this,"partial",Op,this),ku(this,"fakerNode",Mh,this);var p,f=u.container,y=u.background,b=y===void 0?{}:y,x=u.grid,k=u.idGenerator,I=u.edgeGenerator,X=u.animation,J=u.customTrajectory;this.background=b,lm(x)==="object"&&(this.gridSize=x.size),this.rootEl=f,this.editConfigModel=new Jf(u),this.eventCenter=new Xc,this.transformModel=new ep(this.eventCenter,u),this.theme=Ds(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(p=X)&&typeof p!="boolean"?Eu(wo(Sp),p):wo(p===!0?YN:Sp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=k,this.customTrajectory=J,this.edgeGenerator=qe(this,I),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=el()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"modelsMap",get:function(){return[].concat(kh(this.nodes),kh(this.edges)).reduce(function(u,p){return u[p.id]=p,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(k){return u.push(k)}),this.edges.forEach(function(k){return u.push(k)}),u=u.sort(function(k,I){return k.zIndex-I.zIndex});for(var p=[],f=[-200,-200],y=[this.width+zE,this.height+zE],b=0;b<u.length;b++){var x=u[b];x.visible&&(!this.partial||x.isSelected||this.isElementInArea(x,f,y,!1,!1))&&p.push(x)}return p}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===Hr.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===Hr.TEXT_EDIT});return u||p}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(p){p.isSelected&&u.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&u.set(p.id,p)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(p){p.isSelected&&u.push(p)}),u}},{key:"getAreaElement",value:function(u,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4],x=[],k=[];this.nodes.forEach(function(J){return k.push(J)}),this.edges.forEach(function(J){return k.push(J)});for(var I=0;I<k.length;I++){var X=k[I];b&&!X.visible||!this.isElementInArea(X,u,p,f,y)||x.push(X)}return x}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var p;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[u])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(u){var p=u.x,f=u.y,y=this.rootEl.getBoundingClientRect(),b={x:p-y.left,y:f-y.top},x=Ph(this.transformModel.HtmlPointToCanvasPoint([b.x,b.y]),2);return{domOverlayPosition:b,canvasOverlayPosition:{x:x[0],y:x[1]}}}},{key:"isElementInArea",value:function(u,p,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===io.NODE){for(var x=Bi(u=u),k=x.minX,I=x.minY,X=x.maxX,J=x.maxY,ve=[{x:k,y:I},{x:X,y:I},{x:X,y:J},{x:k,y:J}],Ae=b,Re=0;Re<ve.length;Re++){var Ze=ve[Re],Je=Ze.x,ht=Ze.y,$t=this.transformModel.CanvasPointToHtmlPoint([Je,ht]),hn=Ph($t,2);if(Je=hn[0],ht=hn[1],fd([Je,ht],p,f)!==b){Ae=!b;break}}return Ae}if(u.BaseType===io.EDGE){var dn=u=u,Hn=dn.startPoint,sn=dn.endPoint,In=this.transformModel.CanvasPointToHtmlPoint([Hn.x,Hn.y]),wn=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),jr=fd(In,p,f),Br=fd(wn,p,f);return y?jr&&Br:jr||Br}return!1}},{key:"graphDataToModel",value:function(u){var p=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Xf(u.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=Xf(u.edges,function(f){var y=p.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&u.push(y)});var p=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&p.push(y)}),{nodes:p,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,p=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){u=!0;break}p.push(y.getHistoryData())}if(u)return!1;for(var b=!1,x=[],k=0;k<this.edges.length;k++){var I=this.edges[k];if(I.isDragging){b=!0;break}x.push(I.getHistoryData())}return!b&&{nodes:p,edges:x}}},{key:"getEdgeModelById",value:function(u){var p;return(p=this.edgesMap[u])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var p=[],f=0;f<this.edges.length;f++){var y=this.edges[f],b=this.edges[f].sourceNodeId===u,x=this.edges[f].targetNodeId===u;(b||x)&&p.push(y)}return p}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(y){if(y.BaseType===io.NODE&&f.nodes.push(y.getData()),y.BaseType===io.EDGE){var b=y.getData(),x=p.get(b.sourceNodeId)&&p.get(b.targetNodeId);(u||x)&&f.edges.push(b)}}),f}},{key:"updateAttributes",value:function(u,p){this.getElement(u).updateAttributes(p)}},{key:"changeNodeId",value:function(u,p){return p||(p=el()),this.nodesMap[p]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=p),f.targetNodeId===u&&(f.targetNodeId=p)}),this.nodesMap[u].model.id=p,this.nodesMap[p]=this.nodesMap[u],p):""}},{key:"changeEdgeId",value:function(u,p){return p||(p=el()),this.edgesMap[p]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,p){return this.modelMap.set(u,p)}},{key:"toFront",value:function(u){var p,f,y,b=((p=this.nodesMap[u])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);b&&(this.overlapMode===bo.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),b.setZIndex(9999),this.topElement=b),this.overlapMode===bo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,p){var f,y,b,x=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[u])===null||y===void 0?void 0:y.model);x&&(typeof p=="number"&&(b=p),p==="top"&&(b=ql()),p==="bottom"&&(b=--lf),x.setZIndex(b))}},{key:"deleteNode",value:function(u){var p=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Nn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=Zo(u);y.id&&this.nodesMap[u.id]&&delete y.id;var b=this.getModelAfterSnapToGrid(y);this.nodes.push(b);var x=b.getData(),k={data:x};return f&&(k.e=f),this.eventCenter.emit(p,k),b}},{key:"getModelAfterSnapToGrid",value:function(u){var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,y=u.y;return f&&y&&(u.x=wl(f,this.gridSize),u.y=wl(y,this.gridSize),lm(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-y)),new p(u,this)}},{key:"cloneNode",value:function(u){var p=this.getNodeModelById(u),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),p.setSelected(!1),y.getData()}},{key:"moveNode",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=this.nodesMap[u];if(b){var x=b.model,k=x.getMoveDistance(p,f,y),I=Ph(k,2);p=I[0],f=I[1],this.moveEdge(u,p,f)}}},{key:"moveNode2Coordinate",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=this.nodesMap[u];if(b){var x=b.model,k=x.x,I=x.y,X=p-k,J=f-I;this.moveNode(u,X,J,y)}}},{key:"editText",value:function(u){this.setElementStateById(u,Hr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var p=Zo(u),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var b=new y(am(am({},p),{},{type:f}),this),x=b.getData();return this.edges.push(b),this.eventCenter.emit(Nn.EDGE_ADD,{data:x}),b}},{key:"moveEdge",value:function(u,p,f){for(var y=0;y<this.edges.length;y++){var b=this.edges[y],x=b.textPosition,k=x.x,I=x.y,X=this.edges[y].sourceNodeId===u,J=this.edges[y].targetNodeId===u;X&&b.moveStartPoint(p,f),J&&b.moveEndPoint(p,f),(X||J)&&this.handleEdgeTextMove(b,k,I)}}},{key:"handleEdgeTextMove",value:function(u,p,f){var y;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===Or.POLYLINE_EDGE&&(y=u.text)!==null&&y!==void 0&&y.value){var b=u.text,x=Zl(b,u.points);u.moveText(x.x-b.x,x.y-b.y)}else{var k=u.textPosition,I=k.x,X=k.y;u.moveText(I-p,X-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===p){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var p=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(p,1),this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,p,f){this.nodes.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(Hr.DEFAULT)}),this.edges.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(Hr.DEFAULT)})}},{key:"updateText",value:function(u,p){this.nodes.forEach(function(f){f.id===u&&f.updateText(p)}),this.edges.forEach(function(f){f.id===u&&f.updateText(p)})}},{key:"selectNodeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.nodesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.edgesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===bo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,p,f){for(var y=this,b=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=u.reduce(function(dn,Hn){var sn=y.nodesMap[Hn].model.getMoveDistance(p,f,b);return dn[Hn]=sn,dn},{}),k=0;k<this.edges.length;k++){var I=this.edges[k],X=I.textPosition,J=X.x,ve=X.y,Ae=x[I.sourceNodeId],Re=x[I.targetNodeId],Ze=void 0,Je=void 0;if(Ae&&Re&&I.modelType===Or.POLYLINE_EDGE){var ht=Ph(Ae,2);Ze=ht[0],Je=ht[1],I.updatePointsList(Ze,Je)}else{if(Ae){var $t=Ph(Ae,2);Ze=$t[0],Je=$t[1],I.moveStartPoint(Ze,Je)}if(Re){var hn=Ph(Re,2);Ze=hn[0],Je=hn[1],I.moveEndPoint(Ze,Je)}}(Ae||Re)&&this.handleEdgeTextMove(I,J,ve)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,p){var f=this.getNodeModelById(u);if(f){var y=f.getData();y.type=p;var b=this.getModel(p);if(!b)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var x=new b(y,this);this.nodes.splice(this.nodesMap[u].index,1,x),this.getNodeEdges(u).forEach(function(k){if(k.sourceNodeId===u){var I=zs(x,k.startPoint,x.width,x.height);k.updateStartPoint(I)}if(k.targetNodeId===u){var X=zs(x,k.endPoint,x.width,x.height);k.updateEndPoint(X)}})}}},{key:"changeEdgeType",value:function(u,p){var f=this.getEdgeModelById(u);if(f&&f.type!==p){var y=f.getData();y.type=p;var b=this.getModel(p);if(!b)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var x=new b(y,this);this.edges.splice(this.edgesMap[u].index,1,x)}}},{key:"getNodeIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetNodeId===u&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===u&&f.push(p.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===u&&f.push(p.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=Ds(am(am({},this.theme),u))}},{key:"resize",value:function(u,p){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,p=[],f=[];u.forEach(function(X){var J=X.x,ve=X.y,Ae=X.width,Re=X.height,Ze=X.getNodeStyle().strokeWidth,Je=Ze===void 0?0:Ze,ht=J+Ae/2+Je,$t=J-Ae/2-Je,hn=ve+Re/2+Je,dn=ve-Re/2-Je;p=p.concat([ht,$t].filter(function(Hn){return!Number.isNaN(Hn)})),f=f.concat([hn,dn].filter(function(Hn){return!Number.isNaN(Hn)}))});var y=Math.min.apply(Math,kh(p)),b=Math.max.apply(Math,kh(p)),x=Math.min.apply(Math,kh(f)),k=b-y||0,I=Math.max.apply(Math,kh(f))-x||0;return{virtualRectWidth:k,virtualRectHeight:I,virtualRectCenterPositionX:y+k/2,virtualRectCenterPositionY:x+I/2}}},{key:"translateCenter",value:function(){var u=this.nodes,p=this.width,f=this.height,y=this.rootEl,b=this.transformModel;if(u.length){var x=p||y.clientWidth,k=f||y.clientHeight,I=this.getVirtualRectSize(),X=I.virtualRectCenterPositionX,J=I.virtualRectCenterPositionY;b.focusOn(X,J,x,k)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,b=this.height,x=this.rootEl,k=this.transformModel;if(f.length){var I=y||x.clientWidth,X=b||x.clientHeight,J=this.getVirtualRectSize(),ve=J.virtualRectWidth,Ae=J.virtualRectHeight,Re=J.virtualRectCenterPositionX,Ze=J.virtualRectCenterPositionY,Je=(ve+p)/I,ht=(Ae+u)/X,$t=0;$t=1/Math.max(Je,ht);var hn=[I/2,X/2];k.zoom($t,hn),k.focusOn(Re,Ze,I,X)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&qN(i.prototype,l),a}(),Jl=qn(nt.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=qn(nt.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pu=qn(nt.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=qn(nt.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wd=qn(nt.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ep=qn(nt.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bo.DEFAULT}}),cf=qn(nt.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs=qn(nt.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jv=qn(nt.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qv=qn(nt.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Op=qn(nt.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mh=qn(nt.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn(nt.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"nodesMap"),nt.prototype),qn(nt.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"edgesMap"),nt.prototype),qn(nt.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"modelsMap"),nt.prototype),qn(nt.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"sortElements"),nt.prototype),qn(nt.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"textEditElement"),nt.prototype),qn(nt.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"selectElements"),nt.prototype),qn(nt.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"selectNodes"),nt.prototype),qn(nt.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setFakerNode"),nt.prototype),qn(nt.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"removeFakerNode"),nt.prototype),qn(nt.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setModel"),nt.prototype),qn(nt.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"toFront"),nt.prototype),qn(nt.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementZIndex"),nt.prototype),qn(nt.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteNode"),nt.prototype),qn(nt.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"addNode"),nt.prototype),qn(nt.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"cloneNode"),nt.prototype),qn(nt.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNode"),nt.prototype),qn(nt.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNode2Coordinate"),nt.prototype),qn(nt.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"editText"),nt.prototype),qn(nt.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"addEdge"),nt.prototype),qn(nt.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveEdge"),nt.prototype),qn(nt.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeBySourceAndTarget"),nt.prototype),qn(nt.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeById"),nt.prototype),qn(nt.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeBySource"),nt.prototype),qn(nt.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeByTarget"),nt.prototype),qn(nt.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementStateById"),nt.prototype),qn(nt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateText"),nt.prototype),qn(nt.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectNodeById"),nt.prototype),qn(nt.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectEdgeById"),nt.prototype),qn(nt.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectElementById"),nt.prototype),qn(nt.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"clearSelectElements"),nt.prototype),qn(nt.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNodes"),nt.prototype),qn(nt.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setDefaultEdgeType"),nt.prototype),qn(nt.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeNodeType"),nt.prototype),qn(nt.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeEdgeType"),nt.prototype),qn(nt.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeIncomingEdge"),nt.prototype),qn(nt.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeOutgoingEdge"),nt.prototype),qn(nt.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAnchorIncomingEdge"),nt.prototype),qn(nt.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAnchorOutcomingEdge"),nt.prototype),qn(nt.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeIncomingNode"),nt.prototype),qn(nt.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeOutgoingNode"),nt.prototype),qn(nt.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setTheme"),nt.prototype),qn(nt.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"resize"),nt.prototype),qn(nt.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"clearData"),nt.prototype),qn(nt.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"translateCenter"),nt.prototype),qn(nt.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"fitView"),nt.prototype),qn(nt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"openEdgeAnimation"),nt.prototype),qn(nt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"closeEdgeAnimation"),nt.prototype),nt),KN=HE;function V_(a){return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V_(a)}function W_(){return W_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},W_.apply(this,arguments)}function ZN(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function z_(a,i){return z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z_(a,i)}function JN(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=um(a);if(i){var p=um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return QN(this,l)}}function QN(a,i){if(i&&(V_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Js(a)}function Js(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function um(a){return um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},um(a)}function ff(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var XE,eR=ps(WE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&z_(f,y)})(p,a);var i,l,u=JN(p);function p(f){var y;(function(I,X){if(!(I instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),ff(Js(y=u.call(this)),"stepDrag",void 0),ff(Js(y),"stepScrollX",0),ff(Js(y),"stepScrollY",0),ff(Js(y),"onDragging",function(I){var X=I.deltaX,J=I.deltaY;y.setState({isDragging:!0});var ve=y.props.graphModel,Ae=ve.transformModel;ve.editConfigModel.stopMoveGraph!==!0&&Ae.translate(X,J)}),ff(Js(y),"onDragEnd",function(){y.setState({isDragging:!1})}),ff(Js(y),"zoomHandler",function(I){var X=y.props,J=X.graphModel,ve=J.editConfigModel,Ae=J.transformModel,Re=J.gridSize,Ze=X.graphModel,Je=I.deltaX,ht=I.deltaY;if(ve.stopScrollGraph||I.ctrlKey===!0){if(!ve.stopZoomGraph){I.preventDefault();var $t=Ze.getPointByClient({x:I.clientX,y:I.clientY}).canvasOverlayPosition,hn=$t.x,dn=$t.y;Ae.zoom(I.deltaY<0,[hn,dn])}}else{if(I.preventDefault(),y.stepScrollX+=Je,y.stepScrollY+=ht,Math.abs(y.stepScrollX)>=Re){var Hn=y.stepScrollX%Re,sn=y.stepScrollX-Hn;Ae.translate(-sn*Ae.SCALE_X,0),y.stepScrollX=Hn}if(Math.abs(y.stepScrollY)>=Re){var In=y.stepScrollY%Re,wn=y.stepScrollY-In;Ae.translate(0,-wn*Ae.SCALE_Y),y.stepScrollY=In}}}),ff(Js(y),"clickHandler",function(I){if(I.target.getAttribute("name")==="canvas-overlay"){var X=y.props.graphModel;X.selectElements.size>0&&X.clearSelectElements(),X.eventCenter.emit(Nn.BLANK_CLICK,{e:I})}}),ff(Js(y),"handleContextMenu",function(I){if(I.target.getAttribute("name")==="canvas-overlay"){I.preventDefault();var X=y.props.graphModel,J=X.getPointByClient({x:I.clientX,y:I.clientY});X.eventCenter.emit(Nn.BLANK_CONTEXTMENU,{e:I,position:J})}}),ff(Js(y),"mouseDownHandler",function(I){var X=y.props.graphModel,J=X.eventCenter,ve=X.editConfigModel,Ae=X.transformModel.SCALE_X,Re=X.gridSize,Ze=I.target,Je=!ve.adjustEdge&&!ve.adjustNodePosition;(Ze.getAttribute("name")==="canvas-overlay"||Je)&&(ve.stopMoveGraph!==!0?(y.stepDrag.setStep(Re*Ae),y.stepDrag.handleMouseDown(I)):J.emit(Nn.BLANK_MOUSEDOWN,{e:I}),y.clickHandler(I))});var b=f.graphModel,x=b.gridSize,k=b.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:x,eventType:"BLANK",isStopPropagation:!1,eventCenter:k,model:null}),y.state={isDragging:!1},y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,b=y.children,x=y.dnd,k=this.state.isDragging;return Object(Fe.g)("svg",W_({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:k?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},x.eventMap()),Object(Fe.g)("g",{transform:f},b))}}])&&ZN(i.prototype,l),p}(Fe.a))||WE;function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function tR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function X_(a,i){return X_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},X_(a,i)}function rR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sm(a);if(i){var p=sm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oR(this,l)}}function oR(a,i){if(i&&(H_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function sm(a){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sm(a)}var iR=ps(XE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&X_(f,y)})(p,a);var i,l,u=rR(p);function p(){return tR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,b=f.graphModel,x=y.getTools().map(function(k){return Object(Fe.g)(k,{graphModel:b,logicFlow:y.instance})});return y.components=x,x}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,b=f.graphModel,x=document.querySelector("#ToolOverlay_".concat(b.flowId)),k=y.getInstance();k.components.forEach(function(I){return I(k,x)}),k.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Fe.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&nR(i.prototype,l),p}(Fe.a))||XE;function Y_(a){return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Y_(a)}function aR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function lR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function q_(a,i){return q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},q_(a,i)}function uR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cm(a);if(i){var p=cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return sR(this,l)}}function sR(a,i){if(i&&(Y_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function cm(a){return cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},cm(a)}var YE,cR=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&q_(f,y)})(p,a);var i,l,u=uR(p);function p(){return aR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.background;return Object(Fe.g)("div",{className:"lf-background"},Object(Fe.g)("div",{style:f,className:"lf-background-area"}))}}])&&lR(i.prototype,l),p}(Fe.a);function K_(a){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K_(a)}function fR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function dR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z_(a,i){return Z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z_(a,i)}function pR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fm(a);if(i){var p=fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return hR(this,l)}}function hR(a,i){if(i&&(K_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qE(a)}function qE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fm(a){return fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fm(a)}function vR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var KE=ps(YE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Z_(f,y)})(p,a);var i,l,u=pR(p);function p(){var f;fR(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return vR(qE(f=u.call.apply(u,[this].concat(b))),"id",el()),f}return i=p,(l=[{key:"renderDot",value:function(){var f=this.props,y=f.config,b=y.color,x=y.thickness,k=x===void 0?2:x,I=f.size,X=f.visible,J=Math.min(Math.max(2,k),I/2),ve=1;return X||(ve=0),Object(Fe.g)("rect",{width:J,height:J,rx:J/2,ry:J/2,fill:b,opacity:ve})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,b=y.color,x=y.thickness,k=x===void 0?1:x,I=f.size,X=f.visible,J=Math.min(Math.max(1,k),I/2),ve="M ".concat(I," 0 H0 M0 0 V0 ").concat(I),Ae=1;return X||(Ae=0),Object(Fe.g)("path",{d:ve,stroke:b,strokeWidth:J,opacity:Ae})}},{key:"render",value:function(){var f=this.props,y=f.type,b=f.size,x=f.graphModel.transformModel,k=[x.SCALE_X,x.SKEW_Y,x.SKEW_X,x.SCALE_Y,x.TRANSLATE_X,x.TRANSLATE_Y].join(","),I="matrix(".concat(k,")");return Object(Fe.g)("div",{className:"lf-grid"},Object(Fe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Fe.g)("defs",null,Object(Fe.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:I,x:"0",y:"0",width:b,height:b},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object(Fe.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&dR(i.prototype,l),p}(Fe.a))||YE;KE.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function J_(a){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J_(a)}function yR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ZE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ZE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ZE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var JE,Nh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=yR(l,2),p=u[0],f=u[1];(p==="style"||J_(f)!=="object")&&(i[p]=f)}),Object(Fe.g)("line",i)};function Q_(a){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q_(a)}function QE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function dm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?QE(Object(l),!0).forEach(function(u){mR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):QE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function mR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function gR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _R(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function eb(a,i){return eb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},eb(a,i)}function bR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=pm(a);if(i){var p=pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wR(this,l)}}function wR(a,i){if(i&&(Q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function pm(a){return pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},pm(a)}var eO,ER=ps(JE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&eb(f,y)})(p,a);var i,l,u=bR(p);function p(){return gR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,b=f.isShowHorizontal,x=f.isShowVertical,k=f.getStyle(),I=y.x,X=I===void 0?0:I,J=y.y,ve=J===void 0?0:J,Ae=dm(dm({x1:-1e5,y1:ve,x2:1e5,y2:ve},k),{},{stroke:b?k.stroke:"none"}),Re=dm(dm({x1:X,y1:-1e5,x2:X,y2:1e5},k),{},{stroke:x?k.stroke:"none"});return Object(Fe.g)("g",{className:"lf-snapline"},Object(Fe.g)(Nh,Ae),Object(Fe.g)(Nh,Re))}}])&&_R(i.prototype,l),p}(Fe.a))||JE;function tb(a){return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},tb(a)}function OR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return tO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return tO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ed(a){var i=a.x,l=a.y,u=a.width,p=a.height,f=a.className,y=a.radius,b=i-u/2,x=l-p/2,k={};return Object.entries(a).forEach(function(I){var X=OR(I,2),J=X[0],ve=X[1];tb(ve)!=="object"&&(k[J]=ve)}),k.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(k.rx=y,k.ry=y),k.x=b,k.y=x,Object(Fe.g)("rect",k)}function nb(a){return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},nb(a)}function Rh(){return Rh=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rh.apply(this,arguments)}function nO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function rO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?nO(Object(l),!0).forEach(function(u){xR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):nO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function SR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function AR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function rb(a,i){return rb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},rb(a,i)}function TR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hm(a);if(i){var p=hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return MR(this,l)}}function MR(a,i){if(i&&(nb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function hm(a){return hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hm(a)}Ed.defaultProps={className:"",radius:""};var oO,PR=ps(eO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&rb(f,y)})(p,a);var i,l,u=TR(p);function p(){return SR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,b=f.editConfigModel,x=b.hoverOutline,k=b.nodeSelectedOutline,I=[];return y.forEach(function(X){if(X.isHovered||X.isSelected){var J=X.isHovered,ve=X.isSelected,Ae=X.x,Re=X.y,Ze=X.width,Je=X.height;if(k&&ve||x&&J){var ht=X.getOutlineStyle(),$t={};if(Object.keys(ht).forEach(function(dn){dn!=="hover"&&($t[dn]=ht[dn])}),J){var hn=ht.hover;$t=rO(rO({},$t),hn)}I.push(Object(Fe.g)(Ed,Rh({transform:X.transform,className:"lf-outline-node",x:Ae,y:Re,width:Ze+10,height:Je+10},$t)))}}}),I}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,b=f.editConfigModel,x=b.edgeSelectedOutline,k=b.hoverOutline,I=[],X=0;X<y.length;X++){var J=y[X];(x&&J.isSelected||k&&J.isHovered)&&(J.modelType===Or.LINE_EDGE?I.push(this.getLineOutline(J)):J.modelType===Or.POLYLINE_EDGE?I.push(this.getPolylineOutline(J)):J.modelType===Or.BEZIER_EDGE&&I.push(this.getBezierOutline(J)))}return I}},{key:"getLineOutline",value:function(f){var y=f.startPoint,b=f.endPoint,x=(y.x+b.x)/2,k=(y.y+b.y)/2,I=Math.abs(y.x-b.x)+10,X=Math.abs(y.y-b.y)+10,J=f.getOutlineStyle();return Object(Fe.g)(Ed,Rh({className:"lf-outline-edge",x,y:k,width:I,height:X},J))}},{key:"getPolylineOutline",value:function(f){var y=f.points,b=mo(y),x=Wt(b,8),k=x.x,I=x.y,X=x.width,J=x.height,ve=f.getOutlineStyle();return Object(Fe.g)(Ed,Rh({className:"lf-outline",x:k,y:I,width:X,height:J},ve))}},{key:"getBezierOutline",value:function(f){var y=f.path,b=zn(y),x=Wt(b,8),k=x.x,I=x.y,X=x.width,J=x.height,ve=f.getOutlineStyle();return Object(Fe.g)(Ed,Rh({className:"lf-outline",x:k,y:I,width:X,height:J},ve))}},{key:"render",value:function(){return Object(Fe.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&AR(i.prototype,l),p}(Fe.a))||eO;function ob(a){return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ob(a)}function kR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return iO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return iO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function iO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function jh(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.r,y=f===void 0?4:f,b=a.className,x={cx:l,cy:p,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(k){var I=kR(k,2),X=I[0],J=I[1];ob(J)!=="object"&&(x[X]=J)}),x.className=b?"lf-basic-shape ".concat(b):"lf-basic-shape",Object(Fe.g)("circle",x)}function ib(a){return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ib(a)}function NR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return aO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return aO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ty(){return ty=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ty.apply(this,arguments)}function lO(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function uO(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function sO(a,i,l){return i&&uO(a.prototype,i),l&&uO(a,l),a}function cO(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&ab(a,i)}function ab(a,i){return ab=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ab(a,i)}function fO(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ym(a);if(i){var p=ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return RR(this,l)}}function RR(a,i){if(i&&(ib(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vm(a)}function vm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ym(a){return ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ym(a)}function lb(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var dO,pO=function(a){cO(l,a);var i=fO(l);function l(){var u;return lO(this,l),lb(vm(u=i.call(this)),"dragHandler",void 0),lb(vm(u),"onDragging",function(p){var f=p.event,y=u.props,b=y.graphModel,x=y.bezierModel,k=y.type,I=b.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,X=I.x,J=I.y;x.updateAdjustAnchor({x:X,y:J},k),b.eventCenter.emit(Nn.EDGE_ADJUST,{data:x.getData()})}),lb(vm(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ee({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return sO(l,[{key:"render",value:function(){var u=this,p=this.props.position,f=p.x,y=p.y,b=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Fe.g)(jh,ty({className:"lf-bezier-adjust-anchor",x:f,y},b,{onMouseDown:function(x){u.dragHandler.handleMouseDown(x)}}))}}]),l}(Fe.a),jR=ps(oO=function(a){cO(l,a);var i=fO(l);function l(){return lO(this,l),i.apply(this,arguments)}return sO(l,[{key:"getBezierAdjust",value:function(u,p){var f=u.path,y=u.id,b=NR(zn(f),4),x=b[0],k=b[1],I=b[2],X=b[3],J=u.getEdgeStyle().adjustLine,ve=[];return ve.push(Object(Fe.g)(Nh,ty({x1:x.x,y1:x.y,x2:k.x,y2:k.y},J))),ve.push(Object(Fe.g)(pO,{position:k,bezierModel:u,graphModel:p,key:"".concat(y,"_ePre"),type:"sNext"})),ve.push(Object(Fe.g)(Nh,ty({x1:X.x,y1:X.y,x2:I.x,y2:I.y},J))),ve.push(Object(Fe.g)(pO,{position:I,bezierModel:u,graphModel:p,key:"".concat(y,"_sNext"),type:"ePre"})),ve}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,p=u.edges,f=[],y=0;y<p.length;y++){var b=p[y];b.isSelected&&b.modelType===Or.BEZIER_EDGE&&b.draggable&&f.push(this.getBezierAdjust(b,u))}return f}},{key:"render",value:function(){return Object(Fe.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Fe.a))||oO;function ub(a){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ub(a)}function CR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function DR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function sb(a,i){return sb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},sb(a,i)}function IR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=mm(a);if(i){var p=mm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return LR(this,l)}}function LR(a,i){if(i&&(ub(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function mm(a){return mm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},mm(a)}var hO,FR=ps(dO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&sb(f,y)})(p,a);var i,l,u=IR(p);function p(){return CR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object(Fe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Fe.g)("g",{transform:f},y))}}])&&DR(i.prototype,l),p}(Fe.a))||dO;function cb(a){return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},cb(a)}function fb(){return fb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},fb.apply(this,arguments)}function $R(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function BR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function db(a,i){return db=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},db(a,i)}function UR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gm(a);if(i){var p=gm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return GR(this,l)}}function GR(a,i){if(i&&(cb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function gm(a){return gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},gm(a)}var VR=ps(hO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&db(f,y)})(p,a);var i,l,u=UR(p);function p(){return $R(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getComponent",value:function(f,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",x=this.props.getView,k=x(f.type);return Object(Fe.g)(k,{key:f.id,model:f,graphModel:y,overlay:b})}},{key:"render",value:function(){var f=this,y=this.props,b=y.graphModel,x=y.tool,k=y.options,I=y.dnd,X=y.snaplineModel,J={};k.width&&(J.width="".concat(b.width,"px")),k.height&&(J.height="".concat(b.height,"px"));var ve=k.grid,Ae=b.fakerNode,Re=b.editConfigModel.adjustEdge;return Object(Fe.g)("div",{className:"lf-graph","flow-id":b.flowId,style:J},Object(Fe.g)(eR,{graphModel:b,dnd:I},Object(Fe.g)("g",{className:"lf-base"},Xf(b.sortElements,function(Ze){return f.getComponent(Ze,b)})),Ae?this.getComponent(Ae,b):""),Object(Fe.g)(FR,{graphModel:b},Object(Fe.g)(PR,{graphModel:b}),Re?Object(Fe.g)(jR,{graphModel:b}):"",k.snapline!==!1?Object(Fe.g)(ER,{snaplineModel:X}):""),Object(Fe.g)(iR,{graphModel:b,tool:x}),k.background&&Object(Fe.g)(cR,{background:k.background}),k.grid&&Object(Fe.g)(KE,fb({},ve,{graphModel:b})))}}],l&&BR(i.prototype,l),p}(Fe.a))||hO,WR=VR;function vO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function _m(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?vO(Object(l),!0).forEach(function(u){df(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):vO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function zR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function df(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var HR=function(){function a(u){var p=this;(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),df(this,"nodeConfig",void 0),df(this,"lf",void 0),df(this,"fakerNode",void 0),df(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),df(this,"dragEnter",function(y){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(_m(_m({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),df(this,"onDragOver",function(y){if(y.preventDefault(),p.fakerNode){var b=p.clientToLocalPoint({x:y.clientX,y:y.clientY}),x=b.x,k=b.y;p.fakerNode.moveTo(x,k);var I=p.fakerNode.getData();p.lf.setNodeSnapLine(I),p.lf.graphModel.eventCenter.emit(Nn.NODE_DND_DRAG,{data:I})}return!1}),df(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),df(this,"onDrop",function(y){p.lf.graphModel&&y&&p.nodeConfig&&(p.lf.addNode(_m(_m({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY})),Nn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=u.lf;this.lf=f}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var p=u.x,f=u.y,y=Xu(this.lf.options,["grid","size"]),b=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,x=b.x,k=b.y;return{x:wl(x,y),y:wl(k,y)}}},{key:"startDrag",value:function(u){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&zR(i.prototype,l),a}();function yO(a){var i=a.container,l=a.grid,u=a.width,p=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=Eu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Eu({},gO,a)}var ro,mO,gO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function pb(a){return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},pb(a)}function hb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return _O(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return _O(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _O(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function bO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function bm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?bO(Object(l),!0).forEach(function(u){wO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):bO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function XR(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function YR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ny(){return ny=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=KR(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},ny.apply(this,arguments)}function KR(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Od(a))!==null;);return a}function vb(a,i){return vb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},vb(a,i)}function ZR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Od(a);if(i){var p=Od(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return JR(this,l)}}function JR(a,i){if(i&&(pb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wm(a)}function wm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Od(a){return Od=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Od(a)}function wO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function cs(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var yb=(ro=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&vb(f,y)})(p,a);var i,l,u=ZR(p);function p(){var f;YR(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return wO(wm(f=u.call.apply(u,[this].concat(b))),"modelType",Or.BEZIER_EDGE),XR(wm(f),"path",mO,wm(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=100,ny(Od(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return bm(bm({},ny(Od(p.prototype),"getEdgeStyle",this).call(this)),wo(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(b){var x=b.x,k=b.y;f+=x,y+=k}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=ny(Od(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(b){return{x:b.x,y:b.y}});return bm(bm({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return fr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=hb(f,4),b=y[0],x=y[1],k=y[2],I=y[3];return"M ".concat(b.x," ").concat(b.y,`
    C `).concat(x.x," ").concat(x.y,`,
    `).concat(k.x," ").concat(k.y,`,
    `).concat(I.x," ").concat(I.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,b=f.ePre;this.updatePath(y,b)}},{key:"updatePath",value:function(f,y){f=wo(f),y=wo(y);var b={x:this.startPoint.x,y:this.startPoint.y},x={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var k=this.getControls();f=k.sNext,y=k.ePre}this.pointsList=[b,f,y,x],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var b=hb(this.pointsList,3),x=b[1],k=b[2];x.x+=f,x.y+=y,this.updatePath(x,k)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var b=hb(this.pointsList,3),x=b[1],k=b[2];k.x+=f,k.y+=y,this.updatePath(x,k)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,b=f.endPoint,x=f.sourceNode,k=f.targetNode,I=fr({start:y,end:b,sourceNode:x,targetNode:k,offset:this.offset}),X=I.sNext,J=I.ePre;this.pointsList=[y,X,J,b],this.initPoints()}}])&&qR(i.prototype,l),p}(as),mO=cs(ro.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cs(ro.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"initPoints"),ro.prototype),cs(ro.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updatePoints"),ro.prototype),cs(ro.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateStartPoint"),ro.prototype),cs(ro.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateEndPoint"),ro.prototype),cs(ro.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"moveStartPoint"),ro.prototype),cs(ro.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"moveEndPoint"),ro.prototype),cs(ro.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateAdjustAnchor"),ro.prototype),cs(ro.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"getAdjustStart"),ro.prototype),cs(ro.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"getAdjustEnd"),ro.prototype),cs(ro.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateAfterAdjustStartAndEnd"),ro.prototype),ro),nn,EO,OO,xO,SO,AO,TO,MO,PO,kO,NO,RO,jO,CO,DO,IO,LO,FO,$O,BO,UO,GO,VO,QR=function(a){return a==null};function ej(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||WO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mb(a){return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},mb(a)}function WO(a,i){if(a){if(typeof a=="string")return zO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?zO(a,i):void 0}}function zO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function HO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ol(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?HO(Object(l),!0).forEach(function(u){Tl(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):HO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function wi(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function tj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Tl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ar(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var pf,XO,hf=(nn=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Tl(this,"id",""),wi(this,"type",EO,this),wi(this,"x",OO,this),wi(this,"y",xO,this),wi(this,"text",SO,this),wi(this,"properties",AO,this),wi(this,"_width",TO,this),wi(this,"_height",MO,this),wi(this,"anchorsOffset",PO,this),wi(this,"isSelected",kO,this),wi(this,"isHovered",NO,this),wi(this,"isShowAnchor",RO,this),wi(this,"isDragging",jO,this),wi(this,"isHitable",CO,this),wi(this,"draggable",DO,this),wi(this,"visible",IO,this),wi(this,"enableRotate",LO,this),Tl(this,"virtual",!1),Tl(this,"graphModel",void 0),wi(this,"zIndex",FO,this),wi(this,"state",$O,this),wi(this,"autoToFront",BO,this),wi(this,"style",UO,this),wi(this,"transform",GO,this),wi(this,"_rotate",VO,this),Tl(this,"BaseType",io.NODE),Tl(this,"modelType",Or.NODE),Tl(this,"additionStateData",void 0),Tl(this,"targetRules",[]),Tl(this,"sourceRules",[]),Tl(this,"moveRules",[]),Tl(this,"hasSetTargetRules",!1),Tl(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var p=this.x,f=p===void 0?0:p,y=this.y,b=y===void 0?0:y;this.transform=new Zs(-f,-b).rotate(u).translate(f,b).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||el()}this.formatText(u),Pi(this,function(b){return Ka(b,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===bo.INCREASE&&(this.zIndex=u.zIndex||ql())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,b=this.properties;Object(c.x)(b)&&(b=Object(c.I)(b));var x={id:this.id,type:this.type,x:this.x,y:this.y,properties:b};return this.rotate&&(x.rotate=this.rotate),this.graphModel.overlapMode===bo.INCREASE&&(x.zIndex=this.zIndex),y&&(x.text={x:p,y:f,value:y}),x}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return ol(ol({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return wo(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return wo(u)}},{key:"getAnchorStyle",value:function(u){var p=this.graphModel.theme.anchor;return wo(p)}},{key:"getAnchorLineStyle",value:function(u){var p=this.graphModel.theme.anchorLine;return wo(p)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return wo(u)}},{key:"isAllowConnectedAsSource",value:function(u,p,f,y){var b=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var x,k=!0,I=0;I<b.length;I++){var X=b[I];if(!X.validate.call(this,this,u,p,f,y)){k=!1,x=X.message;break}}return{isAllPass:k,msg:x}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,p,f,y){var b=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var x,k=!0,I=0;I<b.length;I++){var X=b[I];if(!X.validate.call(this,u,this,p,f,y)){k=!1,x=X.message;break}}return{isAllPass:k,msg:x}}},{key:"isAllowMoveNode",value:function(u,p){var f,y=!0,b=!0,x=function(X,J){var ve=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!ve){if(Array.isArray(X)||(ve=WO(X))||J&&X&&typeof X.length=="number"){ve&&(X=ve);var Ae=0,Re=function(){};return{s:Re,n:function(){return Ae>=X.length?{done:!0}:{done:!1,value:X[Ae++]}},e:function($t){throw $t},f:Re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ze,Je=!0,ht=!1;return{s:function(){ve=ve.call(X)},n:function(){var $t=ve.next();return Je=$t.done,$t},e:function($t){ht=!0,Ze=$t},f:function(){try{Je||ve.return==null||ve.return()}finally{if(ht)throw Ze}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(x.s();!(f=x.n()).done;){var k=(0,f.value)(this,u,p);if(!k)return!1;if(mb(k)==="object"){var I=k;if(I.x===!1&&I.y===!1)return!1;y=y&&I.x,b=b&&I.y}}}catch(X){x.e(X)}finally{x.f()}return{x:y,y:b}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,p=this.id,f=this.x,y=this.y;return u&&u.length>0?u.map(function(b,x){return b.length?(b=b,{id:"".concat(p,"_").concat(x),x:f+b[0],y:y+b[1]}):ol(ol({},b=b),{},{x:f+b.x,y:y+b.y,id:b.id||"".concat(p,"_").concat(x)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(p,f){for(var y,b=$i(f),x=Number.MAX_SAFE_INTEGER,k=0;k<b.length;k++){var I=la(p.x,p.y,b[k].x,b[k].y);I<x&&(x=I,y={index:k,anchor:Su(Su({},b[k]),{},{x:b[k].x,y:b[k].y,id:b[k].id})})}return y}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),p=this.x,f=this.y,y=this.rotate;return u.forEach(function(b){var x=b.x,k=b.y,I=ej(new Ks([x,k,1]).translate(-p,-f).rotate(y).translate(p,f)[0],2),X=I[0],J=I[1];b.x=X,b.y=J}),u}},{key:"getAnchorInfo",value:function(u){if(!QR(u))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,b=!1;if(f)y=!0,b=!0;else{var x=this.isAllowMoveNode(u,p);typeof x=="boolean"?(y=x,b=x):(y=x.x,b=x.y)}if(y){var k=this.x+u;this.x=k,this.text&&this.moveText(u,0)}if(b){var I=this.y+p;this.y=I,this.text&&this.moveText(0,p)}return y||b}},{key:"getMoveDistance",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,b=!1,x=0,k=0;if(f)y=!0,b=!0;else{var I=this.isAllowMoveNode(u,p);typeof I=="boolean"?(y=I,b=I):(y=I.x,b=I.y)}if(y&&u){var X=this.x+u;this.x=X,this.text&&this.moveText(u,0),x=u}if(b&&p){var J=this.y+p;this.y=J,this.text&&this.moveText(0,p),k=p}return[x,k]}},{key:"moveTo",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=u-this.x,b=p-this.y;return!(!f&&!this.isAllowMoveNode(y,b)||(this.text&&this.text&&this.moveText(y,b),this.x=u,this.y=p,0))}},{key:"moveText",value:function(u,p){var f=this.text,y=f.x,b=f.y,x=f.value,k=f.draggable,I=f.editable;this.text={value:x,editable:I,draggable:k,x:y+u,y:b+p}}},{key:"updateText",value:function(u){this.text=ol(ol({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"setProperty",value:function(u,p){this.properties=ol(ol({},Object(c.I)(this.properties)),{},Tl({},u,Zo(p))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=ol(ol({},Object(c.I)(this.properties)),Zo(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,p){this.style=ol(ol({},this.style),{},Tl({},u,Zo(p)))}},{key:"setStyles",value:function(u){this.style=ol(ol({},this.style),Zo(u))}},{key:"updateStyles",value:function(u){this.style=ol({},Zo(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Pi(this,u)}}],l&&tj(i.prototype,l),a}(),EO=Ar(nn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),OO=Ar(nn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xO=Ar(nn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),SO=Ar(nn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),AO=Ar(nn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),TO=Ar(nn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),MO=Ar(nn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),PO=Ar(nn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kO=Ar(nn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),NO=Ar(nn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),RO=Ar(nn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jO=Ar(nn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CO=Ar(nn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),DO=Ar(nn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),IO=Ar(nn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),LO=Ar(nn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),FO=Ar(nn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$O=Ar(nn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),BO=Ar(nn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),UO=Ar(nn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),GO=Ar(nn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VO=Ar(nn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ar(nn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"incoming"),nn.prototype),Ar(nn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"outgoing"),nn.prototype),Ar(nn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"addNodeMoveRules"),nn.prototype),Ar(nn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"move"),nn.prototype),Ar(nn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"getMoveDistance"),nn.prototype),Ar(nn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveTo"),nn.prototype),Ar(nn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveText"),nn.prototype),Ar(nn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateText"),nn.prototype),Ar(nn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setSelected"),nn.prototype),Ar(nn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHovered"),nn.prototype),Ar(nn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setIsShowAnchor"),nn.prototype),Ar(nn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setEnableRotate"),nn.prototype),Ar(nn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHitable"),nn.prototype),Ar(nn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setElementState"),nn.prototype),Ar(nn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperty"),nn.prototype),Ar(nn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperties"),nn.prototype),Ar(nn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"deleteProperty"),nn.prototype),Ar(nn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyle"),nn.prototype),Ar(nn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyles"),nn.prototype),Ar(nn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateStyles"),nn.prototype),Ar(nn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setZIndex"),nn.prototype),Ar(nn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateAttributes"),nn.prototype),nn);function gb(a){return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},gb(a)}function YO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function qO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?YO(Object(l),!0).forEach(function(u){KO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):YO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function nj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function rj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function oj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function _b(){return _b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ij(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},_b.apply(this,arguments)}function ij(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ch(a))!==null;);return a}function bb(a,i){return bb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},bb(a,i)}function aj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ch(a);if(i){var p=Ch(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return lj(this,l)}}function lj(a,i){if(i&&(gb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Em(a)}function Em(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ch(a){return Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ch(a)}function KO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function wb(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var $a,ZO,JO,Eb=(pf=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&bb(f,y)})(p,a);var i,l,u=aj(p);function p(){var f;rj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return KO(Em(f=u.call.apply(u,[this].concat(b))),"modelType",Or.CIRCLE_NODE),nj(Em(f),"r",XO,Em(f)),f}return i=p,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=_b(Ch(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return qO(qO({},f),wo(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.r;return[{x:f,y:y-b,id:"".concat(this.id,"_0")},{x:f+b,y,id:"".concat(this.id,"_1")},{x:f,y:y+b,id:"".concat(this.id,"_2")},{x:f-b,y,id:"".concat(this.id,"_3")}]}}])&&oj(i.prototype,l),p}(hf),XO=wb(pf.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),wb(pf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"width"),pf.prototype),wb(pf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"height"),pf.prototype),pf);r(129);function Ob(a){return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ob(a)}function xb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return QO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return QO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function QO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ex(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function tx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ex(Object(l),!0).forEach(function(u){rx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ex(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function nx(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Sb(){return Sb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=cj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Sb.apply(this,arguments)}function cj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ih(a))!==null;);return a}function Ab(a,i){return Ab=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ab(a,i)}function fj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ih(a);if(i){var p=Ih(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dj(this,l)}}function dj(a,i){if(i&&(Ob(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dh(a)}function Dh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ih(a){return Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ih(a)}function rx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Lh(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Qs,ox,ix,Tb=($a=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Ab(f,y)})(p,a);var i,l,u=fj(p);function p(){var f;uj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return rx(Dh(f=u.call.apply(u,[this].concat(b))),"modelType",Or.DIAMOND_NODE),nx(Dh(f),"rx",ZO,Dh(f)),nx(Dh(f),"ry",JO,Dh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=Sb(Ih(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return tx(tx({},f),wo(y))}},{key:"points",get:function(){var f=this.x,y=this.y,b=this.rx,x=this.ry;return[[f,y-x],[f+b,y],[f,y+x],[f-b,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=xb(b,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=xb(b,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,b){var x=xb(y,2);return{x:x[0],y:x[1],id:"".concat(f.id,"_").concat(b)}})}}])&&sj(i.prototype,l),p}(hf),ZO=Lh($a.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),JO=Lh($a.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Lh($a.prototype,"points",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"points"),$a.prototype),Lh($a.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"pointsPosition"),$a.prototype),Lh($a.prototype,"width",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"width"),$a.prototype),Lh($a.prototype,"height",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"height"),$a.prototype),$a);function Mb(a){return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Mb(a)}function ax(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function lx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?ax(Object(l),!0).forEach(function(u){sx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ax(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ux(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function pj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Pb(){return Pb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=vj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Pb.apply(this,arguments)}function vj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=$h(a))!==null;);return a}function kb(a,i){return kb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},kb(a,i)}function yj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$h(a);if(i){var p=$h(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return mj(this,l)}}function mj(a,i){if(i&&(Mb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fh(a)}function Fh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $h(a){return $h=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$h(a)}function sx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Om(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Nu,cx,Nb=(Qs=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&kb(f,y)})(p,a);var i,l,u=yj(p);function p(){var f;pj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return sx(Fh(f=u.call.apply(u,[this].concat(b))),"modelType",Or.ELLIPSE_NODE),ux(Fh(f),"rx",ox,Fh(f)),ux(Fh(f),"ry",ix,Fh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=Pb($h(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return lx(lx({},f),wo(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.rx,x=this.ry;return[{x:f,y:y-x,id:"".concat(this.id,"_0")},{x:f+b,y,id:"".concat(this.id,"_1")},{x:f,y:y+x,id:"".concat(this.id,"_2")},{x:f-b,y,id:"".concat(this.id,"_3")}]}}])&&hj(i.prototype,l),p}(hf),ox=Om(Qs.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),ix=Om(Qs.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Om(Qs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"width"),Qs.prototype),Om(Qs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"height"),Qs.prototype),Qs);function Rb(a){return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Rb(a)}function jb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return fx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return fx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function dx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function px(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?dx(Object(l),!0).forEach(function(u){hx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):dx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function gj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function _j(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function bj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Cb(){return Cb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=wj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Cb.apply(this,arguments)}function wj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Bh(a))!==null;);return a}function Db(a,i){return Db=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Db(a,i)}function Ej(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bh(a);if(i){var p=Bh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Oj(this,l)}}function Oj(a,i){if(i&&(Rb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xm(a)}function xm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bh(a){return Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bh(a)}function hx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sm(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ib,vx,Lb=(Nu=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Db(f,y)})(p,a);var i,l,u=Ej(p);function p(){var f;_j(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return hx(xm(f=u.call.apply(u,[this].concat(b))),"modelType",Or.POLYGON_NODE),gj(xm(f),"points",cx,xm(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=Cb(Bh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return px(px({},f),wo(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return this.points.map(function(k){return{x:k[0]+f-b/2,y:k[1]+y-x/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=jb(b,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=jb(b,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,b=this.y,x=this.width,k=this.height;return this.points.map(function(I,X){var J=jb(I,2),ve=J[0],Ae=J[1];return{x:y+ve-x/2,y:b+Ae-k/2,id:"".concat(f.id,"_").concat(X)}})}}])&&bj(i.prototype,l),p}(hf),cx=Sm(Nu.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Sm(Nu.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Nu.prototype,"pointsPosition"),Nu.prototype),Sm(Nu.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Nu.prototype,"width"),Nu.prototype),Sm(Nu.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Nu.prototype,"height"),Nu.prototype),Nu);function Fb(a){return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Fb(a)}function yx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?yx(Object(l),!0).forEach(function(u){gx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):yx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Sj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Aj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function $b(){return $b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Tj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},$b.apply(this,arguments)}function Tj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Uh(a))!==null;);return a}function Bb(a,i){return Bb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Bb(a,i)}function Mj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uh(a);if(i){var p=Uh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Pj(this,l)}}function Pj(a,i){if(i&&(Fb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Am(a)}function Am(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uh(a){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uh(a)}function gx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var xd,Ub=(Ib=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Bb(f,y)})(p,a);var i,l,u=Mj(p);function p(){var f;Sj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return gx(Am(f=u.call.apply(u,[this].concat(b))),"modelType",Or.RECT_NODE),xj(Am(f),"radius",vx,Am(f)),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+b/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-b/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=$b(Uh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return mx(mx({},f),wo(y))}}])&&Aj(i.prototype,l),p}(hf),vx=function(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(Ib.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ib);function Gb(a){return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gb(a)}function _x(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function bx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?_x(Object(l),!0).forEach(function(u){Ex(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):_x(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function kj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Nj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Vb(){return Vb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Rj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Vb.apply(this,arguments)}function Rj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Gh(a))!==null;);return a}function Wb(a,i){return Wb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Wb(a,i)}function jj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gh(a);if(i){var p=Gh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Cj(this,l)}}function Cj(a,i){if(i&&(Gb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wx(a)}function wx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gh(a){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gh(a)}function Ex(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ox(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var zb=(xd=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Wb(f,y)})(p,a);var i,l,u=jj(p);function p(){var f;kj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Ex(wx(f=u.call.apply(u,[this].concat(b))),"modelType",Or.TEXT_NODE),f}return i=p,(l=[{key:"getTextStyle",value:function(){var f=Vb(Gh(p.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return bx(bx({},f),wo(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&Nj(i.prototype,l),p}(hf),Ox(xd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(xd.prototype,"width"),xd.prototype),Ox(xd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(xd.prototype,"height"),xd.prototype),xd);function Hb(a){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hb(a)}function Dj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Ij(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Xb(a,i){return Xb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Xb(a,i)}function Lj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Tm(a);if(i){var p=Tm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Fj(this,l)}}function Fj(a,i){if(i&&(Hb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xx(a)}function xx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tm(a){return Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tm(a)}function $j(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fs,Sx,Ax,Tx,Yb=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Xb(f,y)})(p,a);var i,l,u=Lj(p);function p(){var f;Dj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return $j(xx(f=u.call.apply(u,[this].concat(b))),"modelType",Or.HTML_NODE),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+b/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-b/2,y,id:"".concat(this.id,"_3")}]}}])&&Ij(i.prototype,l),p}(hf);function Mx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function qb(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Bj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Px(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ry(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var kx=(fs=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Px(this,"graphModel",void 0),qb(this,"isShowHorizontal",Sx,this),qb(this,"isShowVertical",Ax,this),qb(this,"position",Tx,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?Mx(Object(f),!0).forEach(function(y){Px(u,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):Mx(Object(f)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,p){for(var f=u.x,y=u.y,b=!1,x=!1,k=0;k<p.length;k++){var I=p[k];if(I.id!==u.id&&(f===I.x&&(b=!0),y===I.y&&(x=!0),b&&x))break}return{isShowVertical:b,isShowHorizontal:x,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(u,p){var f,y,b=!1,x=u.id;if(x){var k=this.graphModel.fakerNode;if(k&&k.id===x)y=Bi(k);else{var I=this.graphModel.getNodeModelById(x);y=Bi(I)}}for(var X=0;X<p.length;X++){var J=p[X];if(J.id!==u.id){var ve=Bi(J);if(ve.minY===y.minY||ve.maxY===y.minY){b=!0,f=y.minY;break}if(ve.minY===y.maxY||ve.maxY===y.maxY){b=!0,f=y.maxY;break}}}return Pi({isShowHorizontal:b,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,p){var f,y,b=!1,x=u.id;if(x){var k=this.graphModel.fakerNode;if(k&&k.id===x)y=Bi(k);else{var I=this.graphModel.getNodeModelById(x);y=Bi(I)}}for(var X=0;X<p.length;X++){var J=p[X];if(J.id!==u.id){var ve=Bi(J);if(ve.minX===y.minX||ve.maxX===y.minX){b=!0,f=y.minX;break}if(ve.minX===y.maxX||ve.maxX===y.maxX){b=!0,f=y.maxX;break}}}return Pi({isShowVertical:b,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,p){var f=this.getCenterSnapLine(u,p),y=f.isShowHorizontal,b=f.isShowVertical;if(!y){var x=this.getHorizontalSnapline(u,p);x.isShowHorizontal&&(f.isShowHorizontal=x.isShowHorizontal,f.position.y=x.position.y)}if(!b){var k=this.getVerticalSnapline(u,p);k.isShowVertical&&(f.isShowVertical=k.isShowVertical,f.position.x=k.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var p=u.isShowHorizontal,f=u.isShowVertical,y=u.position;this.position=y,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var p=this.graphModel.nodes,f=this.getSnapLinePosition(u,p);this.setSnaplineInfo(f)}}],l&&Bj(i.prototype,l),a}(),Sx=ry(fs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ax=ry(fs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tx=ry(fs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ry(fs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"clearSnapline"),fs.prototype),ry(fs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"setNodeSnapLine"),fs.prototype),fs),oy=new Map,Nx=function(a){var i=el(),l=window.requestAnimationFrame(function u(){if(a(),oy.get(i)){var p=window.requestAnimationFrame(u);oy.set(i,p)}});return oy.set(i,l),i},Mm=function(a){var i=oy.get(a);i&&(window.cancelAnimationFrame(i),oy.delete(a))};function Kb(a){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kb(a)}function iy(){return iy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},iy.apply(this,arguments)}function Rx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ay(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Rx(Object(l),!0).forEach(function(u){tc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Rx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Uj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return jx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Gj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Zb(a,i){return Zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Zb(a,i)}function Vj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Pm(a);if(i){var p=Pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Wj(this,l)}}function Wj(a,i){if(i&&(Kb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(a)}function ec(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pm(a){return Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Pm(a)}function tc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var zj=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Zb(f,y)})(p,a);var i,l,u=Vj(p);function p(){var f;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,p),tc(ec(f=u.call(this)),"preTargetNode",void 0),tc(ec(f),"sourceRuleResults",void 0),tc(ec(f),"targetRuleResults",void 0),tc(ec(f),"dragHandler",void 0),tc(ec(f),"t",void 0),tc(ec(f),"onDragStart",function(y){var b=y.event,x=f.props,k=x.anchorData,I=x.nodeModel,X=x.graphModel;X.overlapMode,X.selectNodeById(I.id),I.autoToFront&&X.toFront(I.id),X.eventCenter.emit(Nn.ANCHOR_DRAGSTART,{data:k,e:b,nodeModel:I}),f.setState({startX:k.x,startY:k.y,endX:k.x,endY:k.y})}),tc(ec(f),"onDragging",function(y){var b=y.event,x=f.props,k=x.graphModel,I=x.nodeModel,X=x.anchorData,J=k.transformModel,ve=k.eventCenter,Ae=k.width,Re=k.height,Ze=k.editConfigModel,Je=Ze.autoExpand,ht=Ze.stopMoveGraph,$t=b.clientX,hn=b.clientY,dn=k.getPointByClient({x:$t,y:hn}),Hn=dn.domOverlayPosition,sn=Hn.x,In=Hn.y,wn=dn.canvasOverlayPosition,jr=wn.x,Br=wn.y;f.t&&Mm(f.t);var sr=[];sn<10?sr=[10,0]:sn+10>Ae?sr=[-10,0]:In<10?sr=[0,10]:In+10>Re&&(sr=[0,-10]),f.setState({endX:jr,endY:Br,dragging:!0}),f.moveAnchorEnd(jr,Br),sr.length>0&&!ht&&Je&&(f.t=Nx(function(){var Xr=Uj(sr,2),pi=Xr[0],hi=Xr[1];J.translate(pi,hi);var ba=f.state,tu=ba.endX,nu=ba.endY;f.setState({endX:tu-pi,endY:nu-hi}),f.moveAnchorEnd(tu-pi,nu-hi)})),ve.emit(Nn.ANCHOR_DRAG,{data:X,e:b,nodeModel:I})}),tc(ec(f),"onDragEnd",function(y){var b=y.event;f.t&&Mm(f.t);var x=f.checkEnd(b);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var k=f.props,I=k.graphModel,X=k.nodeModel,J=k.anchorData;I.eventCenter.emit(Nn.ANCHOR_DRAGEND,{data:J,e:b,nodeModel:X,edgeModel:x})}),tc(ec(f),"checkEnd",function(y){var b=f.props,x=b.graphModel,k=b.nodeModel,I=b.anchorData,X=I.x,J=I.y,ve=I.id,Ae=(x.edgeType,f.state),Re=Ae.endX,Ze=Ae.endY,Je=Ae.dragging,ht=rs({x:Re,y:Ze},x);if(f.preTargetNode&&f.preTargetNode.state!==Hr.DEFAULT&&f.preTargetNode.setElementState(Hr.DEFAULT),Je&&ht&&ht.node){var $t=ht.node,hn=ht.anchor.id,dn="".concat(k.id,"_").concat($t.id,"_").concat(hn,"_").concat(ve),Hn=f.sourceRuleResults.get(dn)||{},sn=Hn.isAllPass,In=Hn.msg,wn=f.targetRuleResults.get(dn)||{},jr=wn.isAllPass,Br=wn.msg;if(sn&&jr){$t.setElementState(Hr.DEFAULT);var sr=x.edgeGenerator(k.getData(),x.getNodeModelById(ht.node.id).getData()),Xr=x.addEdge(ay(ay({},sr),{},{sourceNodeId:k.id,sourceAnchorId:ve,startPoint:{x:X,y:J},targetNodeId:ht.node.id,targetAnchorId:ht.anchor.id,endPoint:{x:ht.anchor.x,y:ht.anchor.y}})),pi=f.props.anchorData;return x.eventCenter.emit(Nn.ANCHOR_DROP,{data:pi,e:y,nodeModel:k,edgeModel:Xr}),Xr}var hi=$t.getData();return x.eventCenter.emit(Nn.CONNECTION_NOT_ALLOWED,{data:hi,msg:Br||In||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return i=p,(l=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,b=f.style,x=f.node.getAnchorShape(y);if(x)return x;var k=y.x,I=y.y,X=ay(ay({},b),b.hover);return Object(Fe.g)("g",null,Object(Fe.g)(jh,iy({className:"lf-node-anchor-hover"},X,{x:k,y:I})),Object(Fe.g)(jh,iy({className:"lf-node-anchor"},b,{x:k,y:I})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,b=y.getAnchorIncomingEdge,x=y.getAnchorOutcomingEdge,k=f.anchorData.id;return{incomingEdgeList:b(k),outcomingEdgeList:x(k)}}},{key:"moveAnchorEnd",value:function(f,y){var b=this.props,x=b.graphModel,k=b.nodeModel,I=b.anchorData,X=rs({x:f,y},x);if(X){var J=X.node,ve=X.anchor.id;if(this.preTargetNode&&this.preTargetNode!==X.node&&this.preTargetNode.setElementState(Hr.DEFAULT),I.id===ve)return;this.preTargetNode=J;var Ae="".concat(k.id,"_").concat(J.id,"_").concat(ve,"_").concat(I.id);if(!this.targetRuleResults.has(Ae)){var Re=X.anchor,Ze=k.isAllowConnectedAsSource(J,I,Re),Je=J.isAllowConnectedAsTarget(k,I,Re);this.sourceRuleResults.set(Ae,Yl(Ze)),this.targetRuleResults.set(Ae,Yl(Je))}var ht=this.sourceRuleResults.get(Ae).isAllPass,$t=this.targetRuleResults.get(Ae).isAllPass;ht&&$t?J.setElementState(Hr.ALLOW_CONNECT):J.setElementState(Hr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Hr.DEFAULT&&this.preTargetNode.setElementState(Hr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,b=f.startY,x=f.endX,k=f.endY;return la(y,b,x,k)>10}},{key:"render",value:function(){var f=this,y=this.state,b=y.startX,x=y.startY,k=y.endX,I=y.endY,X=this.props,J=X.anchorData.edgeAddable,ve=X.edgeStyle;return Object(Fe.g)("g",{className:"lf-anchor"},Object(Fe.g)("g",{onMouseDown:function(Ae){J!==!1&&f.dragHandler.handleMouseDown(Ae)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(ay({sourcePoint:{x:b,y:x},targetPoint:{x:k,y:I}},ve)):Object(Fe.g)(Nh,iy({x1:b,y1:x,x2:k,y2:I},ve,{"pointer-events":"none"}))))}}])&&Gj(i.prototype,l),p}(Fe.a);function Cx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Hj(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Cx(Object(l),!0).forEach(function(u){Xj(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Cx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Xj(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function Yj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Dx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Dx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ix(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.value,y=a.fontSize,b=a.fill,x=b===void 0?"currentColor":b,k=a.overflowMode,I=k===void 0?"default":k,X=a.textWidth,J=X===void 0?"":X,ve=a.model,Ae={textAnchor:"middle","dominant-baseline":"middle",x:l,y:p,fill:x};if(Object.entries(a).forEach(function(hn){var dn=Yj(hn,2),Hn=dn[0],sn=dn[1];Jb(sn)!=="object"&&(Ae[Hn]=sn)}),f){var Re=String(f).split(/[\r\n]/g),Ze=Re.length;if(I!=="default"){var Je=ve.BaseType,ht=ve.modelType;if(Je===io.NODE&&ht!==Or.TEXT_NODE||Je===io.EDGE&&J)return function(hn){var dn=hn.value,Hn=hn.fontSize,sn=hn.model,In=hn.fontFamily,wn=In===void 0?"":In,jr=hn.lineHeight,Br=hn.wrapPadding,sr=Br===void 0?"0, 0":Br,Xr=hn.overflowMode,pi=hn.x,hi=hn.y,ba=sn.width,tu=sn.textHeight,nu=hn.textWidth||ba,oc=String(dn).split(/[\r\n]/g),kp=oc.length,eg=Hs({rows:oc,style:{fontSize:"".concat(Hn,"px"),width:"".concat(nu,"px"),fontFamily:wn,lineHeight:jr,padding:sr},rowsLength:kp,className:"lf-get-text-height"}),Np=sn.height>eg?sn.height:eg;tu&&(Np=tu);var Td=Xr==="ellipsis";return Td&&(Np=Hn+2),Object(Fe.g)("g",null,Object(Fe.g)("foreignObject",{width:nu,height:Np,x:pi-nu/2,y:hi-Np/2},Object(Fe.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Np,width:nu,padding:sr}},Object(Fe.g)("div",{className:Td?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Td?oc.join(""):"",style:Hj({},hn)},oc.map(function(Md){return Object(Fe.g)("div",{className:"lf-node-text--auto-wrap-inner"},Md)})))))}(a)}if(Ze>1){var $t=Re.map(function(hn,dn){var Hn=(dn-(Ze-1)/2)*(y+2);return Object(Fe.g)("tspan",{className:"lf-text-tspan",x:l,y:p+Hn},hn)});return Object(Fe.g)("text",Ae,$t)}return Object(Fe.g)("text",Ae,f)}}function Qb(a){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qb(a)}function e0(){return e0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},e0.apply(this,arguments)}function qj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Lx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Lx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Kj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function t0(a,i){return t0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},t0(a,i)}function Zj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=km(a);if(i){var p=km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Jj(this,l)}}function Jj(a,i){if(i&&(Qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sd(a)}function Sd(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function km(a){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},km(a)}function Ap(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Fx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&t0(f,y)})(p,a);var i,l,u=Zj(p);function p(f){var y;(function(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")})(this,p),Ap(Sd(y=u.call(this)),"dragHandler",void 0),Ap(Sd(y),"sumDeltaX",0),Ap(Sd(y),"sumDeltaY",0),Ap(Sd(y),"stepDrag",void 0),Ap(Sd(y),"onDragging",function(x){var k=x.deltaX,I=x.deltaY,X=y.props,J=X.model,ve=qj(X.graphModel.transformModel.fixDeltaXY(k,I),2),Ae=ve[0],Re=ve[1];J.moveText(Ae,Re)}),Ap(Sd(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(Hr.TEXT_EDIT)}),Ap(Sd(y),"mouseDownHandle",function(x){var k=y.props,I=k.draggable,X=k.model,J=k.graphModel.editConfigModel.nodeTextDraggable;(I||J)&&(y.stepDrag.model=X,y.stepDrag.handleMouseDown(x))}),f.model;var b=f.draggable;return y.stepDrag=new ee({onDragging:y.onDragging,step:1,isStopPropagation:b}),y}return i=p,(l=[{key:"getShape",value:function(){var f=this.props,y=f.model,b=f.graphModel,x=y.text,k=b.editConfigModel,I=x.value,X=x.x,J=x.y,ve=x.editable,Ae=x.draggable,Re={x:X,y:J,className:"",value:I};ve?Re.className="lf-element-text":Ae||k.nodeTextDraggable?Re.className="lf-text-draggable":Re.className="lf-text-disabled";var Ze=y.getTextStyle();return Object(Fe.g)(Ix,e0({},Re,Ze,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Fe.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&Kj(i.prototype,l),p}(Fe.a),Qj=Xu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,$x=r(130);function n0(a){return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n0(a)}function r0(){return r0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},r0.apply(this,arguments)}function eC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function o0(a,i){return o0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},o0(a,i)}function tC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Nm(a);if(i){var p=Nm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return nC(this,l)}}function nC(a,i){if(i&&(n0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vh(a)}function Vh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Nm(a){return Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nm(a)}function ly(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var rC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&o0(f,y)})(p,a);var i,l,u=tC(p);function p(f){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),ly(Vh(y=u.call(this,f)),"style",{}),ly(Vh(y),"defaultAngle",void 0),ly(Vh(y),"normal",void 0),ly(Vh(y),"stepperDrag",void 0),ly(Vh(y),"onDragging",function(b){var x,k=b.event,I=y.props,X=I.graphModel,J=I.nodeModel,ve=I.eventCenter,Ae=X.selectNodes,Re=J.x,Ze=J.y,Je=k.clientX,ht=k.clientY,$t=X.getPointByClient({x:Je,y:ht}).canvasOverlayPosition,hn=$t.x,dn=$t.y,Hn=new Q(hn-Re,dn-Ze),sn=((x=y.normal)===null||x===void 0?void 0:x.angle(Hn))-y.defaultAngle,In=new Zs(-Re,-Ze).rotate(sn).translate(Re,Ze).toString();J.transform=In,J.rotate=sn;var wn=Object($x.map)(Ae,function(Br){return Br.id});wn.indexOf(J.id)===-1&&(wn=[J.id]);var jr=Object($x.reduce)(wn,function(Br,sr){var Xr=X.getNodeModelById(sr);return Br[sr]=Xr==null?void 0:Xr.getMoveDistance(0,0,!1),Br},{});wn.forEach(function(Br){X.getNodeEdges(Br).forEach(function(sr){if(jr[sr.sourceNodeId]){var Xr=X.getNodeModelById(sr.sourceNodeId).anchors.find(function(hi){return hi.id===sr.sourceAnchorId});sr.updateStartPoint(Xr)}if(jr[sr.targetNodeId]){var pi=X.getNodeModelById(sr.targetNodeId).anchors.find(function(hi){return hi.id===sr.targetAnchorId});sr.updateEndPoint(pi)}})}),ve.emit(Nn.NODE_ROTATE,{e:k,nodeModel:J})}),y.style=f.style,y.stepperDrag=new ee({onDragging:y.onDragging}),y}return i=p,(l=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,b=y.x,x=y.y,k=b+y.width/2+20,I=x-y.height/2-20;return this.normal=new Q(1,0),this.defaultAngle=this.normal.angle(new Q(k-b,I-x)),y.defaultAngle=this.defaultAngle,Object(Fe.g)("g",{className:"lf-rotate-control"},Object(Fe.g)("g",{onMouseDown:function(X){f.stepperDrag.handleMouseDown(X)}},Object(Fe.g)(jh,r0({},this.style,{cx:k,cy:I}))))}}])&&eC(i.prototype,l),p}(Fe.a);function i0(a){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i0(a)}var oC=["className"];function Rm(){return Rm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rm.apply(this,arguments)}function iC(a,i){if(a==null)return{};var l,u,p=function(y,b){if(y==null)return{};var x,k,I={},X=Object.keys(y);for(k=0;k<X.length;k++)x=X[k],b.indexOf(x)>=0||(I[x]=y[x]);return I}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function jm(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Bx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Bx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ux(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a0(a,i){return a0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a0(a,i)}function aC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cm(a);if(i){var p=Cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return lC(this,l)}}function lC(a,i){if(i&&(i0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qi(a)}function Qi(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Cm(a){return Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Cm(a)}function ca(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var vf=function(a){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&a0(y,b)})(f,a);var i,l,u,p=aC(f);function f(y){var b;(function(J,ve){if(!(J instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,f),ca(Qi(b=p.call(this)),"t",void 0),ca(Qi(b),"moveOffset",void 0),ca(Qi(b),"stepDrag",void 0),ca(Qi(b),"contextMenuTime",void 0),ca(Qi(b),"mouseUpDrag",void 0),ca(Qi(b),"startTime",void 0),ca(Qi(b),"clickTimer",void 0),ca(Qi(b),"modelDisposer",void 0),ca(Qi(b),"onDragStart",function(J){var ve=J.event,Ae=ve.clientX,Re=ve.clientY,Ze=b.props,Je=Ze.model,ht=Ze.graphModel.getPointByClient({x:Ae,y:Re}).canvasOverlayPosition,$t=ht.x,hn=ht.y;b.moveOffset={x:Je.x-$t,y:Je.y-hn}}),ca(Qi(b),"onDragging",function(J){var ve=J.event,Ae=b.props,Re=Ae.model,Ze=Ae.graphModel,Je=Ze.editConfigModel,ht=Je.stopMoveGraph,$t=Je.autoExpand,hn=Ze.transformModel,dn=Ze.selectNodes,Hn=Ze.width,sn=Ze.height,In=Ze.gridSize;Re.isDragging=!0;var wn=ve.clientX,jr=ve.clientY,Br=Ze.getPointByClient({x:wn,y:jr}).canvasOverlayPosition,sr=Br.x,Xr=Br.y,pi=jm(hn.CanvasPointToHtmlPoint([sr,Xr]),2),hi=pi[0],ba=pi[1];if(sr+=b.moveOffset.x,Xr+=b.moveOffset.y,sr=wl(sr,In),Xr=wl(Xr,In),Hn&&sn){if(!$t||ht||!(hi<0||ba<0||hi>Hn||ba>sn)){var tu=jm(hn.CanvasPointToHtmlPoint([sr-Re.width/2,Xr-Re.height/2]),2),nu=tu[0],oc=tu[1],kp=jm(hn.CanvasPointToHtmlPoint([sr+Re.width/2,Xr+Re.height/2]),2),eg=kp[0],Np=kp[1],Td=Math.max(In,20),Md=[];nu<0?Md=[Td,0]:eg>Ze.width?Md=[-Td,0]:oc<0?Md=[0,Td]:Np>Ze.height&&(Md=[0,-Td]),b.t&&Mm(b.t);var WD=new Zs(-sr,-Xr).rotate(Re.rotate).translate(sr,Xr).toString();Re.transform=WD;var tg=dn.map(function(ng){return ng.id});tg.indexOf(Re.id)===-1&&(tg=[Re.id]),Md.length>0&&!ht&&$t?b.t=Nx(function(){var ng=jm(Md,2),wS=ng[0],ES=ng[1];hn.translate(wS,ES);var zD=-wS/hn.SCALE_X,HD=-ES/hn.SCALE_X;Ze.moveNodes(tg,zD,HD)}):Ze.moveNodes(tg,sr-Re.x,Xr-Re.y)}}else Ze.moveNode2Coordinate(Re.id,sr,Xr)}),ca(Qi(b),"onDragEnd",function(){b.t&&Mm(b.t),b.props.model.isDragging=!1}),ca(Qi(b),"handleMouseUp",function(){var J=b.props.model;b.mouseUpDrag=J.isDragging}),ca(Qi(b),"handleClick",function(J){var ve=b.mouseUpDrag===!1;if(b.startTime){var Ae=b.props,Re=Ae.model,Ze=Ae.graphModel;if(ve){var Je={data:Re.getData(),e:J,position:Ze.getPointByClient({x:J.clientX,y:J.clientY}),isSelected:!1,isMultiple:!1},ht=J.button===2,$t=J.detail===2;if(!ht){var hn=Ze.editConfigModel,dn=dd(J,hn);Je.isMultiple=dn,Re.isSelected&&!$t&&dn?(Je.isSelected=!1,Re.setSelected(!1)):(Ze.selectNodeById(Re.id,dn),Je.isSelected=!0,b.toFront()),$t?(hn.nodeTextEdit&&Re.text.editable&&(Re.setSelected(!1),Ze.setElementStateById(Re.id,Hr.TEXT_EDIT)),Ze.eventCenter.emit(Nn.NODE_DBCLICK,Je)):(Ze.eventCenter.emit(Nn.ELEMENT_CLICK,Je),Ze.eventCenter.emit(Nn.NODE_CLICK,Je))}}}}),ca(Qi(b),"handleContextMenu",function(J){J.preventDefault();var ve=b.props,Ae=ve.model,Re=ve.graphModel,Ze=Ae.getData(),Je=Re.getPointByClient({x:J.clientX,y:J.clientY});Re.setElementStateById(Ae.id,Hr.SHOW_MENU,Je.domOverlayPosition),Ae.isSelected||Re.selectNodeById(Ae.id),Re.eventCenter.emit(Nn.NODE_CONTEXTMENU,{data:Ze,e:J,position:Je}),b.toFront()}),ca(Qi(b),"handleMouseDown",function(J){var ve=b.props,Ae=ve.model,Re=ve.graphModel;b.startTime=new Date().getTime(),Re.editConfigModel.adjustNodePosition&&Ae.draggable&&b.stepDrag&&b.stepDrag.handleMouseDown(J)}),ca(Qi(b),"setHoverON",function(J){var ve=b.props,Ae=ve.model,Re=ve.graphModel;if(!Ae.isHovered){var Ze=Ae.getData();Ae.setHovered(!0),Re.eventCenter.emit(Nn.NODE_MOUSEENTER,{data:Ze,e:J})}}),ca(Qi(b),"setHoverOFF",function(J){var ve=b.props,Ae=ve.model,Re=ve.graphModel,Ze=Ae.getData();Ae.isHovered&&(Ae.setHovered(!1),Re.eventCenter.emit(Nn.NODE_MOUSELEAVE,{data:Ze,e:J}))}),ca(Qi(b),"onMouseOut",function(J){Qj&&b.setHoverOFF(J)});var x=y.graphModel,k=x.gridSize,I=x.eventCenter,X=y.model;return b.stepDrag=new ee({onDragStart:b.onDragStart,onDragging:b.onDragging,onDragEnd:b.onDragEnd,step:k,eventType:"NODE",isStopPropagation:!1,eventCenter:I,model:X}),b.modelDisposer=Object(c.F)(function(){return b.props},function(J){J&&J.model&&b.stepDrag.setModel(J.model)}),b}return i=f,u=[{key:"getModel",value:function(y){return y}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,b=this.props,x=b.model,k=b.graphModel,I=x.isSelected,X=x.isHitable,J=x.isDragging,ve=x.isShowAnchor;return X&&(I||ve)&&!J?Xf(x.anchors,function(Ae,Re){var Ze=x.getAnchorLineStyle(Ae),Je=x.getAnchorStyle(Ae);return Object(Fe.g)(zj,{anchorData:Ae,node:y,style:Je,edgeStyle:Ze,anchorIndex:Re,nodeModel:x,graphModel:k,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,b=y.model,x=y.graphModel,k=b.isSelected,I=b.isHitable,X=b.enableRotate,J=b.isHovered,ve=b.getRotateControlStyle().style;if(I&&(k||J)&&X)return Object(Fe.g)(rC,{graphModel:x,nodeModel:b,eventCenter:x.eventCenter,style:ve})}},{key:"getText",value:function(){var y=this.props,b=y.model,x=y.graphModel;if(b.state===Hr.TEXT_EDIT)return"";if(b.text){var k=x.editConfigModel,I=!1;return(b.text.draggable||k.nodeTextDraggable)&&(I=!0),Object(Fe.g)(Fx,{editable:k.nodeTextEdit&&b.text.editable,model:b,graphModel:x,draggable:I})}}},{key:"getStateClassName",value:function(){var y=this.props.model,b=y.state,x=y.isDragging,k=y.isSelected,I="lf-node";switch(b){case Hr.ALLOW_CONNECT:I+=" lf-node-allow";break;case Hr.NOT_ALLOW_CONNECT:I+=" lf-node-not-allow";break;default:I+=" lf-node-default"}return x&&(I+=" lf-isDragging"),k&&(I+=" lf-node-selected"),I}},{key:"toFront",value:function(){var y=this.props,b=y.model,x=y.graphModel;b.autoToFront&&x.toFront(b.id)}},{key:"render",value:function(){var y,b=this.props,x=b.model,k=b.graphModel,I=k.editConfigModel,X=I.hideAnchors,J=I.adjustNodePosition,ve=I.allowRotation,Ae=k.gridSize,Re=k.transformModel.SCALE_X,Ze=x.isHitable,Je=x.draggable,ht=x.transform,$t=x.getOuterGAttributes(),hn=$t.className,dn=hn===void 0?"":hn,Hn=iC($t,oC),sn=Object(Fe.g)("g",{className:"lf-node-content"},Object(Fe.g)("g",{transform:ht},this.getShape(),this.getText(),ve&&this.getRotateControl()),!X&&this.getAnchors());return Ze?(J&&Je&&this.stepDrag.setStep(Ae*Re),y=Object(Fe.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Hn),sn)):y=Object(Fe.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn)},Hn),sn),y}}])&&Ux(i.prototype,l),u&&Ux(i,u),f}(Fe.a);function l0(a){return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l0(a)}function u0(){return u0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},u0.apply(this,arguments)}function uC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s0(a,i){return s0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s0(a,i)}function cC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Dm(a);if(i){var p=Dm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fC(this,l)}}function fC(a,i){if(i&&(l0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Dm(a){return Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Dm(a)}var c0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&s0(f,y)})(p,a);var i,l,u=cC(p);function p(){return uC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Fe.g)(Ed,u0({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&sC(i.prototype,l),p}(vf);function f0(a){return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f0(a)}function d0(){return d0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},d0.apply(this,arguments)}function dC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function pC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p0(a,i){return p0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},p0(a,i)}function hC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Im(a);if(i){var p=Im(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return vC(this,l)}}function vC(a,i){if(i&&(f0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Im(a){return Im=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Im(a)}var h0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&p0(f,y)})(p,a);var i,l,u=hC(p);function p(){return dC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.r,k=f.getNodeStyle();return Object(Fe.g)(jh,d0({},k,{x:y,y:b,r:x}))}}])&&pC(i.prototype,l),p}(vf);function v0(a){return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},v0(a)}function yC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Gx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Gx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Vx(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(p){var f=yC(p,2),y=f[0],b=f[1];v0(b)!=="object"&&(u[y]=b)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(p){return p.join(",")}).join(" "),Object(Fe.g)("polygon",u)}function y0(a){return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},y0(a)}function m0(){return m0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},m0.apply(this,arguments)}function mC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function g0(a,i){return g0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},g0(a,i)}function _C(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Lm(a);if(i){var p=Lm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return bC(this,l)}}function bC(a,i){if(i&&(y0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Lm(a){return Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lm(a)}var _0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&g0(f,y)})(p,a);var i,l,u=_C(p);function p(){return mC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.width,k=f.height,I=f.points,X=f.getNodeStyle(),J={transform:"matrix(1 0 0 1 ".concat(y-x/2," ").concat(b-k/2,")")};return Object(Fe.g)("g",J,Object(Fe.g)(Vx,m0({},X,{points:I,x:y,y:b})))}}])&&gC(i.prototype,l),p}(vf);function b0(a){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},b0(a)}function w0(){return w0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},w0.apply(this,arguments)}function wC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function EC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function E0(a,i){return E0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},E0(a,i)}function OC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fm(a);if(i){var p=Fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return xC(this,l)}}function xC(a,i){if(i&&(b0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fm(a){return Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fm(a)}var O0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&E0(f,y)})(p,a);var i,l,u=OC(p);function p(){return wC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Fe.g)("g",null,Object(Fe.g)(Vx,w0({},y,{points:f.points,x:f.x,y:f.y})))}}])&&EC(i.prototype,l),p}(vf);function x0(a){return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},x0(a)}function SC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Wx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Wx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function AC(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.rx,y=f===void 0?4:f,b=a.ry,x=b===void 0?4:b,k=a.className,I={cx:l,cy:p,rx:y,ry:x,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(X){var J=SC(X,2),ve=J[0],Ae=J[1];x0(Ae)!=="object"&&(I[ve]=Ae)}),I.className=k?"lf-basic-shape ".concat(k):"lf-basic-shape",Object(Fe.g)("ellipse",I)}function S0(a){return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},S0(a)}function A0(){return A0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},A0.apply(this,arguments)}function TC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function MC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function T0(a,i){return T0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},T0(a,i)}function PC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$m(a);if(i){var p=$m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return kC(this,l)}}function kC(a,i){if(i&&(S0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function $m(a){return $m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$m(a)}var M0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&T0(f,y)})(p,a);var i,l,u=PC(p);function p(){return TC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Fe.g)(AC,A0({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&MC(i.prototype,l),p}(vf);function P0(a){return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},P0(a)}function zx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Hx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?zx(Object(l),!0).forEach(function(u){NC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):zx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function NC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function RC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function k0(a,i){return k0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},k0(a,i)}function CC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bm(a);if(i){var p=Bm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return DC(this,l)}}function DC(a,i){if(i&&(P0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Bm(a){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bm(a)}var N0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&k0(f,y)})(p,a);var i,l,u=CC(p);function p(){return RC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),b=f.width,x=f.height,k=f.x,I=f.y,X=Hx(Hx({},y.background),{},{x:k,y:I-1,width:b,height:x});return Object(Fe.g)(Ed,X)}},{key:"getShape",value:function(){return Object(Fe.g)("g",null,this.getBackground())}}])&&jC(i.prototype,l),p}(vf);function R0(a){return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},R0(a)}function j0(){return j0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},j0.apply(this,arguments)}function IC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function LC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function C0(a,i){return C0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},C0(a,i)}function FC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Um(a);if(i){var p=Um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return $C(this,l)}}function $C(a,i){if(i&&(R0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uy(a)}function uy(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function Gm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var D0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&C0(f,y)})(p,a);var i,l,u=FC(p);function p(){var f;IC(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Gm(uy(f=u.call.apply(u,[this].concat(b))),"ref",void 0),Gm(uy(f),"currentProperties",void 0),Gm(uy(f),"preProperties",void 0),Gm(uy(f),"setRef",function(k){f.ref=k}),f}return i=p,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.height,k=f.width,I=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Fe.g)("foreignObject",j0({},I,{x:y-k/2,y:b-x/2,width:k,height:x,ref:this.setRef}))}}])&&LC(i.prototype,l),p}(vf);function I0(a){return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},I0(a)}function L0(){return L0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},L0.apply(this,arguments)}function Xx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Tp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Xx(Object(l),!0).forEach(function(u){B0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Xx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function BC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function F0(a,i){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(a,i)}function UC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vm(a);if(i){var p=Vm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return GC(this,l)}}function GC(a,i){if(i&&(I0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $0(a)}function $0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vm(a){return Vm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vm(a)}function B0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var VC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F0(f,y)})(p,a);var i,l,u=UC(p);function p(f){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),B0($0(y=u.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),B0($0(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),b=f.text,x=f.width,k=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(k=Tp(Tp({},k),y.hover.background)),b&&b.value&&k.fill!=="transparent"){var I,X=y.fontSize,J=y.overflowMode,ve=y.lineHeight,Ae=y.wrapPadding,Re=y.textWidth,Ze=b.value,Je=b.x,ht=b.y,$t=String(Ze).split(/[\r\n]/g),hn=$t.length;if(J==="autoWrap"&&Re){var dn=Hs({rows:$t,style:{fontSize:"".concat(X,"px"),width:"".concat(Re,"px"),lineHeight:ve,padding:Ae},rowsLength:hn,className:"lf-get-text-height"});I=Tp(Tp({},k),{},{x:Je-1,y:ht-1,width:Re,height:dn})}else{$t&&$t.forEach(function(jr){Zn(jr)});var Hn=is({rows:$t,fontSize:X,rowsLength:hn}),sn=Hn.width,In=Hn.height;if(J==="ellipsis"&&(sn=Re||x,In=X+2),typeof k.wrapPadding=="string"){var wn=k.wrapPadding.split(",").filter(function(jr){return jr.trim()}).map(function(jr){return parseFloat(jr.trim())});wn.length>0&&wn.length<=4&&(wn.length===1?wn=[wn[0],wn[0],wn[0],wn[0]]:wn.length===2?wn=[wn[0],wn[1],wn[0],wn[1]]:wn.length===3&&(wn=[wn[0],wn[1],wn[2],wn[1]]),sn+=wn[1]+wn[3],In+=wn[0]+wn[2],Je+=(wn[1]-wn[3])/2,ht+=(wn[2]-wn[0])/2)}I=Tp(Tp({},k),{},{x:Je-1,y:ht-1,width:sn,height:In})}return Object(Fe.g)(Ed,I)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,b=y.value,x=y.x,k=y.y;if(b){var I=Tp({x,y:k,className:"lf-element-text",value:b},f.getTextStyle());return Object(Fe.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Fe.g)(Ix,L0({},I,{model:f})))}}}])&&BC(i.prototype,l),p}(Fx);function U0(a){return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},U0(a)}var nc,WC=["text","sourceAnchorId","targetAnchorId"];function Yx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function yf(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Yx(Object(l),!0).forEach(function(u){eu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Yx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function zC(a,i){if(a==null)return{};var l,u,p=function(y,b){if(y==null)return{};var x,k,I={},X=Object.keys(y);for(k=0;k<X.length;k++)x=X[k],b.indexOf(x)>=0||(I[x]=y[x]);return I}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function HC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function XC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function G0(a,i){return G0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},G0(a,i)}function YC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wm(a);if(i){var p=Wm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return qC(this,l)}}function qC(a,i){if(i&&(U0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ql(a)}function Ql(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wm(a){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wm(a)}function eu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(nc||(nc={}));var Kx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&G0(f,y)})(p,a);var i,l,u=YC(p);function p(f){var y;(function(I,X){if(!(I instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),eu(Ql(y=u.call(this)),"stepDragData",void 0),eu(Ql(y),"stepDrag",void 0),eu(Ql(y),"oldEdge",void 0),eu(Ql(y),"preTargetNode",void 0),eu(Ql(y),"targetRuleResults",void 0),eu(Ql(y),"sourceRuleResults",void 0),eu(Ql(y),"handleMouseDown",function(I){y.stepDrag&&y.stepDrag.handleMouseDown(I)}),eu(Ql(y),"onDragStart",function(){var I=y.props,X=I.x,J=I.y,ve=I.edgeModel,Ae=ve.startPoint,Re=ve.endPoint,Ze=ve.pointsList;y.oldEdge={startPoint:Ae,endPoint:Re,pointsList:Ze},y.setState({endX:X,endY:J,dragging:!0})}),eu(Ql(y),"onDragging",function(I){var X=I.deltaX,J=I.deltaY,ve=y.state,Ae=ve.endX,Re=ve.endY,Ze=y.props,Je=Ze.graphModel,ht=Ze.type,$t=Je.transformModel,hn=Je.editConfigModel,dn=HC($t.moveCanvasPointByHtml([Ae,Re],X,J),2),Hn=dn[0],sn=dn[1];y.setState({endX:Hn,endY:sn,dragging:!0});var In=y.props.edgeModel,wn=rs({x:Ae,y:Re},Je);if(wn&&wn.node&&y.isAllowAdjust(wn).pass){var jr,Br=In.startPoint,sr=In.endPoint,Xr=In.sourceNode,pi=In.targetNode;ht===nc.SOURCE?jr={startPoint:{x:wn.anchor.x,y:wn.anchor.y},endPoint:{x:sr.x,y:sr.y},sourceNode:wn.node,targetNode:pi}:ht===nc.TARGET&&(jr={startPoint:{x:Br.x,y:Br.y},endPoint:{x:wn.anchor.x,y:wn.anchor.y},sourceNode:Xr,targetNode:wn.node}),In.updateAfterAdjustStartAndEnd(jr)}else ht===nc.SOURCE?In.updateStartPoint({x:Hn,y:sn}):ht===nc.TARGET&&In.updateEndPoint({x:Hn,y:sn});In.text.value&&hn.adjustEdge&&In.setText(Object.assign({},In.text,In.textPosition))}),eu(Ql(y),"onDragEnd",function(I){var X=I.event;try{var J;y.setState({dragging:!1});var ve=y.props,Ae=ve.graphModel,Re=ve.edgeModel,Ze=ve.type,Je=y.state,ht=Je.endX,$t=Je.endY,hn=Je.dragging,dn=rs({x:ht,y:$t},Ae);if(!hn)return;var Hn,sn=!1;if(dn&&dn.node){var In=y.isAllowAdjust(dn),wn=In.pass,jr=In.msg,Br=In.newTargetNode;if(wn){var sr=Re.getData(),Xr=sr.text,pi=sr.sourceAnchorId,hi=pi===void 0?"":pi,ba=sr.targetAnchorId;Hn=yf(yf({sourceAnchorId:hi,targetAnchorId:ba===void 0?"":ba},zC(sr,WC)),{},{text:(Xr==null?void 0:Xr.value)||""}),Ze===nc.SOURCE?(Hn=yf(yf({},Ae.edgeGenerator(Ae.getNodeModelById(dn.node.id).getData(),Ae.getNodeModelById(Re.targetNodeId).getData(),Hn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:Re.targetNodeId,endPoint:yf({},Re.endPoint)}),Re.sourceNodeId===dn.node.id&&Re.sourceAnchorId===dn.anchor.id&&(sn=!0)):Ze===nc.TARGET&&(Hn=yf(yf({},Ae.edgeGenerator(Ae.getNodeModelById(Re.sourceNodeId).getData(),Ae.getNodeModelById(dn.node.id).getData(),Hn)),{},{sourceNodeId:Re.sourceNodeId,startPoint:yf({},Re.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),Re.targetNodeId===dn.node.id&&Re.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var tu=Br.getData();Ae.eventCenter.emit(Nn.CONNECTION_NOT_ALLOWED,{data:tu,msg:jr})}}else sn=!0;if(sn)y.recoveryEdge();else{var nu=Re.getData();Ae.deleteEdgeById(Re.id);var oc=Ae.addEdge(yf({},Hn));Ae.eventCenter.emit(Nn.EDGE_EXCHANGE_NODE,{data:{newEdge:oc.getData(),oldEdge:nu}})}(J=y.preTargetNode)===null||J===void 0||J.setElementState(Hr.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(Nn.ADJUST_POINT_DRAGEND,{e:X,data:y.stepDragData})}}),eu(Ql(y),"recoveryEdge",function(){var I=y.props.edgeModel,X=y.oldEdge,J=X.startPoint,ve=X.endPoint,Ae=X.pointsList;I.updateStartPoint(J),I.updateEndPoint(ve),I.modelType!==Or.LINE_EDGE&&(I.pointsList=Ae,I.initPoints())}),eu(Ql(y),"getAdjustPointStyle",function(){var I=y.props,X=I.graphModel.theme;return I.edgeModel,X.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var b=f.type,x=f.edgeModel,k=f.graphModel.eventCenter;return y.stepDragData={type:b,edgeData:x.getData()},y.stepDrag=new ee({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:k,data:y.stepDragData}),y}return i=p,(l=[{key:"isAllowAdjust",value:function(f){var y=this.props,b=y.edgeModel,x=b.id,k=b.sourceNode,I=b.targetNode,X=b.sourceAnchorId,J=b.targetAnchorId,ve=y.type,Ae=null,Re=null,Ze=null,Je=null;if(ve===nc.SOURCE?(Ae=f.node,Re=I,Ze=f.anchor,Je=I.getAnchorInfo(J)):(Ae=k,Re=f.node,Je=f.anchor,Ze=k.getAnchorInfo(X)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Hr.DEFAULT),this.preTargetNode=f.node,Je.id===Ze.id)return{pass:!1,msg:"",newTargetNode:Re};var ht="".concat(Ae.id,"_").concat(Re.id,"_").concat(Ze.id,"_").concat(Je.id);if(!this.targetRuleResults.has(ht)){var $t=Ae.isAllowConnectedAsSource(Re,Ze,Je,x),hn=Re.isAllowConnectedAsTarget(Ae,Ze,Je,x);this.sourceRuleResults.set(ht,Yl($t)),this.targetRuleResults.set(ht,Yl(hn))}var dn=this.sourceRuleResults.get(ht),Hn=dn.isAllPass,sn=dn.msg,In=this.targetRuleResults.get(ht),wn=In.isAllPass,jr=In.msg,Br=Hn&&wn?Hr.ALLOW_CONNECT:Hr.NOT_ALLOW_CONNECT;return ve===nc.SOURCE?Ae.setElementState(Br):Re.setElementState(Br),{pass:Hn&&wn,msg:jr||sn,newTargetNode:Re}}},{key:"render",value:function(){var f=this.props,y=f.x,b=f.y,x=f.getAdjustPointShape,k=f.edgeModel,I=this.state.dragging;return Object(Fe.g)("g",{pointerEvents:I?"none":"",onMouseDown:this.handleMouseDown},I?"":x(y,b,k))}}])&&XC(i.prototype,l),p}(Fe.a);function V0(a){return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V0(a)}function sy(){return sy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},sy.apply(this,arguments)}function KC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Zx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ZC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function JC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function W0(a,i){return W0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},W0(a,i)}function QC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zm(a);if(i){var p=zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return eD(this,l)}}function eD(a,i){if(i&&(V0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(a)}function ds(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zm(a){return zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zm(a)}function rc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var cy=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&W0(f,y)})(p,a);var i,l,u=QC(p);function p(){var f;ZC(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return rc(ds(f=u.call.apply(u,[this].concat(b))),"startTime",void 0),rc(ds(f),"contextMenuTime",void 0),rc(ds(f),"clickTimer",void 0),rc(ds(f),"textRef",Object(Fe.f)()),rc(ds(f),"handleHover",function(k,I){var X=f.props,J=X.model,ve=X.graphModel.eventCenter;J.setHovered(k);var Ae=k?Nn.EDGE_MOUSEENTER:Nn.EDGE_MOUSELEAVE,Re=J.getData();ve.emit(Ae,{data:Re,e:I})}),rc(ds(f),"setHoverON",function(k){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,k))}),rc(ds(f),"setHoverOFF",function(k){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,k))}),rc(ds(f),"handleContextMenu",function(k){k.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var I=f.props,X=I.model,J=I.graphModel,ve=J.getPointByClient({x:k.clientX,y:k.clientY});J.setElementStateById(X.id,Hr.SHOW_MENU,ve.domOverlayPosition),f.toFront(),X.isSelected||J.selectEdgeById(X.id);var Ae=X==null?void 0:X.getData();J.eventCenter.emit(Nn.EDGE_CONTEXTMENU,{data:Ae,e:k,position:ve})}),rc(ds(f),"handleMouseDown",function(k){k.stopPropagation(),f.startTime=new Date().getTime()}),rc(ds(f),"handleMouseUp",function(k){if(f.startTime&&!(new Date().getTime()-f.startTime>200||k.button===2)){var I=k.detail===2,X=f.props,J=X.model,ve=X.graphModel,Ae=J==null?void 0:J.getData(),Re=ve.getPointByClient({x:k.clientX,y:k.clientY});if(I){var Ze=ve.editConfigModel,Je=ve.textEditElement;if(Je&&Je.id===J.id&&ve.setElementStateById(J.id,Hr.DEFAULT),Ze.edgeTextEdit&&J.text.editable&&ve.setElementStateById(J.id,Hr.TEXT_EDIT),J.modelType===Or.POLYLINE_EDGE){var ht=J,$t=ve.getPointByClient({x:k.x,y:k.y}).canvasOverlayPosition,hn=$t.x,dn=$t.y,Hn=Zl({x:hn,y:dn},ht.points);ht.dbClickPosition=Hn}ve.eventCenter.emit(Nn.EDGE_DBCLICK,{data:Ae,e:k,position:Re})}else ve.eventCenter.emit(Nn.ELEMENT_CLICK,{data:Ae,e:k,position:Re}),ve.eventCenter.emit(Nn.EDGE_CLICK,{data:Ae,e:k,position:Re});var sn=ve.editConfigModel;ve.selectEdgeById(J.id,dd(k,sn)),f.toFront()}}),f}return i=p,(l=[{key:"getShape",value:function(){return Object(Fe.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,b=f.graphModel;if(y.state===Hr.TEXT_EDIT)return null;var x=!1,k=b.editConfigModel;return(y.text.draggable||k.edgeTextDraggable)&&(x=!0),Object(Fe.g)(VC,{ref:this.textRef,editable:k.edgeTextEdit&&y.text.editable,model:y,graphModel:b,draggable:x})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=f.isSelected;return{start:y,end:b,hover:this.state.hover,isSelected:x}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,b=f.getArrowStyle(),x=b.refY,k=x===void 0?0:x,I=b.refX,X=I===void 0?2:I,J=KC(this.getLastTwoPoints(),2),ve=J[0],Ae=J[1],Re="auto";return ve!==null&&Ae!==null&&(Re=Ke(ct({x:Ae.x-ve.x,y:Ae.y-ve.y,z:0}))),Object(Fe.g)("g",null,Object(Fe.g)("defs",null,Object(Fe.g)("marker",{id:"marker-start-".concat(y),refX:-X,refY:k,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Fe.g)("marker",{id:"marker-end-".concat(y),refX:X,refY:k,overflow:"visible",orient:Re,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Fe.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,b=f.strokeWidth,x=f.offset,k=f.verticalLength;return Object(Fe.g)("path",{stroke:y,fill:y,strokeWidth:b,transform:"rotate(180)",d:"M 0 0 L ".concat(x," -").concat(k," L ").concat(x," ").concat(k," Z")})}},{key:"getAdjustPointShape",value:function(f,y,b){var x=b.getAdjustPointStyle();return Object(Fe.g)(jh,sy({className:"lf-edge-adjust-point"},x,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,b=f.graphModel,x=y.getAdjustStart(),k=y.getAdjustEnd();return Object(Fe.g)("g",null,Object(Fe.g)(Kx,sy({type:"SOURCE"},x,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:b})),Object(Fe.g)(Kx,sy({type:"TARGET"},k,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:b})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Fe.g)("g",null)}},{key:"getAppend",value:function(){return Object(Fe.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,b=f.model;y.toFront(b.id)}},{key:"render",value:function(){var f=this.props,y=f.model,b=y.isSelected,x=y.isHitable,k=y.isShowAdjustPoint;return f.graphModel.animation,Object(Fe.g)("g",null,Object(Fe.g)("g",{className:["lf-edge",!x&&"pointer-none",b&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),k&&b?this.getAdjustPoints():"")}}])&&JC(i.prototype,l),p}(Fe.a);function z0(a){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z0(a)}function tD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Jx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var fy=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=tD(l,2),p=u[0],f=u[1],y=z0(f);p!=="style"&&y==="object"||(i[p]=f)}),Object(Fe.g)("path",i)};function H0(a){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H0(a)}function X0(){return X0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},X0.apply(this,arguments)}function nD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function rD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Y0(a,i){return Y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y0(a,i)}function oD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hm(a);if(i){var p=Hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return iD(this,l)}}function iD(a,i){if(i&&(H0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Hm(a){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hm(a)}var q0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Y0(f,y)})(p,a);var i,l,u=oD(p);function p(){return nD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=f.isAnimation,k=f.arrowConfig,I=f.getEdgeStyle(),X=f.getEdgeAnimationStyle(),J=X.strokeDasharray,ve=X.stroke,Ae=X.strokeDashoffset,Re=X.animationName,Ze=X.animationDuration,Je=X.animationIterationCount,ht=X.animationTimingFunction,$t=X.animationDirection;return Object(Fe.g)(Nh,X0({},I,{x1:y.x,y1:y.y,x2:b.x,y2:b.y},k,x?{strokeDasharray:J,stroke:ve,style:{strokeDashoffset:Ae,animationName:Re,animationDuration:Ze,animationIterationCount:Je,animationTimingFunction:ht,animationDirection:$t}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=jn({start:y,end:b}),k=x.d,I=x.strokeWidth,X=x.fill,J=x.strokeDasharray,ve=x.stroke;return Object(Fe.g)(fy,{d:k,fill:X,strokeWidth:I,stroke:ve,strokeDasharray:J})}}])&&rD(i.prototype,l),p}(cy);function K0(a){return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K0(a)}function aD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var lD=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=aD(l,2),p=u[0],f=u[1];(p==="style"||K0(f)!=="object")&&(i[p]=f)}),Object(Fe.g)("polyline",i)};function Z0(a){return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Z0(a)}function eS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?eS(Object(l),!0).forEach(function(u){gf(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):eS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function J0(){return J0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},J0.apply(this,arguments)}function uD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return tS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return tS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Q0(a,i){return Q0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Q0(a,i)}function cD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ym(a);if(i){var p=Ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return fD(this,l)}}function fD(a,i){if(i&&(Z0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mf(a)}function mf(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ym(a){return Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ym(a)}function gf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var e1=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Q0(f,y)})(p,a);var i,l,u=cD(p);function p(){var f;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,p),gf(mf(f=u.call(this)),"drag",void 0),gf(mf(f),"isDragging",void 0),gf(mf(f),"isShowAdjustPointTemp",void 0),gf(mf(f),"appendInfo",void 0),gf(mf(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),gf(mf(f),"onDragging",function(y){var b=y.deltaX,x=y.deltaY,k=f.props,I=k.model,X=k.graphModel;f.isDragging=!0;var J=X.transformModel,ve=X.editConfigModel,Ae=uD(J.fixDeltaXY(b,x),2),Re=Ae[0],Ze=Ae[1],Je=I,ht=ve.adjustEdgeMiddle;f.appendInfo=ht?Je.dragAppendSimple(f.appendInfo,{x:Re,y:Ze}):Je.dragAppend(f.appendInfo,{x:Re,y:Ze})}),gf(mf(f),"onDragEnd",function(){var y=f.props,b=y.model,x=y.graphModel.eventCenter,k=b;k.dragAppendEnd(),f.isDragging=!1,k.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,x.emit(Nn.EDGE_ADJUST,{data:k.getData()})}),gf(mf(f),"beforeDragStart",function(y,b){b.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=b}),f.drag=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,b=f.isAnimation,x=f.arrowConfig,k=f.getEdgeStyle(),I=f.getEdgeAnimationStyle(),X=I.strokeDasharray,J=I.stroke,ve=I.strokeDashoffset,Ae=I.animationName,Re=I.animationDuration,Ze=I.animationIterationCount,Je=I.animationTimingFunction,ht=I.animationDirection;return Object(Fe.g)(lD,J0({points:y},k,x,b?{strokeDasharray:X,stroke:J,style:{strokeDashoffset:ve,animationName:Ae,animationDuration:Re,animationIterationCount:Ze,animationTimingFunction:Je,animationDirection:ht}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,b=f.isSelected,x={start:null,end:null,hover:this.state.hover,isSelected:b},k=mo(y);return k.length>=2&&(x.start=k[k.length-2],x.end=k[k.length-1]),x}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=mo(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,b=f.start,x=f.end;if(b.x===x.x&&b.y===x.y)y="";else{var k={start:b,end:x,offset:10,verticalLength:5},I=F(Xm(Xm({},k),{},{type:"start"})),X=F(Xm(Xm({},k),{},{type:"end"}));y="M".concat(I.leftX," ").concat(I.leftY,` 
      L`).concat(I.rightX," ").concat(I.rightY,` 
      L`).concat(X.rightX," ").concat(X.rightY,`
      L`).concat(X.leftX," ").concat(X.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),b=y.d,x=y.strokeWidth,k=y.fill,I=y.strokeDasharray,X=y.stroke;return Object(Fe.g)(fy,{d:b,fill:k,strokeWidth:x,stroke:X,strokeDasharray:I})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,b=y.model,x=y.graphModel,k=b.pointsList,I=b.draggable,X=[],J=k.length,ve=function(Re){var Ze="lf-polyline-append",Je={start:{x:k[Re].x,y:k[Re].y},end:{x:k[Re+1].x,y:k[Re+1].y},startIndex:Re,endIndex:Re+1,direction:"",dragAble:!0},ht=Object(Fe.g)("g",{className:Ze},f.getAppendShape(Je)),$t=x.editConfigModel,hn=$t.adjustEdge,dn=$t.adjustEdgeMiddle;if(hn&&I){var Hn=Je.startIndex,sn=Je.endIndex,In=dn&&(Hn===0||sn===J-1);Je.dragAble=!In,Je.start.x===Je.end.x?(Je.dragAble&&(Ze+="-ew-resize"),Je.direction=ao.VERTICAL):Je.start.y===Je.end.y&&(Je.dragAble&&(Ze+="-ns-resize"),Je.direction=ao.HORIZONTAL),ht=Object(Fe.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(wn){return f.beforeDragStart(wn,Je)}},Object(Fe.g)("g",{className:Ze},f.getAppendShape(Je)))}X.push(ht)},Ae=0;Ae<J-1;Ae++)ve(Ae);return Object(Fe.g)("g",null,X)}}])&&sD(i.prototype,l),p}(cy);function t1(a){return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t1(a)}function dD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return nS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function n1(){return n1=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},n1.apply(this,arguments)}function pD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function hD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r1(a,i){return r1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r1(a,i)}function vD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qm(a);if(i){var p=qm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return yD(this,l)}}function yD(a,i){if(i&&(t1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function qm(a){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qm(a)}var o1=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r1(f,y)})(p,a);var i,l,u=vD(p);function p(){return pD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),b=f.path,x=f.isAnimation,k=f.arrowConfig,I=f.getEdgeAnimationStyle(),X=I.strokeDasharray,J=I.stroke,ve=I.strokeDashoffset,Ae=I.animationName,Re=I.animationDuration,Ze=I.animationIterationCount,Je=I.animationTimingFunction,ht=I.animationDirection;return Object(Fe.g)(fy,n1({d:b},y,k,x?{strokeDasharray:X,stroke:J,style:{strokeDashoffset:ve,animationName:Ae,animationDuration:Re,animationIterationCount:Ze,animationTimingFunction:Je,animationDirection:ht}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Fe.g)(fy,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,b=f.isSelected,x=f.getArrowStyle().offset,k=f.pointsList.map(function(X){return{x:X.x,y:X.y}}),I=dD(Fa(k,x),2);return{start:I[0],end:I[1],hover:y,isSelected:b}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,b=f.pointsList.map(function(x){return{x:x.x,y:x.y}});return Fa(b,y)}}])&&hD(i.prototype,l),p}(cy);function i1(a){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i1(a)}function rS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function mD(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function gD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _D(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a1(a,i){return a1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a1(a,i)}function bD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Km(a);if(i){var p=Km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wD(this,l)}}function wD(a,i){if(i&&(i1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Km(a){return Km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Km(a)}var ED=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a1(f,y)})(p,a);var i,l,u=bD(p);function p(){return gD(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,b=f.style,x=y.start,k=y.end,I={start:x,end:k,offset:b.offset,verticalLength:b.verticalLength,type:"end"},X=F(I),J=X.leftX,ve=X.leftY,Ae=X.rightX,Re=X.rightY;return function(Ze){for(var Je=1;Je<arguments.length;Je++){var ht=arguments[Je]!=null?arguments[Je]:{};Je%2?rS(Object(ht),!0).forEach(function($t){mD(Ze,$t,ht[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ze,Object.getOwnPropertyDescriptors(ht)):rS(Object(ht)).forEach(function($t){Object.defineProperty(Ze,$t,Object.getOwnPropertyDescriptor(ht,$t))})}return Ze}({d:"M".concat(J," ").concat(ve," L").concat(k.x," ").concat(k.y," L").concat(Ae," ").concat(Re," z")},b)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,b=f.strokeWidth,x=f.stroke,k=f.fill;return Object(Fe.g)(fy,{d:y,fill:k,strokeWidth:b,stroke:x})}},{key:"render",value:function(){return Object(Fe.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&_D(i.prototype,l),p}(Fe.a),oS=function(a,i){return pt(a,i)},OD=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},l1=function(){return kn.a.Date.now()},xD=Math.max,SD=Math.min,AD=function(a,i,l){var u,p,f,y,b,x,k=0,I=!1,X=!1,J=!0;if(typeof a!="function")throw new TypeError("Expected a function");function ve($t){var hn=u,dn=p;return u=p=void 0,k=$t,y=a.apply(dn,hn)}function Ae($t){return k=$t,b=setTimeout(Ze,i),I?ve($t):y}function Re($t){var hn=$t-x;return x===void 0||hn>=i||hn<0||X&&$t-k>=f}function Ze(){var $t=l1();if(Re($t))return Je($t);b=setTimeout(Ze,function(hn){var dn=i-(hn-x);return X?SD(dn,f-(hn-k)):dn}($t))}function Je($t){return b=void 0,J&&u?ve($t):(u=p=void 0,y)}function ht(){var $t=l1(),hn=Re($t);if(u=arguments,p=this,x=$t,hn){if(b===void 0)return Ae(x);if(X)return clearTimeout(b),b=setTimeout(Ze,i),ve(x)}return b===void 0&&(b=setTimeout(Ze,i)),y}return i=Hl(i)||0,Rr(l)&&(I=!!l.leading,f=(X="maxWait"in l)?xD(Hl(l.maxWait)||0,i):f,J="trailing"in l?!!l.trailing:J),ht.cancel=function(){b!==void 0&&clearTimeout(b),k=0,u=x=p=b=void 0},ht.flush=function(){return b===void 0?y:Je(l1())},ht},TD=r(172);function MD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ad(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var iS,aS,lS,PD=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Ad(this,"undos",[]),Ad(this,"redos",[]),Ad(this,"callbacks",[]),Ad(this,"stopWatch",null),Ad(this,"curData",null),Ad(this,"maxSize",50),Ad(this,"waitTime",100),Ad(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){oS(OD(this.undos),u)||(this.undos.push(u),oS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Nn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var p=this.undos.pop();return this.curData=wo(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=wo(u),u}}},{key:"watch",value:function(u){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(TD.a)(u,AD(function(){var f=u.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&MD(i.prototype,l),a}();function u1(a){return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},u1(a)}function kD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return uS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return uS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function sS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Mp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?sS(Object(l),!0).forEach(function(u){Pp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):sS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function cS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s1(a,i){return s1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s1(a,i)}function ND(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zm(a);if(i){var p=Zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return RD(this,l)}}function RD(a,i){if(i&&(u1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wh(a)}function Wh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zm(a){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zm(a)}function Pp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fS,dS,pS,c1=ps((lS=aS=function(a){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&s1(y,b)})(f,a);var i,l,u,p=ND(f);function f(){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,f),Pp(Wh(y=p.call(this)),"ref",Object(Fe.f)()),Pp(Wh(y),"__prevText",{type:"",text:"",id:""}),Pp(Wh(y),"keyupHandler",function(b){var x=y.props.graphModel.textEditElement;b.key==="Enter"&&b.altKey&&x.setElementState(0)}),Pp(Wh(y),"inputHandler",function(b){var x=b.target.innerText,k=y.props.graphModel.textEditElement;y.__prevText={type:k.type,text:x.replace(/(\r\n)+$|(\n)+$/,""),id:k.id}}),Pp(Wh(y),"keydownHandler",function(b){b.stopPropagation()}),y.state={style:{left:0,top:0}},y}return i=f,u=[{key:"getDerivedStateFromProps",value:function(y){var b,x=y.graphModel,k=x.transformModel,I=x.theme,X=I.inputText,J=x.textEditElement;if(J){var ve;if((ve=J.text)===null||ve===void 0||!ve.value)if(J.BaseType===io.EDGE){var Ae=(J=J).text,Re=J.textPosition,Ze=Re.x,Je=Re.y;Ae.x=Ze,Ae.y=Je,J.setText(Ae)}else J=J;var ht={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(J.BaseType===io.EDGE){var $t=I.edgeText,hn=$t.overflowMode,dn=$t.lineHeight,Hn=$t.wrapPadding,sn=$t.textWidth;sn&&hn==="autoWrap"&&(b=Mp(Mp({},ht),{},{width:sn,minWidth:sn,lineHeight:dn,padding:Hn}))}else if(J.BaseType===io.NODE){var In=I.nodeText,wn=In.overflowMode,jr=In.lineHeight,Br=In.wrapPadding,sr=In.textWidth,Xr=J,pi=Xr.width,hi=Xr.modelType,ba=Xr.textWidth||sr||pi;(hi!==Or.TEXT_NODE&&wn==="autoWrap"||hi===Or.TEXT_NODE&&sr)&&(b=Mp(Mp({},ht),{},{width:ba,minWidth:ba,lineHeight:jr,padding:Br}))}var tu=J.text,nu=tu.x,oc=tu.y,kp=kD(k.CanvasPointToHtmlPoint([nu,oc]),2);return{style:Mp(Mp({left:kp[0],top:kp[1]},b),X)}}}}],(l=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var b=this.__prevText,x=b.text,k=b.id;y.updateText(k,x),y.eventCenter.emit(Nn.TEXT_UPDATE,Mp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var b=document.createRange();b.selectNodeContents(y),b.collapse(!1);var x=window.getSelection();x.removeAllRanges(),x.addRange(b)}}},{key:"render",value:function(){var y,b=this.props.graphModel.textEditElement,x=this.state.style;return b?Object(Fe.g)("div",{contentEditable:!0,className:"lf-text-input",style:x,ref:this.ref,key:b.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=b.text)===null||y===void 0?void 0:y.value):null}}])&&cS(i.prototype,l),u&&cS(i,u),f}(Fe.a),Pp(aS,"toolName","textEdit"),iS=lS))||iS,jD=function(a){return a.modelType===Or.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,p=(l.x+u.x)/2,f=(l.y+u.y)/2,y=Math.abs(l.x-u.x)+10,b=Math.abs(l.y-u.y)+10;return{x:p-y/2,y:f-b/2,x1:p+y/2,y1:f+b/2}}(a):a.modelType===Or.POLYLINE_EDGE?function(i){var l=i.points,u=mo(l),p=Wt(u,8),f=p.x,y=p.y,b=p.width,x=p.height;return{x:f-b/2,y:y-x/2,x1:f+b/2,y1:y+x/2}}(a):a.modelType===Or.BEZIER_EDGE?function(i){var l=i.path,u=zn(l),p=Wt(u,8),f=p.x,y=p.y,b=p.width,x=p.height;return{x:f-b/2,y:y-x/2,x1:f+b/2,y1:y+x/2}}(a):void 0};function f1(a){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f1(a)}function hS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||vS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function CD(a){return function(i){if(Array.isArray(i))return d1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||vS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vS(a,i){if(a){if(typeof a=="string")return d1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?d1(a,i):void 0}}function d1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function DD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p1(a,i){return p1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},p1(a,i)}function ID(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jm(a);if(i){var p=Jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return LD(this,l)}}function LD(a,i){if(i&&(f1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zh(a)}function zh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jm(a){return Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jm(a)}function Hh(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var h1=ps((pS=dS=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&p1(f,y)})(p,a);var i,l,u=ID(p);function p(f){var y;(function(I,X){if(!(I instanceof X))throw new TypeError("Cannot call a class as a function")})(this,p),Hh(zh(y=u.call(this)),"stepDrag",void 0),Hh(zh(y),"handleMouseDown",function(I){y.stepDrag.handleMouseDown(I)}),Hh(zh(y),"handleWheelEvent",function(I){var X,J;I.preventDefault();var ve=I.deltaX,Ae=I.deltaY,Re=I.clientX,Ze=I.clientY,Je=I.ctrlKey,ht=new WheelEvent("wheel",{deltaX:ve,deltaY:Ae,clientX:Re,clientY:Ze,ctrlKey:Je});(X=y.props.logicFlow.container)===null||X===void 0||(J=X.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||J===void 0||J.dispatchEvent(ht)}),Hh(zh(y),"onDragging",function(I){var X=I.deltaX,J=I.deltaY,ve=y.props.graphModel,Ae=ve.getSelectElements(!0);ve.moveNodes(Ae.nodes.map(function(Re){return Re.id}),X,J)}),Hh(zh(y),"handleContextMenu",function(I){I.preventDefault();var X=y.props,J=X.graphModel,ve=X.graphModel,Ae=ve.eventCenter,Re=ve.selectElements,Ze=J.getPointByClient({x:I.clientX,y:I.clientY}),Je={nodes:[],edges:[]};CD(Re.values()).forEach(function(ht){ht.BaseType===io.NODE&&Je.nodes.push(ht.getData()),ht.BaseType===io.EDGE&&Je.edges.push(ht.getData())}),Ae.emit(Nn.SELECTION_CONTEXTMENU,{data:Je,e:I,position:Ze})});var b=f.graphModel,x=b.gridSize,k=b.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,step:x,eventType:"SELECTION",eventCenter:k}),y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,b=f.transformModel;if(!(y.size<=1)){var x=Number.MAX_SAFE_INTEGER,k=Number.MAX_SAFE_INTEGER,I=Number.MIN_SAFE_INTEGER,X=Number.MIN_SAFE_INTEGER;y.forEach(function(Re){var Ze={x:0,y:0,x1:0,y1:0};Re.BaseType===io.NODE&&(Ze=function(Je){var ht=Je.x,$t=Je.y,hn=Je.width,dn=Je.height;return{x:ht-hn/2,y:$t-dn/2,x1:ht+hn/2,y1:$t+dn/2}}(Re)),Re.BaseType===io.EDGE&&(Ze=jD(Re)),x=Math.min(x,Ze.x),k=Math.min(k,Ze.y),I=Math.max(I,Ze.x1),X=Math.max(X,Ze.y1)});var J=hS(b.CanvasPointToHtmlPoint([x,k]),2);x=J[0],k=J[1];var ve=hS(b.CanvasPointToHtmlPoint([I,X]),2);I=ve[0],X=ve[1];var Ae={left:"".concat(x-10,"px"),top:"".concat(k-10,"px"),width:"".concat(I-x+20,"px"),height:"".concat(X-k+20,"px")};return Object(Fe.g)("div",{className:"lf-multiple-select",style:Ae,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&DD(i.prototype,l),p}(Fe.a),Hh(dS,"toolName","multipleSelect"),fS=pS))||fS;function FD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var $D=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Qm(this,"tools",void 0),Qm(this,"components",void 0),Qm(this,"toolMap",new Map),Qm(this,"instance",void 0),this.instance=u,this.isDisabledTool(c1.toolName)||this.registerTool(c1.toolName,c1),this.isDisabledTool(h1.toolName)||this.registerTool(h1.toolName,h1);var p=u.graphModel;p.eventCenter.on("".concat(Nn.GRAPH_TRANSFORM,",").concat(Nn.NODE_CLICK,",").concat(Nn.BLANK_CLICK," "),function(){var f=p.textEditElement,y=p.editConfigModel,b=y.edgeTextEdit,x=y.nodeTextEdit;(b||x)&&f&&p.textEditElement.setElementState(Hr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,p){this.toolMap.set(u,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&FD(i.prototype,l),a}(),BD=r(173),UD=r.n(BD);function GD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function v1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var yS=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),v1(this,"mousetrap",void 0),v1(this,"options",void 0),v1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var p=u.lf;this.target=p.container,this.mousetrap=new UD.a(this.target),u.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,p=this.options.keyboard.shortcuts;if(p)if(to(p))p.forEach(function(x){var k=x.keys,I=x.callback,X=x.action;return u.on(k,I,X)});else{var f=p.keys,y=p.callback,b=p.action;this.on(f,y,b)}}},{key:"on",value:function(u,p,f){this.mousetrap.bind(this.getKeys(u),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,p){this.mousetrap.unbind(this.getKeys(u),p)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var p=this;return(Array.isArray(u)?u:[u]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&GD(i.prototype,l),a}(),VD=yS,_f=null;function mS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function gS(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var Xh=40,y1=40;function m1(a){return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},m1(a)}function _S(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function dy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?_S(Object(l),!0).forEach(function(u){li(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):_S(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function bS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function li(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var g1=Symbol("plugin register by Logicflow.use"),_1=function(){function a(p){var f,y,b=this;(function(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")})(this,a),li(this,"container",void 0),li(this,"width",void 0),li(this,"height",void 0),li(this,"graphModel",void 0),li(this,"history",void 0),li(this,"viewMap",new Map),li(this,"tool",void 0),li(this,"keyboard",void 0),li(this,"dnd",void 0),li(this,"options",void 0),li(this,"snaplineModel",void 0),li(this,"components",[]),li(this,"plugins",void 0),li(this,"extension",{}),li(this,"adapterIn",void 0),li(this,"adapterOut",void 0),li(this,"getView",function(x){return b.viewMap.get(x)}),p=yO(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new KN(dy({},p)),this.tool=new $D(this),this.history=new PD(this.graphModel.eventCenter),this.dnd=new HR({lf:this}),this.keyboard=new VD({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new kx(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(x){var k=x.data;y.setNodeSnapLine(k)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(x,k){var I=x.keyboard,X=I.options.keyboard;I.on(["cmd + c","ctrl + c"],function(){if(y1=Xh,!X.enabled||k.textEditElement)return!0;var J=x.options.guards,ve=k.getSelectElements(!1);return J&&J.beforeClone&&!J.beforeClone(ve)||ve.nodes.length===0&&ve.edges.length===0?(_f=null,!0):((_f=ve).nodes.forEach(function(Ae){return mS(Ae,Xh)}),_f.edges.forEach(function(Ae){return gS(Ae,Xh)}),!1)}),I.on(["cmd + v","ctrl + v"],function(){if(!X.enabled||k.textEditElement)return!0;if(_f&&(_f.nodes||_f.edges)){x.clearSelectElements();var J=x.addElements(_f,y1);if(!J)return!0;J.nodes.forEach(function(ve){return x.selectElementById(ve.id,!0)}),J.edges.forEach(function(ve){return x.selectElementById(ve.id,!0)}),_f.nodes.forEach(function(ve){return mS(ve,Xh)}),_f.edges.forEach(function(ve){return gS(ve,Xh)}),y1+=Xh}return!1}),I.on(["cmd + z","ctrl + z"],function(){return!X.enabled||!!k.textEditElement||(x.undo(),!1)}),I.on(["cmd + y","ctrl + y"],function(){return!X.enabled||!!k.textEditElement||(x.redo(),!1)}),I.on(["backspace"],function(){if(!X.enabled||k.textEditElement)return!0;var J=k.getSelectElements(!0);return x.clearSelectElements(),J.edges.forEach(function(ve){return x.deleteEdge(ve.id)}),J.nodes.forEach(function(ve){return x.deleteNode(ve.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var b={BaseEdge:cy,BaseEdgeModel:_d,BaseNode:vf,BaseNodeModel:hf,RectNode:c0,RectNodeModel:Ub,CircleNode:h0,CircleNodeModel:Eb,PolygonNode:_0,PolygonNodeModel:Lb,TextNode:N0,TextNodeModel:zb,LineEdge:q0,LineEdgeModel:ki,DiamondNode:O0,DiamondNodeModel:Tb,PolylineEdge:e1,PolylineEdgeModel:sf,BezierEdge:o1,BezierEdgeModel:yb,EllipseNode:M0,EllipseNodeModel:Nb,HtmlNode:D0,HtmlNodeModel:Yb,h:Fe.g,type:p};this.viewMap.forEach(function(J){var ve=J.extendKey;ve&&(b[ve]=J)}),this.graphModel.modelMap.forEach(function(J){var ve=J.extendKey;ve&&(b[ve]=J)});var x=f(b),k=x.view,I=x.model,X=k;y&&!X.isObervered&&(X.isObervered=!0,X=xn(X)),this.setView(p,X),this.graphModel.setModel(p,I)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=xn(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){p.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:c0,model:Ub,type:"rect"}),this.registerElement({type:"circle",view:h0,model:Eb}),this.registerElement({type:"polygon",view:_0,model:Lb}),this.registerElement({type:"line",view:q0,model:ki}),this.registerElement({type:"polyline",view:e1,model:sf}),this.registerElement({type:"bezier",view:o1,model:yb}),this.registerElement({type:"text",view:N0,model:zb}),this.registerElement({type:"ellipse",view:M0,model:Nb}),this.registerElement({type:"diamond",view:O0,model:Tb}),this.registerElement({type:"html",view:D0,model:Yb})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&y&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,y=p.coordinate,b=p.id;if(!y){var x=this.getNodeModelById(b);x&&(y=x.getData());var k=this.getEdgeModelById(b);k&&(y=k.textPosition)}var I=y,X=I.x,J=I.y;f.focusOn(X,J,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,y,b,x=this.getModelById(p);return!!x&&(y=(b=(li(f={},io.NODE,this.deleteNode),li(f,io.EDGE,this.deleteEdge),f)[x.BaseType])===null||b===void 0?void 0:b.call(this,p))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,y)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var y=f.getData(),b=this.options.guards,x=!b||!b.beforeDelete||b.beforeDelete(y);return x&&this.graphModel.deleteNode(p),x}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,y=this.graphModel.edgesMap[p];if(!y)return!1;var b=y.model.getData(),x=!f||!f.beforeDelete||f.beforeDelete(b);return x&&this.graphModel.deleteEdgeById(p),x}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,y=p.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,y=p.sourceNodeId,b=p.targetNodeId;if(y&&b){var x=[];return f.forEach(function(X){X.sourceNodeId===y&&X.targetNodeId===b&&x.push(X)}),x}if(y){var k=[];return f.forEach(function(X){X.sourceNodeId===y&&k.push(X)}),k}if(b){var I=[];return f.forEach(function(X){X.targetNodeId===b&&I.push(X)}),I}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.setProperties(Zo(f))}},{key:"deleteProperty",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,y=p.nodes,b=p.edges,x={},k={nodes:[],edges:[]},I=0;I<y.length;I++){var X=y[I],J=X.id,ve=this.addNode(X);if(!ve)return;J&&(x[J]=ve.id),k.nodes.push(ve)}return b.forEach(function(Ae){var Re=Ae.sourceNodeId,Ze=Ae.targetNodeId;x[Re]&&(Re=x[Re]),x[Ze]&&(Ze=x[Ze]);var Je=f.graphModel.addEdge(dy(dy({},Ae),{},{sourceNodeId:Re,targetNodeId:Ze}));k.edges.push(Je)}),k}},{key:"getAreaElement",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],b=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,y,b,x).map(function(k){return k.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),b=0;b<f;b++)y[b]=arguments[b];return this.adapterOut.apply(this,[p].concat(y))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,y=f.editConfigModel,b=f.transformModel;y.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&b.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=Zo(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=Zo(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,y=p.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=(p=this.plugins)!==null&&p!==void 0?p:a.extensions;b.forEach(function(x){var k=null,I=null;x[g1]?(k=x.extension,I=x.props):k=x;var X=k.pluginName||k.name;y.indexOf(X)===-1&&f.installPlugin(k,I)})}},{key:"installPlugin",value:function(p,f){if(m1(p)==="object"){var y=p.install,b=p.render;return y&&y.call(p,this,a),b&&this.components.push(b.bind(p)),void(this.extension[p.pluginName]=p)}var x=p,k=new x({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:f});k.render&&this.components.push(k.render.bind(k)),this.extension[x.pluginName]=k}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var y=new f(dy(dy({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(Zo(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Fe.j)(Object(Fe.g)(WR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Nn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],u=[{key:"use",value:function(p,f){var y,b,x=p.pluginName;x||(x=p.name);var k=(y=this.extensions.get(x))===null||y===void 0?void 0:y.extension;k&&k.destroy&&k.destroy(),this.extensions.set(x,(li(b={},g1,g1),li(b,"extension",p),li(b,"props",f),b))}}],l&&bS(i.prototype,l),u&&bS(i,u),a}();function ps(a){return xn(a)}li(_1,"extensions",new Map),o.default=_1}])})})(sw,sw.exports);var cn=sw.exports;const O9=qI(cn);var x9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),S9=(globalThis==null?void 0:globalThis._ids)||new x9;function Fv(){return S9.next()}var AP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){AP(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Fv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){AP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var TP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rg=globalThis&&globalThis.__assign||function(){return Rg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rg.apply(this,arguments)};(function(e){TP(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Fv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){TP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return cn.h("g",{},v,cn.h("circle",Rg(Rg({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var MP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(this,arguments)};(function(e){MP(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+Fv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){MP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.points,h=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",xy(xy({},h),{x:o,y:r,points:v})),cn.h("path",xy({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},h)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var PP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),jg=globalThis&&globalThis.__assign||function(){return jg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jg.apply(this,arguments)};(function(e){PP(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Fv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){PP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",jg(jg({},h),{x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var kP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)};(function(e){kP(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Fv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){kP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",cw({x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},h)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var NP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){NP(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+Fv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){NP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var oA={width:40,height:40},iA={width:40,height:40},aA={width:40,height:40},lA={width:100,height:80},uA={width:100,height:80},A9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),T9=(globalThis==null?void 0:globalThis._ids)||new A9;function sA(){return T9.next()}function RP(e){return Object.prototype.toString.call(e)}function M9(e){return"  ".repeat(e)}function Cg(e){var t=e;return RP(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Cg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Cg(n)})),t}function P9(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Cg(e)).replace(/"/g,"'")}return t}var Yh=`	
`;function mg(e,t,n){var o=M9(n),r="";if(t==="#text")return Yh+o+e;if(t==="#cdata-section")return Yh+o+"<![CDATA["+e+"]]>";if(t==="#comment")return Yh+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+P9(e)+'"';if(Array.isArray(e))e.forEach(function(h){r+=mg(h,t,n+1)});else if(RP(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":Yh+o)+"<"+t,s.forEach(function(h){h.charAt(0)==="-"?c+=mg(e[h],h,n+1):v+=mg(e[h],h,n+1)}),r+=c+(v!==""?">"+v+(Yh+o)+"</"+t+">":" />")}else r+=Yh+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function k9(e){var t="";for(var n in e)t+=mg(e[n],n,0);return t}var ul=function(){};ul.ObjTree=function(){return this};ul.ObjTree.VERSION="0.23";ul.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;ul.ObjTree.prototype.attr_prefix="-";ul.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};ul.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(_){var w;_&&_.responseXML&&_.responseXML.documentElement&&(w=s.parseDOM(_.responseXML.documentElement)),c(w,_),v&&v(_)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};ul.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};ul.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h==3||h==4||h==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};ul.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};ul.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};ul.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};ul.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};ul.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};ul.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var N9=function(e){return new ul.ObjTree().parseXML(e)},R9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fw.apply(this,arguments)},O_=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},fc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(fc||(fc={}));var jP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],cA=["properties","startPoint","endPoint","pointsList"];function fA(e){var t=e?cA.concat(e):cA;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var v=O_(c,2),h=v[0],g=v[1];typeof g!="object"?h.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(h)?s[h]=g:s["-"+h]=g:t.includes(h)?s["-"+h]=o(g):s[h]=o(g)}),s)}return o(n)}}function Dg(e){var t={};return Object.entries(e).forEach(function(n){var o=O_(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Cg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Dg(s):Array.isArray(s)?t[r]=s.map(function(c){return Dg(c)}):t[r]=s}),t}function j9(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var h=fA(n)(s.properties);Object.assign(v,h)}o.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,h=o.get(s.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(s.id):h["bpmn:incoming"]=[h["bpmn:incoming"],s.id]:h["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var _=fA(n)(s.properties);Object.assign(g,_)}return g});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[fc.FLOW]=r}function C9(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Fd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}function D9(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===fc.FLOW){var v=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=L9(c,v)}else{var h=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(I9(c,h,s))}}})}return{nodes:t,edges:n}}function I9(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=dA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=dA(r,n,e);o.push(s)}return o}function dA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Fd.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(w){var O=O_(w,2),S=O[0],P=O[1];jP.indexOf(S)===-1&&(v||(v={}),v[S]=P)}),v&&(v=Dg(v));var h;if(s&&(h={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];h.x=Number(g["-x"])+Number(g["-width"])/2,h.y=Number(g["-y"])+Number(g["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:o,y:r,properties:v};return h&&(_.text=h),_}function L9(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(pA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(pA(o,e))}return n}function pA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(h){s<h.length&&(s=h.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(h){var g=O_(h,2),_=g[0],w=g[1];jP.indexOf(_)===-1&&(c||(c={}),c[_]=w)}),c&&(c=Dg(c));var v={id:t["-id"],type:fc.FLOW,pointsList:e["di:waypoint"].map(function(h){return{x:Number(h["-x"]),y:Number(h["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Fd=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=fw({},n.processAttributes);j9(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};C9(v,r);var h=n.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":h};return g},this.adapterIn=function(r){if(r)return D9(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+sA()},this.definitionAttributes={"-id":"Definitions_"+sA(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Fd.shapeConfigMap.set(fc.START,{width:oA.width,height:oA.height});Fd.shapeConfigMap.set(fc.END,{width:iA.width,height:iA.height});Fd.shapeConfigMap.set(fc.GATEWAY,{width:aA.width,height:aA.height});Fd.shapeConfigMap.set(fc.SYSTEM,{width:lA.width,height:lA.height});Fd.shapeConfigMap.set(fc.USER,{width:uA.width,height:uA.height});(function(e){R9(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=N9(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var v=o.adapterOut(s,c);return k9(v)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Fd);var F9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),$9=(globalThis==null?void 0:globalThis._ids)||new F9;function B9(){return $9.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var hA=globalThis&&globalThis.__assign||function(){return hA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hA.apply(this,arguments)},U9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var vA=globalThis&&globalThis.__assign||function(){return vA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vA.apply(this,arguments)},G9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var yA=globalThis&&globalThis.__assign||function(){return yA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA.apply(this,arguments)},V9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var mA=globalThis&&globalThis.__assign||function(){return mA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mA.apply(this,arguments)},W9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var gA=globalThis&&globalThis.__assign||function(){return gA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gA.apply(this,arguments)},z9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var _A=globalThis&&globalThis.__assign||function(){return _A=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_A.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var bA=globalThis&&globalThis.__assign||function(){return bA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bA.apply(this,arguments)},H9=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var hE,xi,CP,Lp,wA,DP,IP,LP,vE,dw,pw,hw={},FP=[],X9=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,x_=Array.isArray;function Ef(e,t){for(var n in t)e[n]=t[n];return e}function yE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Sy(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?hE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]==null&&(c[s]=e.defaultProps[s]);return gg(e,c,o,r,null)}function gg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++CP,__i:-1,__u:0};return r==null&&xi.vnode!=null&&xi.vnode(s),s}function mE(e){return e.children}function dv(e,t){this.props=e,this.context=t}function xv(e,t){if(t==null)return e.__?xv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?xv(e):null}function $P(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return $P(e)}}function EA(e){(!e.__d&&(e.__d=!0)&&Lp.push(e)&&!Ig.__r++||wA!=xi.debounceRendering)&&((wA=xi.debounceRendering)||DP)(Ig)}function Ig(){for(var e,t,n,o,r,s,c,v=1;Lp.length;)Lp.length>v&&Lp.sort(IP),e=Lp.shift(),v=Lp.length,e.__d&&(n=void 0,r=(o=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Ef({},o)).__v=o.__v+1,xi.vnode&&xi.vnode(n),GP(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,s,r??xv(o),!!(32&o.__u),c),n.__v=o.__v,n.__.__k[n.__i]=n,K9(s,n,c),n.__e!=r&&$P(n)));Ig.__r=0}function BP(e,t,n,o,r,s,c,v,h,g,_){var w,O,S,P,A,R,D=o&&o.__k||FP,N=t.length;for(h=Y9(n,t,D,h,N),w=0;w<N;w++)(S=n.__k[w])!=null&&(O=S.__i==-1?hw:D[S.__i]||hw,S.__i=w,R=GP(e,S,O,r,s,c,v,h,g,_),P=S.__e,S.ref&&O.ref!=S.ref&&(O.ref&&gE(O.ref,null,S),_.push(S.ref,S.__c||P,S)),A==null&&P!=null&&(A=P),4&S.__u||O.__k===S.__k?h=UP(S,h,e):typeof S.type=="function"&&R!==void 0?h=R:P&&(h=P.nextSibling),S.__u&=-7);return n.__e=A,h}function Y9(e,t,n,o,r){var s,c,v,h,g,_=n.length,w=_,O=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=s+O,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?gg(null,c,null,null,null):x_(c)?gg(mE,{children:c},null,null,null):c.constructor==null&&c.__b>0?gg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=q9(c,n,h,w))!=-1&&(w--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>_?O--:r<_&&O++),typeof c.type!="function"&&(c.__u|=4)):g!=h&&(g==h-1?O--:g==h+1?O++:(g>h?O--:O++,c.__u|=4))):e.__k[s]=null;if(w)for(s=0;s<_;s++)(v=n[s])!=null&&!(2&v.__u)&&(v.__e==o&&(o=xv(v)),WP(v,v));return o}function UP(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=UP(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=xv(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function q9(e,t,n,o){var r,s,c=e.key,v=e.type,h=t[n];if(h===null&&e.key==null||h&&c==h.key&&v==h.type&&!(2&h.__u))return n;if(o>(h!=null&&!(2&h.__u)?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((h=t[r])&&!(2&h.__u)&&c==h.key&&v==h.type)return r;r--}if(s<t.length){if((h=t[s])&&!(2&h.__u)&&c==h.key&&v==h.type)return s;s++}}return-1}function OA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||X9.test(t)?n:n+"px"}function ag(e,t,n,o,r){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||OA(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||OA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(LP,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=vE,e.addEventListener(t,s?pw:dw,s)):e.removeEventListener(t,s?pw:dw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function xA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=vE++;else if(t.t<n.u)return;return n(xi.event?xi.event(t):t)}}}function GP(e,t,n,o,r,s,c,v,h,g){var _,w,O,S,P,A,R,D,N,B,q,Z,Y,te,G,C,W,K=t.type;if(t.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),s=[v=t.__e=n.__e]),(_=xi.__b)&&_(t);e:if(typeof K=="function")try{if(D=t.props,N="prototype"in K&&K.prototype.render,B=(_=K.contextType)&&o[_.__c],q=_?B?B.props.value:_.__:o,n.__c?R=(w=t.__c=n.__c).__=w.__E:(N?t.__c=w=new K(D,q):(t.__c=w=new dv(D,q),w.constructor=K,w.render=J9),B&&B.sub(w),w.props=D,w.state||(w.state={}),w.context=q,w.__n=o,O=w.__d=!0,w.__h=[],w._sb=[]),N&&w.__s==null&&(w.__s=w.state),N&&K.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Ef({},w.__s)),Ef(w.__s,K.getDerivedStateFromProps(D,w.__s))),S=w.props,P=w.state,w.__v=t,O)N&&K.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),N&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(N&&K.getDerivedStateFromProps==null&&D!==S&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(D,q),!w.__e&&w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(D,w.__s,q)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(w.props=D,w.state=w.__s,w.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(z){z&&(z.__=t)}),Z=0;Z<w._sb.length;Z++)w.__h.push(w._sb[Z]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(D,w.__s,q),N&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(S,P,A)})}if(w.context=q,w.props=D,w.__P=e,w.__e=!1,Y=xi.__r,te=0,N){for(w.state=w.__s,w.__d=!1,Y&&Y(t),_=w.render(w.props,w.state,w.context),G=0;G<w._sb.length;G++)w.__h.push(w._sb[G]);w._sb=[]}else do w.__d=!1,Y&&Y(t),_=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++te<25);w.state=w.__s,w.getChildContext!=null&&(o=Ef(Ef({},o),w.getChildContext())),N&&!O&&w.getSnapshotBeforeUpdate!=null&&(A=w.getSnapshotBeforeUpdate(S,P)),C=_,_!=null&&_.type===mE&&_.key==null&&(C=VP(_.props.children)),v=BP(e,x_(C)?C:[C],t,n,o,r,s,c,v,h,g),w.base=t.__e,t.__u&=-161,w.__h.length&&c.push(w),R&&(w.__E=w.__=null)}catch(z){if(t.__v=null,h||s!=null)if(z.then){for(t.__u|=h?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else for(W=s.length;W--;)yE(s[W]);else t.__e=n.__e,t.__k=n.__k;xi.__e(z,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=Z9(n.__e,t,n,o,r,s,c,h,g);return(_=xi.diffed)&&_(t),128&t.__u?void 0:v}function K9(e,t,n){for(var o=0;o<n.length;o++)gE(n[o],n[++o],n[++o]);xi.__c&&xi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){xi.__e(s,r.__v)}})}function VP(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:x_(e)?e.map(VP):Ef({},e)}function Z9(e,t,n,o,r,s,c,v,h){var g,_,w,O,S,P,A,R=n.props,D=t.props,N=t.type;if(N=="svg"?r="http://www.w3.org/2000/svg":N=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((S=s[g])&&"setAttribute"in S==!!N&&(N?S.localName==N:S.nodeType==3)){e=S,s[g]=null;break}}if(e==null){if(N==null)return document.createTextNode(D);e=document.createElementNS(r,N,D.is&&D),v&&(xi.__m&&xi.__m(t,s),v=!1),s=null}if(N==null)R===D||v&&e.data==D||(e.data=D);else{if(s=s&&hE.call(e.childNodes),R=n.props||hw,!v&&s!=null)for(R={},g=0;g<e.attributes.length;g++)R[(S=e.attributes[g]).name]=S.value;for(g in R)if(S=R[g],g!="children"){if(g=="dangerouslySetInnerHTML")w=S;else if(!(g in D)){if(g=="value"&&"defaultValue"in D||g=="checked"&&"defaultChecked"in D)continue;ag(e,g,null,S,r)}}for(g in D)S=D[g],g=="children"?O=S:g=="dangerouslySetInnerHTML"?_=S:g=="value"?P=S:g=="checked"?A=S:v&&typeof S!="function"||R[g]===S||ag(e,g,S,R[g],r);if(_)v||w&&(_.__html==w.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(w&&(e.innerHTML=""),BP(t.type=="template"?e.content:e,x_(O)?O:[O],t,n,o,N=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&xv(n,0),v,h),s!=null)for(g=s.length;g--;)yE(s[g]);v||(g="value",N=="progress"&&P==null?e.removeAttribute("value"):P!=null&&(P!==e[g]||N=="progress"&&!P||N=="option"&&P!=R[g])&&ag(e,g,P,R[g],r),g="checked",A!=null&&A!=e[g]&&ag(e,g,A,R[g],r))}return e}function gE(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){xi.__e(r,n)}}function WP(e,t,n){var o,r;if(xi.unmount&&xi.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||gE(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){xi.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&WP(o[r],t,n||typeof e.type!="function");n||yE(e.__e),e.__c=e.__=e.__e=void 0}function J9(e,t,n){return this.constructor(e,n)}hE=FP.slice,xi={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},CP=0,dv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ef({},this.state),typeof e=="function"&&(e=e(Ef({},n),this.props)),e&&Ef(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),EA(this))},dv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),EA(this))},dv.prototype.render=mE,Lp=[],DP=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,IP=function(e,t){return e.__v.__b-t.__v.__b},Ig.__r=0,LP=/(PointerCapture)$|Capture$/i,vE=0,dw=xA(!1),pw=xA(!0);var Ay=globalThis&&globalThis.__assign||function(){return Ay=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ay.apply(this,arguments)};function _E(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,v=t-o/2,h=n-r/2,g=Ay(Ay({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:h});return cn.h("rect",Ay({},g))}_E.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var lv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(lv||(lv={}));var Q9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fp=globalThis&&globalThis.__assign||function(){return Fp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fp.apply(this,arguments)},eV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},tV=cn.LogicFlowUtil.StepDrag,nV=function(e){Q9(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.x,g=v.y;o.nodeModel.x=h+s/2,o.nodeModel.y=g+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,h=r.width,g=r.height,_=r.PCTResizeInfo,w=r.pct,O=w===void 0?1:w,S=r.freezeWidth,P=S===void 0?!1:S,A=r.freezeHeight,R=A===void 0?!1:A,D={width:h,height:g,deltaX:c,deltaY:v};if(_){var N=4,B=0,q=0;switch(s){case 0:q=(c*-1-v)/N;break;case 1:q=(c-v)/N;break;case 2:q=(c+v)/N;break;case 3:q=(c*-1+v)/N;break}q!==0&&(B=Math.round(q/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+B,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+B,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var Z=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),Y=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(s){case 0:c=h-Z,v=g-Y;break;case 1:c=Z-h,v=g-Y;break;case 2:c=Z-h,v=Y-g;break;case 3:c=h-Z,v=Y-g;break}return D.width=Z,D.height=Y,D.deltaX=c/O,D.deltaY=v/O,D}switch(s){case 0:D.width=P?h:h-c*O,D.height=R?g:g-v*O;break;case 1:D.width=P?h:h+c*O,D.height=R?g:g-v*O;break;case 2:D.width=P?h:h+c*O,D.height=R?g:g+v*O;break;case 3:D.width=P?h:h-c*O,D.height=R?g:g+v*O;break}return D},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,v=o.getNodeEdges(s);v.sourceEdges.forEach(function(h){var g=c.find(function(_){return _.id===h.sourceAnchorId});h.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(h){var g=c.find(function(_){return _.id===h.targetAnchorId});h.updateEndPoint({x:g.x,y:g.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.x,_=v.y,w=v.width,O=v.height,S=v.radius,P=v.PCTResizeInfo,A=o.nodeModel,R=A.minWidth,D=A.minHeight,N=A.maxWidth,B=A.maxHeight,q=o.index,Z=R===N,Y=D===B,te=o.getResize({index:q,deltaX:s,deltaY:c,width:w,height:O,PCTResizeInfo:P,pct:1,freezeWidth:Z,freezeHeight:Y});if(te.width<R||te.width>N||te.height<D||te.height>B){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:Z?0:te.deltaX,deltaY:Y?0:te.deltaY}),o.nodeModel.width=te.width,o.nodeModel.height=te.height,o.nodeModel.setProperties({nodeSize:{width:te.width,height:te.height}}),o.getNodeEdges(h);var G={x:g,y:_,width:w,height:O,radius:S},C={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:S};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:G,afterNode:C})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.rx,_=v.ry,w=v.x,O=v.y,S=v.PCTResizeInfo,P=o.index,A=o.nodeModel,R=A.minWidth,D=A.minHeight,N=A.maxWidth,B=A.maxHeight,q=R===N,Z=D===B,Y=g,te=_,G=o.getResize({index:P,deltaX:s,deltaY:c,width:Y,height:te,PCTResizeInfo:S,pct:1/2,freezeWidth:q,freezeHeight:Z});if(G.width<R/2||G.width>N/2||G.height<D/2||G.height>B/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:q?0:G.deltaX,deltaY:Z?0:G.deltaY}),o.nodeModel.rx=G.width,o.nodeModel.ry=G.height,o.nodeModel.setProperties({nodeSize:{rx:G.width,ry:G.height}}),o.getNodeEdges(h);var C={x:w,y:O},W={rx:G.width,ry:G.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Fp(Fp({},C),{rx:g,ry:_}),afterNode:W})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel;v.id;var h=v.rx,g=v.ry,_=v.x,w=v.y,O=v.PCTResizeInfo,S=o.index,P=o.nodeModel,A=P.minWidth,R=P.minHeight,D=P.maxWidth,N=P.maxHeight,B=A===D,q=R===N,Z=h,Y=g,te=o.getResize({index:S,deltaX:s,deltaY:c,width:Z,height:Y,PCTResizeInfo:O,pct:1/2,freezeWidth:B,freezeHeight:q});if(te.width<A/2||te.width>D/2||te.height<R/2||te.height>N/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:B?0:te.deltaX,deltaY:q?0:te.deltaY}),o.nodeModel.rx=te.width,o.nodeModel.ry=te.height,o.nodeModel.setProperties({nodeSize:{rx:te.width,ry:te.height}});var G={x:_,y:w,rx:h,ry:g},C={rx:te.width,ry:te.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:G,afterNode:C})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=o.nodeModel,h=v.id,g=v.modelType,_=v.type,w=Fp({id:h,modelType:g,type:_},s),O=Fp({id:h,modelType:g,type:_},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:w,newNodeSize:O})},o.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,h=o.graphModel.transformModel,g=o.nodeModel.modelType;s=eV(h.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===lv.RECT_NODE||g===lv.HTML_NODE?o.updateRect({deltaX:c,deltaY:v}):g===lv.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:v}):g===lv.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:v})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),v=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,v),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new tV({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],v=0;v<r.length;v++){var h=r[v];h.sourceNodeId===n?s.push(h):r[v].targetNodeId===n&&c.push(h)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Sy("g",{className:"lf-resize-control-"+s},Sy(_E,Fp({className:"lf-node-control"},{x:o,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(dv),rV=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lg=globalThis&&globalThis.__assign||function(){return Lg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lg.apply(this,arguments)},S_=function(e){rV(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,v=o.width,h=o.height,g={minX:s-v/2,minY:c-h/2,maxX:s+v/2,maxY:c+h/2},_=g.minX,w=g.minY,O=g.maxX,S=g.maxY,P=[{x:_,y:w},{x:O,y:w},{x:O,y:S},{x:_,y:S}];return P.map(function(A,R){return Sy(nV,Lg({index:R},A,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Sy(_E,Lg({fill:"none"},v,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Sy("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(dv),zP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),oV=function(e){zP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),iV=function(e){zP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),HP={type:"rect",view:iV,model:oV},XP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){XP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){XP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var vw=globalThis&&globalThis.__assign||function(){return vw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vw.apply(this,arguments)};function aV(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,h=v===void 0?"transparent":v,g=e.stroke,_=g===void 0?"#000":g,w=e.points,O=e.className,S=O===void 0?"lf-basic-shape":O,P={fill:h,fillOpacity:n,strokeWidth:r,stroke:_,strokeOpacity:c,points:"",className:S};return P.points=w.map(function(A){return A.join(",")}).join(" "),cn.h("polygon",vw({},P))}var YP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),yw=globalThis&&globalThis.__assign||function(){return yw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yw.apply(this,arguments)};(function(e){YP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){YP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(aV,yw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var qP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),lV=function(e){qP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),uV=function(e){qP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),KP={type:"html",view:uV,model:lV},ZP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fg=globalThis&&globalThis.__assign||function(){return Fg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fg.apply(this,arguments)},sV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},cV=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(sV(arguments[t]));return e},SA=500,AA=300,fV=-1e4;(function(e){ZP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=SA,n.unfoldedHight=AA,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=SA,this.height=AA,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=fV,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var h=o.childrenLastFoldStatus[s];h!==void 0&&h!==c.isFolded&&c.foldGroup(h)}o.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var v=s.id,h=s.sourceNodeId,g=s.targetNodeId,_=s.startPoint,w=s.endPoint,O=s.type,S=s.text,P=s.getProperties(),A={id:v+"__"+c,sourceNodeId:h,targetNodeId:g,startPoint:_,endPoint:w,type:O,properties:P,text:S==null?void 0:S.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var R=r.graphModel.group.getNodeGroup(g);R||(R=r.graphModel.getNodeModelById(g));var D=r.graphModel.group.getNodeGroup(h);D||(D=r.graphModel.getNodeModelById(h)),n&&s.visible!==!1&&(r.children.has(h)||r.id===h?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(R.id!==r.id||D.id!==r.id)&&r.createVirtualEdge(A),s.visible=!1),!n&&s.visible===!1&&(R&&R.isGroup&&R.isFolded?(A.targetNodeId=R.id,A.endPoint=void 0,r.createVirtualEdge(A)):D&&D.isGroup&&D.isFolded?(A.sourceNodeId=D.id,A.startPoint=void 0,r.createVirtualEdge(A)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=cV(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(HP.model);(function(e){ZP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,h=n.properties;if(!h.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),w=o+g+8,O=r+g+8;return cn.h("rect",Fg(Fg({},_),{width:w,height:O,x:s-w/2,y:c-O/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(HP.view);var TA=globalThis&&globalThis.__assign||function(){return TA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},TA.apply(this,arguments)};globalThis&&globalThis.__rest;var dV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var MA=globalThis&&globalThis.__assign||function(){return MA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},MA.apply(this,arguments)};globalThis&&globalThis.__values;var PA=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ty=globalThis&&globalThis.__assign||function(){return Ty=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ty.apply(this,arguments)};function pV(e){var t=function(o){PA(r,o);function r(s,c){var v=this;s.id||(s.id="Flow_"+B9());var h=Ty(Ty(Ty({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=h,v=o.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){PA(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}pV();globalThis&&globalThis.__read;var kA={width:40,height:40},NA={width:40,height:40},RA={width:100,height:80},$g={width:100,height:80},jA={width:100,height:80},CA={width:100,height:80},DA={width:100,height:80},IA={width:100,height:80},LA={width:100,height:80},FA={width:100,height:80},sl=function(){};sl.ObjTree=function(){return this};sl.ObjTree.VERSION="0.23";sl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;sl.ObjTree.prototype.attr_prefix="-";sl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};sl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(_){var w;_&&_.responseXML&&_.responseXML.documentElement&&(w=s.parseDOM(_.responseXML.documentElement)),c(w,_),v&&v(_)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};sl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};sl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h===3||h===4||h===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};sl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};sl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};sl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};sl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};sl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};sl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var hV=function(e){return new sl.ObjTree().parseXML(e)};function JP(e){return Object.prototype.toString.call(e)}function $A(e){return"  ".repeat(e)}function Bg(e){return JP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Bg(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Bg(t)}):e}function vV(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Bg(e)).replace(/"/g,"'")}return t}var BA=`	
`;function _g(e,t,n){var o=$A(n),r="",s=BA+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+vV(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return _g(g,t,n+1)}).join("");else if(JP(e)==="[object Object]"){var c=Object.keys(e),v="",h=e["-json"]?BA+$A(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=_g(e[g],g,n+1):h+=_g(e[g],g,n+1)}),r+=v+(h!==""?">"+h+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function yV(e){var t="";for(var n in e)t+=_g(e[n],n,0);return t}var mV=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mw=globalThis&&globalThis.__assign||function(){return mw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mw.apply(this,arguments)},UA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},bE=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$v=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},pv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($v(arguments[t]));return e},al;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(al||(al={}));var QP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],gV=["properties","startPoint","endPoint","pointsList"],Ug={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},ek=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},Du={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,v=t["-id"],h="",g="";try{for(var _=bE(Object.keys(t)),w=_.next();!w.done;w=_.next()){var O=w.value;O.includes("bpmn:")&&(r=$v(O.split(":"),2),h=r[1],g=(s=t[O])===null||s===void 0?void 0:s["#text"])}}catch(S){n={error:S}}finally{try{w&&!w.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":h,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function _V(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(pv(gV,n||[])),c={in:new Set(pv(Ug.in,(o==null?void 0:o.in)||[])),out:new Set(pv(Ug.out,(o==null?void 0:o.out)||[]))};return Du=ek(Du,r),function(v){var h=v.nodes,g=v.edges;function _(w,O){var S,P,A;if((w==null?void 0:w.flag)!==1){var R;if((R=Du[w.type])&&R.out){var D=R.out(w),N=Object.keys(D);N.length>0&&N.forEach(function(W){w[W]=D[W]})}w!=null&&w.children&&(w.children=w.children.map(function(W){var K=h.find(function(z){return z.id===W})||g.find(function(z){return z.id===W});return K||{}}));var B={};if(typeof w=="string")return w;if(Array.isArray(w))return w.map(function(W){return _(W,"")}).filter(function(W){return W!=null});try{for(var q=bE(Object.entries(w)),Z=q.next();!Z.done;Z=q.next()){var Y=$v(Z.value,2),te=Y[0],G=Y[1];if(((A=G)===null||A===void 0?void 0:A.flag)===1)return;var C=[O,te].filter(function(W){return W}).join(".");c.out.has(C)||(typeof G!="object"?te.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(te)?B[te]=G:B["-"+te]=G:s.has(C)?B["-"+te]=_(G,C):B[te]=_(G,C))}}catch(W){S={error:W}}finally{try{Z&&!Z.done&&(P=q.return)&&P.call(q)}finally{if(S)throw S.error}}return B}}return _(v,"")}}function Gg(e){var t,n,o={};try{for(var r=bE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=$v(s.value,2),v=c[0],h=c[1];v.indexOf("-")===0?o[v.substring(1)]=Bg(h):typeof h=="string"?o[v]=h:Object.prototype.toString.call(h)==="[object Object]"?o[v]=Gg(h):Array.isArray(h)?o[v]=h.map(function(g){return Gg(g)}):o[v]=h}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function bV(e,t,n){var o,r=new Map,s=_V(n)(t);s.nodes.forEach(function(v){var h=v["-id"],g=v["-type"],_=v.text,w=v.children,O=UA(v,["-id","-type","text","children"]),S={"-id":h};_!=null&&_["-value"]&&(S["-name"]=_["-value"]),O["-json"]&&(S["-json"]=O["-json"]),O["-properties"]&&Object.assign(S,O["-properties"]),w&&(S.children=w),e[g]||(e[g]=[]),e[g].push(S),r.set(h,S)});var c=s.edges.map(function(v){var h=v["-id"];v["-type"];var g=v["-sourceNodeId"],_=v["-targetNodeId"],w=v.text,O=UA(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),S=r.get(_);S["bpmn:incoming"]||(S["bpmn:incoming"]=[]),S["bpmn:incoming"].push(h);var P={"-id":h,"-sourceRef":g,"-targetRef":_};return w!=null&&w["-value"]&&(P["-name"]=w["-value"]),O["-json"]&&(P["-json"]=O["-json"]),O["-properties"]&&Object.assign(P,O["-properties"]),P});return t.edges.forEach(function(v){var h=v.sourceNodeId,g=v.id,_=r.get(h);_["bpmn:outgoing"]||(_["bpmn:outgoing"]=[]),_["bpmn:outgoing"].push(g)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(v){var h={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(A){var R,D=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(B){D[B]&&D[B].forEach(function(q){h[B].add(q)})});var N=(R=e[A["-type"]])===null||R===void 0?void 0:R.findIndex(function(B){return B["-id"]===A["-id"]});N>=0&&e[A["-type"]].splice(N,1),r.delete(A["-id"]),v[A["-type"]]||(v[A["-type"]]=[]),v[A["-type"]].push(D)});var _=h["bpmn:incoming"],w=h["bpmn:outgoing"];w.forEach(function(A){_.has(A)&&g.push(A)});for(var O=function(A){var R=c.findIndex(function(D){return D["-id"]===g[A]});R>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[R]),c.splice(R,1)):A++,S=A},S,P=0;P<g.length;)O(P),P=S;delete v.children}),e[al.FLOW]=c,e}function wV(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Nl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}var EV=["bpmn:incoming","bpmn:outgoing"];function OV(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,h={in:new Set(pv(Ug.in,(v==null?void 0:v.in)||[])),out:new Set(pv(Ug.out,(v==null?void 0:v.out)||[]))};Du=ek(Du,c);var g=e["bpmn:definitions"];if(g){var _=g["bpmn:process"];(function(O,S){S.forEach(function(P){try{Object.keys(O).forEach(function(A){try{P(A)}catch(R){console.error(R)}})}catch(A){console.error(A)}})})(_,[function(O){function S(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(R){var D;R.indexOf("bpmn:")===0&&!EV.includes(R)&&(_[R]||(_[R]=[]),!Array.isArray(_[R])&&(_[R]=[_[R]]),Array.isArray(A[R])?(D=_[R]).push.apply(D,pv(A[R])):_[R].push(A[R]),Array.isArray(A[R])?A[R].forEach(function(N){!R.includes("Flow")&&A["-children"].push(N["-id"])}):!R.includes("Flow")&&A["-children"].push(A[R]["-id"]),delete A[R])})}if(O==="bpmn:subProcess"){var P=_[O];Array.isArray(P)?P.forEach(function(A){O==="bpmn:subProcess"&&S(A)}):S(P)}},function(O){var S=function(A){Object.keys(A).forEach(function(R){var D,N;if(R.includes("bpmn:")){var B={};Du[R]&&Du[R].in?(B=(N=(D=Du[R]).in)===null||N===void 0?void 0:N.call(D,R,le.cloneDeep(A[R])),delete A[R]):P(A[R]);var q=void 0;(q=Reflect.ownKeys(B)).length>0&&q.forEach(function(Z){Reflect.set(A,Z,B[Z])})}})};function P(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(R){P(R)}):typeof A=="object"&&S(A)}P(_[O])},function(O){if(O.indexOf("bpmn:")===0){var S=_[O];if(O==="bpmn:sequenceFlow"){var P=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=SV(S,P)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var R=_[O],D=function(N){var B=N["-attachedToRef"],q=r.get(B);q["-boundaryEvents"]||(q["-boundaryEvents"]=[]),q["-boundaryEvents"].push(N["-id"])};Array.isArray(R)?R.forEach(function(N){D(N)}):D(R)}n=n.concat(xV(S,A,O))}}}])}var w=function(O,S,P){Object.keys(O).forEach(function(A){var R=P?P+"."+A:A;S.has(R)?delete O[A]:typeof O[A]=="object"&&w(O[A],S,R)})};return n.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,R=O.type;A[R]&&(O.type=A[R])}w(O,h.in,"")}),o.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,R=O.type;A[R]&&(O.type=A[R])}w(O,h.in,"")}),{nodes:n,edges:o}}function xV(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=GA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=GA(r,n,e);o.push(s)}return o}function GA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=Nl.shapeConfigMap.get(t);v&&(o+=v.width/2,r+=v.height/2);var h={};Object.entries(n).forEach(function(O){var S=$v(O,2),P=S[0],A=S[1];QP.includes(P)||(h[P]=A)}),h=Gg(h);var g;if(c&&(g={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(_["-x"])+Number(_["-width"])/2,g.y=Number(_["-y"])+Number(_["-height"])/2}var w={id:e["-bpmnElement"],type:t,x:o,y:r,properties:h};return s&&(w.children=s),g&&(w.text=g),w}function SV(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(VA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(VA(o,e))}return n}function VA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var _=$v(g,2),w=_[0],O=_[1];QP.includes(w)||(c[w]=O)}),c=Gg(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),h={id:t["-id"],type:al.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var Nl=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,v,h=mw({},n.processAttributes);bV(h,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":h["-id"]};wV(g,r);var _=n.definitionAttributes;_["bpmn:process"]=h,_["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var w={"bpmn:definitions":_};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var O=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,S=function(P){Array.isArray(P)&&P.forEach(function(A){return S(A)}),typeof P=="object"&&Object.keys(P).forEach(function(A){var R;(R=O[A])?(P[R]=le.cloneDeep(P[A]),delete P[A],S(P[R])):S(P[A])})};S(w)}return w},this.adapterIn=function(r,s){if(r)return OV(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Nl.shapeConfigMap.set(al.START,{width:kA.width,height:kA.height});Nl.shapeConfigMap.set(al.END,{width:NA.width,height:NA.height});Nl.shapeConfigMap.set(al.INTERMEDIATE_CATCH,{width:$g.width,height:$g.height});Nl.shapeConfigMap.set(al.INTERMEDIATE_THROW,{width:$g.width,height:$g.height});Nl.shapeConfigMap.set(al.BOUNDARY,{width:RA.width,height:RA.height});Nl.shapeConfigMap.set(al.PARALLEL_GATEWAY,{width:jA.width,height:jA.height});Nl.shapeConfigMap.set(al.INCLUSIVE_GATEWAY,{width:CA.width,height:CA.height});Nl.shapeConfigMap.set(al.EXCLUSIVE_GATEWAY,{width:DA.width,height:DA.height});Nl.shapeConfigMap.set(al.SYSTEM,{width:IA.width,height:IA.height});Nl.shapeConfigMap.set(al.USER,{width:LA.width,height:LA.height});Nl.shapeConfigMap.set(al.SUBPROCESS,{width:FA.width,height:FA.height});(function(e){mV(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var v=hV(c);return o.adapterIn(v,o.props)},o.adapterXmlOut=function(c){var v=o.adapterOut(c,o.props);return yV(v)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(Nl);var WA=globalThis&&globalThis.__assign||function(){return WA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},WA.apply(this,arguments)};globalThis&&globalThis.__read;var zA;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(zA||(zA={}));var AV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var TV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var MV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var tk=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),uv=globalThis&&globalThis.__assign||function(){return uv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},uv.apply(this,arguments)},My=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},PV={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function kV(e){for(var t=e,n=1;n<t.length-1;){var o=My(t[n-1],2),r=o[0],s=o[1],c=My(t[n],2),v=c[0],h=c[1],g=My(t[n+1],2),_=g[0],w=g[1];r===v&&v===_||s===h&&h===w?t.splice(n,1):n++}return t}function NV(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function RV(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,h=""+s+c,g=PV[h]||"-",_="L "+e[0]+" "+e[1];if(g==="-")_+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var w=My(NV(t,h,g,v),2),O=w[0],S=w[1];O&&S&&(_+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+S[0]+" "+S[1],r=My(S,2),t[0]=r[0],t[1]=r[1])}return _}function jV(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=RV(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){tk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,h=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),_=kV(o.split(" ").map(function(S){return S.split(",").map(function(P){return+P})})),w=jV(_,v),O=uv(uv(uv({style:r?g:{}},h),s),{fill:"none"});return cn.h("path",uv({d:w},O))},t})(cn.PolylineEdge);(function(e){tk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var CV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var HA=globalThis&&globalThis.__assign||function(){return HA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HA.apply(this,arguments)},XA=globalThis&&globalThis.__assign||function(){return XA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},XA.apply(this,arguments)},DV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let A_=!1;const Vg=f_({});function nk(e,t,n,o,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),A_&&(Vg[e]=KI(Cr({render:()=>Bp(ZI,{to:n},[Bp(t,s(o,r))]),provide:()=>({getNode:()=>o,getGraph:()=>r})})))}function rk(e){A_&&delete Vg[e]}function Wg(){return A_}function IV(){return A_=!0,Cr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Vg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Vg[n])}),Bp(Bo,{},t.map(n=>Bp(n)))}}})}class Xi extends KP.view{constructor(n,o){super(n);wa(this,"isMounted");wa(this,"r");wa(this,"component");wa(this,"app");wa(this,"root");wa(this,"VueNode");wa(this,"up_node_field_dict");if(this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const c=n.graphModel.nodes.filter(v=>v.type===n.model.type).filter(v=>v.properties.stepName===n.model.properties.stepName);c.length-1>0&&r(c.length-1)}function r(s){var h;const c=s,v=n.model.properties.stepName+c;(h=n.graphModel.nodes)!=null&&h.some(g=>g.properties.stepName===v.trim())?r(c+1):n.model.properties.stepName=v}n.model.properties.config=JI[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var o,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:Qt("views.applicationWorkflow.variable.global"),type:"global",children:((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Wg())nk(this.targetId(),this.component,n,o,r);else{this.r=Bp(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=XM({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r}}}),this.app.use(QI,{locale:eL}),this.app.use(tL),this.app.use(nL),this.app.use(HM);for(const[c,v]of Object.entries(rL))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Wg()&&rk(this.targetId()),this.unmountVueComponent()}}class Yi extends KP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=HM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const h=c[v];if(h.id===s)return!0;if(n(h.id,s))return!0}return!1},o={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==si.Base&&(this.type!==si.Start&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let LV=class extends Xi{constructor(t){super(t,E9)}};const FV={type:"ai-chat-node",model:Yi,view:LV},$V=Object.freeze(Object.defineProperty({__proto__:null,default:FV},Symbol.toStringTag,{value:"Module"})),Oi=Cr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=po({set:_=>{r("update:modelValue",_)},get:()=>o.modelValue}),c=wt([]),v=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0);function h(_){_&&(c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(w=>w.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0))}return t({validate:()=>{const _=o.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(Qt("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(Qt("views.applicationWorkflow.variable.ReferencingError"));const w=s.value[0],O=s.value[1],S=_.find(P=>P.value===w);return S?S.children.some(P=>P.value===O)?Promise.resolve(""):(s.value=[],Promise.reject(Qt("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(Qt("views.applicationWorkflow.variable.NoReferencing")))}}),Uo(()=>{c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(_=>_.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0)}),(_,w)=>{const O=ue("el-cascader");return Ye(),Bt(O,oL({onWheel:v,teleported:!1,options:c.value,onVisibleChange:h},_.$attrs,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=S=>s.value=S),separator:" > "}),{default:U(({node:S,data:P})=>[me("span",{class:"flex align-center",onWheel:v},[(Ye(),Bt(iv(vr(av)(`${P.type}-icon`)),{class:"mr-8",size:18})),Tt($e(P.label),1)],32)]),_:1},16,["options","modelValue"])}}}),BV={class:"title-decoration-1 mb-8"},UV={class:"flex align-center"},GV={class:"mr-4"},VV=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t={question_reference_address:["start-node","question"],api_input_field_list:[],user_input_field_list:[],document_list:["start-node","document"],image_list:["start-node","image"],audio_list:["start-node","audio"]},{params:{id:n}}=Vu.config.globalProperties.$route,o=wt(),r=po({get:()=>(v.nodeModel.properties.node_data||et.set(v.nodeModel.properties,"node_data",t),v.nodeModel.properties.node_data),set:g=>{et.set(v.nodeModel.properties,"node_data",g)}});function s(g,_){const w=`${g}_list`;_?v.nodeModel.properties.node_data[w]||et.set(v.nodeModel.properties.node_data,w,[]):delete v.nodeModel.properties.node_data[w]}const c=()=>{if(!v.nodeModel.properties.node_data.application_id){et.set(v.nodeModel.properties,"status",500);return}Aa.getApplicationById(n,v.nodeModel.properties.node_data.application_id).then(g=>{const _=et.cloneDeep(v.nodeModel.properties.node_data.api_input_field_list),w=et.cloneDeep(v.nodeModel.properties.node_data.user_input_field_list);if(vg(g.data.type)){const O=g.data.work_flow.nodes[0].properties.node_data,S=et.cloneDeep(g.data.work_flow.nodes[0].properties.api_input_field_list),P=et.cloneDeep(g.data.work_flow.nodes[0].properties.user_input_field_list),A=(S||[]).map(B=>{const q=_.find(Z=>Z.variable==B.variable);return q?{...B,value:q.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});et.set(v.nodeModel.properties.node_data,"api_input_field_list",A);const R=(P||[]).map(B=>{const q=w.find(Z=>Z.field==B.field);return q?{...B,value:q.value,label:typeof B.label=="object"&&B.label!=null?B.label.label:B.label}:B});et.set(v.nodeModel.properties.node_data,"user_input_field_list",R);const D=O.file_upload_enable,N=O.file_upload_setting;D?(s("document",N.document),s("image",N.image),s("audio",N.audio)):["document_list","image_list","audio_list"].forEach(B=>{delete v.nodeModel.properties.node_data[B]}),et.set(v.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{console.log(g),et.set(v.nodeModel.properties,"status",500)})},v=e,h=()=>{var g;return(g=o.value)==null?void 0:g.validate().catch(_=>Promise.reject({node:v.nodeModel,errMessage:_}))};return Uo(()=>{c(),et.set(v.nodeModel,"validate",h)}),(g,_)=>{const w=ue("el-form-item"),O=ue("AppIcon"),S=ue("el-tooltip"),P=ue("el-switch"),A=ue("el-form"),R=ue("el-card");return Ye(),Bt(Hi,{nodeModel:g.nodeModel},{default:U(()=>[me("h5",BV,$e(g.$t("views.applicationWorkflow.nodeSetting")),1),L(R,{shadow:"never",class:"card-never"},{default:U(()=>[L(A,{onSubmit:_[6]||(_[6]=_n(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:o},{default:U(()=>[L(w,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"question_reference_address",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[L(Oi,{ref_key:"applicationNodeFormRef",ref:o,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.question_reference_address,"onUpdate:modelValue":_[0]||(_[0]=D=>r.value.question_reference_address=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("document_list")||"document_list"in r.value?(Ye(),Bt(w,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"document_list",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:U(()=>[L(Oi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.document_list,"onUpdate:modelValue":_[1]||(_[1]=D=>r.value.document_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):nr("",!0),r.value.hasOwnProperty("image_list")||"image_list"in r.value?(Ye(),Bt(w,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"image_list",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:U(()=>[L(Oi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.image_list,"onUpdate:modelValue":_[2]||(_[2]=D=>r.value.image_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):nr("",!0),r.value.hasOwnProperty("audio_list")||"audio_list"in r.value?(Ye(),Bt(w,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:U(()=>[L(Oi,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audio_list,"onUpdate:modelValue":_[3]||(_[3]=D=>r.value.audio_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):nr("",!0),(Ye(!0),Rn(Bo,null,zi(r.value.api_input_field_list,(D,N)=>(Ye(),Rn("div",{key:"api-input-"+N},[L(w,{label:D.variable,prop:"api_input_field_list."+N+".value",rules:[{required:D.is_required,message:`${g.$t("common.inputPlaceholder")}${D.variable}`,trigger:"blur"}]},{default:U(()=>[L(Oi,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[N].value,"onUpdate:modelValue":B=>r.value.api_input_field_list[N].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Ye(!0),Rn(Bo,null,zi(r.value.user_input_field_list,(D,N)=>(Ye(),Rn("div",{key:"user-input-"+N},[L(w,{label:D.label,prop:"user_input_field_list."+N+".value",rules:[{required:D.required,message:`${g.$t("common.inputPlaceholder")}${D.label}`,trigger:"blur"}]},{default:U(()=>[L(Oi,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[N].value,"onUpdate:modelValue":B=>r.value.user_input_field_list[N].value=B},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),L(w,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[5]||(_[5]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",UV,[me("div",GV,[me("span",null,$e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(S,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(P,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":_[4]||(_[4]=D=>r.value.is_result=D)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class WV extends Xi{constructor(t){super(t,VV)}}const zV={type:"application-node",model:Yi,view:WV},HV=Object.freeze(Object.defineProperty({__proto__:null,default:zV},Symbol.toStringTag,{value:"Module"})),XV={class:"dialog-footer"},YV=Cr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=wt(),s=wt(!1),c=wt(!1),v=wt({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),h=f_({name:[{required:!0,message:Qt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Qt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Qt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=wt(!1);c_(g,S=>{S||(v.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const _=S=>{S&&(v.value=et.cloneDeep(S),c.value=!0),g.value=!0},w=()=>{g.value=!1,c.value=!1},O=async S=>{S&&await S.validate(P=>{P&&o("refresh",v.value)})};return t({open:_,close:w}),(S,P)=>{const A=ue("el-input"),R=ue("el-form-item"),D=ue("el-switch"),N=ue("el-form"),B=ue("el-button"),q=ue("el-dialog");return Ye(),Bt(q,{title:c.value?S.$t("views.template.templateForm.title.editParam"):S.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":P[8]||(P[8]=Z=>g.value=Z),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":w,"append-to-body":""},{footer:U(()=>[me("span",XV,[L(B,{onClick:P[6]||(P[6]=_n(Z=>g.value=!1,["prevent"]))},{default:U(()=>[Tt($e(S.$t("common.cancel")),1)]),_:1}),L(B,{type:"primary",onClick:P[7]||(P[7]=Z=>O(r.value)),loading:s.value},{default:U(()=>[Tt($e(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[L(N,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:v.value,"require-asterisk-position":"right"},{default:U(()=>[L(R,{label:S.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:U(()=>[L(A,{modelValue:v.value.variable,"onUpdate:modelValue":P[0]||(P[0]=Z=>v.value.variable=Z),placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:P[1]||(P[1]=Z=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),L(R,{label:S.$t("dynamicsForm.paramForm.required.label"),onClick:P[3]||(P[3]=_n(()=>{},["prevent"]))},{default:U(()=>[L(D,{size:"small",modelValue:v.value.is_required,"onUpdate:modelValue":P[2]||(P[2]=Z=>v.value.is_required=Z)},null,8,["modelValue"])]),_:1},8,["label"]),L(R,{label:S.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.is_required,message:S.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:U(()=>[L(A,{modelValue:v.value.default_value,"onUpdate:modelValue":P[4]||(P[4]=Z=>v.value.default_value=Z),placeholder:S.$t("dynamicsForm.default.placeholder"),onBlur:P[5]||(P[5]=Z=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),qV={class:"flex-between mb-16"},KV={class:"lighter"},ZV=["title"],JV=["title"],QV={class:"mr-4"},eW=Cr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=wt(),o=wt(null),r=wt(),s=wt([]);function c(_,w){typeof w<"u"&&(o.value=w),r.value.open(_)}function v(_){s.value.splice(_,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function h(_){for(let O=0;O<s.value.length;O++)if(s.value[O].variable===_.variable&&o.value!==O){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}let w=t.nodeModel.properties.user_input_field_list;for(let O=0;O<w.length;O++)if(w[O].field===_.variable){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}o.value!==null?s.value.splice(o.value,1,_):s.value.push(_),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const w=n.value.$el.querySelector(".el-table__body-wrapper tbody");w&&Gw.create(w,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const S=[...s.value],[P]=S.splice(O.oldIndex,1);S.splice(O.newIndex,0,P),s.value=S,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Uo(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(_=>_.assignment_method==="api_input").forEach(_=>{s.value.push(_)}),et.set(t.nodeModel.properties,"api_input_field_list",s)}),(_,w)=>{var Z;const O=ue("Plus"),S=ue("el-icon"),P=ue("el-button"),A=ue("el-table-column"),R=ue("el-switch"),D=ue("EditPen"),N=ue("el-tooltip"),B=ue("Delete"),q=ue("el-table");return Ye(),Rn(Bo,null,[me("div",qV,[me("h5",KV,$e(_.$t("views.template.templateForm.title.apiParamPassing")),1),L(P,{link:"",type:"primary",onClick:w[0]||(w[0]=Y=>c())},{default:U(()=>[L(S,{class:"mr-4"},{default:U(()=>[L(O)]),_:1}),Tt(" "+$e(_.$t("common.add")),1)]),_:1})]),((Z=t.nodeModel.properties.api_input_field_list)==null?void 0:Z.length)>0?(Ye(),Bt(q,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[L(A,{prop:"variable",label:_.$t("dynamicsForm.paramForm.field.label")},{default:U(({row:Y})=>[me("span",{class:"ellipsis-1",title:Y.variable},$e(Y.variable),9,ZV)]),_:1},8,["label"]),L(A,{prop:"default_value",label:_.$t("dynamicsForm.default.label")},{default:U(({row:Y})=>[me("span",{class:"ellipsis-1",title:Y.default_value},$e(Y.default_value),9,JV)]),_:1},8,["label"]),L(A,{label:_.$t("common.required")},{default:U(({row:Y})=>[me("div",{onClick:w[1]||(w[1]=_n(()=>{},["stop"]))},[L(R,{disabled:"",size:"small",modelValue:Y.is_required,"onUpdate:modelValue":te=>Y.is_required=te},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),L(A,{label:_.$t("common.operation"),align:"left",width:"90"},{default:U(({row:Y,$index:te})=>[me("span",QV,[L(N,{effect:"dark",content:_.$t("common.modify"),placement:"top"},{default:U(()=>[L(P,{type:"primary",text:"",onClick:_n(G=>c(Y,te),["stop"])},{default:U(()=>[L(S,null,{default:U(()=>[L(D)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),L(N,{effect:"dark",content:_.$t("common.delete"),placement:"top"},{default:U(()=>[L(P,{type:"primary",text:"",onClick:G=>v(te)},{default:U(()=>[L(S,null,{default:U(()=>[L(B)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):nr("",!0),L(YV,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:h},null,512)],64)}}}),tW={class:"dialog-footer"},nW=Cr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=wt(),s=wt(!1),c=wt({title:Qt("chat.userInput")}),v=f_({title:[{required:!0,message:Qt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),h=wt(!1),g=O=>{O&&(c.value=et.cloneDeep(O)),h.value=!0},_=()=>{h.value=!1},w=async O=>{O&&await O.validate(S=>{S&&o("refresh",c.value)})};return t({open:g,close:_}),(O,S)=>{const P=ue("el-input"),A=ue("el-form-item"),R=ue("el-form"),D=ue("el-button"),N=ue("el-dialog");return Ye(),Bt(N,{title:O.$t("common.setting"),modelValue:h.value,"onUpdate:modelValue":S[4]||(S[4]=B=>h.value=B),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:U(()=>[me("span",tW,[L(D,{onClick:S[2]||(S[2]=_n(B=>h.value=!1,["prevent"]))},{default:U(()=>[Tt($e(O.$t("common.cancel")),1)]),_:1}),L(D,{type:"primary",onClick:S[3]||(S[3]=B=>w(r.value)),loading:s.value},{default:U(()=>[Tt($e(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[L(R,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:U(()=>[L(A,{label:O.$t("common.title"),prop:"title"},{default:U(()=>[L(P,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=B=>c.value.title=B),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=B=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),rW={class:"flex-between mb-16"},oW=["title"],iW={class:"ml-4"},aW=["title"],lW={key:0},uW=["title"],sW={key:1},cW=["title"],fW=["title"],dW={class:"mr-4"},pW=Cr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=wt(),o=wt(),r=wt(),s=wt([]),c=wt({title:Qt("chat.userInput")});function v(P,A){o.value.open(P,A)}function h(){r.value.open(c.value)}function g(P){s.value.splice(P,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function _(P,A){for(let D=0;D<s.value.length;D++)if(s.value[D].field===P.field&&A!==D){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}let R=t.nodeModel.properties.api_input_field_list;for(let D=0;D<R.length;D++)if(R[D].variable===P.field){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}A!==null?s.value.splice(A,1,P):s.value.push(P),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function w(P){c.value=P,r.value.close()}const O=P=>{var A;if(P.input_type==="PasswordInput")return"******";if(P.default_value){const R=(A=P.option_list)==null?void 0:A.filter(D=>P.default_value.indexOf(D.value)>-1).map(D=>D.label).join(",");return R||P.default_value}if(P.default_value!==void 0)return P.default_value};function S(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&Gw.create(A,{animation:150,ghostClass:"ghost-row",onEnd:R=>{if(R.oldIndex===void 0||R.newIndex===void 0)return;const D=[...s.value],[N]=D.splice(R.oldIndex,1);D.splice(R.newIndex,0,N),s.value=D,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Uo(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(P=>P.assignment_method==="user_input").forEach(P=>{s.value.push(P)}),s.value.forEach((P,A)=>{switch(P.label=P.label||P.name,P.field=P.field||P.variable,P.required=P.required||P.is_required,P.type){case"input":P.input_type="TextInput";break;case"select":P.input_type="SingleSelect";break;case"date":P.input_type="DatePicker";break}}),et.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),et.set(t.nodeModel.properties,"user_input_config",c),S()}),(P,A)=>{var K;const R=ue("Setting"),D=ue("el-icon"),N=ue("el-button"),B=ue("Plus"),q=ue("el-table-column"),Z=ue("el-tag"),Y=ue("el-switch"),te=ue("EditPen"),G=ue("el-tooltip"),C=ue("Delete"),W=ue("el-table");return Ye(),Rn(Bo,null,[me("div",rW,[me("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},$e(c.value.title),9,oW),me("div",null,[L(N,{type:"primary",link:"",onClick:h},{default:U(()=>[L(D,null,{default:U(()=>[L(R)]),_:1})]),_:1}),me("span",iW,[L(N,{link:"",type:"primary",onClick:A[0]||(A[0]=z=>v())},{default:U(()=>[L(D,{class:"mr-4"},{default:U(()=>[L(B)]),_:1}),Tt(" "+$e(P.$t("common.add")),1)]),_:1})])])]),((K=t.nodeModel.properties.user_input_field_list)==null?void 0:K.length)>0?(Ye(),Bt(W,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[L(q,{prop:"field",label:P.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:z})=>[me("span",{title:z.field,class:"ellipsis-1"},$e(z.field),9,aW)]),_:1},8,["label"]),L(q,{prop:"label",label:P.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:z})=>[z.label&&z.label.input_type==="TooltipLabel"?(Ye(),Rn("span",lW,[me("span",{title:z.label.label,class:"ellipsis-1"},$e(z.label.label),9,uW)])):(Ye(),Rn("span",sW,[me("span",{title:z.label,class:"ellipsis-1"},$e(z.label),9,cW)]))]),_:1},8,["label"]),L(q,{label:P.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:U(({row:z})=>[z.input_type==="TextInput"?(Ye(),Bt(Z,{key:0,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):nr("",!0),z.input_type==="PasswordInput"?(Ye(),Bt(Z,{key:1,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):nr("",!0),z.input_type==="Slider"?(Ye(),Bt(Z,{key:2,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):nr("",!0),z.input_type==="SwitchInput"?(Ye(),Bt(Z,{key:3,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):nr("",!0),z.input_type==="SingleSelect"?(Ye(),Bt(Z,{key:4,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):nr("",!0),z.input_type==="MultiSelect"?(Ye(),Bt(Z,{key:5,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):nr("",!0),z.input_type==="RadioCard"?(Ye(),Bt(Z,{key:6,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):nr("",!0),z.input_type==="DatePicker"?(Ye(),Bt(Z,{key:7,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):nr("",!0)]),_:1},8,["label"]),L(q,{prop:"default_value",label:P.$t("dynamicsForm.default.label")},{default:U(({row:z})=>[me("span",{title:z.default_value,class:"ellipsis-1"},$e(O(z)),9,fW)]),_:1},8,["label"]),L(q,{label:P.$t("common.required")},{default:U(({row:z})=>[me("div",{onClick:A[1]||(A[1]=_n(()=>{},["stop"]))},[L(Y,{disabled:"",size:"small",modelValue:z.required,"onUpdate:modelValue":H=>z.required=H},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),L(q,{label:P.$t("common.operation"),align:"left",width:"90"},{default:U(({row:z,$index:H})=>[me("span",dW,[L(G,{effect:"dark",content:P.$t("common.modify"),placement:"top"},{default:U(()=>[L(N,{type:"primary",text:"",onClick:_n(re=>v(z,H),["stop"])},{default:U(()=>[L(D,null,{default:U(()=>[L(te)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),L(G,{effect:"dark",content:P.$t("common.delete"),placement:"top"},{default:U(()=>[L(N,{type:"primary",text:"",onClick:re=>g(H)},{default:U(()=>[L(D,null,{default:U(()=>[L(C)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):nr("",!0),L(HL,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:_},null,512),L(nW,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:w},null,512)],64)}}}),hW="/ui/assets/icon_file-doc-e47b0d94.svg",vW="/ui/assets/icon_file-image-b904fbaa.svg",yW="/ui/assets/icon_file-audio-4b01d312.svg",mW="/ui/assets/unknown-icon-3564bdf1.svg",gW={class:"flex-between"},_W={class:"flex align-center"},bW={class:"line-height-22 mt-4"},wW={class:"flex-between"},EW={class:"flex align-center"},OW={class:"line-height-22 mt-4"},xW={class:"flex-between"},SW={class:"flex align-center"},AW={class:"line-height-22 mt-4"},TW={class:"flex-between"},MW={class:"flex align-center"},PW={class:"line-height-22 mt-4"},kW={class:"dialog-footer"},NW=Cr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=wt(!1),c=wt(!1),v=wt(""),h=wt(!1),g=wt(),_=wt(),w=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],O=["JPG","JPEG","PNG","GIF"],S=["MP3","WAV","OGG","ACC","M4A"],P=wt({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function A(Z){s.value=!0,Ov(()=>{P.value={...P.value,...Z}})}function R(){s.value=!1}const D=Z=>{P.value.otherExtensions=P.value.otherExtensions.filter(Y=>Y!==Z)},N=()=>{c.value=!0,Ov(()=>{_.value.input.focus()})},B=()=>{if(v.value){if(v.value=v.value.toUpperCase(),P.value.otherExtensions.includes(v.value)||w.includes(v.value)||O.includes(v.value)||S.includes(v.value)){c.value=!1,v.value="",aL(Qt("common.fileUpload.existingExtensionsTip"));return}P.value.otherExtensions.push(v.value)}c.value=!1,v.value=""};async function q(){const Z=g.value;Z&&await Z.validate().then(()=>{const Y=et.cloneDeep(P.value);o("refresh",Y),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:A}),(Z,Y)=>{const te=ue("el-slider"),G=ue("el-form-item"),C=ue("el-text"),W=ue("el-checkbox"),K=ue("el-card"),z=ue("el-tag"),H=ue("el-input"),re=ue("el-button"),fe=ue("el-space"),Se=ue("el-form"),Te=ue("el-dialog");return Ye(),Bt(Te,{title:Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":Y[16]||(Y[16]=he=>s.value=he),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":R,"append-to-body":"",width:"800"},{footer:U(()=>[me("span",kW,[L(re,{onClick:_n(R,["prevent"])},{default:U(()=>[Tt($e(Z.$t("common.cancel")),1)]),_:1}),L(re,{type:"primary",onClick:Y[15]||(Y[15]=he=>q()),loading:h.value},{default:U(()=>[Tt($e(Z.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:U(()=>[L(Se,{"label-position":"top",ref_key:"fieldFormRef",ref:g,model:P.value,"require-asterisk-position":"right"},{default:U(()=>[L(G,{label:Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:U(()=>[L(te,{modelValue:P.value.maxFiles,"onUpdate:modelValue":Y[0]||(Y[0]=he=>P.value.maxFiles=he),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),L(G,{label:Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:U(()=>[L(te,{modelValue:P.value.fileLimit,"onUpdate:modelValue":Y[1]||(Y[1]=he=>P.value.fileLimit=he),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),L(G,{label:Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:U(()=>[L(K,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:Y[4]||(Y[4]=_n(he=>P.value.document=!P.value.document,["stop"]))},{default:U(()=>[me("div",gW,[me("div",_W,[Y[17]||(Y[17]=me("img",{class:"mr-12",src:hW,alt:""},null,-1)),me("div",null,[me("p",bW,[Tt($e(Z.$t("common.fileUpload.document"))+" ",1),L(C,{class:"color-secondary"},{default:U(()=>[Tt($e(Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),me("p",null,$e(w.join("、")),1)])]),L(W,{modelValue:P.value.document,"onUpdate:modelValue":Y[2]||(Y[2]=he=>P.value.document=he),onChange:Y[3]||(Y[3]=he=>P.value.document=!P.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),L(K,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:Y[7]||(Y[7]=_n(he=>P.value.image=!P.value.image,["stop"]))},{default:U(()=>[me("div",wW,[me("div",EW,[Y[18]||(Y[18]=me("img",{class:"mr-12",src:vW,alt:""},null,-1)),me("div",null,[me("p",OW,[Tt($e(Z.$t("common.fileUpload.image"))+" ",1),L(C,{class:"color-secondary"},{default:U(()=>[Tt($e(Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),me("p",null,$e(O.join("、")),1)])]),L(W,{modelValue:P.value.image,"onUpdate:modelValue":Y[5]||(Y[5]=he=>P.value.image=he),onChange:Y[6]||(Y[6]=he=>P.value.image=!P.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),L(K,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:Y[10]||(Y[10]=_n(he=>P.value.audio=!P.value.audio,["stop"]))},{default:U(()=>[me("div",xW,[me("div",SW,[Y[19]||(Y[19]=me("img",{class:"mr-12",src:yW,alt:""},null,-1)),me("div",null,[me("p",AW,[Tt($e(Z.$t("common.fileUpload.audio"))+" ",1),L(C,{class:"color-secondary"},{default:U(()=>[Tt($e(Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),me("p",null,$e(S.join("、")),1)])]),L(W,{modelValue:P.value.audio,"onUpdate:modelValue":Y[8]||(Y[8]=he=>P.value.audio=he),onChange:Y[9]||(Y[9]=he=>P.value.audio=!P.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),L(K,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:Y[14]||(Y[14]=_n(he=>P.value.other=!P.value.other,["stop"]))},{default:U(()=>[me("div",TW,[me("div",MW,[Y[20]||(Y[20]=me("img",{class:"mr-12",width:32,src:mW,alt:""},null,-1)),me("div",null,[me("p",PW,[Tt($e(Z.$t("common.fileUpload.other"))+" ",1),L(C,{class:"color-secondary"},{default:U(()=>[Tt($e(Z.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),L(fe,{wrap:"",size:2,class:"mt-4"},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(P.value.otherExtensions,he=>(Ye(),Bt(z,{key:he,closable:"","disable-transitions":!1,onClose:_e=>D(he),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:U(()=>[Tt($e(he),1)]),_:2},1032,["onClose"]))),128)),c.value?(Ye(),Bt(H,{key:0,ref_key:"InputRef",ref:_,modelValue:v.value,"onUpdate:modelValue":Y[11]||(Y[11]=he=>v.value=he),size:"small",onKeyup:iL(B,["enter"]),onBlur:B},null,8,["modelValue"])):(Ye(),Bt(re,{key:1,class:"button-new-tag",size:"small",onClick:_n(N,["stop"])},{default:U(()=>[Tt(" + "+$e(Z.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),L(W,{modelValue:P.value.other,"onUpdate:modelValue":Y[12]||(Y[12]=he=>P.value.other=he),onChange:Y[13]||(Y[13]=he=>P.value.other=!P.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),RW={class:"flex-between"},jW={class:"flex align-center"},CW={class:"mr-4"},DW={class:"flex-between"},IW={class:"mr-4"},LW={class:"flex"},FW={class:"flex-between"},$W={class:"mr-4"},BW={class:"flex"},UW={class:"w-full"},GW={class:"flex-between w-full"},VW=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Vu.config.globalProperties.$route,n=e,o=wt(null),r=wt(null),s=wt(),c=wt(),v=wt(),h=wt(),g={name:"",desc:"",prologue:Qt("views.application.applicationForm.form.defaultPrologue")},_=C=>C.ctrlKey===!0?(C.preventDefault(),!0):(C.stopPropagation(),!0);function w(C){et.set(n.nodeModel.properties.node_data,"prologue",C)}const O=po({get:()=>(n.nodeModel.properties.node_data||et.set(n.nodeModel.properties,"node_data",g),n.nodeModel.properties.node_data),set:C=>{et.set(n.nodeModel.properties,"node_data",C)}}),S=wt(),P=()=>{var C;return O.value.tts_model_enable&&!O.value.tts_model_id&&O.value.tts_type==="TTS"?Promise.reject({node:n.nodeModel,errMessage:Qt("views.application.applicationForm.form.voicePlay.requiredMessage")}):O.value.stt_model_enable&&!O.value.stt_model_id?Promise.reject({node:n.nodeModel,errMessage:Qt("views.application.applicationForm.form.voiceInput.requiredMessage")}):(C=S.value)==null?void 0:C.validate().catch(W=>Promise.reject({node:n.nodeModel,errMessage:W}))};function A(){Aa.getApplicationSTTModel(t).then(C=>{o.value=et.groupBy(C==null?void 0:C.data,"provider")})}function R(){Aa.getApplicationTTSModel(t).then(C=>{r.value=et.groupBy(C==null?void 0:C.data,"provider")})}function D(){var C;O.value.tts_model_id?(C=s.value)==null||C.reset_default(O.value.tts_model_id,t):Z({})}function N(){O.value.tts_model_enable||(O.value.tts_model_id="",O.value.tts_type="BROWSER")}function B(){O.value.stt_model_enable||(O.value.stt_model_id="")}const q=()=>{var W;const C=O.value.tts_model_id;if(!C){Up(Qt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(W=s.value)==null||W.open(C,t,O.value.tts_model_params_setting)},Z=C=>{O.value.tts_model_params_setting=C},Y=()=>{const C={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]};O.value.file_upload_enable&&(O.value.file_upload_setting=O.value.file_upload_setting||C),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},te=()=>{var C;(C=h.value)==null||C.open(O.value.file_upload_setting)},G=C=>{O.value.file_upload_setting=C};return Uo(()=>{et.set(n.nodeModel,"validate",P),n.nodeModel.properties.node_data.tts_type||et.set(n.nodeModel.properties.node_data,"tts_type","BROWSER"),R(),A()}),(C,W)=>{const K=ue("el-input"),z=ue("el-form-item"),H=ue("MdEditorMagnify"),re=ue("AppIcon"),fe=ue("el-tooltip"),Se=ue("Setting"),Te=ue("el-icon"),he=ue("el-button"),_e=ue("el-switch"),De=ue("el-checkbox"),Ve=ue("ModelSelect"),vt=ue("el-radio"),rt=ue("el-radio-group"),gt=ue("Operation"),Nt=ue("el-form");return Ye(),Bt(Hi,{nodeModel:C.nodeModel},{default:U(()=>[L(Nt,{onSubmit:W[13]||(W[13]=_n(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:U(()=>[L(z,{label:C.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:vr(Qt)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[L(K,{modelValue:O.value.name,"onUpdate:modelValue":W[0]||(W[0]=yt=>O.value.name=yt),maxlength:"64",placeholder:vr(Qt)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:W[1]||(W[1]=yt=>{var Yt;return O.value.name=(Yt=O.value.name)==null?void 0:Yt.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),L(z,{label:C.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:U(()=>[L(K,{modelValue:O.value.desc,"onUpdate:modelValue":W[2]||(W[2]=yt=>O.value.desc=yt),placeholder:C.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),L(z,{label:C.$t("views.application.applicationForm.form.prologue")},{default:U(()=>[L(H,{onWheel:_,title:C.$t("views.application.applicationForm.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":W[3]||(W[3]=yt=>O.value.prologue=yt),style:{height:"150px"},onSubmitDialog:w},null,8,["title","modelValue"])]),_:1},8,["label"]),L(z,null,{label:U(()=>[me("div",RW,[me("div",jW,[me("span",CW,$e(C.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),L(fe,{effect:"dark",content:C.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:U(()=>[L(re,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),me("div",null,[O.value.file_upload_enable?(Ye(),Bt(he,{key:0,type:"primary",link:"",onClick:te,class:"mr-4"},{default:U(()=>[L(Te,{class:"mr-4"},{default:U(()=>[L(Se)]),_:1})]),_:1})):nr("",!0),L(_e,{size:"small",modelValue:O.value.file_upload_enable,"onUpdate:modelValue":W[4]||(W[4]=yt=>O.value.file_upload_enable=yt),onChange:Y},null,8,["modelValue"])])])]),_:1}),L(pW,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":C.nodeModel},null,8,["node-model"]),L(eW,{ref_key:"ApiInputFieldTableFef",ref:v,"node-model":C.nodeModel},null,8,["node-model"]),L(z,null,{label:U(()=>[me("div",DW,[me("span",IW,$e(C.$t("views.application.applicationForm.form.voiceInput.label")),1),me("div",LW,[O.value.stt_model_enable?(Ye(),Bt(De,{key:0,modelValue:O.value.stt_autosend,"onUpdate:modelValue":W[5]||(W[5]=yt=>O.value.stt_autosend=yt)},{default:U(()=>[Tt($e(C.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):nr("",!0),L(_e,{class:"ml-8",size:"small",modelValue:O.value.stt_model_enable,"onUpdate:modelValue":W[6]||(W[6]=yt=>O.value.stt_model_enable=yt),onChange:B},null,8,["modelValue"])])])]),default:U(()=>[Pl(L(Ve,{onWheel:_,modelValue:O.value.stt_model_id,"onUpdate:modelValue":W[7]||(W[7]=yt=>O.value.stt_model_id=yt),placeholder:C.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:o.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[wv,O.value.stt_model_enable]])]),_:1}),L(z,null,{label:U(()=>[me("div",FW,[me("span",$W,$e(C.$t("views.application.applicationForm.form.voicePlay.label")),1),me("div",BW,[O.value.tts_model_enable?(Ye(),Bt(De,{key:0,modelValue:O.value.tts_autoplay,"onUpdate:modelValue":W[8]||(W[8]=yt=>O.value.tts_autoplay=yt)},{default:U(()=>[Tt($e(C.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):nr("",!0),L(_e,{class:"ml-8",size:"small",modelValue:O.value.tts_model_enable,"onUpdate:modelValue":W[9]||(W[9]=yt=>O.value.tts_model_enable=yt),onChange:N},null,8,["modelValue"])])])]),default:U(()=>[me("div",UW,[Pl(L(rt,{modelValue:O.value.tts_type,"onUpdate:modelValue":W[10]||(W[10]=yt=>O.value.tts_type=yt)},{default:U(()=>[L(vt,{label:C.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),L(vt,{label:C.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[wv,O.value.tts_model_enable]])]),me("div",GW,[O.value.tts_type==="TTS"&&O.value.tts_model_enable?(Ye(),Bt(Ve,{key:0,onWheel:_,modelValue:O.value.tts_model_id,"onUpdate:modelValue":W[11]||(W[11]=yt=>O.value.tts_model_id=yt),placeholder:C.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:W[12]||(W[12]=yt=>D()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):nr("",!0),O.value.tts_type==="TTS"&&O.value.tts_model_enable?(Ye(),Bt(he,{key:1,onClick:q,disabled:!O.value.tts_model_id,class:"ml-8"},{default:U(()=>[L(Te,null,{default:U(()=>[L(Te,null,{default:U(()=>[L(gt)]),_:1})]),_:1})]),_:1},8,["disabled"])):nr("",!0)])]),_:1})]),_:1},8,["model"]),L(KM,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:Z},null,512),L(NW,{ref_key:"FileUploadSettingDialogRef",ref:h,"node-model":C.nodeModel,onRefresh:G},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const WW=Rv(VW,[["__scopeId","data-v-03a19435"]]);class zW extends Xi{constructor(t){super(t,WW)}}class HW extends Yi{constructor(t,n){super(t,n)}get_width(){return 600}}const XW={type:"base-node",model:HW,view:zW},YW=Object.freeze(Object.defineProperty({__proto__:null,default:XW},Symbol.toStringTag,{value:"Module"})),qW="/ui/assets/sort-e73e69bf.svg";var KW=Object.defineProperty,zg=Object.getOwnPropertySymbols,ok=Object.prototype.hasOwnProperty,ik=Object.prototype.propertyIsEnumerable,YA=(e,t,n)=>t in e?KW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sv=(e,t)=>{for(var n in t||(t={}))ok.call(t,n)&&YA(e,n,t[n]);if(zg)for(var n of zg(t))ik.call(t,n)&&YA(e,n,t[n]);return e},ak=(e,t)=>{var n={};for(var o in e)ok.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&zg)for(var o of zg(e))t.indexOf(o)<0&&ik.call(e,o)&&(n[o]=e[o]);return n};const lk="[vue-draggable-plus]: ";function ZW(e){console.warn(lk+e)}function JW(e){console.error(lk+e)}function qA(e,t,n){return n>=0&&n<e.length&&e.splice(n,0,e.splice(t,1)[0]),e}function QW(e){return e.replace(/-(\w)/g,(t,n)=>n?n.toUpperCase():"")}function ez(e){return Object.keys(e).reduce((t,n)=>(typeof e[n]<"u"&&(t[QW(n)]=e[n]),t),{})}function KA(e,t){return Array.isArray(e)&&e.splice(t,1),e}function ZA(e,t,n){return Array.isArray(e)&&e.splice(t,0,n),e}function tz(e){return typeof e>"u"}function nz(e){return typeof e=="string"}function JA(e,t,n){const o=e.children[n];e.insertBefore(t,o)}function P1(e){e.parentNode&&e.parentNode.removeChild(e)}function rz(e,t=document){var n;let o=null;return typeof(t==null?void 0:t.querySelector)=="function"?o=(n=t==null?void 0:t.querySelector)==null?void 0:n.call(t,e):o=document.querySelector(e),o||ZW(`Element not found: ${e}`),o}function oz(e,t,n=null){return function(...o){return e.apply(n,o),t.apply(n,o)}}function iz(e,t){const n=sv({},e);return Object.keys(t).forEach(o=>{n[o]?n[o]=oz(e[o],t[o]):n[o]=t[o]}),n}function az(e){return e instanceof HTMLElement}function QA(e,t){Object.keys(e).forEach(n=>{t(n,e[n])})}function lz(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const uz=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(o){sz(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bg=function(t){return typeof t}:bg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function sz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tf(){return Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tf.apply(this,arguments)}function cz(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function fz(e,t){if(e==null)return{};var n=cz(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var dz="1.15.2";function xf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Nf=xf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),em=xf(/Edge/i),tT=xf(/firefox/i),Py=xf(/safari/i)&&!xf(/chrome/i)&&!xf(/android/i),uk=xf(/iP(ad|od|hone)/i),sk=xf(/chrome/i)&&xf(/android/i),ck={capture:!1,passive:!1};function fo(e,t,n){e.addEventListener(t,n,!Nf&&ck)}function oo(e,t,n){e.removeEventListener(t,n,!Nf&&ck)}function Hg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function pz(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function vs(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Hg(e,t):Hg(e,t))||o&&e===n)return e;if(e===n)break}while(e=pz(e))}return null}var nT=/\s+/g;function ru(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(nT," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(nT," ")}}function _r(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function hv(e,t){var n="";if(typeof e=="string")n=e;else do{var o=_r(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function fk(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function cc(){var e=document.scrollingElement;return e||document.documentElement}function Wi(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,v,h,g,_,w;if(e!==window&&e.parentNode&&e!==cc()?(s=e.getBoundingClientRect(),c=s.top,v=s.left,h=s.bottom,g=s.right,_=s.height,w=s.width):(c=0,v=0,h=window.innerHeight,g=window.innerWidth,_=window.innerHeight,w=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Nf))do if(r&&r.getBoundingClientRect&&(_r(r,"transform")!=="none"||n&&_r(r,"position")!=="static")){var O=r.getBoundingClientRect();c-=O.top+parseInt(_r(r,"border-top-width")),v-=O.left+parseInt(_r(r,"border-left-width")),h=c+s.height,g=v+s.width;break}while(r=r.parentNode);if(o&&e!==window){var S=hv(r||e),P=S&&S.a,A=S&&S.d;S&&(c/=A,v/=P,w/=P,_/=A,h=c+_,g=v+w)}return{top:c,left:v,bottom:h,right:g,width:w,height:_}}}function rT(e,t,n){for(var o=Rd(e,!0),r=Wi(e)[t];o;){var s=Wi(o)[n],c=void 0;if(c=r>=s,!c)return o;if(o===cc())break;o=Rd(o,!1)}return!1}function Sv(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==br.ghost&&(o||c[s]!==br.dragged)&&vs(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function wE(e,t){for(var n=e.lastElementChild;n&&(n===br.ghost||_r(n,"display")==="none"||t&&!Hg(n,t));)n=n.previousElementSibling;return n||null}function Cu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==br.clone&&(!t||Hg(e,t))&&n++;return n}function oT(e){var t=0,n=0,o=cc();if(e)do{var r=hv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function hz(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Rd(e,t){if(!e||!e.getBoundingClientRect)return cc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=_r(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return cc();if(o||t)return n;o=!0}}while(n=n.parentNode);return cc()}function vz(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function k1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ky;function dk(e,t){return function(){if(!ky){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),ky=setTimeout(function(){ky=void 0},t)}}}function yz(){clearTimeout(ky),ky=void 0}function pk(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function hk(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function vk(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,v,h;if(!(!vs(r,t.draggable,e,!1)||r.animated||r===n)){var g=Wi(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,g.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,g.top),o.right=Math.max((v=o.right)!==null&&v!==void 0?v:-1/0,g.right),o.bottom=Math.max((h=o.bottom)!==null&&h!==void 0?h:-1/0,g.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var iu="Sortable"+new Date().getTime();function mz(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(_r(o,"display")==="none"||o===br.ghost)){e.push({target:o,rect:Wi(o)});var r=dc({},e[e.length-1].rect);if(o.thisAnimationDuration){var s=hv(o,!0);s&&(r.top-=s.f,r.left-=s.e)}o.fromRect=r}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(hz(e,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var r=!1,s=0;e.forEach(function(c){var v=0,h=c.target,g=h.fromRect,_=Wi(h),w=h.prevFromRect,O=h.prevToRect,S=c.rect,P=hv(h,!0);P&&(_.top-=P.f,_.left-=P.e),h.toRect=_,h.thisAnimationDuration&&k1(w,_)&&!k1(g,_)&&(S.top-_.top)/(S.left-_.left)===(g.top-_.top)/(g.left-_.left)&&(v=_z(S,w,O,o.options)),k1(_,g)||(h.prevFromRect=g,h.prevToRect=_,v||(v=o.options.animation),o.animate(h,S,_,v)),v&&(r=!0,s=Math.max(s,v),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},v),h.thisAnimationDuration=v)}),clearTimeout(t),r?t=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),e=[]},animate:function(n,o,r,s){if(s){_r(n,"transition",""),_r(n,"transform","");var c=hv(this.el),v=c&&c.a,h=c&&c.d,g=(o.left-r.left)/(v||1),_=(o.top-r.top)/(h||1);n.animatingX=!!g,n.animatingY=!!_,_r(n,"transform","translate3d("+g+"px,"+_+"px,0)"),this.forRepaintDummy=gz(n),_r(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),_r(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){_r(n,"transition",""),_r(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function gz(e){return e.offsetWidth}function _z(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var qh=[],N1={initializeByDefault:!0},tm={mount:function(e){for(var t in N1)N1.hasOwnProperty(t)&&!(t in e)&&(e[t]=N1[t]);qh.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),qh.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=e+"Global";qh.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][r]&&t[s.pluginName][r](dc({sortable:t},n)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](dc({sortable:t},n)))})},initializePlugins:function(e,t,n,o){qh.forEach(function(c){var v=c.pluginName;if(!(!e.options[v]&&!c.initializeByDefault)){var h=new c(e,t,e.options);h.sortable=e,h.options=e.options,e[v]=h,Tf(n,h.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var s=this.modifyOption(e,r,e.options[r]);typeof s<"u"&&(e.options[r]=s)}},getEventProperties:function(e,t){var n={};return qh.forEach(function(o){typeof o.eventProperties=="function"&&Tf(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return qh.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(o=r.optionListeners[t].call(e[r.pluginName],n))}),o}};function bz(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,v=e.fromEl,h=e.oldIndex,g=e.newIndex,_=e.oldDraggableIndex,w=e.newDraggableIndex,O=e.originalEvent,S=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[iu],!!t){var A,R=t.options,D="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Nf&&!em?A=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(o,!0,!0)),A.to=c||n,A.from=v||n,A.item=r||n,A.clone=s,A.oldIndex=h,A.newIndex=g,A.oldDraggableIndex=_,A.newDraggableIndex=w,A.originalEvent=O,A.pullMode=S?S.lastPutMode:void 0;var N=dc(dc({},P),tm.getEventProperties(o,t));for(var B in N)A[B]=N[B];n&&n.dispatchEvent(A),R[D]&&R[D].call(t,A)}}var wz=["evt"],Ml=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,r=fz(n,wz);tm.pluginEvent.bind(br)(e,t,dc({dragEl:vn,parentEl:Ei,ghostEl:Tr,rootEl:ui,nextEl:Dp,lastDownEl:wg,cloneEl:vi,cloneHidden:Nd,dragStarted:_y,putSortable:Oa,activeSortable:br.active,originalEvent:o,oldIndex:cv,oldDraggableIndex:Ny,newIndex:ou,newDraggableIndex:kd,hideGhostForTarget:_k,unhideGhostForTarget:bk,cloneNowHidden:function(){Nd=!0},cloneNowShown:function(){Nd=!1},dispatchSortableEvent:function(s){il({sortable:t,name:s,originalEvent:o})}},r))};function il(e){bz(dc({putSortable:Oa,cloneEl:vi,targetEl:vn,rootEl:ui,oldIndex:cv,oldDraggableIndex:Ny,newIndex:ou,newDraggableIndex:kd},e))}var vn,Ei,Tr,ui,Dp,wg,vi,Nd,cv,ou,Ny,kd,lg,Oa,ev=!1,Xg=!1,Yg=[],Rp,hs,R1,j1,iT,aT,_y,Kh,Ry,jy=!1,ug=!1,Eg,Ba,C1=[],gw=!1,qg=[],T_=typeof document<"u",sg=uk,lT=em||Nf?"cssFloat":"float",Ez=T_&&!sk&&!uk&&"draggable"in document.createElement("div"),yk=function(){if(T_){if(Nf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),mk=function(e,t){var n=_r(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Sv(e,0,t),s=Sv(e,1,t),c=r&&_r(r),v=s&&_r(s),h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Wi(r).width,g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Wi(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&c.float&&c.float!=="none"){var _=c.float==="left"?"left":"right";return s&&(v.clear==="both"||v.clear===_)?"vertical":"horizontal"}return r&&(c.display==="block"||c.display==="flex"||c.display==="table"||c.display==="grid"||h>=o&&n[lT]==="none"||s&&n[lT]==="none"&&h+g>o)?"vertical":"horizontal"},Oz=function(e,t,n){var o=n?e.left:e.top,r=n?e.right:e.bottom,s=n?e.width:e.height,c=n?t.left:t.top,v=n?t.right:t.bottom,h=n?t.width:t.height;return o===c||r===v||o+s/2===c+h/2},xz=function(e,t){var n;return Yg.some(function(o){var r=o[iu].options.emptyInsertThreshold;if(!(!r||wE(o))){var s=Wi(o),c=e>=s.left-r&&e<=s.right+r,v=t>=s.top-r&&t<=s.bottom+r;if(c&&v)return n=o}}),n},gk=function(e){function t(r,s){return function(c,v,h,g){var _=c.options.group.name&&v.options.group.name&&c.options.group.name===v.options.group.name;if(r==null&&(s||_))return!0;if(r==null||r===!1)return!1;if(s&&r==="clone")return r;if(typeof r=="function")return t(r(c,v,h,g),s)(c,v,h,g);var w=(s?c:v).options.group.name;return r===!0||typeof r=="string"&&r===w||r.join&&r.indexOf(w)>-1}}var n={},o=e.group;(!o||bg(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},_k=function(){!yk&&Tr&&_r(Tr,"display","none")},bk=function(){!yk&&Tr&&_r(Tr,"display","")};T_&&!sk&&document.addEventListener("click",function(e){if(Xg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xg=!1,!1},!0);var jp=function(e){if(vn){e=e.touches?e.touches[0]:e;var t=xz(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[iu]._onDragOver(n)}}},Sz=function(e){vn&&vn.parentNode[iu]._isOutsideThisEl(e.target)};function br(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Tf({},t),e[iu]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return mk(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,c){s.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:br.supportPointer!==!1&&"PointerEvent"in window&&!Py,emptyInsertThreshold:5};tm.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);gk(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:Ez,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?fo(e,"pointerdown",this._onTapStart):(fo(e,"mousedown",this._onTapStart),fo(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fo(e,"dragover",this),fo(e,"dragenter",this)),Yg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Tf(this,mz())}br.prototype={constructor:br,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Kh=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,vn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,r=o.preventOnFilter,s=e.type,c=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(c||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,g=o.filter;if(jz(n),!vn&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||o.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&Py&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=vs(v,o.draggable,n,!1),!(v&&v.animated)&&wg!==v)){if(cv=Cu(v),Ny=Cu(v,o.draggable),typeof g=="function"){if(g.call(this,e,v,this)){il({sortable:t,rootEl:h,name:"filter",targetEl:v,toEl:n,fromEl:n}),Ml("filter",t,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(_){if(_=vs(h,_.trim(),n,!1),_)return il({sortable:t,rootEl:_,name:"filter",targetEl:v,fromEl:n,toEl:n}),Ml("filter",t,{evt:e}),!0}),g)){r&&e.cancelable&&e.preventDefault();return}o.handle&&!vs(h,o.handle,n,!1)||this._prepareDragStart(e,c,v)}}},_prepareDragStart:function(e,t,n){var o=this,r=o.el,s=o.options,c=r.ownerDocument,v;if(n&&!vn&&n.parentNode===r){var h=Wi(n);if(ui=r,vn=n,Ei=vn.parentNode,Dp=vn.nextSibling,wg=n,lg=s.group,br.dragged=vn,Rp={target:vn,clientX:(t||e).clientX,clientY:(t||e).clientY},iT=Rp.clientX-h.left,aT=Rp.clientY-h.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,vn.style["will-change"]="all",v=function(){if(Ml("delayEnded",o,{evt:e}),br.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!tT&&o.nativeDraggable&&(vn.draggable=!0),o._triggerDragStart(e,t),il({sortable:o,name:"choose",originalEvent:e}),ru(vn,s.chosenClass,!0)},s.ignore.split(",").forEach(function(g){fk(vn,g.trim(),D1)}),fo(c,"dragover",jp),fo(c,"mousemove",jp),fo(c,"touchmove",jp),fo(c,"mouseup",o._onDrop),fo(c,"touchend",o._onDrop),fo(c,"touchcancel",o._onDrop),tT&&this.nativeDraggable&&(this.options.touchStartThreshold=4,vn.draggable=!0),Ml("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(em||Nf))){if(br.eventCanceled){this._onDrop();return}fo(c,"mouseup",o._disableDelayedDrag),fo(c,"touchend",o._disableDelayedDrag),fo(c,"touchcancel",o._disableDelayedDrag),fo(c,"mousemove",o._delayedDragTouchMoveHandler),fo(c,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&fo(c,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(v,s.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){vn&&D1(vn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;oo(e,"mouseup",this._disableDelayedDrag),oo(e,"touchend",this._disableDelayedDrag),oo(e,"touchcancel",this._disableDelayedDrag),oo(e,"mousemove",this._delayedDragTouchMoveHandler),oo(e,"touchmove",this._delayedDragTouchMoveHandler),oo(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?fo(document,"pointermove",this._onTouchMove):t?fo(document,"touchmove",this._onTouchMove):fo(document,"mousemove",this._onTouchMove):(fo(vn,"dragend",this),fo(ui,"dragstart",this._onDragStart));try{document.selection?Og(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(ev=!1,ui&&vn){Ml("dragStarted",this,{evt:t}),this.nativeDraggable&&fo(document,"dragover",Sz);var n=this.options;!e&&ru(vn,n.dragClass,!1),ru(vn,n.ghostClass,!0),br.active=this,e&&this._appendGhost(),il({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(hs){this._lastX=hs.clientX,this._lastY=hs.clientY,_k();for(var e=document.elementFromPoint(hs.clientX,hs.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(hs.clientX,hs.clientY),e!==t);)t=e;if(vn.parentNode[iu]._isOutsideThisEl(e),t)do{if(t[iu]){var n=void 0;if(n=t[iu]._onDragOver({clientX:hs.clientX,clientY:hs.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);bk()}},_onTouchMove:function(e){if(Rp){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,s=Tr&&hv(Tr,!0),c=Tr&&s&&s.a,v=Tr&&s&&s.d,h=sg&&Ba&&oT(Ba),g=(r.clientX-Rp.clientX+o.x)/(c||1)+(h?h[0]-C1[0]:0)/(c||1),_=(r.clientY-Rp.clientY+o.y)/(v||1)+(h?h[1]-C1[1]:0)/(v||1);if(!br.active&&!ev){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Tr){s?(s.e+=g-(R1||0),s.f+=_-(j1||0)):s={a:1,b:0,c:0,d:1,e:g,f:_};var w="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");_r(Tr,"webkitTransform",w),_r(Tr,"mozTransform",w),_r(Tr,"msTransform",w),_r(Tr,"transform",w),R1=g,j1=_,hs=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Tr){var e=this.options.fallbackOnBody?document.body:ui,t=Wi(vn,!0,sg,!0,e),n=this.options;if(sg){for(Ba=e;_r(Ba,"position")==="static"&&_r(Ba,"transform")==="none"&&Ba!==document;)Ba=Ba.parentNode;Ba!==document.body&&Ba!==document.documentElement?(Ba===document&&(Ba=cc()),t.top+=Ba.scrollTop,t.left+=Ba.scrollLeft):Ba=cc(),C1=oT(Ba)}Tr=vn.cloneNode(!0),ru(Tr,n.ghostClass,!1),ru(Tr,n.fallbackClass,!0),ru(Tr,n.dragClass,!0),_r(Tr,"transition",""),_r(Tr,"transform",""),_r(Tr,"box-sizing","border-box"),_r(Tr,"margin",0),_r(Tr,"top",t.top),_r(Tr,"left",t.left),_r(Tr,"width",t.width),_r(Tr,"height",t.height),_r(Tr,"opacity","0.8"),_r(Tr,"position",sg?"absolute":"fixed"),_r(Tr,"zIndex","100000"),_r(Tr,"pointerEvents","none"),br.ghost=Tr,e.appendChild(Tr),_r(Tr,"transform-origin",iT/parseInt(Tr.style.width)*100+"% "+aT/parseInt(Tr.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,r=n.options;if(Ml("dragStart",this,{evt:e}),br.eventCanceled){this._onDrop();return}Ml("setupClone",this),br.eventCanceled||(vi=hk(vn),vi.removeAttribute("id"),vi.draggable=!1,vi.style["will-change"]="",this._hideClone(),ru(vi,this.options.chosenClass,!1),br.clone=vi),n.cloneId=Og(function(){Ml("clone",n),!br.eventCanceled&&(n.options.removeCloneOnHide||ui.insertBefore(vi,vn),n._hideClone(),il({sortable:n,name:"clone"}))}),!t&&ru(vn,r.dragClass,!0),t?(Xg=!0,n._loopId=setInterval(n._emulateDragOver,50)):(oo(document,"mouseup",n._onDrop),oo(document,"touchend",n._onDrop),oo(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,vn)),fo(document,"drop",n),_r(vn,"transform","translateZ(0)")),ev=!0,n._dragStartId=Og(n._dragStarted.bind(n,t,e)),fo(document,"selectstart",n),_y=!0,Py&&_r(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,o,r,s,c=this.options,v=c.group,h=br.active,g=lg===v,_=c.sort,w=Oa||h,O,S=this,P=!1;if(gw)return;function A(Te,he){Ml(Te,S,dc({evt:e,isOwner:g,axis:O?"vertical":"horizontal",revert:s,dragRect:o,targetRect:r,canSort:_,fromSortable:w,target:n,completed:D,onMove:function(_e,De){return cg(ui,t,vn,o,_e,Wi(_e),e,De)},changed:N},he))}function R(){A("dragOverAnimationCapture"),S.captureAnimationState(),S!==w&&w.captureAnimationState()}function D(Te){return A("dragOverCompleted",{insertion:Te}),Te&&(g?h._hideClone():h._showClone(S),S!==w&&(ru(vn,Oa?Oa.options.ghostClass:h.options.ghostClass,!1),ru(vn,c.ghostClass,!0)),Oa!==S&&S!==br.active?Oa=S:S===br.active&&Oa&&(Oa=null),w===S&&(S._ignoreWhileAnimating=n),S.animateAll(function(){A("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(n===vn&&!vn.animated||n===t&&!n.animated)&&(Kh=null),!c.dragoverBubble&&!e.rootEl&&n!==document&&(vn.parentNode[iu]._isOutsideThisEl(e.target),!Te&&jp(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),P=!0}function N(){ou=Cu(vn),kd=Cu(vn,c.draggable),il({sortable:S,name:"change",toEl:t,newIndex:ou,newDraggableIndex:kd,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=vs(n,c.draggable,t,!0),A("dragOver"),br.eventCanceled)return P;if(vn.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||S._ignoreWhileAnimating===n)return D(!1);if(Xg=!1,h&&!c.disabled&&(g?_||(s=Ei!==ui):Oa===this||(this.lastPutMode=lg.checkPull(this,h,vn,e))&&v.checkPut(this,h,vn,e))){if(O=this._getDirection(e,n)==="vertical",o=Wi(vn),A("dragOverValid"),br.eventCanceled)return P;if(s)return Ei=ui,R(),this._hideClone(),A("revert"),br.eventCanceled||(Dp?ui.insertBefore(vn,Dp):ui.appendChild(vn)),D(!0);var B=wE(t,c.draggable);if(!B||Pz(e,O,this)&&!B.animated){if(B===vn)return D(!1);if(B&&t===e.target&&(n=B),n&&(r=Wi(n)),cg(ui,t,vn,o,n,r,e,!!n)!==!1)return R(),B&&B.nextSibling?t.insertBefore(vn,B.nextSibling):t.appendChild(vn),Ei=t,N(),D(!0)}else if(B&&Mz(e,O,this)){var q=Sv(t,0,c,!0);if(q===vn)return D(!1);if(n=q,r=Wi(n),cg(ui,t,vn,o,n,r,e,!1)!==!1)return R(),t.insertBefore(vn,q),Ei=t,N(),D(!0)}else if(n.parentNode===t){r=Wi(n);var Z=0,Y,te=vn.parentNode!==t,G=!Oz(vn.animated&&vn.toRect||o,n.animated&&n.toRect||r,O),C=O?"top":"left",W=rT(n,"top","top")||rT(vn,"top","top"),K=W?W.scrollTop:void 0;Kh!==n&&(Y=r[C],jy=!1,ug=!G&&c.invertSwap||te),Z=kz(e,n,r,O,G?1:c.swapThreshold,c.invertedSwapThreshold==null?c.swapThreshold:c.invertedSwapThreshold,ug,Kh===n);var z;if(Z!==0){var H=Cu(vn);do H-=Z,z=Ei.children[H];while(z&&(_r(z,"display")==="none"||z===Tr))}if(Z===0||z===n)return D(!1);Kh=n,Ry=Z;var re=n.nextElementSibling,fe=!1;fe=Z===1;var Se=cg(ui,t,vn,o,n,r,e,fe);if(Se!==!1)return(Se===1||Se===-1)&&(fe=Se===1),gw=!0,setTimeout(Tz,30),R(),fe&&!re?t.appendChild(vn):n.parentNode.insertBefore(vn,fe?re:n),W&&pk(W,0,K-W.scrollTop),Ei=vn.parentNode,Y!==void 0&&!ug&&(Eg=Math.abs(Y-Wi(n)[C])),N(),D(!0)}if(t.contains(vn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){oo(document,"mousemove",this._onTouchMove),oo(document,"touchmove",this._onTouchMove),oo(document,"pointermove",this._onTouchMove),oo(document,"dragover",jp),oo(document,"mousemove",jp),oo(document,"touchmove",jp)},_offUpEvents:function(){var e=this.el.ownerDocument;oo(e,"mouseup",this._onDrop),oo(e,"touchend",this._onDrop),oo(e,"pointerup",this._onDrop),oo(e,"touchcancel",this._onDrop),oo(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ou=Cu(vn),kd=Cu(vn,n.draggable),Ml("drop",this,{evt:e}),Ei=vn&&vn.parentNode,ou=Cu(vn),kd=Cu(vn,n.draggable),br.eventCanceled){this._nulling();return}ev=!1,ug=!1,jy=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_w(this.cloneId),_w(this._dragStartId),this.nativeDraggable&&(oo(document,"drop",this),oo(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Py&&_r(document.body,"user-select",""),_r(vn,"transform",""),e&&(_y&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Tr&&Tr.parentNode&&Tr.parentNode.removeChild(Tr),(ui===Ei||Oa&&Oa.lastPutMode!=="clone")&&vi&&vi.parentNode&&vi.parentNode.removeChild(vi),vn&&(this.nativeDraggable&&oo(vn,"dragend",this),D1(vn),vn.style["will-change"]="",_y&&!ev&&ru(vn,Oa?Oa.options.ghostClass:this.options.ghostClass,!1),ru(vn,this.options.chosenClass,!1),il({sortable:this,name:"unchoose",toEl:Ei,newIndex:null,newDraggableIndex:null,originalEvent:e}),ui!==Ei?(ou>=0&&(il({rootEl:Ei,name:"add",toEl:Ei,fromEl:ui,originalEvent:e}),il({sortable:this,name:"remove",toEl:Ei,originalEvent:e}),il({rootEl:Ei,name:"sort",toEl:Ei,fromEl:ui,originalEvent:e}),il({sortable:this,name:"sort",toEl:Ei,originalEvent:e})),Oa&&Oa.save()):ou!==cv&&ou>=0&&(il({sortable:this,name:"update",toEl:Ei,originalEvent:e}),il({sortable:this,name:"sort",toEl:Ei,originalEvent:e})),br.active&&((ou==null||ou===-1)&&(ou=cv,kd=Ny),il({sortable:this,name:"end",toEl:Ei,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ml("nulling",this),ui=vn=Ei=Tr=Dp=vi=wg=Nd=Rp=hs=_y=ou=kd=cv=Ny=Kh=Ry=Oa=lg=br.dragged=br.ghost=br.clone=br.active=null,qg.forEach(function(e){e.checked=!0}),qg.length=R1=j1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":vn&&(this._onDragOver(e),Az(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,o=0,r=n.length,s=this.options;o<r;o++)t=n[o],vs(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Rz(t));return e},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(r,s){var c=o.children[s];vs(c,this.options.draggable,o,!1)&&(n[r]=c)},this),t&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(o.removeChild(n[r]),o.appendChild(n[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return vs(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var o=tm.modifyOption(this,e,t);typeof o<"u"?n[e]=o:n[e]=t,e==="group"&&gk(n)},destroy:function(){Ml("destroy",this);var e=this.el;e[iu]=null,oo(e,"mousedown",this._onTapStart),oo(e,"touchstart",this._onTapStart),oo(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(oo(e,"dragover",this),oo(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yg.splice(Yg.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Nd){if(Ml("hideClone",this),br.eventCanceled)return;_r(vi,"display","none"),this.options.removeCloneOnHide&&vi.parentNode&&vi.parentNode.removeChild(vi),Nd=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Nd){if(Ml("showClone",this),br.eventCanceled)return;vn.parentNode==ui&&!this.options.group.revertClone?ui.insertBefore(vi,vn):Dp?ui.insertBefore(vi,Dp):ui.appendChild(vi),this.options.group.revertClone&&this.animate(vn,vi),_r(vi,"display",""),Nd=!1}}};function Az(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function cg(e,t,n,o,r,s,c,v){var h,g=e[iu],_=g.options.onMove,w;return window.CustomEvent&&!Nf&&!em?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=t,h.from=e,h.dragged=n,h.draggedRect=o,h.related=r||t,h.relatedRect=s||Wi(t),h.willInsertAfter=v,h.originalEvent=c,e.dispatchEvent(h),_&&(w=_.call(g,h,c)),w}function D1(e){e.draggable=!1}function Tz(){gw=!1}function Mz(e,t,n){var o=Wi(Sv(n.el,0,n.options,!0)),r=vk(n.el,n.options,Tr),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function Pz(e,t,n){var o=Wi(wE(n.el,n.options.draggable)),r=vk(n.el,n.options,Tr),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function kz(e,t,n,o,r,s,c,v){var h=o?e.clientY:e.clientX,g=o?n.height:n.width,_=o?n.top:n.left,w=o?n.bottom:n.right,O=!1;if(!c){if(v&&Eg<g*r){if(!jy&&(Ry===1?h>_+g*s/2:h<w-g*s/2)&&(jy=!0),jy)O=!0;else if(Ry===1?h<_+Eg:h>w-Eg)return-Ry}else if(h>_+g*(1-r)/2&&h<w-g*(1-r)/2)return Nz(t)}return O=O||c,O&&(h<_+g*s/2||h>w-g*s/2)?h>_+g/2?1:-1:0}function Nz(e){return Cu(vn)<Cu(e)?1:-1}function Rz(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function jz(e){qg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&qg.push(o)}}function Og(e){return setTimeout(e,0)}function _w(e){return clearTimeout(e)}T_&&fo(document,"touchmove",function(e){(br.active||ev)&&e.cancelable&&e.preventDefault()});br.utils={on:fo,off:oo,css:_r,find:fk,is:function(e,t){return!!vs(e,t,e,!1)},extend:vz,throttle:dk,closest:vs,toggleClass:ru,clone:hk,index:Cu,nextTick:Og,cancelNextTick:_w,detectDirection:mk,getChild:Sv};br.get=function(e){return e[iu]};br.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(br.utils=dc(dc({},br.utils),o.utils)),tm.mount(o)})};br.create=function(e,t){return new br(e,t)};br.version=dz;var Vi=[],by,bw,ww=!1,I1,L1,Kg,wy;function Cz(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?fo(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fo(document,"pointermove",this._handleFallbackAutoScroll):n.touches?fo(document,"touchmove",this._handleFallbackAutoScroll):fo(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?oo(document,"dragover",this._handleAutoScroll):(oo(document,"pointermove",this._handleFallbackAutoScroll),oo(document,"touchmove",this._handleFallbackAutoScroll),oo(document,"mousemove",this._handleFallbackAutoScroll)),uT(),xg(),yz()},nulling:function(){Kg=bw=by=ww=wy=I1=L1=null,Vi.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,c=document.elementFromPoint(r,s);if(Kg=t,n||this.options.forceAutoScrollFallback||em||Nf||Py){F1(t,this.options,c,n);var v=Rd(c,!0);ww&&(!wy||r!==I1||s!==L1)&&(wy&&uT(),wy=setInterval(function(){var h=Rd(document.elementFromPoint(r,s),!0);h!==v&&(v=h,xg()),F1(t,o.options,h,n)},10),I1=r,L1=s)}else{if(!this.options.bubbleScroll||Rd(c,!0)===cc()){xg();return}F1(t,this.options,Rd(c,!1),!1)}}},Tf(e,{pluginName:"scroll",initializeByDefault:!0})}function xg(){Vi.forEach(function(e){clearInterval(e.pid)}),Vi=[]}function uT(){clearInterval(wy)}var F1=dk(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,h=cc(),g=!1,_;bw!==n&&(bw=n,xg(),by=t.scroll,_=t.scrollFn,by===!0&&(by=Rd(n,!0)));var w=0,O=by;do{var S=O,P=Wi(S),A=P.top,R=P.bottom,D=P.left,N=P.right,B=P.width,q=P.height,Z=void 0,Y=void 0,te=S.scrollWidth,G=S.scrollHeight,C=_r(S),W=S.scrollLeft,K=S.scrollTop;S===h?(Z=B<te&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),Y=q<G&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(Z=B<te&&(C.overflowX==="auto"||C.overflowX==="scroll"),Y=q<G&&(C.overflowY==="auto"||C.overflowY==="scroll"));var z=Z&&(Math.abs(N-r)<=c&&W+B<te)-(Math.abs(D-r)<=c&&!!W),H=Y&&(Math.abs(R-s)<=c&&K+q<G)-(Math.abs(A-s)<=c&&!!K);if(!Vi[w])for(var re=0;re<=w;re++)Vi[re]||(Vi[re]={});(Vi[w].vx!=z||Vi[w].vy!=H||Vi[w].el!==S)&&(Vi[w].el=S,Vi[w].vx=z,Vi[w].vy=H,clearInterval(Vi[w].pid),(z!=0||H!=0)&&(g=!0,Vi[w].pid=setInterval((function(){o&&this.layer===0&&br.active._onTouchMove(Kg);var fe=Vi[this.layer].vy?Vi[this.layer].vy*v:0,Se=Vi[this.layer].vx?Vi[this.layer].vx*v:0;typeof _=="function"&&_.call(br.dragged.parentNode[iu],Se,fe,e,Kg,Vi[this.layer].el)!=="continue"||pk(Vi[this.layer].el,Se,fe)}).bind({layer:w}),24))),w++}while(t.bubbleScroll&&O!==h&&(O=Rd(O,!1)));ww=g}},30),wk=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,r=e.activeSortable,s=e.dispatchSortableEvent,c=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(t){var h=n||r;c();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,_=document.elementFromPoint(g.clientX,g.clientY);v(),h&&!h.el.contains(_)&&(s("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function EE(){}EE.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Sv(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:wk};Tf(EE,{pluginName:"revertOnSpill"});function OE(){}OE.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:wk};Tf(OE,{pluginName:"removeOnSpill"});br.mount(new Cz);br.mount(OE,EE);function Dz(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Iz(e){Uw()&&uL(e)}function Lz(e){Uw()?Uo(e):Ov(e)}let Ek=null,Ok=null;function sT(e=null,t=null){Ek=e,Ok=t}function Fz(){return{data:Ek,clonedData:Ok}}const cT=Symbol("cloneElement");function $z(...e){var t,n;const o=(t=Uw())==null?void 0:t.proxy;let r=null;const s=e[0];let[,c,v]=e;Array.isArray(vr(c))||(v=c,c=null);let h=null;const{immediate:g=!0,clone:_=Dz,customUpdate:w}=(n=vr(v))!=null?n:{};function O(G){var C;const{from:W,oldIndex:K,item:z}=G;r=Array.from(W.childNodes);const H=vr((C=vr(c))==null?void 0:C[K]),re=_(H);sT(H,re),z[cT]=re}function S(G){const C=G.item[cT];if(!tz(C)){if(P1(G.item),b1(c)){const W=[...vr(c)];c.value=ZA(W,G.newDraggableIndex,C);return}ZA(vr(c),G.newDraggableIndex,C)}}function P(G){const{from:C,item:W,oldIndex:K,oldDraggableIndex:z,pullMode:H,clone:re}=G;if(JA(C,W,K),H==="clone"){P1(re);return}if(b1(c)){const fe=[...vr(c)];c.value=KA(fe,z);return}KA(vr(c),z)}function A(G){if(w){w(G);return}const{from:C,item:W,oldIndex:K,oldDraggableIndex:z,newDraggableIndex:H}=G;if(P1(W),JA(C,W,K),b1(c)){const re=[...vr(c)];c.value=qA(re,z,H);return}qA(vr(c),z,H)}function R(G){const{newIndex:C,oldIndex:W,from:K,to:z}=G;let H=null;const re=C===W&&K===z;try{if(re){let fe=null;r==null||r.some((Se,Te)=>{if(fe&&(r==null?void 0:r.length)!==z.childNodes.length)return K.insertBefore(fe,Se.nextSibling),!0;const he=z.childNodes[Te];fe=z==null?void 0:z.replaceChild(Se,he)})}}catch(fe){H=fe}finally{r=null}Ov(()=>{if(sT(),H)throw H})}const D={onUpdate:A,onStart:O,onAdd:S,onRemove:P,onEnd:R};function N(G){const C=vr(s);return G||(G=nz(C)?rz(C,o==null?void 0:o.$el):C),G&&!az(G)&&(G=G.$el),G||JW("Root element not found"),G}function B(){var G;const C=(G=vr(v))!=null?G:{},W=ak(C,["immediate","clone"]);return QA(W,(K,z)=>{lz(K)&&(W[K]=(H,...re)=>{const fe=Fz();return uz(H,fe),z(H,...re)})}),iz(c===null?{}:D,W)}const q=G=>{G=N(G),h&&Z.destroy(),h=new br(G,B())};c_(()=>v,()=>{h&&QA(B(),(G,C)=>{h==null||h.option(G,C)})},{deep:!0});const Z={option:(G,C)=>h==null?void 0:h.option(G,C),destroy:()=>{h==null||h.destroy(),h=null},save:()=>h==null?void 0:h.save(),toArray:()=>h==null?void 0:h.toArray(),closest:(...G)=>h==null?void 0:h.closest(...G)},Y=()=>Z==null?void 0:Z.option("disabled",!0),te=()=>Z==null?void 0:Z.option("disabled",!1);return Lz(()=>{g&&q()}),Iz(Z.destroy),sv({start:q,pause:Y,resume:te},Z)}const Ew=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Bz=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Ew.map(e=>`on${e.replace(/^\S/,t=>t.toUpperCase())}`)],Uz=Cr({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Bz,emits:["update:modelValue",...Ew],setup(e,{slots:t,emit:n,expose:o,attrs:r}){const s=Ew.reduce((_,w)=>{const O=`on${w.replace(/^\S/,S=>S.toUpperCase())}`;return _[O]=(...S)=>n(w,...S),_},{}),c=po(()=>{const _=lL(e),w=ak(_,["modelValue"]),O=Object.entries(w).reduce((S,[P,A])=>{const R=vr(A);return R!==void 0&&(S[P]=R),S},{});return sv(sv({},s),ez(sv(sv({},r),O)))}),v=po({get:()=>e.modelValue,set:_=>n("update:modelValue",_)}),h=wt(),g=f_($z(e.target||h,v,c));return o(g),()=>{var _;return Bp(e.tag||"div",{ref:h},(_=t==null?void 0:t.default)==null?void 0:_.call(t,g))}}}),Gz={class:"handle flex-between lighter"},Vz={class:"flex align-center"},Wz={key:0,class:"info"},zz={key:0,class:"mt-8"},Hz=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:Oy(),type:"IF",condition:"and"},{conditions:[],id:Oy(),type:"ELSE",condition:"and"}]},o=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),r=(A,R,D)=>{const B=et.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(q=>q.id===R.id?{...q,height:A.height,index:D}:q);et.set(t.nodeModel.properties,"branch_condition_list",B),w(t.nodeModel.properties.node_data.branch,!0)},s=po({get:()=>(t.nodeModel.properties.node_data||(et.set(t.nodeModel.properties,"node_data",n),w(n.branch,!0)),t.nodeModel.properties.node_data),set:A=>{et.set(t.nodeModel.properties,"node_data",A)}}),c=wt(),v=wt(),h=()=>{var R;const A=[(R=c.value)==null?void 0:R.validate(),...v.value.map(D=>D.validate())];return Promise.all(A).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};function g(A){const{oldIndex:R,newIndex:D}=A;if(R===void 0||D===void 0)return;const N=et.cloneDeep(t.nodeModel.properties.node_data.branch);if(R===N.length-1||D===N.length-1)return;const B={...N[R],type:N[D].type,id:N[D].id},q={...N[D],type:N[R].type,id:N[R].id};N[D]=B,N[R]=q,et.set(t.nodeModel.properties.node_data,"branch",N)}function _(){const A=et.cloneDeep(t.nodeModel.properties.node_data.branch),R={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(A.length-1),id:Oy(),condition:"and"};A.splice(A.length-1,0,R),w(A,!0),et.set(t.nodeModel.properties.node_data,"branch",A)}function w(A,R){const D=et.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),N=A.map((B,q)=>{const Z=D.find(Y=>Y.id===B.id);if(Z)return{index:q,height:Z.height,id:B.id};if(R)return{index:q,height:12,id:B.id}}).filter(B=>B);et.set(t.nodeModel.properties,"branch_condition_list",N),t.nodeModel.refreshBranch()}function O(A){const R=et.cloneDeep(t.nodeModel.properties.node_data.branch);R[A].conditions.push({field:[],compare:"",value:""}),et.set(t.nodeModel.properties.node_data,"branch",R)}function S(A,R){const D=et.cloneDeep(t.nodeModel.properties.node_data.branch);if(D[A].conditions.splice(R,1),D[A].conditions.length===0){const B=D.splice(A,1).map(q=>t.nodeModel.id+"_"+q.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(q=>B.includes(q.sourceAnchorId)).map(q=>q.id)),w(D,!1),D.forEach((q,Z)=>{q.type==="ELSE IF "+(Z+1)&&(q.type="ELSE IF "+Z)})}et.set(t.nodeModel.properties.node_data,"branch",D)}function P(A,R,D){if(["is_null","is_not_null","is_true","is_not_true"].includes(A)){const N=et.cloneDeep(t.nodeModel.properties.node_data.branch);N[R].conditions[D].value=1,et.set(t.nodeModel.properties.node_data,"branch",N)}}return Uo(()=>{et.set(t.nodeModel,"validate",h)}),(A,R)=>{const D=ue("el-option"),N=ue("el-select"),B=ue("el-form-item"),q=ue("el-col"),Z=ue("el-input"),Y=ue("Delete"),te=ue("el-icon"),G=ue("el-button"),C=ue("el-row"),W=ue("Plus"),K=ue("el-card"),z=ue("el-form"),H=Ev("resize");return Ye(),Bt(Hi,{nodeModel:A.nodeModel},{default:U(()=>[L(z,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:R[0]||(R[0]=_n(()=>{},["prevent"]))},{default:U(()=>[L(vr(Uz),{ref:"el",modelValue:s.value.branch,disabled:s.value.branch===2,filter:".no-drag",handle:".handle",animation:150,ghostClass:"ghost",onEnd:g},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(s.value.branch,(re,fe)=>Pl((Ye(),Bt(K,{key:re.id,shadow:"never",class:sc(["drag-card card-never mb-8",{"no-drag":fe===s.value.branch.length-1||s.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:U(()=>[me("div",Gz,[me("span",Vz,[R[1]||(R[1]=me("img",{src:qW,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),Tt(" "+$e(re.type),1)]),re.conditions.length>1?(Ye(),Rn("div",Wz,[me("span",null,$e(A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),L(N,{teleported:!1,modelValue:re.condition,"onUpdate:modelValue":Se=>re.condition=Se,size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[L(D,{label:A.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),L(D,{label:A.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),me("span",null,$e(A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):nr("",!0)]),fe!==s.value.branch.length-1?(Ye(),Rn("div",zz,[(Ye(!0),Rn(Bo,null,zi(re.conditions,(Se,Te)=>(Ye(),Bt(C,{key:Te,gutter:8},{default:U(()=>[L(q,{span:11},{default:U(()=>[L(B,{prop:"branch."+fe+".conditions."+Te+".field",rules:{type:"array",required:!0,message:A.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[L(Oi,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Se.field,"onUpdate:modelValue":he=>Se.field=he},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),L(q,{span:6},{default:U(()=>[L(B,{prop:"branch."+fe+".conditions."+Te+".compare",rules:{required:!0,message:A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:U(()=>[L(N,{onWheel:o,teleported:!1,modelValue:Se.compare,"onUpdate:modelValue":he=>Se.compare=he,placeholder:A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:he=>P(he,fe,Te)},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(vr(sL),(he,_e)=>(Ye(),Bt(D,{key:_e,label:he.label,value:he.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),L(q,{span:6},{default:U(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(Se.compare)?nr("",!0):(Ye(),Bt(B,{key:0,prop:"branch."+fe+".conditions."+Te+".value",rules:{required:!0,message:A.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:U(()=>[L(Z,{modelValue:Se.value,"onUpdate:modelValue":he=>Se.value=he,placeholder:A.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),L(q,{span:1},{default:U(()=>[L(G,{disabled:fe===0&&Te===0,link:"",type:"info",class:"mt-4",onClick:he=>S(fe,Te)},{default:U(()=>[L(te,null,{default:U(()=>[L(Y)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):nr("",!0),fe!==s.value.branch.length-1?(Ye(),Bt(G,{key:1,link:"",type:"primary",onClick:Se=>O(fe)},{default:U(()=>[L(te,{class:"mr-4"},{default:U(()=>[L(W)]),_:1}),Tt(" "+$e(A.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):nr("",!0)]),_:2},1032,["class"])),[[H,Se=>r(Se,re,fe)]])),128))]),_:1},8,["modelValue","disabled"]),L(G,{link:"",type:"primary",onClick:_},{default:U(()=>[L(te,{class:"mr-4"},{default:U(()=>[L(W)]),_:1}),Tt(" "+$e(A.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});const Xz=Rv(Hz,[["__scopeId","data-v-b980a004"]]);class Yz extends Xi{constructor(t){super(t,Xz)}}const qz=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class Kz extends Yi{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],w=qz(c,g);h.push({x:n+r/2-10,y:v?o-s/2+75+w+_.height/2:o-15,id:`${t}_${_.id}_right`,type:"right"})}return h}}const Zz={type:"condition-node",model:Kz,view:Yz},Jz=Object.freeze(Object.defineProperty({__proto__:null,default:Zz},Symbol.toStringTag,{value:"Module"})),Qz={class:"title-decoration-1 mb-8"},eH=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={document_list:["start-node","document"]},o=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",n),t.nodeModel.properties.node_data),set:r=>{et.set(t.nodeModel.properties,"node_data",r)}});return(r,s)=>{const c=ue("el-form-item"),v=ue("el-form"),h=ue("el-card");return Ye(),Bt(Hi,{nodeModel:r.nodeModel},{default:U(()=>[me("h5",Qz,$e(r.$t("views.applicationWorkflow.nodeSetting")),1),L(h,{shadow:"never",class:"card-never"},{default:U(()=>[L(v,{onSubmit:s[1]||(s[1]=_n(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:U(()=>[L(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:U(()=>[L(Oi,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:o.value.document_list,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.document_list=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let tH=class extends Xi{constructor(t){super(t,eH)}};const nH={type:"document-extract-node",model:Yi,view:tH},rH=Object.freeze(Object.defineProperty({__proto__:null,default:nH},Symbol.toStringTag,{value:"Module"})),oH={class:"dialog-footer"},iH=Cr({__name:"AddFormCollect",props:{title:{default:Qt("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=wt(!1),s=wt(),c=wt({}),v=wt(!1),h=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},_=()=>{var w;(w=s.value)==null||w.validate().then(()=>{var O;o.addFormField((O=s.value)==null?void 0:O.getData()),g()})};return t({close:g,open:h}),(w,O)=>{const S=ue("el-button"),P=ue("el-dialog");return Ye(),Bt(P,{title:w.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:U(()=>[me("span",oH,[L(S,{onClick:O[1]||(O[1]=_n(A=>r.value=!1,["prevent"]))},{default:U(()=>[Tt($e(w.$t("common.cancel")),1)]),_:1}),L(S,{type:"primary",onClick:O[2]||(O[2]=A=>_()),loading:v.value},{default:U(()=>[Tt($e(w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[L(YM,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),aH={class:"dialog-footer"},lH=Cr({__name:"EditFormCollect",props:{title:{default:Qt("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=wt(!1),s=wt(),c=wt({}),v=wt(0),h=wt(!1),g=(O,S)=>{r.value=!0,c.value=O,v.value=S},_=()=>{r.value=!1,c.value={}},w=()=>{var O;(O=s.value)==null||O.validate().then(()=>{var S;o.editFormField((S=s.value)==null?void 0:S.getData(),v.value),_()})};return t({close:_,open:g}),(O,S)=>{const P=ue("el-button"),A=ue("el-dialog");return Ye(),Bt(A,{title:O.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=R=>r.value=R),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:U(()=>[me("span",aH,[L(P,{onClick:S[1]||(S[1]=_n(R=>r.value=!1,["prevent"]))},{default:U(()=>[Tt($e(O.$t("common.cancel")),1)]),_:1}),L(P,{type:"primary",onClick:S[2]||(S[2]=R=>w()),loading:h.value},{default:U(()=>[Tt($e(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:U(()=>[L(YM,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=R=>c.value=R),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),uH={class:"title-decoration-1 mb-8"},sH={class:"flex align-center"},cH={class:"mr-4"},fH={class:"flex-between"},dH={class:"lighter"},pH=["title"],hH={key:0},vH=["title"],yH={key:1},mH=["title"],gH=["title"],_H={class:"mr-4"},bH=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=wt(),o=wt(),r=(N,B)=>{const q=S.value.form_field_list.map((Z,Y)=>B===Y?et.cloneDeep(N):et.cloneDeep(Z));S.value.form_field_list=q,c()},s=N=>{if(S.value.form_field_list.some(B=>B.field===N.field)){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+N.field);return}S.value.form_field_list=et.cloneDeep([...S.value.form_field_list,N]),c()},c=()=>{const N=[{label:Qt("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...S.value.form_field_list.map(B=>({value:B.field,label:typeof B.label=="string"?B.label:B.label.label}))];et.set(t.nodeModel.properties.config,"fields",N),t.nodeModel.clear_next_node_field(!1),D()},v=wt(),h=wt(),g=()=>{var N;(N=v.value)==null||N.open()},_=(N,B)=>{var q;(q=h.value)==null||q.open(et.cloneDeep(N),B)},w=N=>{S.value.form_field_list=S.value.form_field_list.filter(B=>B.field!==N.field),c()},O=wt({is_result:!0,form_content_format:`${Qt("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Qt("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),S=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",O.value),t.nodeModel.properties.node_data),set:N=>{et.set(t.nodeModel.properties,"node_data",N)}}),P=N=>{var B;if(N.default_value){const q=(B=N.option_list)==null?void 0:B.filter(Z=>N.default_value.indexOf(Z.value)>-1).map(Z=>Z.label).join(",");return q||N.default_value}if(N.default_value!==void 0)return N.default_value},A=()=>{var N;return(N=n.value)==null?void 0:N.validate()};function R(N){et.set(t.nodeModel.properties.node_data,"form_content_format",N)}function D(){if(!o.value)return;const B=o.value.$el.querySelector(".el-table__body-wrapper tbody");B&&Gw.create(B,{animation:150,ghostClass:"ghost-row",onEnd:q=>{if(q.oldIndex===void 0||q.newIndex===void 0)return;const Z=[...S.value.form_field_list],[Y]=Z.splice(q.oldIndex,1);Z.splice(q.newIndex,0,Y),S.value.form_field_list=Z,c()}})}return Uo(()=>{et.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field")}),(N,B)=>{const q=ue("AppIcon"),Z=ue("el-tooltip"),Y=ue("MdEditorMagnify"),te=ue("el-form-item"),G=ue("Plus"),C=ue("el-icon"),W=ue("el-button"),K=ue("el-table-column"),z=ue("el-tag"),H=ue("el-switch"),re=ue("EditPen"),fe=ue("Delete"),Se=ue("el-table"),Te=ue("el-form"),he=ue("el-card");return Ye(),Bt(Hi,{nodeModel:N.nodeModel},{default:U(()=>[me("h5",uH,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),L(he,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[L(Te,{onSubmit:B[4]||(B[4]=_n(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:U(()=>[L(te,{label:N.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",sH,[me("div",cH,[me("span",null,[Tt($e(N.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),B[5]||(B[5]=me("span",{class:"danger"},"*",-1))])]),L(Z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:U(()=>[L(q,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(Y,{title:N.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:S.value.form_content_format,"onUpdate:modelValue":B[0]||(B[0]=_e=>S.value.form_content_format=_e),style:{height:"150px"},onSubmitDialog:R},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),L(te,{label:N.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:B[3]||(B[3]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",fH,[me("h5",dH,$e(N.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),L(W,{link:"",type:"primary",onClick:B[1]||(B[1]=_e=>g())},{default:U(()=>[L(C,{class:"mr-4"},{default:U(()=>[L(G)]),_:1}),Tt(" "+$e(N.$t("common.add")),1)]),_:1})])]),default:U(()=>[S.value.form_field_list.length>0?(Ye(),Bt(Se,{key:0,class:"border",data:S.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:U(()=>[L(K,{prop:"field",label:N.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:_e})=>[me("span",{title:_e.field,class:"ellipsis-1"},$e(_e.field),9,pH)]),_:1},8,["label"]),L(K,{prop:"label",label:N.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:_e})=>[_e.label&&_e.label.input_type==="TooltipLabel"?(Ye(),Rn("span",hH,[me("span",{title:_e.label.label,class:"ellipsis-1"},$e(_e.label.label),9,vH)])):(Ye(),Rn("span",yH,[me("span",{title:_e.label,class:"ellipsis-1"},$e(_e.label),9,mH)]))]),_:1},8,["label"]),L(K,{label:N.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:U(({row:_e})=>[L(z,{type:"info",class:"info-tag"},{default:U(()=>{var De;return[Tt($e((De=vr(cL).find(Ve=>Ve.value===_e.input_type))==null?void 0:De.label),1)]}),_:2},1024)]),_:1},8,["label"]),L(K,{prop:"default_value",label:N.$t("dynamicsForm.default.label")},{default:U(({row:_e})=>[me("span",{title:_e.default_value,class:"ellipsis-1"},$e(P(_e)),9,gH)]),_:1},8,["label"]),L(K,{label:N.$t("common.required"),width:"85"},{default:U(({row:_e})=>[me("div",{onClick:B[2]||(B[2]=_n(()=>{},["stop"]))},[L(H,{disabled:"",size:"small",modelValue:_e.required,"onUpdate:modelValue":De=>_e.required=De},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),L(K,{label:N.$t("common.operation"),align:"left",width:"90"},{default:U(({row:_e,$index:De})=>[me("span",_H,[L(Z,{effect:"dark",content:N.$t("common.modify"),placement:"top"},{default:U(()=>[L(W,{type:"primary",text:"",onClick:_n(Ve=>_(_e,De),["stop"])},{default:U(()=>[L(C,null,{default:U(()=>[L(re)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),L(Z,{effect:"dark",content:N.$t("common.delete"),placement:"top"},{default:U(()=>[L(W,{type:"primary",text:"",onClick:Ve=>w(_e)},{default:U(()=>[L(C,null,{default:U(()=>[L(fe)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):nr("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),L(iH,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),L(lH,{ref_key:"editFormCollectRef",ref:h,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class wH extends Xi{constructor(t){super(t,bH)}get_node_field_list(){var o,r;const t=[],n=((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.fields)||[];try{this.props.model.properties.node_data.form_field_list.forEach(s=>{n.some(c=>c.value===s.field)||n.push({value:s.field,label:typeof s.label=="string"?s.label:s.label.label})})}catch{}return t.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:n}),t}}const EH={type:"form-node",model:Yi,view:wH},OH=Object.freeze(Object.defineProperty({__proto__:null,default:EH},Symbol.toStringTag,{value:"Module"})),xH={class:"title-decoration-1 mb-16"},SH={class:"lighter mb-8"},AH={key:0},TH={class:"flex-between"},MH={class:"flex"},PH={class:"flex"},kH={key:0,class:"danger"},NH={class:"flex align-center"},RH={class:"mr-4"},jH=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=wt(),{params:{id:o}}=Vu.config.globalProperties.$route,r={input_field_list:[],is_result:!1},s=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:g=>{et.set(t.nodeModel.properties,"node_data",g)}}),c=wt(),v=()=>{var g;return(g=c.value)==null?void 0:g.validate().catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},h=()=>{if(!t.nodeModel.properties.node_data.function_lib_id){et.set(t.nodeModel.properties,"status",500);return}Aa.getFunctionLib(o,t.nodeModel.properties.node_data.function_lib_id).then(g=>{const _=t.nodeModel.properties.node_data.input_field_list,w=g.data.input_field_list.map(O=>{const S=_.find(P=>P.name==O.name);return S&&S.source==O.source?{...O,value:JSON.parse(JSON.stringify(S.value))}:{...O,value:O.source=="reference"?[]:""}});et.set(t.nodeModel.properties.node_data,"input_field_list",w),et.set(t.nodeModel.properties,"status",g.data.is_active?200:500)}).catch(g=>{et.set(t.nodeModel.properties,"status",500)})};return Uo(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&qp(t.nodeModel)&&et.set(t.nodeModel.properties.node_data,"is_result",!0),h(),et.set(t.nodeModel,"validate",v)}),(g,_)=>{const w=ue("auto-tooltip"),O=ue("el-tag"),S=ue("el-input"),P=ue("el-form-item"),A=ue("el-text"),R=ue("el-card"),D=ue("AppIcon"),N=ue("el-tooltip"),B=ue("el-switch"),q=ue("el-form");return Ye(),Bt(Hi,{nodeModel:g.nodeModel},{default:U(()=>[me("h5",xH,$e(g.$t("views.applicationWorkflow.nodeSetting")),1),me("h5",SH,$e(g.$t("common.param.inputParam")),1),L(q,{onSubmit:_[2]||(_[2]=_n(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[L(R,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var Z;return[((Z=s.value.input_field_list)==null?void 0:Z.length)>0?(Ye(),Rn("div",AH,[(Ye(!0),Rn(Bo,null,zi(s.value.input_field_list,(Y,te)=>(Ye(),Bt(P,{key:Y.name,label:Y.name,prop:"input_field_list."+te+".value",rules:{required:Y.is_required,message:Y.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[me("div",TH,[me("div",MH,[me("span",PH,[L(w,{content:Y.name,style:{"max-width":"130px"}},{default:U(()=>[Tt($e(Y.name),1)]),_:2},1032,["content"]),Y.is_required?(Ye(),Rn("span",kH,"*")):nr("",!0)]),L(O,{type:"info",class:"info-tag ml-4"},{default:U(()=>[Tt($e(Y.type),1)]),_:2},1024)])])]),default:U(()=>[Y.source==="reference"?(Ye(),Bt(Oi,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:Y.value,"onUpdate:modelValue":G=>Y.value=G},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ye(),Bt(S,{key:1,modelValue:Y.value,"onUpdate:modelValue":G=>Y.value=G,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ye(),Bt(A,{key:1,type:"info"},{default:U(()=>[Tt($e(g.$t("common.noData")),1)]),_:1}))]}),_:1}),L(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[1]||(_[1]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",NH,[me("div",RH,[me("span",null,$e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(N,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(B,{size:"small",modelValue:s.value.is_result,"onUpdate:modelValue":_[0]||(_[0]=Z=>s.value.is_result=Z)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class CH extends Xi{constructor(t){super(t,jH)}}const DH={type:"function-lib-node",model:Yi,view:CH},IH=Object.freeze(Object.defineProperty({__proto__:null,default:DH},Symbol.toStringTag,{value:"Module"})),LH={class:"title-decoration-1 mb-16"},FH={class:"flex-between"},$H={class:"lighter mb-8"},BH={key:0},UH={class:"flex-between"},GH={class:"flex"},VH={class:"flex"},WH={key:0,class:"danger"},zH={class:"lighter mb-8"},HH={key:0,class:"mb-8"},XH={class:"flex align-center"},YH={class:"mr-4"},qH=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=wt(),r=wt(),s={code:"",input_field_list:[],is_result:!1},c=wt(null),v=wt(!1),h=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:A=>{et.set(t.nodeModel.properties,"node_data",A)}}),g=wt(),_=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(R=>Promise.reject({node:t.nodeModel,errMessage:R}))};function w(A){et.set(t.nodeModel.properties.node_data,"code",A)}function O(A,R){typeof R<"u"&&(c.value=R),o.value.open(A)}function S(A){const R=et.cloneDeep(t.nodeModel.properties.node_data.input_field_list);R.splice(A,1),et.set(t.nodeModel.properties.node_data,"input_field_list",R)}function P(A){const R=et.cloneDeep(t.nodeModel.properties.node_data.input_field_list),D={...A,value:A.source==="reference"?[]:""};c.value!==null?R.splice(c.value,1,D):R.push(D),et.set(t.nodeModel.properties.node_data,"input_field_list",R),c.value=null}return Uo(()=>{var A;typeof((A=t.nodeModel.properties.node_data)==null?void 0:A.is_result)>"u"&&qp(t.nodeModel)&&et.set(t.nodeModel.properties.node_data,"is_result",!0),et.set(t.nodeModel,"validate",_),setTimeout(()=>{v.value=!0},100)}),(A,R)=>{const D=ue("Plus"),N=ue("el-icon"),B=ue("el-button"),q=ue("auto-tooltip"),Z=ue("el-tag"),Y=ue("EditPen"),te=ue("Delete"),G=ue("el-input"),C=ue("el-form-item"),W=ue("el-text"),K=ue("el-card"),z=ue("CodemirrorEditor"),H=ue("AppIcon"),re=ue("el-tooltip"),fe=ue("el-switch"),Se=ue("el-form");return Ye(),Bt(Hi,{nodeModel:A.nodeModel},{default:U(()=>[me("h5",LH,$e(A.$t("views.applicationWorkflow.nodeSetting")),1),me("div",FH,[me("h5",$H,$e(A.$t("common.param.inputParam")),1),L(B,{link:"",type:"primary",onClick:R[0]||(R[0]=Te=>O())},{default:U(()=>[L(N,{class:"mr-4"},{default:U(()=>[L(D)]),_:1}),Tt(" "+$e(A.$t("common.add")),1)]),_:1})]),L(Se,{onSubmit:R[4]||(R[4]=_n(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:h.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[L(K,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var Te;return[((Te=h.value.input_field_list)==null?void 0:Te.length)>0?(Ye(),Rn("div",BH,[(Ye(!0),Rn(Bo,null,zi(h.value.input_field_list,(he,_e)=>(Ye(),Bt(C,{key:_e,label:he.name,prop:"input_field_list."+_e+".value",rules:{required:he.is_required,message:he.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[me("div",UH,[me("div",GH,[me("span",VH,[L(q,{content:he.name,style:{"max-width":"130px"}},{default:U(()=>[Tt($e(he.name),1)]),_:2},1032,["content"]),he.is_required?(Ye(),Rn("span",WH,"*")):nr("",!0)]),L(Z,{type:"info",class:"info-tag ml-4"},{default:U(()=>[Tt($e(he.type),1)]),_:2},1024)]),me("div",null,[L(B,{text:"",onClick:_n(De=>O(he,_e),["stop"])},{default:U(()=>[L(N,null,{default:U(()=>[L(Y)]),_:1})]),_:2},1032,["onClick"]),L(B,{text:"",onClick:De=>S(_e),style:{"margin-left":"4px !important"}},{default:U(()=>[L(N,null,{default:U(()=>[L(te)]),_:1})]),_:2},1032,["onClick"])])])]),default:U(()=>[he.source==="reference"?(Ye(),Bt(Oi,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:he.value,"onUpdate:modelValue":De=>he.value=De,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Ye(),Bt(G,{key:1,modelValue:he.value,"onUpdate:modelValue":De=>he.value=De,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Ye(),Bt(W,{key:1,type:"info"},{default:U(()=>[Tt($e(A.$t("common.noData")),1)]),_:1}))]}),_:1}),me("h5",zH,$e(A.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(Ye(),Rn("div",HH,[L(z,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:h.value.code,"onUpdate:modelValue":R[1]||(R[1]=Te=>h.value.code=Te),onWheel:n,style:{height:"130px !important"},onSubmitDialog:w},null,8,["title","modelValue"])])):nr("",!0),L(C,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:R[3]||(R[3]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",XH,[me("div",YH,[me("span",null,$e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(re,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(H,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(fe,{size:"small",modelValue:h.value.is_result,"onUpdate:modelValue":R[2]||(R[2]=Te=>h.value.is_result=Te)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),L(XL,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class KH extends Xi{constructor(t){super(t,qH)}}const ZH={type:"function-node",model:Yi,view:KH},JH=Object.freeze(Object.defineProperty({__proto__:null,default:ZH},Symbol.toStringTag,{value:"Module"})),QH={class:"title-decoration-1 mb-8"},eX={class:"flex-between w-full"},tX={class:"flex align-center"},nX={class:"mr-4"},rX={class:"flex align-center"},oX={class:"mr-4"},iX={class:"flex align-center"},aX={class:"mr-4"},lX=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=wt(null),s=wt(),c=wt(),v=()=>{var N;return(N=c.value)==null?void 0:N.validate().catch(B=>Promise.reject({node:o.nodeModel,errMessage:B}))},h=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),_={model_id:"",system:"",prompt:`{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},w=po({get:()=>(o.nodeModel.properties.node_data||et.set(o.nodeModel.properties,"node_data",_),o.nodeModel.properties.node_data),set:N=>{et.set(o.nodeModel.properties,"node_data",N)}});function O(){n?Aa.getApplicationTTIModel(n).then(N=>{r.value=et.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{r.value=et.groupBy(N==null?void 0:N.data,"provider")})}const S=()=>{var N;w.value.model_id?(N=s.value)==null||N.reset_default(w.value.model_id,n):A({})},P=N=>{var B;N&&((B=s.value)==null||B.open(N,n,w.value.model_params_setting))};function A(N){et.set(o.nodeModel.properties.node_data,"model_params_setting",N)}function R(N){et.set(o.nodeModel.properties.node_data,"prompt",N)}function D(N){et.set(o.nodeModel.properties.node_data,"negative_prompt",N)}return Uo(()=>{O(),et.set(o.nodeModel,"validate",v)}),(N,B)=>{const q=ue("Setting"),Z=ue("el-icon"),Y=ue("el-button"),te=ue("ModelSelect"),G=ue("el-form-item"),C=ue("AppIcon"),W=ue("el-tooltip"),K=ue("MdEditorMagnify"),z=ue("el-switch"),H=ue("el-form"),re=ue("el-card");return Ye(),Bt(Hi,{"node-model":N.nodeModel},{default:U(()=>[me("h5",QH,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),L(re,{shadow:"never",class:"card-never"},{default:U(()=>[L(H,{onSubmit:B[6]||(B[6]=_n(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[L(G,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[me("div",eX,[me("div",null,[me("span",null,[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),B[7]||(B[7]=me("span",{class:"danger"},"*",-1))])]),L(Y,{disabled:!w.value.model_id,type:"primary",link:"",onClick:B[0]||(B[0]=fe=>P(w.value.model_id)),onRefreshForm:A},{default:U(()=>[L(Z,null,{default:U(()=>[L(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[L(te,{onChange:S,onWheel:h,teleported:!1,modelValue:w.value.model_id,"onUpdate:modelValue":B[1]||(B[1]=fe=>w.value.model_id=fe),placeholder:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",tX,[me("div",nX,[me("span",null,[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),B[8]||(B[8]=me("span",{class:"danger"},"*",-1))])]),L(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:U(()=>[L(C,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(K,{onWheel:h,title:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:w.value.prompt,"onUpdate:modelValue":B[2]||(B[2]=fe=>w.value.prompt=fe),style:{height:"150px"},onSubmitDialog:R},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",rX,[me("div",oX,[me("span",null,$e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),L(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:U(()=>[L(C,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(K,{onWheel:h,title:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:w.value.negative_prompt,"onUpdate:modelValue":B[3]||(B[3]=fe=>w.value.negative_prompt=fe),placeholder:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:D},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[5]||(B[5]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",iX,[me("div",aX,[me("span",null,$e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(W,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(C,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(z,{size:"small",modelValue:w.value.is_result,"onUpdate:modelValue":B[4]||(B[4]=fe=>w.value.is_result=fe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),L(d_,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});let uX=class extends Xi{constructor(t){super(t,lX)}};const sX={type:"image-generate-node",model:Yi,view:uX},cX=Object.freeze(Object.defineProperty({__proto__:null,default:sX},Symbol.toStringTag,{value:"Module"})),fX={class:"title-decoration-1 mb-8"},dX={class:"flex-between w-full"},pX={class:"flex align-center"},hX={class:"mr-4"},vX={class:"flex-between"},yX={class:"flex align-center"},mX={class:"mr-4"},gX=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=wt(null),s=wt(),c=wt(),v=wt(),h=()=>{var N;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(N=c.value)==null?void 0:N.validate()]).catch(B=>Promise.reject({node:o.nodeModel,errMessage:B}))},g=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),w={model_id:"",system:"",prompt:`{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},O=po({get:()=>(o.nodeModel.properties.node_data||et.set(o.nodeModel.properties,"node_data",w),o.nodeModel.properties.node_data),set:N=>{et.set(o.nodeModel.properties,"node_data",N)}});function S(){n?Aa.getApplicationImageModel(n).then(N=>{r.value=et.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{r.value=et.groupBy(N==null?void 0:N.data,"provider")})}function P(N){et.set(o.nodeModel.properties.node_data,"system",N)}function A(N){et.set(o.nodeModel.properties.node_data,"prompt",N)}const R=N=>{var B;N&&((B=s.value)==null||B.open(N,n,O.value.model_params_setting))};function D(N){et.set(o.nodeModel.properties.node_data,"model_params_setting",N)}return Uo(()=>{S(),et.set(o.nodeModel,"validate",h)}),(N,B)=>{const q=ue("Setting"),Z=ue("el-icon"),Y=ue("el-button"),te=ue("ModelSelect"),G=ue("el-form-item"),C=ue("MdEditorMagnify"),W=ue("AppIcon"),K=ue("el-tooltip"),z=ue("el-option"),H=ue("el-select"),re=ue("el-input-number"),fe=ue("el-switch"),Se=ue("el-form"),Te=ue("el-card");return Ye(),Bt(Hi,{"node-model":N.nodeModel},{default:U(()=>[me("h5",fX,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),L(Te,{shadow:"never",class:"card-never"},{default:U(()=>[L(Se,{onSubmit:B[9]||(B[9]=_n(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[L(G,{label:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[me("div",dX,[me("div",null,[me("span",null,[Tt($e(vr(Qt)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),B[10]||(B[10]=me("span",{class:"danger"},"*",-1))])]),L(Y,{disabled:!O.value.model_id,type:"primary",link:"",onClick:B[0]||(B[0]=he=>R(O.value.model_id)),onRefreshForm:D},{default:U(()=>[L(Z,null,{default:U(()=>[L(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[L(te,{onWheel:g,teleported:!1,modelValue:O.value.model_id,"onUpdate:modelValue":B[1]||(B[1]=he=>O.value.model_id=he),placeholder:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value,showFooter:"","model-type":"IMAGE"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[L(C,{title:N.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=he=>O.value.system=he),style:{height:"100px"},onSubmitDialog:P,placeholder:N.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),L(G,{label:N.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[me("div",pX,[me("div",hX,[me("span",null,[Tt($e(N.$t("views.application.applicationForm.form.prompt.label")),1),B[11]||(B[11]=me("span",{class:"danger"},"*",-1))])]),L(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[L(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(C,{onWheel:g,title:N.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=he=>O.value.prompt=he),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),L(G,null,{label:U(()=>[me("div",vX,[me("div",null,$e(N.$t("views.application.applicationForm.form.historyRecord.label")),1),L(H,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":B[4]||(B[4]=he=>O.value.dialogue_type=he),type:"small",style:{width:"100px"}},{default:U(()=>[L(z,{label:N.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),L(z,{label:N.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[L(re,{modelValue:O.value.dialogue_number,"onUpdate:modelValue":B[5]||(B[5]=he=>O.value.dialogue_number=he),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),L(G,{label:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),B[12]||(B[12]=me("span",{class:"danger"},"*",-1))]),default:U(()=>[L(Oi,{ref_key:"nodeCascaderRef",ref:v,nodeModel:N.nodeModel,class:"w-full",placeholder:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.image_list,"onUpdate:modelValue":B[6]||(B[6]=he=>O.value.image_list=he)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[8]||(B[8]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",yX,[me("div",mX,[me("span",null,$e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(fe,{size:"small",modelValue:O.value.is_result,"onUpdate:modelValue":B[7]||(B[7]=he=>O.value.is_result=he)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),L(d_,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});let _X=class extends Xi{constructor(t){super(t,gX)}};const bX={type:"image-understand-node",model:Yi,view:_X},wX=Object.freeze(Object.defineProperty({__proto__:null,default:bX},Symbol.toStringTag,{value:"Module"})),EX={class:"title-decoration-1 mb-8"},OX={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},xX={class:"flex-between"},SX={class:"ml-4"},AX={class:"title-decoration-1 mb-8"},TX={key:0,class:"p-8-12"},MX={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},PX={class:"flex-between"},kX={key:0,class:"danger"},NX={key:0,class:"p-8-12"},RX={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},jX={class:"flex-between"},CX={key:0,class:"danger"},DX=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,IX=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=wt(),o=wt(!1),r=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),s={mcp_tool:"",mcp_tools:[],mcp_servers:"",mcp_server:"",tool_params:{},tool_form_field:[],params_nested:""};function c(O){et.set(t.nodeModel.properties.node_data,"mcp_servers",O)}function v(){if(!g.value.mcp_servers){xa(Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(g.value.mcp_servers)}catch{xa(Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}Aa.getMcpTools({mcp_servers:g.value.mcp_servers},o).then(O=>{g.value.mcp_tools=O.data,Up(Qt("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),g.value.mcp_server=g.value.mcp_tools.filter(S=>S.name===g.value.mcp_tool)[0].server})}function h(){var S,P,A,R;g.value.mcp_server=g.value.mcp_tools.filter(D=>D.name===g.value.mcp_tool)[0].server;const O=g.value.mcp_tools.filter(D=>D.name===g.value.mcp_tool)[0].args_schema;g.value.tool_form_field=[];for(const D in O.properties){let N=O.properties[D].properties;if(N){g.value.params_nested=D;for(const B in N){let q="TextInput";N[B].type==="string"?q="TextInput":N[B].type==="number"?q="NumberInput":N[B].type==="boolean"?q="SwitchInput":(N[B].type==="array"||N[B].type==="object")&&(q="JsonInput"),console.log(N[B]),g.value.tool_form_field.push({field:B,label:{input_type:"TooltipLabel",label:B,attrs:{tooltip:N[B].description},props_info:{}},input_type:q,source:"referencing",required:((S=O.properties[D].required)==null?void 0:S.indexOf(B))!==-1,props_info:{rules:[{required:((P=O.properties[D].required)==null?void 0:P.indexOf(B))!==-1,message:Qt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{g.value.params_nested="";let B="TextInput";O.properties[D].type==="string"?B="TextInput":O.properties[D].type==="number"?B="NumberInput":O.properties[D].type==="boolean"?B="SwitchInput":(O.properties[D].type==="array"||O.properties[D].type==="object")&&(B="JsonInput"),console.log(O.properties[D]),g.value.tool_form_field.push({field:D,label:{input_type:"TooltipLabel",label:D,attrs:{tooltip:O.properties[D].description},props_info:{}},input_type:B,source:"referencing",required:((A=O.required)==null?void 0:A.indexOf(D))!==-1,props_info:{rules:[{required:((R=O.required)==null?void 0:R.indexOf(D))!==-1,message:Qt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}g.value.params_nested?g.value.tool_params={[g.value.params_nested]:{}}:g.value.tool_params={}}const g=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:O=>{et.set(t.nodeModel.properties,"node_data",O)}}),_=wt(),w=async()=>{if(n.value){const O=g.value.tool_form_field.filter(S=>S.required).map(S=>S.label.label);if(O.length>0){for(const S of O)if(g.value.params_nested){if(!g.value.tool_params[g.value.params_nested][S])return Promise.reject({node:t.nodeModel,errMessage:S+Qt("dynamicsForm.tip.requiredMessage")})}else if(!g.value.tool_params[S])return Promise.reject({node:t.nodeModel,errMessage:S+Qt("dynamicsForm.tip.requiredMessage")})}}if(_.value){const O=et.cloneDeep(g.value);if(!O.mcp_servers)return Promise.reject({node:t.nodeModel,errMessage:Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!O.mcp_tool)return Promise.reject({node:t.nodeModel,errMessage:Qt("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};return Uo(()=>{var O;typeof((O=t.nodeModel.properties.node_data)==null?void 0:O.is_result)>"u"&&qp(t.nodeModel)&&et.set(t.nodeModel.properties.node_data,"is_result",!0),et.set(t.nodeModel,"validate",w)}),(O,S)=>{const P=ue("MdEditorMagnify"),A=ue("el-form-item"),R=ue("Plus"),D=ue("el-icon"),N=ue("el-button"),B=ue("AppIcon"),q=ue("el-tooltip"),Z=ue("el-option"),Y=ue("el-select"),te=ue("el-form"),G=ue("el-text"),C=ue("el-input"),W=ue("el-input-number"),K=ue("el-switch"),z=Ev("loading");return Ye(),Bt(Hi,{nodeModel:O.nodeModel},{default:U(()=>[me("h5",EX,$e(O.$t("views.applicationWorkflow.nodeSetting")),1),me("div",OX,[L(te,{onSubmit:S[3]||(S[3]=_n(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:_,"hide-required-asterisk":""},{default:U(()=>[L(A,{label:"MCP Server Config"},{default:U(()=>[L(P,{onWheel:r,title:"MCP Server Config",modelValue:g.value.mcp_servers,"onUpdate:modelValue":S[0]||(S[0]=H=>g.value.mcp_servers=H),style:{height:"150px"},onSubmitDialog:c,placeholder:DX},null,8,["modelValue"])]),_:1}),L(A,null,{label:U(()=>[me("div",xX,[me("span",null,$e(O.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),L(N,{type:"primary",link:"",onClick:S[1]||(S[1]=H=>v())},{default:U(()=>[L(D,{class:"mr-4"},{default:U(()=>[L(R)]),_:1}),Tt(" "+$e(O.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:U(()=>[L(Y,{modelValue:g.value.mcp_tool,"onUpdate:modelValue":S[2]||(S[2]=H=>g.value.mcp_tool=H),onChange:h,filterable:""},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(g.value.mcp_tools,H=>(Ye(),Bt(Z,{key:H.value,label:H.name,value:H.name,class:"flex align-center"},{default:U(()=>[L(q,{effect:"dark",content:H.description,placement:"top-start","popper-class":"max-w-350"},{default:U(()=>[L(B,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),me("span",SX,$e(H.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),me("h5",AX,$e(O.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),g.value.tool_params[g.value.params_nested]?(Ye(),Rn(Bo,{key:0},[g.value.mcp_tool?(Ye(),Rn("div",MX,[g.value.mcp_tool?Pl((Ye(),Bt(te,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[5]||(S[5]=_n(()=>{},["prevent"]))},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(g.value.tool_form_field,H=>(Ye(),Bt(A,{key:H.field,required:H.required},{label:U(()=>[me("div",PX,[me("div",null,[L(AS,{label:H.label.label,tooltip:H.label.attrs.tooltip},null,8,["label","tooltip"]),H.required?(Ye(),Rn("span",kX,"*")):nr("",!0)]),L(Y,{teleported:!1,modelValue:H.source,"onUpdate:modelValue":re=>H.source=re,size:"small",style:{width:"85px"},onChange:S[4]||(S[4]=re=>g.value.tool_params[g.value.params_nested]={})},{default:U(()=>[L(Z,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),L(Z,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[H.source==="custom"&&H.input_type==="TextInput"?(Ye(),Bt(C,{key:0,modelValue:g.value.tool_params[g.value.params_nested][H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[g.value.params_nested][H.label.label]=re},null,8,["modelValue","onUpdate:modelValue"])):H.source==="custom"&&H.input_type==="NumberInput"?(Ye(),Bt(W,{key:1,modelValue:g.value.tool_params[g.value.params_nested][H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[g.value.params_nested][H.label.label]=re},null,8,["modelValue","onUpdate:modelValue"])):H.source==="custom"&&H.input_type==="SwitchInput"?(Ye(),Bt(K,{key:2,modelValue:g.value.tool_params[g.value.params_nested][H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[g.value.params_nested][H.label.label]=re},null,8,["modelValue","onUpdate:modelValue"])):H.source==="custom"&&H.input_type==="JsonInput"?(Ye(),Bt(C,{key:3,modelValue:g.value.tool_params[g.value.params_nested][H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[g.value.params_nested][H.label.label]=re,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):nr("",!0),H.source==="referencing"?(Ye(),Bt(Oi,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[g.value.params_nested][H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[g.value.params_nested][H.label.label]=re},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):nr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[z,o.value]]):nr("",!0)])):(Ye(),Rn("div",TX,[L(G,{type:"info"},{default:U(()=>[Tt($e(O.$t("common.noData")),1)]),_:1})]))],64)):(Ye(),Rn(Bo,{key:1},[g.value.mcp_tool?(Ye(),Rn("div",RX,[g.value.mcp_tool?Pl((Ye(),Bt(te,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[6]||(S[6]=_n(()=>{},["prevent"]))},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(g.value.tool_form_field,H=>(Ye(),Bt(A,{key:H.field,required:H.required},{label:U(()=>[me("div",jX,[me("div",null,[L(AS,{label:H.label.label,tooltip:H.label.attrs.tooltip},null,8,["label","tooltip"]),H.required?(Ye(),Rn("span",CX,"*")):nr("",!0)]),L(Y,{teleported:!1,modelValue:H.source,"onUpdate:modelValue":re=>H.source=re,size:"small",style:{width:"85px"}},{default:U(()=>[L(Z,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),L(Z,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[H.source==="custom"&&H.input_type==="TextInput"?(Ye(),Bt(C,{key:0,modelValue:g.value.tool_params[H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[H.label.label]=re},null,8,["modelValue","onUpdate:modelValue"])):H.source==="custom"&&H.input_type==="NumberInput"?(Ye(),Bt(W,{key:1,modelValue:g.value.tool_params[H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[H.label.label]=re},null,8,["modelValue","onUpdate:modelValue"])):H.source==="custom"&&H.input_type==="SwitchInput"?(Ye(),Bt(K,{key:2,modelValue:g.value.tool_params[H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[H.label.label]=re},null,8,["modelValue","onUpdate:modelValue"])):H.source==="custom"&&H.input_type==="JsonInput"?(Ye(),Bt(C,{key:3,modelValue:g.value.tool_params[H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[H.label.label]=re,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):nr("",!0),H.source==="referencing"?(Ye(),Bt(Oi,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[H.label.label],"onUpdate:modelValue":re=>g.value.tool_params[H.label.label]=re},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):nr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[z,o.value]]):nr("",!0)])):(Ye(),Rn("div",NX,[L(G,{type:"info"},{default:U(()=>[Tt($e(O.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class LX extends Xi{constructor(t){super(t,IX)}}const FX={type:"mcp-node",model:Yi,view:LX},$X=Object.freeze(Object.defineProperty({__proto__:null,default:FX},Symbol.toStringTag,{value:"Module"})),BX={class:"title-decoration-1 mb-8"},UX={class:"flex-between"},GX={class:"flex align-center"},VX={class:"mr-4"},WX={class:"flex align-center"},zX={class:"mr-4"},HX=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),n=wt(),o=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),r=N=>{var B;N?(B=n.value)==null||B.reset_default(N,v):_({})};function s(N){et.set(S.nodeModel.properties.node_data,"prompt",N)}function c(N){et.set(S.nodeModel.properties.node_data,"system",N)}const{params:{id:v}}=Vu.config.globalProperties.$route,h=`${Qt("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Qt("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={model_id:"",system:Qt("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:h,dialogue_number:1,is_result:!1};function _(N){et.set(S.nodeModel.properties.node_data,"model_params_setting",N)}const w=N=>{var B;N&&((B=n.value)==null||B.open(N,v,O.value.model_params_setting))},O=po({get:()=>(S.nodeModel.properties.node_data||et.set(S.nodeModel.properties,"node_data",g),S.nodeModel.properties.node_data),set:N=>{et.set(S.nodeModel.properties,"node_data",N)}}),S=e,P=wt(),A=wt(null),R=()=>{var N;return(N=P.value)==null?void 0:N.validate().catch(B=>Promise.reject({node:S.nodeModel,errMessage:B}))};function D(){v?Aa.getApplicationModel(v).then(N=>{A.value=et.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{A.value=et.groupBy(N==null?void 0:N.data,"provider")})}return Uo(()=>{var N;D(),typeof((N=S.nodeModel.properties.node_data)==null?void 0:N.is_result)>"u"&&qp(S.nodeModel)&&et.set(S.nodeModel.properties.node_data,"is_result",!0),et.set(S.nodeModel,"validate",R)}),(N,B)=>{const q=ue("Setting"),Z=ue("el-icon"),Y=ue("el-button"),te=ue("ModelSelect"),G=ue("el-form-item"),C=ue("MdEditorMagnify"),W=ue("AppIcon"),K=ue("EditPen"),z=ue("el-tooltip"),H=ue("el-input-number"),re=ue("el-switch"),fe=ue("el-form"),Se=ue("el-card");return Ye(),Bt(Hi,{nodeModel:N.nodeModel},{default:U(()=>[me("h5",BX,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),L(Se,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[L(fe,{onSubmit:B[7]||(B[7]=_n(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:P,"hide-required-asterisk":""},{default:U(()=>[L(G,{label:N.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[me("div",UX,[me("div",null,[me("span",null,[Tt($e(N.$t("views.application.applicationForm.form.aiModel.label")),1),B[8]||(B[8]=me("span",{class:"danger"},"*",-1))])]),L(Y,{type:"primary",link:"",disabled:!O.value.model_id,onClick:B[0]||(B[0]=Te=>w(O.value.model_id)),onRefreshForm:_},{default:U(()=>[L(Z,null,{default:U(()=>[L(q)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[L(te,{onChange:r,onWheel:o,teleported:!1,modelValue:O.value.model_id,"onUpdate:modelValue":B[1]||(B[1]=Te=>O.value.model_id=Te),placeholder:N.$t("views.application.applicationForm.form.aiModel.placeholder"),options:A.value,onSubmitModel:D,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[L(C,{title:N.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":B[2]||(B[2]=Te=>O.value.system=Te),style:{height:"100px"},onSubmitDialog:c,placeholder:N.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),L(G,{label:N.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:U(()=>[me("div",GX,[me("div",VX,[me("span",null,[Tt($e(N.$t("views.application.applicationForm.form.prompt.label")),1),B[9]||(B[9]=me("span",{class:"danger"},"*",-1))])]),L(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[L(W,{iconName:"app-warning",class:"app-warning-icon"}),L(Z,null,{default:U(()=>[L(K)]),_:1})]),_:1})])]),default:U(()=>[L(C,{onWheel:o,title:N.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":B[3]||(B[3]=Te=>O.value.prompt=Te),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),L(G,{label:N.$t("views.application.applicationForm.form.historyRecord.label")},{default:U(()=>[L(H,{modelValue:O.value.dialogue_number,"onUpdate:modelValue":B[4]||(B[4]=Te=>O.value.dialogue_number=Te),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),L(G,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:B[6]||(B[6]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",WX,[me("div",zX,[me("span",null,$e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(z,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(W,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(re,{size:"small",modelValue:O.value.is_result,"onUpdate:modelValue":B[5]||(B[5]=Te=>O.value.is_result=Te)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),L(d_,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:_},null,512)]),_:1},8,["nodeModel"])}}});class XX extends Xi{constructor(t){super(t,HX)}}const YX={type:"question-node",model:Yi,view:XX},qX=Object.freeze(Object.defineProperty({__proto__:null,default:YX},Symbol.toStringTag,{value:"Module"})),KX={class:"title-decoration-1 mb-8"},ZX=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={customer_id:["start-node","customer_id"]},o=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",n),t.nodeModel.properties.node_data),set:r=>{et.set(t.nodeModel.properties,"node_data",r)}});return(r,s)=>{const c=ue("el-form-item"),v=ue("el-form"),h=ue("el-card");return Ye(),Bt(Hi,{nodeModel:r.nodeModel},{default:U(()=>[me("h5",KX,$e(r.$t("views.applicationWorkflow.nodeSetting")),1),L(h,{shadow:"never",class:"card-never"},{default:U(()=>[L(v,{onSubmit:s[1]||(s[1]=_n(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"RecommendNodeFormRef"},{default:U(()=>[L(c,{label:r.$t("views.applicationWorkflow.nodes.recommendNode.customerId"),rules:{type:"array",required:!0,message:r.$t("views.applicationWorkflow.nodes.recommendNode.customerIdRequired"),trigger:"change"},prop:"customer_id"},{default:U(()=>[L(Oi,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.applicationWorkflow.nodes.recommendNode.customerIdPlaceholder"),modelValue:o.value.customer_id,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.customer_id=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class JX extends Xi{constructor(t){super(t,ZX)}}const QX={type:"recommend-node",model:Yi,view:JX},eY=Object.freeze(Object.defineProperty({__proto__:null,default:QX},Symbol.toStringTag,{value:"Module"})),tY={class:"flex-between"},nY={class:"flex align-center"},rY={class:"mr-4"},oY=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={reply_type:"content",content:"",fields:[],is_result:!1},r=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",o),t.nodeModel.properties.node_data),set:g=>{et.set(t.nodeModel.properties,"node_data",g)}});function s(g){et.set(t.nodeModel.properties.node_data,"content",g)}const c=wt(),v=wt(),h=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))};return Uo(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&qp(t.nodeModel)&&et.set(t.nodeModel.properties.node_data,"is_result",!0),et.set(t.nodeModel,"validate",h)}),(g,_)=>{const w=ue("el-option"),O=ue("el-select"),S=ue("MdEditorMagnify"),P=ue("el-form-item"),A=ue("AppIcon"),R=ue("el-tooltip"),D=ue("el-switch"),N=ue("el-form"),B=ue("el-card");return Ye(),Bt(Hi,{nodeModel:g.nodeModel},{default:U(()=>[L(B,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[L(N,{onSubmit:_[5]||(_[5]=_n(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:U(()=>[L(P,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:U(()=>[me("div",tY,[me("span",null,$e(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),L(O,{teleported:!1,modelValue:r.value.reply_type,"onUpdate:modelValue":_[0]||(_[0]=q=>r.value.reply_type=q),size:"small",style:{width:"85px"}},{default:U(()=>[L(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),L(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[r.value.reply_type==="content"?(Ye(),Bt(S,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":_[1]||(_[1]=q=>r.value.content=q),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Ye(),Bt(Oi,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":_[2]||(_[2]=q=>r.value.fields=q)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),L(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[4]||(_[4]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",nY,[me("div",rY,[me("span",null,$e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(R,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(A,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(D,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":_[3]||(_[3]=q=>r.value.is_result=q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class iY extends Xi{constructor(t){super(t,oY)}}const aY={type:"reply-node",model:Yi,view:iY},lY=Object.freeze(Object.defineProperty({__proto__:null,default:aY},Symbol.toStringTag,{value:"Module"})),uY={class:"p-16"},sY={class:"flex align-center"},cY={class:"mr-4"},fY={class:"dialog-footer p-16"},dY=Cr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=wt(),s=wt({top_n:3,similarity:0,max_paragraph_char_number:5e3}),c=wt(!1),v=wt(!1);c_(c,_=>{_||(s.value={top_n:3,similarity:0,max_paragraph_char_number:5e3})});const h=_=>{s.value={...s.value,...et.cloneDeep(_)},c.value=!0},g=()=>{var _;(_=r==null?void 0:r.value)==null||_.validate((w,O)=>{w&&(o("refresh",et.cloneDeep(s.value)),c.value=!1)})};return t({open:h}),(_,w)=>{const O=ue("AppIcon"),S=ue("el-tooltip"),P=ue("el-input-number"),A=ue("el-form-item"),R=ue("el-col"),D=ue("el-row"),N=ue("el-slider"),B=ue("el-form"),q=ue("el-scrollbar"),Z=ue("el-button"),Y=ue("el-dialog");return Ye(),Bt(Y,{"align-center":"",title:_.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":w[5]||(w[5]=te=>c.value=te),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[me("span",fY,[L(Z,{onClick:w[3]||(w[3]=_n(te=>c.value=!1,["prevent"]))},{default:U(()=>[Tt($e(_.$t("common.cancel")),1)]),_:1}),L(Z,{type:"primary",onClick:w[4]||(w[4]=te=>g()),loading:v.value},{default:U(()=>[Tt($e(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[me("div",null,[L(q,{always:""},{default:U(()=>[me("div",uY,[L(B,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:U(()=>[L(D,{gutter:20},{default:U(()=>[L(R,{span:12},{default:U(()=>[L(A,null,{label:U(()=>[me("div",sY,[me("span",cY,"Score "+$e(_.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),L(S,{effect:"dark",content:_.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:U(()=>[L(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:U(()=>[L(P,{modelValue:s.value.similarity,"onUpdate:modelValue":w[0]||(w[0]=te=>s.value.similarity=te),min:0,max:s.value.search_mode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),L(R,{span:12},{default:U(()=>[L(A,{label:_.$t("views.application.applicationForm.dialog.topReferences")},{default:U(()=>[L(P,{modelValue:s.value.top_n,"onUpdate:modelValue":w[1]||(w[1]=te=>s.value.top_n=te),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),L(A,{label:_.$t("views.application.applicationForm.dialog.maxCharacters")},{default:U(()=>[L(N,{modelValue:s.value.max_paragraph_char_number,"onUpdate:modelValue":w[2]||(w[2]=te=>s.value.max_paragraph_char_number=te),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}}),pY={class:"flex-between"},hY={class:"flex-between"},vY={class:"w-full"},yY={class:"flex-between"},mY={class:"flex-between"},gY=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),n=e,o=wt(),{params:{id:r}}=Vu.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",question_reference_address:[],reranker_setting:{top_n:3,similarity:0,max_paragraph_char_number:5e3}},c=wt(null),v=()=>{var D;(D=o.value)==null||D.open(_.value.reranker_setting)},h=D=>{const N=et.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);N.splice(D,1),et.set(n.nodeModel.properties.node_data,"reranker_reference_list",N)},g=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),_=po({get:()=>(n.nodeModel.properties.node_data||et.set(n.nodeModel.properties,"node_data",s),n.nodeModel.properties.node_data),set:D=>{et.set(n.nodeModel.properties,"node_data",D)}});function w(D){et.set(n.nodeModel.properties.node_data,"reranker_setting",D)}function O(){r?Aa.getApplicationRerankerModel(r).then(D=>{c.value=et.groupBy(D==null?void 0:D.data,"provider")}):t.asyncGetModel({model_type:"RERANKER"}).then(D=>{c.value=et.groupBy(D==null?void 0:D.data,"provider")})}const S=()=>{const D=et.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);D.push([]),et.set(n.nodeModel.properties.node_data,"reranker_reference_list",D)},P=wt(),A=wt(),R=()=>{var D;return Promise.all([A.value?A.value.validate():Promise.resolve(""),(D=P.value)==null?void 0:D.validate()]).catch(N=>Promise.reject({node:n.nodeModel,errMessage:N}))};return Uo(()=>{O(),et.set(n.nodeModel,"validate",R)}),(D,N)=>{const B=ue("Plus"),q=ue("el-icon"),Z=ue("el-button"),Y=ue("el-form-item"),te=ue("el-col"),G=ue("Delete"),C=ue("el-row"),W=ue("Setting"),K=ue("ModelSelect"),z=ue("el-form"),H=ue("el-card");return Ye(),Bt(Hi,{nodeModel:D.nodeModel},{default:U(()=>[L(H,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[L(z,{onSubmit:N[2]||(N[2]=_n(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:P,"hide-required-asterisk":""},{default:U(()=>[L(Y,{label:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:U(()=>[me("div",pY,[me("span",null,[Tt($e(D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),N[3]||(N[3]=me("span",{class:"danger"},"*",-1))]),L(Z,{onClick:S,link:"",type:"primary"},{default:U(()=>[L(q,{class:"mr-4"},{default:U(()=>[L(B)]),_:1})]),_:1})])]),default:U(()=>[(Ye(!0),Rn(Bo,null,zi(_.value.reranker_reference_list,(re,fe)=>(Ye(),Bt(C,{gutter:8,style:{"margin-bottom":"8px"},key:fe},{default:U(()=>[L(te,{span:22},{default:U(()=>[L(Y,{prop:"reranker_reference_list."+fe,rules:{type:"array",required:!0,message:D.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[(Ye(),Bt(Oi,{key:fe,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:_.value.reranker_reference_list[fe],"onUpdate:modelValue":Se=>_.value.reranker_reference_list[fe]=Se},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),L(te,{span:1},{default:U(()=>[L(Z,{link:"",type:"info",class:"mt-4",onClick:Se=>h(fe)},{default:U(()=>[L(q,null,{default:U(()=>[L(G)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),L(Y,{label:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[me("div",hY,[me("span",null,$e(D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),L(Z,{type:"primary",link:"",onClick:v},{default:U(()=>[L(q,null,{default:U(()=>[L(W)]),_:1})]),_:1})])]),default:U(()=>[me("div",vY,[L(C,null,{default:U(()=>[L(te,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(" Score "+$e(D.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),L(te,{span:12,class:"lighter"},{default:U(()=>{var re;return[Tt($e((re=_.value.reranker_setting.similarity)==null?void 0:re.toFixed(3)),1)]}),_:1}),L(te,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(D.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),L(te,{span:12,class:"lighter"},{default:U(()=>[Tt($e(_.value.reranker_setting.top_n),1)]),_:1}),L(te,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(D.$t("views.applicationWorkflow.nodes.rerankerNode.max_paragraph_char_number")),1)]),_:1}),L(te,{span:12,class:"lighter"},{default:U(()=>[Tt($e(_.value.reranker_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),L(Y,{label:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:U(()=>[me("div",yY,[me("span",null,[Tt($e(D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),N[4]||(N[4]=me("span",{class:"danger"},"*",-1))])])]),default:U(()=>[L(Oi,{ref_key:"nodeCascaderRef",ref:A,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:_.value.question_reference_address,"onUpdate:modelValue":N[0]||(N[0]=re=>_.value.question_reference_address=re)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),L(Y,{label:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:U(()=>[me("div",mY,[me("span",null,[Tt($e(D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),N[5]||(N[5]=me("span",{class:"danger"},"*",-1))])])]),default:U(()=>[L(K,{onWheel:g,teleported:!1,modelValue:_.value.reranker_model_id,"onUpdate:modelValue":N[1]||(N[1]=re=>_.value.reranker_model_id=re),placeholder:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:c.value,onSubmitModel:O,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),L(dY,{ref_key:"ParamSettingDialogRef",ref:o,onRefresh:w},null,512)]),_:1},8,["nodeModel"])}}});const _Y=Rv(gY,[["__scopeId","data-v-364c376e"]]);class bY extends Xi{constructor(t){super(t,_Y)}}const wY={type:"reranker-node",model:Yi,view:bY},EY=Object.freeze(Object.defineProperty({__proto__:null,default:wY},Symbol.toStringTag,{value:"Module"}));var xk=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(xk||{});const OY={class:"title-decoration-1 mb-8"},xY={class:"flex-between"},SY={class:"w-full"},AY={class:"flex align-center",style:{"line-height":"20px"}},TY=["title"],MY={class:"flex-between"},PY={class:"w-full"},kY=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:o}=Pf(),{params:{id:r}}=Vu.config.globalProperties.$route,s=e,c=wt(),v={dataset_id_list:[],dataset_setting:{top_n:3,similarity:.6,max_paragraph_char_number:5e3,search_mode:"embedding"},question_reference_address:[]},h=po({get:()=>(s.nodeModel.properties.node_data||et.set(s.nodeModel.properties,"node_data",v),s.nodeModel.properties.node_data),set:Y=>{et.set(s.nodeModel.properties,"node_data",Y)}}),g=wt(),_=wt(),w=wt(),O=wt([]),S=wt(!1);function P(Y){et.set(s.nodeModel.properties.node_data,"dataset_setting",Y.dataset_setting)}const A=()=>{var Y;(Y=_.value)==null||Y.open(h.value,"WORK_FLOW")};function R(Y){const te=s.nodeModel.properties.node_data.dataset_id_list.filter(G=>G!==Y);et.set(s.nodeModel.properties.node_data,"dataset_id_list",te)}function D(Y){et.set(s.nodeModel.properties.node_data,"dataset_id_list",Y)}function N(){w.value&&w.value.open(h.value.dataset_id_list)}function B(){r?n.asyncGetApplicationDataset(r,S).then(Y=>{O.value=Y.data}):t.asyncGetAllDataset(S).then(Y=>{var te;O.value=(te=Y.data)==null?void 0:te.filter(G=>{var C;return G.user_id===((C=o.userInfo)==null?void 0:C.id)})})}function q(){B()}const Z=()=>{var Y;return Promise.all([c.value.validate(),(Y=g.value)==null?void 0:Y.validate()]).catch(te=>Promise.reject({node:s.nodeModel,errMessage:te}))};return Uo(()=>{B(),et.set(s.nodeModel,"validate",Z)}),(Y,te)=>{const G=ue("Plus"),C=ue("el-icon"),W=ue("el-button"),K=ue("el-text"),z=ue("AppAvatar"),H=ue("Close"),re=ue("el-form-item"),fe=ue("Setting"),Se=ue("el-col"),Te=ue("el-row"),he=ue("el-form"),_e=ue("el-card");return Ye(),Bt(Hi,{nodeModel:Y.nodeModel},{default:U(()=>[me("h5",OY,$e(Y.$t("views.applicationWorkflow.nodeSetting")),1),L(_e,{shadow:"never",class:"card-never"},{default:U(()=>[L(he,{onSubmit:te[1]||(te[1]=_n(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:U(()=>[L(re,{label:Y.$t("views.log.selectDataset")},{label:U(()=>[me("div",xY,[me("span",null,$e(Y.$t("views.log.selectDataset")),1),L(W,{type:"primary",link:"",onClick:N},{default:U(()=>[L(C,null,{default:U(()=>[L(G)]),_:1})]),_:1})])]),default:U(()=>{var De;return[me("div",SY,[((De=h.value.dataset_id_list)==null?void 0:De.length)===0?(Ye(),Bt(K,{key:0,type:"info"},{default:U(()=>[Tt($e(Y.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(Ye(!0),Rn(Bo,{key:1},zi(h.value.dataset_id_list,(Ve,vt)=>{var rt,gt,Nt,yt;return Ye(),Rn("div",{key:vt,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[me("div",AY,[((rt=vr(og)(O.value,Ve,"id"))==null?void 0:rt.type)==="1"?(Ye(),Bt(z,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:U(()=>te[2]||(te[2]=[me("img",{src:fL,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[2]})):((gt=vr(og)(O.value,Ve,"id"))==null?void 0:gt.type)==="2"?(Ye(),Bt(z,{key:1,class:"mr-8 avatar-purple",shape:"square",size:20,style:{background:"none"}},{default:U(()=>te[3]||(te[3]=[me("img",{src:dL,style:{width:"100%"},alt:""},null,-1)])),_:1,__:[3]})):(Ye(),Bt(z,{key:2,class:"mr-8 avatar-blue",shape:"square",size:20},{default:U(()=>te[4]||(te[4]=[me("img",{src:pL,style:{width:"58%"},alt:""},null,-1)])),_:1,__:[4]})),me("div",{class:"ellipsis",title:(Nt=vr(og)(O.value,Ve,"id"))==null?void 0:Nt.name},$e((yt=vr(og)(O.value,Ve,"id"))==null?void 0:yt.name),9,TY)]),L(W,{text:"",onClick:Yt=>R(Ve)},{default:U(()=>[L(C,null,{default:U(()=>[L(H)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),L(re,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[me("div",MY,[me("span",null,$e(Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),L(W,{type:"primary",link:"",onClick:A},{default:U(()=>[L(C,null,{default:U(()=>[L(fe)]),_:1})]),_:1})])]),default:U(()=>[me("div",PY,[L(Te,null,{default:U(()=>[L(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(Y.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),L(Se,{span:12,class:"lighter"},{default:U(()=>[Tt($e(Y.$t(vr(xk)[h.value.dataset_setting.search_mode])),1)]),_:1}),L(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(Y.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),L(Se,{span:12,class:"lighter"},{default:U(()=>{var De;return[Tt($e((De=h.value.dataset_setting.similarity)==null?void 0:De.toFixed(3)),1)]}),_:1}),L(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(Y.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),L(Se,{span:12,class:"lighter"},{default:U(()=>[Tt($e(h.value.dataset_setting.top_n),1)]),_:1}),L(Se,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(Y.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),L(Se,{span:12,class:"lighter"},{default:U(()=>[Tt($e(h.value.dataset_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),L(re,{label:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[L(Oi,{ref_key:"nodeCascaderRef",ref:c,nodeModel:Y.nodeModel,class:"w-full",placeholder:Y.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.question_reference_address,"onUpdate:modelValue":te[0]||(te[0]=De=>h.value.question_reference_address=De)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),L(_L,{ref_key:"ParamSettingDialogRef",ref:_,onRefresh:P},null,512),L(bL,{ref_key:"AddDatasetDialogRef",ref:w,onAddData:D,data:O.value,onRefresh:q,loading:S.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class NY extends Xi{constructor(t){super(t,kY)}}const RY={type:"search-dataset-node",model:Yi,view:NY},jY=Object.freeze(Object.defineProperty({__proto__:null,default:RY},Symbol.toStringTag,{value:"Module"})),CY={class:"title-decoration-1 mb-8"},DY={class:"flex-between w-full"},IY={class:"flex-between w-full"},LY={class:"flex align-center"},FY={class:"mr-4"},$Y=Cr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=wt(null),s=wt(),c=wt(),v=()=>{var O;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(O=s.value)==null?void 0:O.validate()]).catch(S=>Promise.reject({node:o.nodeModel,errMessage:S}))},h=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),g={stt_model_id:"",is_result:!0,audio_list:[]},_=po({get:()=>(o.nodeModel.properties.node_data||et.set(o.nodeModel.properties,"node_data",g),o.nodeModel.properties.node_data),set:O=>{et.set(o.nodeModel.properties,"node_data",O)}});function w(){n?Aa.getApplicationSTTModel(n).then(O=>{r.value=et.groupBy(O==null?void 0:O.data,"provider")}):t.asyncGetModel().then(O=>{r.value=et.groupBy(O==null?void 0:O.data,"provider")})}return Uo(()=>{w(),et.set(o.nodeModel,"validate",v)}),(O,S)=>{const P=ue("ModelSelect"),A=ue("el-form-item"),R=ue("AppIcon"),D=ue("el-tooltip"),N=ue("el-switch"),B=ue("el-form"),q=ue("el-card");return Ye(),Bt(Hi,{"node-model":O.nodeModel},{default:U(()=>[me("h5",CY,$e(O.$t("views.applicationWorkflow.nodeSetting")),1),L(q,{shadow:"never",class:"card-never"},{default:U(()=>[L(B,{onSubmit:S[4]||(S[4]=_n(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:U(()=>[L(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:U(()=>[me("div",DY,[me("div",null,[me("span",null,[Tt($e(O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),S[5]||(S[5]=me("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[L(P,{onWheel:h,teleported:!1,modelValue:_.value.stt_model_id,"onUpdate:modelValue":S[0]||(S[0]=Z=>_.value.stt_model_id=Z),placeholder:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),L(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:U(()=>[me("div",IY,[me("div",null,[me("span",null,[Tt($e(O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),S[6]||(S[6]=me("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[L(Oi,{ref_key:"nodeCascaderRef",ref:c,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:_.value.audio_list,"onUpdate:modelValue":S[1]||(S[1]=Z=>_.value.audio_list=Z)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),L(A,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",LY,[me("div",FY,[me("span",null,$e(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(D,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(R,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(N,{size:"small",modelValue:_.value.is_result,"onUpdate:modelValue":S[2]||(S[2]=Z=>_.value.is_result=Z)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class BY extends Xi{constructor(t){super(t,$Y)}}const UY={type:"speech-to-text-node",model:Yi,view:BY},GY=Object.freeze(Object.defineProperty({__proto__:null,default:UY},Symbol.toStringTag,{value:"Module"})),VY={class:"title-decoration-1 mb-8"},WY={class:"break-all"},zY=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=wt(!1),o=[{label:Qt("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Qt("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:Qt("chat.chatId"),value:"chat_id"}],r=()=>{const v=t.nodeModel.graphModel.nodes.filter(w=>w.id==="base-node").map(w=>et.cloneDeep(w.properties.user_input_field_list)).reduce((w,O)=>[...w,...O],[]).map(w=>w.label&&w.label.input_type==="TooltipLabel"?{label:w.label.label,value:w.field||w.variable}:{label:w.label||w.name,value:w.field||w.variable}),h=t.nodeModel.graphModel.nodes.filter(w=>w.id==="base-node").map(w=>et.cloneDeep(w.properties.api_input_field_list)).reduce((w,O)=>[...w,...O],[]).map(w=>({label:w.name||w.variable,value:w.variable})),g={label:"场景类型",value:"type"},_={label:"客户信息",value:"user_info"};return[...v,...h,g,_]},s=()=>{const v=r();et.set(t.nodeModel.properties.config,"globalFields",[...o,...v])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let v=et.cloneDeep(t.nodeModel.properties.config.fields);const h=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").filter(_=>_.properties.node_data.file_upload_enable).map(_=>et.cloneDeep(_.properties.node_data.file_upload_setting)).filter(_=>_);if(v=v.filter(_=>_.value!=="image"&&_.value!=="document"&&_.value!=="audio"&&_.value!=="video"&&_.value!=="other"),h.length===0){et.set(t.nodeModel.properties.config,"fields",v);return}let g=[];h[0].document&&g.push({label:Qt("common.fileUpload.document"),value:"document"}),h[0].image&&g.push({label:Qt("common.fileUpload.image"),value:"image"}),h[0].audio&&g.push({label:Qt("common.fileUpload.audio"),value:"audio"}),h[0].video&&g.push({label:Qt("common.fileUpload.video"),value:"video"}),h[0].other&&g.push({label:Qt("common.fileUpload.other"),value:"other"}),et.set(t.nodeModel.properties.config,"fields",[...v,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),Uo(()=>{s(),c()}),(v,h)=>{const g=ue("AppIcon"),_=ue("el-button"),w=ue("el-tooltip");return Ye(),Bt(Hi,{nodeModel:v.nodeModel},{default:U(()=>[me("h5",VY,$e(v.$t("views.applicationWorkflow.variable.global")),1),(Ye(!0),Rn(Bo,null,zi(v.nodeModel.properties.config.globalFields,(O,S)=>(Ye(),Rn("div",{key:S,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:h[0]||(h[0]=P=>n.value=!0),onMouseleave:h[1]||(h[1]=P=>n.value=!1)},[me("span",WY,$e(O.label)+" "+$e("{"+O.value+"}"),1),n.value===!0?(Ye(),Bt(w,{key:0,effect:"dark",content:v.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[L(_,{link:"",onClick:P=>vr(zM)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:U(()=>[L(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):nr("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class HY extends Xi{constructor(t){super(t,zY)}}const XY={type:"start-node",model:Yi,view:HY},YY=Object.freeze(Object.defineProperty({__proto__:null,default:XY},Symbol.toStringTag,{value:"Module"})),qY={class:"title-decoration-1 mb-8"},KY={class:"flex-between w-full"},ZY={class:"flex-between w-full"},JY={class:"flex align-center"},QY={class:"mr-4"},eq=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=wt(),{model:n}=Pf(),{params:{id:o}}=Vu.config.globalProperties.$route,r=e,s=wt(null),c=wt(),v=wt(),h=()=>{var A;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(A=c.value)==null?void 0:A.validate()]).catch(R=>Promise.reject({node:r.nodeModel,errMessage:R}))},g=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),_={tts_model_id:"",is_result:!0,content_list:[],model_params_setting:{}},w=po({get:()=>(r.nodeModel.properties.node_data||et.set(r.nodeModel.properties,"node_data",_),r.nodeModel.properties.node_data),set:A=>{et.set(r.nodeModel.properties,"node_data",A)}});function O(){o?Aa.getApplicationTTSModel(o).then(A=>{s.value=et.groupBy(A==null?void 0:A.data,"provider")}):n.asyncGetModel().then(A=>{s.value=et.groupBy(A==null?void 0:A.data,"provider")})}const S=()=>{var R;const A=w.value.tts_model_id;if(!A){Up(Qt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(R=t.value)==null||R.open(A,o,w.value.model_params_setting)},P=A=>{w.value.model_params_setting=A};return Uo(()=>{O(),et.set(r.nodeModel,"validate",h)}),(A,R)=>{const D=ue("Setting"),N=ue("el-icon"),B=ue("el-button"),q=ue("ModelSelect"),Z=ue("el-form-item"),Y=ue("AppIcon"),te=ue("el-tooltip"),G=ue("el-switch"),C=ue("el-form"),W=ue("el-card");return Ye(),Bt(Hi,{"node-model":A.nodeModel},{default:U(()=>[me("h5",qY,$e(A.$t("views.applicationWorkflow.nodeSetting")),1),L(W,{shadow:"never",class:"card-never"},{default:U(()=>[L(C,{onSubmit:R[4]||(R[4]=_n(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[L(Z,{label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"tts_model_id",rules:{required:!0,message:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:U(()=>[me("div",KY,[me("div",null,[me("span",null,[Tt($e(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),R[5]||(R[5]=me("span",{class:"danger"},"*",-1))])]),L(B,{type:"primary",link:"",onClick:S,disabled:!w.value.tts_model_id,class:"mr-4"},{default:U(()=>[L(N,null,{default:U(()=>[L(D)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[L(q,{onWheel:g,teleported:!1,modelValue:w.value.tts_model_id,"onUpdate:modelValue":R[0]||(R[0]=K=>w.value.tts_model_id=K),placeholder:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),L(Z,{prop:"content_list",label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:U(()=>[me("div",ZY,[me("div",null,[me("span",null,[Tt($e(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),R[6]||(R[6]=me("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[L(Oi,{ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:w.value.content_list,"onUpdate:modelValue":R[1]||(R[1]=K=>w.value.content_list=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),L(Z,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:R[3]||(R[3]=_n(()=>{},["prevent"]))},{label:U(()=>[me("div",JY,[me("div",QY,[me("span",null,$e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),L(te,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[L(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[L(G,{size:"small",modelValue:w.value.is_result,"onUpdate:modelValue":R[2]||(R[2]=K=>w.value.is_result=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),L(KM,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:P},null,512)]),_:1},8,["node-model"])}}});class tq extends Xi{constructor(t){super(t,eq)}}const nq={type:"text-to-speech-node",model:Yi,view:tq},rq=Object.freeze(Object.defineProperty({__proto__:null,default:nq},Symbol.toStringTag,{value:"Module"})),oq={class:"flex-between"},iq={class:"flex-between mb-8"},aq={class:"lighter"},lq={key:0,class:"flex w-full"},uq=Cr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r={variable_list:[{id:Oy(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=po({get:()=>(t.nodeModel.properties.node_data||et.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:S=>{et.set(t.nodeModel.properties,"node_data",S)}}),c=wt(),v=wt(),h=wt(),g=async()=>{var P;let S=[(P=c.value)==null?void 0:P.validate(),...v.value.map(A=>A.validate())];return h.value&&(S=[...S,...v.value.map(A=>A.validate())]),Promise.all(S).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function _(){const S=et.cloneDeep(t.nodeModel.properties.node_data.variable_list),P={id:Oy(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};S.push(P),et.set(t.nodeModel.properties.node_data,"variable_list",S)}function w(S){const P=et.cloneDeep(t.nodeModel.properties.node_data.variable_list);P.splice(S,1),et.set(t.nodeModel.properties.node_data,"variable_list",P)}function O(S){t.nodeModel.graphModel.nodes.map(P=>{P.id==="start-node"&&P.properties.config.globalFields.forEach(A=>{A.value===S.fields[1]&&(S.name=A.label)})})}return Uo(()=>{var S;typeof((S=t.nodeModel.properties.node_data)==null?void 0:S.is_result)>"u"&&qp(t.nodeModel)&&et.set(t.nodeModel.properties.node_data,"is_result",!0),et.set(t.nodeModel,"validate",g)}),(S,P)=>{const A=ue("Delete"),R=ue("el-icon"),D=ue("el-button"),N=ue("el-form-item"),B=ue("el-option"),q=ue("el-select"),Z=ue("el-input"),Y=ue("el-input-number"),te=ue("CodemirrorEditor"),G=ue("el-card"),C=ue("Plus"),W=ue("el-form");return Ye(),Bt(Hi,{nodeModel:S.nodeModel},{default:U(()=>[L(W,{onSubmit:P[0]||(P[0]=_n(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[(Ye(!0),Rn(Bo,null,zi(s.value.variable_list,(K,z)=>(Ye(),Bt(G,{key:K.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:U(()=>[L(N,{label:S.$t("views.applicationWorkflow.variable.label")},{label:U(()=>[me("div",oq,[me("div",null,[Tt($e(S.$t("views.applicationWorkflow.variable.label"))+" ",1),P[1]||(P[1]=me("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(Ye(),Bt(D,{key:0,text:"",onClick:H=>w(z)},{default:U(()=>[L(R,null,{default:U(()=>[L(A)]),_:1})]),_:2},1032,["onClick"])):nr("",!0)])]),default:U(()=>[L(Oi,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.fields,"onUpdate:modelValue":H=>K.fields=H,global:!0,onChange:H=>O(K)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),me("div",iq,[me("span",aq,[Tt($e(S.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),P[2]||(P[2]=me("span",{class:"danger"},"*",-1))]),L(q,{teleported:!1,modelValue:K.source,"onUpdate:modelValue":H=>K.source=H,size:"small",style:{width:"85px"}},{default:U(()=>[L(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),L(B,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),K.source==="custom"?(Ye(),Rn("div",lq,[L(q,{modelValue:K.type,"onUpdate:modelValue":H=>K.type=H,style:{"max-width":"85px"},class:"mr-8",onChange:H=>s.value.variable_list[z].value=null},{default:U(()=>[(Ye(),Rn(Bo,null,zi(n,H=>L(B,{key:H,label:H,value:H},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),K.type==="string"?(Ye(),Bt(N,{key:0,prop:"variable_list."+z+".value",rules:{message:vr(Qt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[L(Z,{modelValue:K.value,"onUpdate:modelValue":H=>K.value=H,placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):K.type==="num"?(Ye(),Bt(N,{key:1,prop:"variable_list."+z+".value",rules:{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[L(Y,{modelValue:K.value,"onUpdate:modelValue":H=>K.value=H},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):K.type==="json"?(Ye(),Bt(N,{key:2,class:"w-full",prop:"variable_list."+z+".value",rules:[{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(H,re,fe)=>{try{JSON.parse(re),fe()}catch{fe(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:U(()=>[L(te,{title:"JSON",modelValue:K.value,"onUpdate:modelValue":H=>K.value=H,style:{height:"100px",width:"155px"},onSubmitDialog:H=>s.value.variable_list[z].value=H},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):nr("",!0)])):(Ye(),Bt(N,{key:1},{default:U(()=>[L(Oi,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:h,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:K.reference,"onUpdate:modelValue":H=>K.reference=H},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),L(D,{link:"",type:"primary",onClick:_},{default:U(()=>[L(R,{class:"mr-4"},{default:U(()=>[L(C)]),_:1}),Tt(" "+$e(S.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class sq extends Xi{constructor(t){super(t,uq)}}const cq={type:"variable-assign-node",model:Yi,view:sq},fq=Object.freeze(Object.defineProperty({__proto__:null,default:cq},Symbol.toStringTag,{value:"Module"})),fT=Cr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Pl((Ye(),Rn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=_n(()=>{},["stop"])),onClick:r[1]||(r[1]=_n(()=>{},["stop"]))},[(Ye(),Rn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r[2]||(r[2]=[me("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),me("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])))],544)),[[wv,t.model.isHovered]])}});function dq(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const pq=32,hq=32;class vq extends cn.BezierEdge{constructor(){super();wa(this,"isMounted");wa(this,"customLineApp");wa(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");dq(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Wg()?nk(this.targetId(),fT,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=XM({render:()=>Bp(fT,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Wg()&&rk(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=pq,customHeight:s=hq}=n.getProperties(),{startPoint:c,endPoint:v,path:h,isAnimation:g,arrowConfig:_}=n,w=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:S,strokeDashoffset:P,animationName:A,animationDuration:R,animationIterationCount:D,animationTimingFunction:N,animationDirection:B}=w,q={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},Z=n.getEdgeStyle(),Y={width:r,height:s};return setTimeout(()=>{const te=document.getElementById(o);te&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(te))},0),delete Z.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:h,...Z,..._,...g?{strokeDasharray:O,stroke:S,style:{strokeDashoffset:P,animationName:A,animationDuration:R,animationIterationCount:D,animationTimingFunction:N,animationDirection:B}}:{}}),cn.h("foreignObject",{...q,y:q.y+5,x:q.x+5,style:{}},[cn.h("div",{id:o,style:{...Y},className:"lf-custom-edge-wrapper"})])])}}class yq extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const mq={type:"app-edge",view:vq,model:yq},gq=Cr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var h;(h=t.lf)==null||h.zoom(!0,[0,0])}function o(){var h;(h=t.lf)==null||h.zoom(!1,[0,0])}function r(){var h,g,_;(h=t.lf)==null||h.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(_=t.lf)==null||_.fitView()}const s=()=>{var h;(h=t.lf)==null||h.extension.dagre.layout()},c=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(h,g)=>{const _=ue("ZoomOut"),w=ue("el-icon"),O=ue("el-tooltip"),S=ue("el-button"),P=ue("ZoomIn"),A=ue("AppIcon"),R=ue("el-divider"),D=ue("el-card");return Ye(),Bt(D,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:U(()=>[L(S,{link:"",onClick:o},{default:U(()=>[L(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:U(()=>[L(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomOut")},{default:U(()=>[L(_)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),L(S,{link:"",onClick:n},{default:U(()=>[L(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:U(()=>[L(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomIn")},{default:U(()=>[L(P)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),L(S,{link:"",onClick:r},{default:U(()=>[L(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:U(()=>[L(A,{iconName:"app-fitview",title:h.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),L(R,{direction:"vertical"}),L(S,{link:"",onClick:c},{default:U(()=>[L(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:U(()=>[L(A,{style:{"font-size":"16px"},iconName:"app-retract",title:h.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),L(S,{link:"",onClick:v},{default:U(()=>[L(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:U(()=>[L(A,{style:{"font-size":"16px"},iconName:"app-extend",title:h.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),L(S,{link:"",onClick:s},{default:U(()=>[L(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:U(()=>[L(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:h.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let ic=null;function dT(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function pT(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const Zh=40;let fg=40;function _q(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var w,O;if(fg=Zh,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,h=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(h):!0)||h.nodes.length===0&&h.edges.length===0)return ic=null,!0;const _=h.nodes.filter(S=>S.type===si.Start||S.type===si.Base);if(_.length>0){xa(((O=(w=_[0])==null?void 0:w.properties)==null?void 0:O.stepName)+Qt("views.applicationWorkflow.tip.cannotCopy"));return}return ic=h,ic.nodes.forEach(S=>dT(S,Zh)),ic.edges.forEach(S=>pT(S,Zh)),Up(Qt("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;if(ic&&(ic.nodes||ic.edges)){e.clearSelectElements();const v=e.addElements(ic,fg);if(!v)return!0;v.nodes.forEach(h=>e.selectElementById(h.id,!0)),v.edges.forEach(h=>e.selectElementById(h.id,!0)),ic.nodes.forEach(h=>dT(h,Zh)),ic.edges.forEach(h=>pT(h,Zh)),fg=fg+Zh}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(_=>e.deleteEdge(_.id));return}const h=v.nodes.filter(_=>["start-node","base-node"].includes(_.type));if(h.length>0){xa(`${(g=h[0].properties)==null?void 0:g.stepName}${Qt("views.applicationWorkflow.delete.deleteMessage")}`);return}return Bw(Qt("common.tip"),Qt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Qt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;v.edges.forEach(_=>e.deleteEdge(_.id)),v.nodes.forEach(_=>e.deleteNode(_.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class bq{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const wq=e=>typeof e=="string",hT=Array.isArray,Zg=e=>typeof e=="number",Sk=e=>e!==null&&typeof e=="object",Jg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Jg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Jg(t[n])}),t}return e},Jh=(e,t)=>{const n=e[t];return Sk(n)?n.cell:n},vT=(e,t,n)=>{let o;return n?o=n:Zg(e)?o=()=>e:o=()=>t,o},Eq=(e,t)=>{if(e!=="next"&&e!=="prev")return t},yT=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let Oq=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return yT(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&yT(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,Eq)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var vv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(vv||(vv={}));function mT(e,t){var n=e.get(t)||0;e.set(t,n+1)}function gT(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function Ak(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+vv.EDGE_KEY_DELIM+s+vv.EDGE_KEY_DELIM+(o===void 0?vv.DEFAULT_EDGE_NAME:o)}function _T(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return o!==void 0&&(c.name=o),c}function $1(e,t){return Ak(e,t.v,t.w,t.name)}function bT(e){return typeof e=="function"}var xq=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},Sq=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},Aq=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:xq(t),edges:Sq(t),value:t.graph()};return n.value===void 0&&delete n.value,n},Tq=function(t){var n=new Bv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ET(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(n),!0).forEach(function(o){Mq(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Mq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function kq(e,t,n){return t&&OT(e.prototype,t),n&&OT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Nq={compound:!1,multigraph:!1,directed:!0},Bv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pq(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=vv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return bT(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var h=s===void 0?t.GRAPH_NODE:s,g=t.parent(h);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,h);var _=t.childrenMap.get(h);return _.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(h,_),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,h=new e({directed:s,multigraph:c,compound:v});if(h.setGraph(t.graph()),t.nodes().forEach(function(_){r(_)&&h.setNode(_,t.node(_))}),t.edges().forEach(function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdgeObj(_,t.edge(_))}),v){var g=function(w){for(var O=t.parent(w);O!==void 0&&!h.hasNode(O);)O=t.parent(O);return O};h.nodes().forEach(function(_){h.setParent(_,g(_))})}return h},this.setDefaultEdgeLabel=function(r){return bT(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get($1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has($1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return Aq(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=ET(ET({},Nq),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return kq(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,h=this.childrenMap,g=this.inEdgesMap,_=this.outEdgesMap,w=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var S;v==null||v.set(n,this.GRAPH_NODE),h==null||h.set(n,new Map),h!=null&&h.has(this.GRAPH_NODE)||h==null||h.set(this.GRAPH_NODE,new Map),h==null||(S=h.get(this.GRAPH_NODE))===null||S===void 0||S.set(n,!0)}return[g,_,w,O].forEach(function(P){return P.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(R){o.removeEdge(R.v,R.w,R.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,h=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var _,w,O;this.removeFromParentsChildList(n),(_=this.parentMap)===null||_===void 0||_.delete(n),(w=this.children(n))===null||w===void 0||w.forEach(function(A){return o.setParent(A)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var S=s.get(n),P=c.get(n);Array.from(S.values()).forEach(function(A){return r(A)}),Array.from(P.values()).forEach(function(A){return r(A)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),h.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,v,h=_T(this.isDirected(),n,o,s),g=$1(this.isDirected(),h),_=h.v,w=h.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(w),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(_,w,s)),Object.freeze(h),this.edgesMap.set(g,h);var O=this.predecessorsMap.get(w),S=this.successorsMap.get(_);return mT(O,_),mT(S,w),(c=this.inEdgesMap.get(w))===null||c===void 0||c.set(g,h),(v=this.outEdgesMap.get(_))===null||v===void 0||v.set(g,h),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=Ak(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var v=_T(this.isDirected(),n,o,r),h=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var _=this.predecessorsMap.get(g),w=this.successorsMap.get(h);gT(_,h),gT(w,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(h).delete(s),this.edgeCountNum-=1}return this}}]),e}();Bv.fromJSON=Tq;function xT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rq(e,t,n){return t&&xT(e.prototype,t),n&&xT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Tk=Rq(function e(){var t=this;jq(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],v=c[0],h=c[1];r[n]=h,r[o]=v,s.set(v.key,o),s.set(h.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=o[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),Cq=function(t,n){var o=new Bv,r=new Map,s=new Tk,c;function v(_){var w=_.v===c?_.w:_.v,O=s.priority(w);if(O!==void 0){var S=n(_);S<O&&(r.set(w,c),s.decrease(w,S))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(_){s.add(_,Number.POSITIVE_INFINITY),o.setNode(_)}),s.decrease(t.nodes()[0],0);for(var h=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(h)throw new Error("Input graph is not connected: "+t.graph());h=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return o},Dq=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var h=v.pop();if(!n.has(h)){var g,_;n.add(h),c.push(h),(g=t.successors(h))===null||g===void 0||g.forEach(function(w){return v.push(w)}),(_=t.predecessors(h))===null||_===void 0||_.forEach(function(w){return v.push(w)})}}c.length&&o.push(c)}),o},Iq=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(v){return e(t,v,o,r,s,c)}),o&&c.push(n))},xE=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(h){if(t.hasNode(h))Iq(t,h,o==="post",v,s,c);else throw new Error("Graph does not have node: "+h)}),c};function Lq(e,t){return Uq(e)||Bq(e,t)||$q(e,t)||Fq()}function Fq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $q(e,t){if(e){if(typeof e=="string")return ST(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ST(e,t)}}function ST(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Bq(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(h){s=!0,v=h}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return o}}function Uq(e){if(Array.isArray(e))return e}var Gq=function(){return 1},Mk=function(t,n,o,r){return Vq(t,n,o||Gq,r||function(s){return t.outEdges(s)})},Vq=function(t,n,o,r){var s=new Map,c=new Tk,v,h,g=function(O){var S=O.v!==v?O.v:O.w,P=s.get(S),A=o(O),R=h.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+A);R<P.distance&&(P.distance=R,P.predecessor=v,c.decrease(S,R))};for(t.nodes().forEach(function(w){var O=w===n?0:Number.POSITIVE_INFINITY;s.set(w,{distance:O}),c.add(w,O)});c.size()>0&&(v=c.removeMin(),h=s.get(v),!(h&&h.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var _={};return Array.from(s.entries()).forEach(function(w){var O=Lq(w,2),S=O[0],P=O[1];return _[String(S)]=P,_}),_},Wq=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=Mk(t,s,n,o),r}),r},Pk=function(t){var n=0,o=[],r=new Map,s=[];function c(v){var h,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,o.push(v),(h=t.successors(v))===null||h===void 0||h.forEach(function(S){var P;if(r.has(S)){if(!((P=r.get(S))===null||P===void 0)&&P.onStack){var R=r.get(S);g.lowlink=Math.min(g.lowlink,R.index)}}else{c(S);var A=r.get(S);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var _=[],w;do{w=o.pop();var O=r.get(w);O.onStack=!1,_.push(w)}while(v!==w);s.push(_)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},zq=function(t){return Pk(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Ow(e){"@babel/helpers - typeof";return Ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ow(e)}function AT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Hq(e,t,n){return t&&AT(e.prototype,t),n&&AT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iy(e,t)}function qq(e){var t=kk();return function(){var o=Ly(e),r;if(t){var s=Ly(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return Kq(this,r)}}function Kq(e,t){if(t&&(Ow(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zq(e)}function Zq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xw(e){var t=typeof Map=="function"?new Map:void 0;return xw=function(o){if(o===null||!Jq(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return Sg(o,arguments,Ly(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Iy(r,o)},xw(e)}function Sg(e,t,n){return kk()?Sg=Reflect.construct:Sg=function(r,s,c){var v=[null];v.push.apply(v,s);var h=Function.bind.apply(r,v),g=new h;return c&&Iy(g,c.prototype),g},Sg.apply(null,arguments)}function kk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jq(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Iy(e,t){return Iy=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Iy(e,t)}function Ly(e){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(e)}var Sw=function(e){Yq(n,e);var t=qq(n);function n(){return Xq(this,n),t.apply(this,arguments)}return Hq(n)}(xw(Error));function Nk(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new Sw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Sw;return o}var Qq=function(t){try{Nk(t)}catch(n){if(n instanceof Sw)return!1;throw n}return!0},eK=function(t,n){return xE(t,n,"post")},tK=function(t,n){return xE(t,n,"pre")},nK=function(){return 1};function rK(e,t,n){return oK(e,t||nK,n||function(o){return e.outEdges(o)})}function oK(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(v){s!==v&&(o[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var h=v.v===s?v.w:v.v,g=t(v);o[c][String(h)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=o[c];r.forEach(function(h){var g=String(h),_=o[g];r.forEach(function(w){var O=String(w),S=_[c],P=v[O],A=_[O],R=S.distance+P.distance;R<A.distance&&(A.distance=R,A.predecessor=P.predecessor)})})}),o}const iK=Object.freeze(Object.defineProperty({__proto__:null,components:Dq,dfs:xE,dijkstra:Mk,dijkstraAll:Wq,findCycles:zq,floydWarshall:rK,isAcyclic:Qq,postorder:eK,preorder:tK,prim:Cq,tarjan:Pk,topsort:Nk},Symbol.toStringTag,{value:"Module"}));class aK extends Oq{}class lK extends Bv{}const uK=()=>1,sK=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=fK(e,t||uK);return(n=cK(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},cK=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)B1(e,t,n,c);for(;c=r.dequeue();)B1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){o=o.concat(B1(e,t,n,c,!0));break}}}return o},B1=(e,t,n,o,r)=>{var s,c;const v=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(h=>{const g=e.edge(h),_=e.node(h.v);r&&v.push({v:h.v,w:h.w,in:0,out:0}),_.out===void 0&&(_.out=0),_.out-=g,Aw(t,n,_)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(h=>{const g=e.edge(h),_=h.w,w=e.node(_);w.in===void 0&&(w.in=0),w.in-=g,Aw(t,n,w)}),e.removeNode(o.v),r?v:void 0},fK=(e,t)=>{const n=new lK;let o=0,r=0;e.nodes().forEach(h=>{n.setNode(h,{v:h,in:0,out:0})}),e.edges().forEach(h=>{const g=n.edge(h)||0,_=(t==null?void 0:t(h))||1,w=g+_;n.setEdge(h.v,h.w,w),r=Math.max(r,n.node(h.v).out+=_),o=Math.max(o,n.node(h.w).in+=_)});const s=[],c=r+o+3;for(let h=0;h<c;h++)s.push(new aK);const v=o+1;return n.nodes().forEach(h=>{Aw(s,v,n.node(h))}),{buckets:s,zeroIdx:v,graph:n}},Aw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},dK=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?sK(e,t(e)):pK(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},pK=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},hK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},TT={run:dK,undo:hK};class Mf extends Bv{}const vK=(e,t)=>Number(e)-Number(t),Uv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},yK=e=>{const t=new Mf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},Rk=e=>{const t=new Mf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},mK=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),MT=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let h,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),h=v*r/s,g=v):(r<0&&(c=-c),h=c,g=c*s/r),{x:n+h,y:o+g}},Fy=e=>{const t=[],n=jk(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,v;return vK((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},gK=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},_K=e=>{const t=e.nodes(),n=t.filter(v=>{var h;return((h=e.node(v))===null||h===void 0?void 0:h.rank)!==void 0}).map(v=>e.node(v).rank),o=Math.min(...n),r=[];t.forEach(v=>{var h;const g=(((h=e.node(v))===null||h===void 0?void 0:h.rank)||0)-o;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const h=r[v];h===void 0?v%c!==0&&(s-=1):s&&(h==null||h.forEach(g=>{const _=e.node(g);_&&(_.rank=_.rank||0,_.rank+=s)}))}},PT=(e,t,n,o)=>{const r={width:0,height:0};return Zg(n)&&Zg(o)&&(r.rank=n,r.order=o),Uv(e,"border",r,t)},jk=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},bK=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},Ck=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},Dk=(e,t)=>t(),SE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),wK=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>EK(e,t))},EK=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),h=v.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const g=e.graph();let _,w,O;for(O=0,++o;o<s;++O,++o)v.points=[],w={edgeLabel:v,width:0,height:0,edgeObj:t,rank:o},_=Uv(e,"edge",w,"_d"),o===h&&(w.width=v.width,w.height=v.height,w.dummy="edge-label",w.labelpos=v.labelpos),e.setEdge(n,_,{weight:v.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(_)),n=_;e.setEdge(n,r,{weight:v.weight},c)},OK=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},kT={run:wK,undo:OK},Ik=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(h=>{const g=o(h.w),_=e.edge(h).minlen,w=g-_;w&&(v===void 0||w<v)&&(v=w)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},xK=e=>{var t;const n={};let o;const r=v=>{var h;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let _;return(h=e.outEdges(v))===null||h===void 0||h.forEach(w=>{const O=r(w.w),S=e.edge(w).minlen,P=O-S;P&&(_===void 0||P<_)&&(_=P)}),_||(_=0),(o===void 0||_<o)&&(o=_),g.rank=_,_};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),o===void 0&&(o=0);const s={},c=(v,h)=>{var g;const _=e.node(v),w=isNaN(_.layer)?h:_.layer;(_.rank===void 0||_.rank<w)&&(_.rank=w),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(O=>{c(O.w,w+e.edge(O).minlen)}))};e.nodes().forEach(v=>{const h=e.node(v);h&&(isNaN(h.layer)?h.rank-=o:c(v,h.layer))})},Cd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,SK=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;AK(t,e)<o;)r=Lk(t,e),s=t.hasNode(r.v)?Cd(e,r):-Cd(e,r),Fk(t,e,s);return t},AK=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!Cd(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},TK=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;MK(t,e)<o;)r=Lk(t,e),s=t.hasNode(r.v)?Cd(e,r):-Cd(e,r),Fk(t,e,s);return t},MK=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,v=o===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Cd(t,s))&&(e.setNode(v,{}),e.setEdge(o,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},Lk=(e,t)=>SE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Cd(t,n):1/0),Fk=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:PK,postorder:kK}=iK,NK=e=>{const t=yK(e);Ik(t);const n=SK(t);Bk(n),$k(n,t);let o,r;for(;o=CK(n);)r=DK(n,t,o),IK(n,t,o,r)},$k=(e,t)=>{let n=kK(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{RK(e,t,o)})},RK=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=jK(e,t,n)},jK=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),h=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),h=v.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(g=>{const _=g.v===n,w=_?g.w:g.v;if(w!==s){const O=_===c,S=t.edge(g).weight;if(h+=O?S:-S,FK(e,n,w)){const P=e.edgeFromArgs(n,w).cutvalue;h+=O?-P:P}}}),h},Bk=(e,t=e.nodes()[0])=>{Uk(e,{},1,t)},Uk=(e,t,n,o,r)=>{var s;const c=n;let v=n;const h=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(g=>{t[g]||(v=Uk(e,t,v,g,o))}),h.low=c,h.lim=v++,r?h.parent=r:delete h.parent,v},CK=e=>e.edges().find(t=>e.edge(t).cutvalue<0),DK=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let v=s,h=!1;s.lim>c.lim&&(v=c,h=!0);const g=t.edges().filter(_=>h===NT(e,e.node(_.v),v)&&h!==NT(e,e.node(_.w),v));return SE(g,_=>Cd(t,_))},IK=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),Bk(e),$k(e,t),LK(e,t)},LK=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=PK(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},FK=(e,t,n)=>e.hasEdge(t,n),NT=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,$K=e=>{switch(e.graph().ranker){case"network-simplex":UK(e);break;case"tight-tree":RT(e);break;case"longest-path":BK(e);break;default:RT(e)}},BK=Ik,RT=e=>{xK(e),TK(e)},UK=e=>{NK(e)},GK=e=>{var t;const n={};let o=0;const r=s=>{var c;const v=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},VK=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),v=Math.max(t[n].lim,t[o].lim);let h,g;h=n;do h=e.parent(h),r.push(h);while(h&&(t[h].low>c||v>t[h].lim));for(g=h,h=o;h&&h!==g;)s.push(h),h=e.parent(h);return{lca:g,path:r.concat(s.reverse())}},WK=e=>{var t;const n=GK(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,v=e.node(c);const h=v.edgeObj;if(!h)return;const g=VK(e,n,h.v,h.w),_=g.path,w=g.lca;let O=0,S=_[O],P=!0;for(;c!==h.w;){if(v=e.node(c),P){for(;S!==w&&((r=e.node(S))===null||r===void 0?void 0:r.maxRank)<v.rank;)O++,S=_[O];S===w&&(P=!1)}if(!P){for(;O<_.length-1&&((s=e.node(_[O+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)O++;S=_[O]}e.setParent(c,S),c=e.successors(c)[0]}})},zK=e=>{var t;const n=Uv(e,"root",{},"_root"),o=HK(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(h=>{e.edge(h).minlen*=c});const v=XK(e)+1;(t=e.children())===null||t===void 0||t.forEach(h=>{Gk(e,n,c,v,s,o,h)}),e.graph().nodeRankFactor=c},Gk=(e,t,n,o,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const h=PT(e,"_bt"),g=PT(e,"_bb"),_=e.node(c);e.setParent(h,c),_.borderTop=h,e.setParent(g,c),_.borderBottom=g,v==null||v.forEach(w=>{Gk(e,t,n,o,r,s,w);const O=e.node(w),S=O.borderTop?O.borderTop:w,P=O.borderBottom?O.borderBottom:w,A=O.borderTop?o:2*o,R=S!==P?1:r-s[c]+1;e.setEdge(h,S,{minlen:R,weight:A,nestingEdge:!0}),e.setEdge(P,g,{minlen:R,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,h,{weight:0,minlen:r+s[c]})},HK=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>o(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},XK=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},YK=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},jT={run:zK,cleanup:YK},qK=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)CT(e,"borderLeft","_bl",o,s,c),CT(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},CT=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],h=Uv(e,"border",c,n);r[t][s]=h,e.setParent(h,o),v&&e.setEdge(v,h,{weight:1})},KK=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Vk(e)},ZK=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&JK(e),(n==="lr"||n==="rl")&&(QK(e),Vk(e))},Vk=e=>{e.nodes().forEach(t=>{DT(e.node(t))}),e.edges().forEach(t=>{DT(e.edge(t))})},DT=e=>{const t=e.width;e.width=e.height,e.height=t},JK=e=>{e.nodes().forEach(t=>{U1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>U1(r)),o.hasOwnProperty("y")&&U1(o)})},U1=e=>{e!=null&&e.y&&(e.y=-e.y)},QK=e=>{e.nodes().forEach(t=>{G1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>G1(r)),o.hasOwnProperty("x")&&G1(o)})},G1=e=>{const t=e.x;e.x=e.y,e.y=t},IT={adjust:KK,undo:ZK};function eZ(e){return Array.isArray(e)}function Tw(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const LT=function(e){if(eZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},FT=e=>{const t={},n=e.nodes().filter(_=>{var w;return!(!((w=e.children(_))===null||w===void 0)&&w.length)}),o=n.map(_=>e.node(_).rank),r=Tw(o),s=[];for(let _=0;_<r+1;_++)s.push([]);const c=_=>{var w;if(t.hasOwnProperty(_))return;t[_]=!0;const O=e.node(_);isNaN(O.rank)||s[O.rank].push(_),(w=e.successors(_))===null||w===void 0||w.forEach(S=>c(S))},v=n.sort((_,w)=>e.node(_).rank-e.node(w).rank),g=v.filter(_=>e.node(_).fixorder!==void 0).sort((_,w)=>e.node(_).fixorder-e.node(w).fixorder);return g==null||g.forEach(_=>{isNaN(e.node(_).rank)||s[e.node(_).rank].push(_),t[_]=!0}),v==null||v.forEach(c),s},tZ=(e,t,n)=>{const o=mK(n,n.map((_,w)=>w)),s=t.map(_=>{var w;const O=(w=e.outEdges(_))===null||w===void 0?void 0:w.map(S=>({pos:o[S.w]||0,weight:e.edge(S).weight}));return O==null?void 0:O.sort((S,P)=>S.pos-P.pos)}).flat().filter(_=>_!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const h=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(_=>{if(_){let w=_.pos+c;h[w]+=_.weight;let O=0;for(;w>0;)w%2&&(O+=h[w+1]),w=w-1>>1,h[w]+=_.weight;g+=_.weight*O}}),g},$T=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=tZ(e,t[o-1],t[o]);return n},nZ=(e,t,n)=>{const o=rZ(e),r=new Mf({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),h=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,h||o),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const _=g.v===s?g.w:g.v,w=r.edgeFromArgs(_,s),O=w!==void 0?w.weight:0;r.setEdge(_,s,{weight:e.edge(g).weight+O})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},rZ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},oZ=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,h;for(;c;){if(v=e.parent(c),v?(h=o[v],o[v]=c):(h=r,r=c),h&&h!==c){t.setEdge(h,c);return}c=v}})},iZ=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),aZ=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((v,h)=>{s[v.v]={i:h,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const h=s[v.v],g=s[v.w];h!==void 0&&g!==void 0&&(g.indegree++,h.out.push(s[v.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,v=>!v.indegree);return lZ(c)},lZ=e=>{var t,n;const o=[],r=h=>g=>{g.merged||(g.barycenter===void 0||h.barycenter===void 0||g.barycenter>=h.barycenter)&&uZ(h,g)},s=h=>g=>{g.in.push(h),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const h=e.pop();o.push(h),(t=h.in.reverse())===null||t===void 0||t.forEach(g=>r(h)(g)),(n=h.out)===null||n===void 0||n.forEach(g=>s(h)(g))}const c=o.filter(h=>!h.merged),v=["vs","i","barycenter","weight"];return c.map(h=>{const g={};return v==null||v.forEach(_=>{h[_]!==void 0&&(g[_]=h[_])}),g})},uZ=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},sZ=(e,t,n,o)=>{const r=bK(e,O=>{const S=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return o?!S&&O.hasOwnProperty("barycenter"):S||O.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((O,S)=>-O.i- -S.i),v=[];let h=0,g=0,_=0;s==null||s.sort(cZ(!!t,!!n)),_=BT(v,c,_),s==null||s.forEach(O=>{var S;_+=(S=O.vs)===null||S===void 0?void 0:S.length,v.push(O.vs),h+=O.barycenter*O.weight,g+=O.weight,_=BT(v,c,_)});const w={vs:v.flat()};return g&&(w.barycenter=h/g,w.weight=g),w},BT=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},cZ=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},Wk=(e,t,n,o,r,s)=>{var c,v,h,g;let _=e.children(t);const w=e.node(t),O=w?w.borderLeft:void 0,S=w?w.borderRight:void 0,P={};O&&(_=_==null?void 0:_.filter(N=>N!==O&&N!==S));const A=iZ(e,_||[]);A==null||A.forEach(N=>{var B;if(!((B=e.children(N.v))===null||B===void 0)&&B.length){const q=Wk(e,N.v,n,o,s);P[N.v]=q,q.hasOwnProperty("barycenter")&&dZ(N,q)}});const R=aZ(A,n);fZ(R,P),(c=R.filter(N=>N.vs.length>0))===null||c===void 0||c.forEach(N=>{const B=e.node(N.vs[0]);B&&(N.fixorder=B.fixorder,N.order=B.order)});const D=sZ(R,o,r,s);if(O&&(D.vs=[O,D.vs,S].flat(),!((v=e.predecessors(O))===null||v===void 0)&&v.length)){const N=e.node(((h=e.predecessors(O))===null||h===void 0?void 0:h[0])||""),B=e.node(((g=e.predecessors(S))===null||g===void 0?void 0:g[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+N.order+B.order)/(D.weight+2),D.weight+=2}return D},fZ=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},dZ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},pZ=(e,t)=>{const n=jk(e),o=[],r=[];for(let _=1;_<n+1;_++)o.push(_);for(let _=n-1;_>-1;_--)r.push(_);const s=UT(e,o,"inEdges"),c=UT(e,r,"outEdges");let v=FT(e);V1(e,v);let h=Number.POSITIVE_INFINITY,g;for(let _=0,w=0;w<4;++_,++w){GT(_%2?s:c,_%4>=2,!1,t),v=Fy(e);const O=$T(e,v);O<h&&(w=0,g=Jg(v),h=O)}v=FT(e),V1(e,v);for(let _=0,w=0;w<4;++_,++w){GT(_%2?s:c,_%4>=2,!0,t),v=Fy(e);const O=$T(e,v);O<h&&(w=0,g=Jg(v),h=O)}V1(e,g)},UT=(e,t,n)=>t.map(o=>nZ(e,o,n)),GT=(e,t,n,o)=>{const r=new Mf;e==null||e.forEach(s=>{var c;const v=s.graph().root,h=Wk(s,v,r,t,n,o);for(let g=0;g<((c=h.vs)===null||c===void 0?void 0:c.length);g++){const _=s.node(h.vs[g]);_&&(_.order=g)}oZ(s,r,h.vs)})},V1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class hZ extends Bv{}const vZ=(e,t)=>{const n={},o=(r,s)=>{let c=0,v=0;const h=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((_,w)=>{var O;const S=mZ(e,_),P=S?e.node(S).order:h;(S||_===g)&&((O=s.slice(v,w+1))===null||O===void 0||O.forEach(A=>{var R;(R=e.predecessors(A))===null||R===void 0||R.forEach(D=>{var N;const B=e.node(D),q=B.order;(q<c||P<q)&&!(B.dummy&&(!((N=e.node(A))===null||N===void 0)&&N.dummy))&&zk(n,D,A)})}),v=w+1,c=P)}),s};return t!=null&&t.length&&t.reduce(o),n},yZ=(e,t)=>{const n={};function o(v,h,g,_,w){var O,S;let P;for(let A=h;A<g;A++)P=v[A],!((O=e.node(P))===null||O===void 0)&&O.dummy&&((S=e.predecessors(P))===null||S===void 0||S.forEach(R=>{const D=e.node(R);D.dummy&&(D.order<_||D.order>w)&&zk(n,R,P)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,h){const g=r(v);h.get(g)||(o(...v),h.set(g,!0))}const c=(v,h)=>{let g=-1,_,w=0;const O=new Map;return h==null||h.forEach((S,P)=>{var A;if(((A=e.node(S))===null||A===void 0?void 0:A.dummy)==="border"){const R=e.predecessors(S)||[];R.length&&(_=e.node(R[0]).order,s([h,w,P,g,_],O),w=P,g=_)}s([h,w,h.length,_,v.length],O)}),h};return t!=null&&t.length&&t.reduce(c),n},mZ=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},zk=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},gZ=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},_Z=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((h,g)=>{r[h]=h,s[h]=h,c[h]=g})}),t==null||t.forEach(v=>{let h=-1;v==null||v.forEach(g=>{let _=o(g);if(_.length){_=_.sort((O,S)=>c[O]-c[S]);const w=(_.length-1)/2;for(let O=Math.floor(w),S=Math.ceil(w);O<=S;++O){const P=_[O];s[g]===g&&h<c[P]&&!gZ(n,g,P)&&(s[P]=g,s[g]=r[g]=r[P],h=c[P])}}})}),{root:r,align:s}},bZ=(e,t,n,o,r)=>{var s;const c={},v=wZ(e,t,n,r),h=r?"borderLeft":"borderRight",g=(O,S)=>{let P=v.nodes(),A=P.pop();const R={};for(;A;)R[A]?O(A):(R[A]=!0,P.push(A),P=P.concat(S(A))),A=P.pop()},_=O=>{c[O]=(v.inEdges(O)||[]).reduce((S,P)=>Math.max(S,(c[P.v]||0)+v.edge(P)),0)},w=O=>{const S=(v.outEdges(O)||[]).reduce((A,R)=>Math.min(A,(c[R.w]||0)-v.edge(R)),Number.POSITIVE_INFINITY),P=e.node(O);S!==Number.POSITIVE_INFINITY&&P.borderType!==h&&(c[O]=Math.max(c[O],S))};return g(_,v.predecessors.bind(v)),g(w,v.successors.bind(v)),(s=Object.values(o))===null||s===void 0||s.forEach(O=>{c[O]=c[n[O]]}),c},wZ=(e,t,n,o)=>{const r=new hZ,s=e.graph(),c=SZ(s.nodesep,s.edgesep,o);return t==null||t.forEach(v=>{let h;v==null||v.forEach(g=>{const _=n[g];if(r.setNode(_),h){const w=n[h],O=r.edgeFromArgs(w,_);r.setEdge(w,_,Math.max(c(e,g,h),O||0))}h=g})}),r},EZ=(e,t)=>SE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const v=n[c],h=AZ(e,c)/2;r=Math.max(v+h,r),s=Math.min(v-h,s)}),r-s});function OZ(e,t){const n=Object.values(t),o=LT(n),r=Tw(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,h=e[v];let g;if(h===t)return;const _=Object.values(h);g=c==="l"?o-LT(_):r-Tw(_),g&&(e[v]={},Object.keys(h).forEach(w=>{e[v][w]=h[w]+g}))})})}const xZ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},SZ=(e,t,n)=>(o,r,s)=>{const c=o.node(r),v=o.node(s);let h=0,g;if(h+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(h+=n?g:-g),g=0,h+=(c.dummy?t:e)/2,h+=(v.dummy?t:e)/2,h+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(h+=n?g:-g),g=0,h},AZ=(e,t)=>e.node(t).width||0,TZ=e=>{const t=Fy(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=o+c/2}),o+=c+n})},MZ=e=>{const t=Fy(e),n=Object.assign(vZ(e,t),yZ(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(w=>Object.values(w).reverse()));const h=(c==="u"?e.predecessors:e.successors).bind(e),g=_Z(e,r,n,h),_=bZ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(_).forEach(w=>_[w]=-_[w]),o[c+v]=_})});const s=EZ(e,o);return s&&OZ(o,s),xZ(o,e.graph().align)},PZ=e=>{var t;const n=Rk(e);TZ(n);const o=MZ(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},kZ=(e,t)=>{const o=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},NZ=(e,t)=>{const n=t&&t.debugTiming?Ck:Dk;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{jZ(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>UZ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{GZ(o)});try{n("  runLayout",()=>{RZ(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{CZ(e,o)})})},RZ=(e,t,n)=>{t("    removeSelfEdges",()=>{ZZ(e)}),t("    acyclic",()=>{TT.run(e)}),t("    nestingGraph.run",()=>{jT.run(e)}),t("    rank",()=>{$K(Rk(e))}),t("    injectEdgeLabelProxies",()=>{VZ(e)}),t("    removeEmptyRanks",()=>{_K(e)}),t("    nestingGraph.cleanup",()=>{jT.cleanup(e)}),t("    normalizeRanks",()=>{gK(e)}),t("    assignRankMinMax",()=>{WZ(e)}),t("    removeEdgeLabelProxies",()=>{zZ(e)}),t("    normalize.run",()=>{kT.run(e)}),t("    parentDummyChains",()=>{WK(e)}),t("    addBorderSegments",()=>{qK(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{kZ(e,n.nodeOrder)}),t("    order",()=>{pZ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{JZ(e)}),t("    adjustCoordinateSystem",()=>{IT.adjust(e)}),t("    position",()=>{PZ(e)}),t("    positionSelfEdges",()=>{QZ(e)}),t("    removeBorderNodes",()=>{KZ(e)}),t("    normalize.undo",()=>{kT.undo(e)}),t("    fixupEdgeLabelCoords",()=>{YZ(e)}),t("    undoCoordinateSystem",()=>{IT.undo(e)}),t("    translateGraph",()=>{HZ(e)}),t("    assignNodeIntersects",()=>{XZ(e)}),t("    reversePoints",()=>{qZ(e)}),t("    acyclic.undo",()=>{TT.undo(e)})},jZ=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},CZ=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},DZ=["nodesep","edgesep","ranksep","marginx","marginy"],IZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W1=["acyclicer","ranker","rankdir","align"],LZ=["width","height","layer","fixorder"],FZ={width:0,height:0},$Z=["minlen","weight","width","height","labeloffset"],BZ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},z1=["labelpos"],UZ=e=>{const t=new Mf({multigraph:!0,compound:!0}),n=X1(e.graph()),o={};return W1==null||W1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},IZ,H1(n,DZ),o)),e.nodes().forEach(r=>{const s=X1(e.node(r)),c=Object.assign(Object.assign({},FZ),s),v=H1(c,LZ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=X1(e.edge(r)),c={};z1==null||z1.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},BZ,H1(s,$Z),c))}),t},GZ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},VZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Uv(e,"edge-proxy",s,"_ep")}})},WZ=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},zZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},HZ=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,h=g=>{if(!g)return;const _=g.x,w=g.y,O=g.width,S=g.height;!isNaN(_)&&!isNaN(O)&&(t===void 0&&(t=_-O/2),t=Math.min(t,_-O/2),n=Math.max(n,_+O/2)),!isNaN(w)&&!isNaN(S)&&(o===void 0&&(o=w-S/2),o=Math.min(o,w-S/2),r=Math.max(r,w+S/2))};e.nodes().forEach(g=>{h(e.node(g))}),e.edges().forEach(g=>{const _=e.edge(g);_!=null&&_.hasOwnProperty("x")&&h(_)}),t-=c,o-=v,e.nodes().forEach(g=>{const _=e.node(g);_&&(_.x-=t,_.y-=o)}),e.edges().forEach(g=>{var _;const w=e.edge(g);(_=w.points)===null||_===void 0||_.forEach(O=>{O.x-=t,O.y-=o}),w.hasOwnProperty("x")&&(w.x-=t),w.hasOwnProperty("y")&&(w.y-=o)}),s.width=n-t+c,s.height=r-o+v},XZ=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(MT(o,s)),n.points.push(MT(r,c))})},YZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},qZ=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},KZ=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),h=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(h==null?void 0:h.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((h==null?void 0:h.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},ZZ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},JZ=e=>{const t=Fy(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+o,(c=v.selfEdges)===null||c===void 0||c.forEach(h=>{Uv(e,"selfedge",{width:h.label.width,height:h.label.height,rank:v.rank,order:s+ ++o,e:h.e,label:h.label},"_se")}),delete v.selfEdges})})},QZ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,v=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},H1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},X1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},eJ={layout:NZ,util:{time:Ck,notime:Dk}};class tJ extends bq{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:v,rankdir:h,combos:g,begin:_,radial:w,comboEdges:O=[],vedges:S=[]}=s;if(!c)return;const P=s.edges||[],A=new Mf({multigraph:!0,compound:!0});s.nodeMap={};const R={};c.forEach(z=>{s.nodeMap[z.id]=z,z.comboId&&(R[z.comboId]=R[z.comboId]||[],R[z.comboId].push(z.id))});let D=[];const N={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(z=>{N[z]=!0,D.push(s.nodeMap[z])}),c.forEach(z=>{N[z.id]||D.push(z)})):D=c;let B;v?hT(v)?B=()=>v:B=()=>[v,v]:B=z=>z.size?hT(z.size)?z.size:Sk(z.size)?[z.size.width||40,z.size.height||40]:[z.size,z.size]:[40,40];const q=vT(s.ranksep,50,s.ranksepFunc),Z=vT(s.nodesep,50,s.nodesepFunc);let Y=Z,te=q;(h==="LR"||h==="RL")&&(Y=q,te=Z),A.setDefaultEdgeLabel(()=>({})),A.setGraph(s);const G={};this.sortByCombo&&g&&g.forEach(z=>{if(G[z.id]=z,z.collapsed){const H=B(z),re=te(z),fe=Y(z),Se=H[0]+2*fe,Te=H[1]+2*re;A.setNode(z.id,{width:Se,height:Te})}z.parentId&&(G[z.parentId]||A.setNode(z.parentId,{}),A.setParent(z.id,z.parentId))}),D.filter(z=>z.layout!==!1).forEach(z=>{const H=B(z),re=te(z),fe=Y(z),Se=H[0]+2*fe,Te=H[1]+2*re,he=z.layer;Zg(he)?A.setNode(z.id,{width:Se,height:Te,layer:he}):A.setNode(z.id,{width:Se,height:Te}),this.sortByCombo&&z.comboId&&(G[z.comboId]||(G[z.comboId]={id:z.comboId},A.setNode(z.comboId,{})),A.setParent(z.id,z.comboId))}),P.forEach(z=>{const H=Jh(z,"source"),re=Jh(z,"target");this.layoutNode(H)&&this.layoutNode(re)&&A.setEdge(H,re,{weight:z.weight||1})}),(n=O==null?void 0:O.concat(S||[]))===null||n===void 0||n.forEach(z=>{var H,re;const{source:fe,target:Se}=z,Te=!((H=G[fe])===null||H===void 0)&&H.collapsed?[fe]:R[fe]||[fe],he=!((re=G[Se])===null||re===void 0)&&re.collapsed?[Se]:R[Se]||[Se];Te.forEach(_e=>{he.forEach(De=>{A.setEdge(_e,De,{weight:z.weight||1})})})});let C;!((o=s.preset)===null||o===void 0)&&o.nodes&&(C=new Mf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(z=>{C==null||C.setNode(z.id,z)})),eJ.layout(A,{prevGraph:C,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const W=[0,0];if(_){let z=1/0,H=1/0;A.nodes().forEach(re=>{const fe=A.node(re);z>fe.x&&(z=fe.x),H>fe.y&&(H=fe.y)}),A.edges().forEach(re=>{var fe;(fe=A.edge(re).points)===null||fe===void 0||fe.forEach(Te=>{z>Te.x&&(z=Te.x),H>Te.y&&(H=Te.y)})}),W[0]=_[0]-z,W[1]=_[1]-H}const K=h==="LR"||h==="RL";if(w){const{focusNode:z,ranksep:H,getRadialPos:re}=this,fe=wq(z)?z:z==null?void 0:z.id,Se=fe?(r=A.node(fe))===null||r===void 0?void 0:r._rank:0,Te=[],he=K?"y":"x",_e=K?"height":"width";let De=1/0,Ve=-1/0;A.nodes().forEach(we=>{const ke=A.node(we);if(!s.nodeMap[we])return;const dt=Z(s.nodeMap[we]);if(Se===0)Te[ke._rank]||(Te[ke._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Te[ke._rank].nodes.push(we),Te[ke._rank].totalWidth+=dt*2+ke[_e],Te[ke._rank].maxSize<Math.max(ke.width,ke.height)&&(Te[ke._rank].maxSize=Math.max(ke.width,ke.height));else{const rn=ke._rank-Se;if(rn===0)Te[rn]||(Te[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),Te[rn].nodes.push(we),Te[rn].totalWidth+=dt*2+ke[_e],Te[rn].maxSize<Math.max(ke.width,ke.height)&&(Te[rn].maxSize=Math.max(ke.width,ke.height));else{const yn=Math.abs(rn);Te[yn]||(Te[yn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Te[yn].totalWidth+=dt*2+ke[_e],Te[yn].maxSize<Math.max(ke.width,ke.height)&&(Te[yn].maxSize=Math.max(ke.width,ke.height)),rn<0?Te[yn].left.push(we):Te[yn].right.push(we)}}const zt=ke[he]-ke[_e]/2-dt,Ot=ke[he]+ke[_e]/2+dt;zt<De&&(De=zt),Ot>Ve&&(Ve=Ot)});let vt=H||50;const rt={},gt=(Ve-De)/.9,Nt=[(De+Ve-gt)*.5,(De+Ve+gt)*.5],yt=(we,ke,dt=-1/0,zt=[0,1])=>{let Ot=dt;return we.forEach(rn=>{const yn=A.node(rn);rt[rn]=ke;const{x:Tn,y:pn}=re(yn[he],Nt,gt,ke,zt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Tn+W[0],s.nodeMap[rn].y=pn+W[1],s.nodeMap[rn]._order=yn._order;const st=q(s.nodeMap[rn]);Ot<st&&(Ot=st)}),Ot};let Yt=!0;const Ce=0;Te.forEach(we=>{var ke,dt,zt,Ot,rn,yn,Tn;if(!(!((ke=we==null?void 0:we.nodes)===null||ke===void 0)&&ke.length)&&!(!((dt=we==null?void 0:we.left)===null||dt===void 0)&&dt.length)&&!(!((zt=we==null?void 0:we.right)===null||zt===void 0)&&zt.length))return;if(Yt&&we.nodes.length===1){const st=we.nodes[0];if(!s.nodeMap[st])return;s.nodeMap[st].x=W[0],s.nodeMap[st].y=W[1],rt[we.nodes[0]]=0,vt=q(s.nodeMap[st]),Yt=!1;return}vt=Math.max(vt,we.totalWidth/(2*Math.PI));let pn=-1/0;if(Se===0||!((Ot=we.nodes)===null||Ot===void 0)&&Ot.length)pn=yt(we.nodes,vt,pn,[0,1]);else{const st=((rn=we.left)===null||rn===void 0?void 0:rn.length)/(((yn=we.left)===null||yn===void 0?void 0:yn.length)+((Tn=we.right)===null||Tn===void 0?void 0:Tn.length));pn=yt(we.left,vt,pn,[0,st]),pn=yt(we.right,vt,pn,[st+.05,1])}vt+=pn,Yt=!1,Ce-we.maxSize}),A.edges().forEach(we=>{var ke,dt,zt;const Ot=A.edge(we),rn=P.findIndex(yn=>{const Tn=Jh(yn,"source"),pn=Jh(yn,"target");return Tn===we.v&&pn===we.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[rn].type!=="loop"){const yn=he==="x"?"y":"x",Tn=(ke=Ot==null?void 0:Ot.points)===null||ke===void 0?void 0:ke.slice(1,Ot.points.length-1),pn=[],st=(dt=A.node(we.v))===null||dt===void 0?void 0:dt[yn],xn=st-((zt=A.node(we.w))===null||zt===void 0?void 0:zt[yn]),Fe=rt[we.v],mn=Fe-rt[we.w];Tn==null||Tn.forEach(Kn=>{const oe=(Kn[yn]-st)/xn*mn+Fe,$n=re(Kn[he],Nt,gt,oe);pn.push({x:$n.x+W[0],y:$n.y+W[1]})}),P[rn].controlPoints=pn}})}else{const z=new Set,re=h==="BT"||h==="RL"?(he,_e)=>_e-he:(he,_e)=>he-_e;A.nodes().forEach(he=>{const _e=A.node(he);if(!_e)return;let De=this.nodeMap[he];De||(De=g==null?void 0:g.find(Ve=>Ve.id===he)),De&&(De.x=_e.x+W[0],De.y=_e.y+W[1],De._order=_e._order,z.add(K?De.x:De.y))});const fe=Array.from(z).sort(re),Se=K?(he,_e)=>he.x!==_e.x:(he,_e)=>he.y!==_e.y,Te=K?(he,_e,De)=>{const Ve=Math.max(_e.y,De.y),vt=Math.min(_e.y,De.y);return he.filter(rt=>rt.y<=Ve&&rt.y>=vt)}:(he,_e,De)=>{const Ve=Math.max(_e.x,De.x),vt=Math.min(_e.x,De.x);return he.filter(rt=>rt.x<=Ve&&rt.x>=vt)};A.edges().forEach(he=>{var _e;const De=A.edge(he),Ve=P.findIndex(vt=>{const rt=Jh(vt,"source"),gt=Jh(vt,"target");return rt===he.v&&gt===he.w});if(!(Ve<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[Ve].type!=="loop"){(_e=De==null?void 0:De.points)===null||_e===void 0||_e.forEach(gt=>{gt.x+=W[0],gt.y+=W[1]});const vt=s.nodeMap[he.v],rt=s.nodeMap[he.w];P[Ve].controlPoints=nJ(De==null?void 0:De.points,vt,rt,fe,K,Se,Te)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:P}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const nJ=(e,t,n,o,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:h,y:g}=t,{x:_,y:w}=n;if(r&&(h=t.y,g=t.x,_=n.y,w=n.x),w!==g&&h!==_){const O=o.indexOf(g),S=o[O+1];if(S){const R=v[0],D=r?{x:(g+S)/2,y:(R==null?void 0:R.y)||_}:{x:(R==null?void 0:R.x)||_,y:(g+S)/2};(!R||s(R,D))&&v.unshift(D)}const P=o.indexOf(w),A=Math.abs(P-O);if(A===1)v=c(v,t,n),v.length||v.push(r?{x:(g+w)/2,y:h}:{x:h,y:(g+w)/2});else if(A>1){const R=o[P-1];if(R){const D=v[v.length-1],N=r?{x:(w+R)/2,y:(D==null?void 0:D.y)||_}:{x:(D==null?void 0:D.x)||h,y:(w+R)/2};(!D||s(D,N))&&v.push(N)}}}}return v};var VT,WT,zT,HT;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(VT||(VT={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(WT||(WT={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(zT||(zT={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(HT||(HT={}));var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AE(e,t){return e(t={exports:{}},t.exports),t.exports}var rJ=function(){this.__data__=[],this.size=0},Gv=function(e,t){return e===t||e!=e&&t!=t},M_=function(e,t){for(var n=e.length;n--;)if(Gv(e[n][0],t))return n;return-1},oJ=Array.prototype.splice,iJ=function(e){var t=this.__data__,n=M_(t,e);return!(n<0)&&(n==t.length-1?t.pop():oJ.call(t,n,1),--this.size,!0)},aJ=function(e){var t=this.__data__,n=M_(t,e);return n<0?void 0:t[n][1]},lJ=function(e){return M_(this.__data__,e)>-1},uJ=function(e,t){var n=this.__data__,o=M_(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function tv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}tv.prototype.clear=rJ,tv.prototype.delete=iJ,tv.prototype.get=aJ,tv.prototype.has=lJ,tv.prototype.set=uJ;var P_=tv,sJ=function(){this.__data__=new P_,this.size=0},cJ=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},fJ=function(e){return this.__data__.get(e)},dJ=function(e){return this.__data__.has(e)},Hk=typeof dg=="object"&&dg&&dg.Object===Object&&dg,pJ=typeof self=="object"&&self&&self.Object===Object&&self,ws=Hk||pJ||Function("return this")(),Bu=ws.Symbol,Xk=Object.prototype,hJ=Xk.hasOwnProperty,vJ=Xk.toString,hy=Bu?Bu.toStringTag:void 0,yJ=function(e){var t=hJ.call(e,hy),n=e[hy];try{e[hy]=void 0;var o=!0}catch{}var r=vJ.call(e);return o&&(t?e[hy]=n:delete e[hy]),r},mJ=Object.prototype.toString,gJ=function(e){return mJ.call(e)},XT=Bu?Bu.toStringTag:void 0,$d=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":XT&&XT in Object(e)?yJ(e):gJ(e)},kl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},YT,nm=function(e){if(!kl(e))return!1;var t=$d(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Y1=ws["__core-js_shared__"],qT=(YT=/[^.]+$/.exec(Y1&&Y1.keys&&Y1.keys.IE_PROTO||""))?"Symbol(src)_1."+YT:"",_J=function(e){return!!qT&&qT in e},bJ=Function.prototype.toString,Jp=function(e){if(e!=null){try{return bJ.call(e)}catch{}try{return e+""}catch{}}return""},wJ=/^\[object .+?Constructor\]$/,EJ=Function.prototype,OJ=Object.prototype,xJ=EJ.toString,SJ=OJ.hasOwnProperty,AJ=RegExp("^"+xJ.call(SJ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),TJ=function(e){return!(!kl(e)||_J(e))&&(nm(e)?AJ:wJ).test(Jp(e))},MJ=function(e,t){return e==null?void 0:e[t]},Qp=function(e,t){var n=MJ(e,t);return TJ(n)?n:void 0},$y=Qp(ws,"Map"),By=Qp(Object,"create"),PJ=function(){this.__data__=By?By(null):{},this.size=0},kJ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},NJ=Object.prototype.hasOwnProperty,RJ=function(e){var t=this.__data__;if(By){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return NJ.call(t,e)?t[e]:void 0},jJ=Object.prototype.hasOwnProperty,CJ=function(e){var t=this.__data__;return By?t[e]!==void 0:jJ.call(t,e)},DJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=By&&t===void 0?"__lodash_hash_undefined__":t,this};function nv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}nv.prototype.clear=PJ,nv.prototype.delete=kJ,nv.prototype.get=RJ,nv.prototype.has=CJ,nv.prototype.set=DJ;var KT=nv,IJ=function(){this.size=0,this.__data__={hash:new KT,map:new($y||P_),string:new KT}},LJ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},k_=function(e,t){var n=e.__data__;return LJ(t)?n[typeof t=="string"?"string":"hash"]:n.map},FJ=function(e){var t=k_(this,e).delete(e);return this.size-=t?1:0,t},$J=function(e){return k_(this,e).get(e)},BJ=function(e){return k_(this,e).has(e)},UJ=function(e,t){var n=k_(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function rv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}rv.prototype.clear=IJ,rv.prototype.delete=FJ,rv.prototype.get=$J,rv.prototype.has=BJ,rv.prototype.set=UJ;var N_=rv,GJ=function(e,t){var n=this.__data__;if(n instanceof P_){var o=n.__data__;if(!$y||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new N_(o)}return n.set(e,t),this.size=n.size,this};function ov(e){var t=this.__data__=new P_(e);this.size=t.size}ov.prototype.clear=sJ,ov.prototype.delete=cJ,ov.prototype.get=fJ,ov.prototype.has=dJ,ov.prototype.set=GJ;var yv=ov,TE=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},Qg=function(){try{var e=Qp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),R_=function(e,t,n){t=="__proto__"&&Qg?Qg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},VJ=Object.prototype.hasOwnProperty,j_=function(e,t,n){var o=e[t];VJ.call(e,t)&&Gv(o,n)&&(n!==void 0||t in e)||R_(e,t,n)},rm=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],h=o?o(n[v],e[v],v,n,e):void 0;h===void 0&&(h=e[v]),r?R_(n,v,h):j_(n,v,h)}return n},WJ=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},_s=function(e){return e!=null&&typeof e=="object"},ZT=function(e){return _s(e)&&$d(e)=="[object Arguments]"},Yk=Object.prototype,zJ=Yk.hasOwnProperty,HJ=Yk.propertyIsEnumerable,Av=ZT(function(){return arguments}())?ZT:function(e){return _s(e)&&zJ.call(e,"callee")&&!HJ.call(e,"callee")},Si=Array.isArray,XJ=function(){return!1},Gp=AE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=(r?r.isBuffer:void 0)||XJ;e.exports=s}),YJ=/^(?:0|[1-9]\d*)$/,C_=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&YJ.test(e))&&e>-1&&e%1==0&&e<t},ME=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ti={};ti["[object Float32Array]"]=ti["[object Float64Array]"]=ti["[object Int8Array]"]=ti["[object Int16Array]"]=ti["[object Int32Array]"]=ti["[object Uint8Array]"]=ti["[object Uint8ClampedArray]"]=ti["[object Uint16Array]"]=ti["[object Uint32Array]"]=!0,ti["[object Arguments]"]=ti["[object Array]"]=ti["[object ArrayBuffer]"]=ti["[object Boolean]"]=ti["[object DataView]"]=ti["[object Date]"]=ti["[object Error]"]=ti["[object Function]"]=ti["[object Map]"]=ti["[object Number]"]=ti["[object Object]"]=ti["[object RegExp]"]=ti["[object Set]"]=ti["[object String]"]=ti["[object WeakMap]"]=!1;var qJ=function(e){return _s(e)&&ME(e.length)&&!!ti[$d(e)]},D_=function(e){return function(t){return e(t)}},Tv=AE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&Hk.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),JT=Tv&&Tv.isTypedArray,om=JT?D_(JT):qJ,KJ=Object.prototype.hasOwnProperty,qk=function(e,t){var n=Si(e),o=!n&&Av(e),r=!n&&!o&&Gp(e),s=!n&&!o&&!r&&om(e),c=n||o||r||s,v=c?WJ(e.length,String):[],h=v.length;for(var g in e)!t&&!KJ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||C_(g,h))||v.push(g);return v},ZJ=Object.prototype,I_=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||ZJ)},Kk=function(e,t){return function(n){return e(t(n))}},JJ=Kk(Object.keys,Object),QJ=Object.prototype.hasOwnProperty,PE=function(e){if(!I_(e))return JJ(e);var t=[];for(var n in Object(e))QJ.call(e,n)&&n!="constructor"&&t.push(n);return t},Rf=function(e){return e!=null&&ME(e.length)&&!nm(e)},Bd=function(e){return Rf(e)?qk(e):PE(e)},eQ=function(e,t){return e&&rm(t,Bd(t),e)},tQ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},nQ=Object.prototype.hasOwnProperty,rQ=function(e){if(!kl(e))return tQ(e);var t=I_(e),n=[];for(var o in e)(o!="constructor"||!t&&nQ.call(e,o))&&n.push(o);return n},eh=function(e){return Rf(e)?qk(e,!0):rQ(e)},oQ=function(e,t){return e&&rm(t,eh(t),e)},Zk=AE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var h=c.length,g=s?s(h):new c.constructor(h);return c.copy(g),g}}),Jk=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},Qk=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},eN=function(){return[]},iQ=Object.prototype.propertyIsEnumerable,QT=Object.getOwnPropertySymbols,kE=QT?function(e){return e==null?[]:(e=Object(e),Qk(QT(e),function(t){return iQ.call(e,t)}))}:eN,aQ=function(e,t){return rm(e,kE(e),t)},NE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},L_=Kk(Object.getPrototypeOf,Object),tN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)NE(t,kE(e)),e=L_(e);return t}:eN,lQ=function(e,t){return rm(e,tN(e),t)},nN=function(e,t,n){var o=t(e);return Si(e)?o:NE(o,n(e))},Mw=function(e){return nN(e,Bd,kE)},uQ=function(e){return nN(e,eh,tN)},Pw=Qp(ws,"DataView"),kw=Qp(ws,"Promise"),mv=Qp(ws,"Set"),Nw=Qp(ws,"WeakMap"),sQ=Jp(Pw),cQ=Jp($y),fQ=Jp(kw),dQ=Jp(mv),pQ=Jp(Nw),Ip=$d;(Pw&&Ip(new Pw(new ArrayBuffer(1)))!="[object DataView]"||$y&&Ip(new $y)!="[object Map]"||kw&&Ip(kw.resolve())!="[object Promise]"||mv&&Ip(new mv)!="[object Set]"||Nw&&Ip(new Nw)!="[object WeakMap]")&&(Ip=function(e){var t=$d(e),n=t=="[object Object]"?e.constructor:void 0,o=n?Jp(n):"";if(o)switch(o){case sQ:return"[object DataView]";case cQ:return"[object Map]";case fQ:return"[object Promise]";case dQ:return"[object Set]";case pQ:return"[object WeakMap]"}return t});var Vp=Ip,hQ=Object.prototype.hasOwnProperty,vQ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&hQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},e_=ws.Uint8Array,RE=function(e){var t=new e.constructor(e.byteLength);return new e_(t).set(new e_(e)),t},yQ=function(e,t){var n=t?RE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},mQ=/\w*$/,gQ=function(e){var t=new e.constructor(e.source,mQ.exec(e));return t.lastIndex=e.lastIndex,t},eM=Bu?Bu.prototype:void 0,tM=eM?eM.valueOf:void 0,_Q=function(e){return tM?Object(tM.call(e)):{}},rN=function(e,t){var n=t?RE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},bQ=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return RE(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return yQ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rN(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return gQ(e);case"[object Set]":return new o;case"[object Symbol]":return _Q(e)}},nM=Object.create,oN=function(){function e(){}return function(t){if(!kl(t))return{};if(nM)return nM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),iN=function(e){return typeof e.constructor!="function"||I_(e)?{}:oN(L_(e))},wQ=function(e){return _s(e)&&Vp(e)=="[object Map]"},rM=Tv&&Tv.isMap,EQ=rM?D_(rM):wQ,OQ=function(e){return _s(e)&&Vp(e)=="[object Set]"},oM=Tv&&Tv.isSet,xQ=oM?D_(oM):OQ,Ho={};Ho["[object Arguments]"]=Ho["[object Array]"]=Ho["[object ArrayBuffer]"]=Ho["[object DataView]"]=Ho["[object Boolean]"]=Ho["[object Date]"]=Ho["[object Float32Array]"]=Ho["[object Float64Array]"]=Ho["[object Int8Array]"]=Ho["[object Int16Array]"]=Ho["[object Int32Array]"]=Ho["[object Map]"]=Ho["[object Number]"]=Ho["[object Object]"]=Ho["[object RegExp]"]=Ho["[object Set]"]=Ho["[object String]"]=Ho["[object Symbol]"]=Ho["[object Uint8Array]"]=Ho["[object Uint8ClampedArray]"]=Ho["[object Uint16Array]"]=Ho["[object Uint32Array]"]=!0,Ho["[object Error]"]=Ho["[object Function]"]=Ho["[object WeakMap]"]=!1;var aN=function e(t,n,o,r,s,c){var v,h=1&n,g=2&n,_=4&n;if(o&&(v=s?o(t,r,s,c):o(t)),v!==void 0)return v;if(!kl(t))return t;var w=Si(t);if(w){if(v=vQ(t),!h)return Jk(t,v)}else{var O=Vp(t),S=O=="[object Function]"||O=="[object GeneratorFunction]";if(Gp(t))return Zk(t,h);if(O=="[object Object]"||O=="[object Arguments]"||S&&!s){if(v=g||S?{}:iN(t),!h)return g?lQ(t,oQ(v,t)):aQ(t,eQ(v,t))}else{if(!Ho[O])return s?t:{};v=bQ(t,O,h)}}c||(c=new yv);var P=c.get(t);if(P)return P;c.set(t,v),xQ(t)?t.forEach(function(R){v.add(e(R,n,o,R,t,c))}):EQ(t)&&t.forEach(function(R,D){v.set(D,e(R,n,o,D,t,c))});var A=w?void 0:(_?g?uQ:Mw:g?eh:Bd)(t);return TE(A||t,function(R,D){A&&(R=t[D=R]),j_(v,D,e(R,n,o,D,t,c))}),v},SQ=function(e){return aN(e,4)},jE=function(e){return function(){return e}},CE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),v=c.length;v--;){var h=c[e?v:++r];if(n(s[h],h,s)===!1)break}return t}}(),DE=function(e,t){return e&&CE(e,t,Bd)},F_=function(e,t){return function(n,o){if(n==null)return n;if(!Rf(n))return e(n,o);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&o(c[s],s,c)!==!1;);return n}}(DE),th=function(e){return e},lN=function(e){return typeof e=="function"?e:th},uN=function(e,t){return(Si(e)?TE:F_)(e,lN(t))},sN=uN,AQ=function(e,t){var n=[];return F_(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},TQ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},MQ=function(e){return this.__data__.has(e)};function Ag(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new N_;++t<n;)this.add(e[t])}Ag.prototype.add=Ag.prototype.push=TQ,Ag.prototype.has=MQ;var cN=Ag,PQ=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},fN=function(e,t){return e.has(t)},dN=function(e,t,n,o,r,s){var c=1&n,v=e.length,h=t.length;if(v!=h&&!(c&&h>v))return!1;var g=s.get(e),_=s.get(t);if(g&&_)return g==t&&_==e;var w=-1,O=!0,S=2&n?new cN:void 0;for(s.set(e,t),s.set(t,e);++w<v;){var P=e[w],A=t[w];if(o)var R=c?o(A,P,w,t,e,s):o(P,A,w,e,t,s);if(R!==void 0){if(R)continue;O=!1;break}if(S){if(!PQ(t,function(D,N){if(!fN(S,N)&&(P===D||r(P,D,n,o,s)))return S.push(N)})){O=!1;break}}else if(P!==A&&!r(P,A,n,o,s)){O=!1;break}}return s.delete(e),s.delete(t),O},kQ=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},IE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},iM=Bu?Bu.prototype:void 0,q1=iM?iM.valueOf:void 0,NQ=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new e_(e),new e_(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Gv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=kQ;case"[object Set]":var h=1&o;if(v||(v=IE),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;o|=2,c.set(e,t);var _=dN(v(e),v(t),o,r,s,c);return c.delete(e),_;case"[object Symbol]":if(q1)return q1.call(e)==q1.call(t)}return!1},RQ=Object.prototype.hasOwnProperty,jQ=function(e,t,n,o,r,s){var c=1&n,v=Mw(e),h=v.length;if(h!=Mw(t).length&&!c)return!1;for(var g=h;g--;){var _=v[g];if(!(c?_ in t:RQ.call(t,_)))return!1}var w=s.get(e),O=s.get(t);if(w&&O)return w==t&&O==e;var S=!0;s.set(e,t),s.set(t,e);for(var P=c;++g<h;){var A=e[_=v[g]],R=t[_];if(o)var D=c?o(R,A,_,t,e,s):o(A,R,_,e,t,s);if(!(D===void 0?A===R||r(A,R,n,o,s):D)){S=!1;break}P||(P=_=="constructor")}if(S&&!P){var N=e.constructor,B=t.constructor;N==B||!("constructor"in e)||!("constructor"in t)||typeof N=="function"&&N instanceof N&&typeof B=="function"&&B instanceof B||(S=!1)}return s.delete(e),s.delete(t),S},aM=Object.prototype.hasOwnProperty,CQ=function(e,t,n,o,r,s){var c=Si(e),v=Si(t),h=c?"[object Array]":Vp(e),g=v?"[object Array]":Vp(t),_=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",w=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=h==g;if(O&&Gp(e)){if(!Gp(t))return!1;c=!0,_=!1}if(O&&!_)return s||(s=new yv),c||om(e)?dN(e,t,n,o,r,s):NQ(e,t,h,n,o,r,s);if(!(1&n)){var S=_&&aM.call(e,"__wrapped__"),P=w&&aM.call(t,"__wrapped__");if(S||P){var A=S?e.value():e,R=P?t.value():t;return s||(s=new yv),r(A,R,n,o,s)}}return!!O&&(s||(s=new yv),jQ(e,t,n,o,r,s))},pN=function e(t,n,o,r,s){return t===n||(t==null||n==null||!_s(t)&&!_s(n)?t!=t&&n!=n:CQ(t,n,o,r,e,s))},DQ=function(e,t,n,o){var r=n.length,s=r,c=!o;if(e==null)return!s;for(e=Object(e);r--;){var v=n[r];if(c&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++r<s;){var h=(v=n[r])[0],g=e[h],_=v[1];if(c&&v[2]){if(g===void 0&&!(h in e))return!1}else{var w=new yv;if(o)var O=o(g,_,h,e,t,w);if(!(O===void 0?pN(_,g,3,o,w):O))return!1}}return!0},hN=function(e){return e==e&&!kl(e)},IQ=function(e){for(var t=Bd(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,hN(r)]}return t},vN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},LQ=function(e){var t=IQ(e);return t.length==1&&t[0][2]?vN(t[0][0],t[0][1]):function(n){return n===e||DQ(n,e,t)}},Wp=function(e){return typeof e=="symbol"||_s(e)&&$d(e)=="[object Symbol]"},FQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$Q=/^\w*$/,LE=function(e,t){if(Si(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Wp(e))||$Q.test(e)||!FQ.test(e)||t!=null&&e in Object(t)};function FE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new(FE.Cache||N_),n}FE.Cache=N_;var BQ=FE,UQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GQ=/\\(\\)?/g,VQ=function(e){var t=BQ(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(UQ,function(n,o,r,s){t.push(r?s.replace(GQ,"$1"):o||n)}),t}),gv=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},lM=Bu?Bu.prototype:void 0,uM=lM?lM.toString:void 0,WQ=function e(t){if(typeof t=="string")return t;if(Si(t))return gv(t,e)+"";if(Wp(t))return uM?uM.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},yN=function(e){return e==null?"":WQ(e)},$_=function(e,t){return Si(e)?e:LE(e,t)?[e]:VQ(yN(e))},im=function(e){if(typeof e=="string"||Wp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},B_=function(e,t){for(var n=0,o=(t=$_(t,e)).length;e!=null&&n<o;)e=e[im(t[n++])];return n&&n==o?e:void 0},zQ=function(e,t,n){var o=e==null?void 0:B_(e,t);return o===void 0?n:o},HQ=function(e,t){return e!=null&&t in Object(e)},mN=function(e,t,n){for(var o=-1,r=(t=$_(t,e)).length,s=!1;++o<r;){var c=im(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&ME(r)&&C_(c,r)&&(Si(e)||Av(e))},gN=function(e,t){return e!=null&&mN(e,t,HQ)},XQ=function(e,t){return LE(e)&&hN(t)?vN(im(e),t):function(n){var o=zQ(n,e);return o===void 0&&o===t?gN(n,e):pN(t,o,3)}},_N=function(e){return function(t){return t==null?void 0:t[e]}},YQ=function(e){return function(t){return B_(t,e)}},qQ=function(e){return LE(e)?_N(im(e)):YQ(e)},jf=function(e){return typeof e=="function"?e:e==null?th:typeof e=="object"?Si(e)?XQ(e[0],e[1]):LQ(e):qQ(e)},bN=function(e,t){return(Si(e)?Qk:AQ)(e,jf(t))},KQ=Object.prototype.hasOwnProperty,ZQ=function(e,t){return e!=null&&KQ.call(e,t)},wN=function(e,t){return e!=null&&mN(e,t,ZQ)},JQ=Object.prototype.hasOwnProperty,QQ=function(e){if(e==null)return!0;if(Rf(e)&&(Si(e)||typeof e=="string"||typeof e.splice=="function"||Gp(e)||om(e)||Av(e)))return!e.length;var t=Vp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(I_(e))return!PE(e).length;for(var n in e)if(JQ.call(e,n))return!1;return!0},EN=function(e){return e===void 0},ON=function(e,t){var n=-1,o=Rf(e)?Array(e.length):[];return F_(e,function(r,s,c){o[++n]=t(r,s,c)}),o},xN=function(e,t){return(Si(e)?gv:ON)(e,jf(t))},eee=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},tee=function(e,t,n,o,r){return r(e,function(s,c,v){n=o?(o=!1,s):t(n,s,c,v)}),n},SN=function(e,t,n){var o=Si(e)?eee:tee,r=arguments.length<3;return o(e,jf(t),n,r,F_)},nee=function(e){return typeof e=="string"||!Si(e)&&_s(e)&&$d(e)=="[object String]"},ree=_N("length"),oee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),iee=function(e){return oee.test(e)},aee="[\\ud800-\\udfff]",Rw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",jw="\\ud83c[\\udffb-\\udfff]",AN="[^\\ud800-\\udfff]",TN="(?:\\ud83c[\\udde6-\\uddff]){2}",MN="[\\ud800-\\udbff][\\udc00-\\udfff]",sM="(?:"+Rw+"|"+jw+")?",lee="[\\ufe0e\\ufe0f]?"+sM+("(?:\\u200d(?:"+[AN,TN,MN].join("|")+")[\\ufe0e\\ufe0f]?"+sM+")*"),uee="(?:"+[AN+Rw+"?",Rw,TN,MN,aee].join("|")+")",cM=RegExp(jw+"(?="+jw+")|"+uee+lee,"g"),see=function(e){for(var t=cM.lastIndex=0;cM.test(e);)++t;return t},cee=function(e){return iee(e)?see(e):ree(e)},fee=function(e){if(e==null)return 0;if(Rf(e))return nee(e)?cee(e):e.length;var t=Vp(e);return t=="[object Map]"||t=="[object Set]"?e.size:PE(e).length},dee=function(e,t,n){var o=Si(e),r=o||Gp(e)||om(e);if(t=jf(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:kl(e)&&nm(s)?oN(L_(e)):{}}return(r?TE:DE)(e,function(c,v,h){return t(n,c,v,h)}),n},fM=Bu?Bu.isConcatSpreadable:void 0,pee=function(e){return Si(e)||Av(e)||!!(fM&&e&&e[fM])},$E=function e(t,n,o,r,s){var c=-1,v=t.length;for(o||(o=pee),s||(s=[]);++c<v;){var h=t[c];n>0&&o(h)?n>1?e(h,n-1,o,r,s):NE(s,h):r||(s[s.length]=h)}return s},hee=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},dM=Math.max,PN=function(e,t,n){return t=dM(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=dM(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=o[r];return v[t]=n(c),hee(e,this,v)}},vee=Qg?function(e,t){return Qg(e,"toString",{configurable:!0,enumerable:!1,value:jE(t),writable:!0})}:th,yee=Date.now,kN=function(e){var t=0,n=0;return function(){var o=yee(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(vee),U_=function(e,t){return kN(PN(e,t,th),e+"")},NN=function(e,t,n,o){for(var r=e.length,s=n+(o?1:-1);o?s--:++s<r;)if(t(e[s],s,e))return s;return-1},mee=function(e){return e!=e},gee=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},_ee=function(e,t,n){return t==t?gee(e,t,n):NN(e,mee,n)},bee=function(e,t){return!!(e!=null&&e.length)&&_ee(e,t,0)>-1},wee=function(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1},Eee=function(){},Oee=mv&&1/IE(new mv([,-0]))[1]==1/0?function(e){return new mv(e)}:Eee,xee=function(e,t,n){var o=-1,r=bee,s=e.length,c=!0,v=[],h=v;if(n)c=!1,r=wee;else if(s>=200){var g=t?null:Oee(e);if(g)return IE(g);c=!1,r=fN,h=new cN}else h=t?[]:v;e:for(;++o<s;){var _=e[o],w=t?t(_):_;if(_=n||_!==0?_:0,c&&w==w){for(var O=h.length;O--;)if(h[O]===w)continue e;t&&h.push(w),v.push(_)}else r(h,w,n)||(h!==v&&h.push(w),v.push(_))}return v},RN=function(e){return _s(e)&&Rf(e)},See=U_(function(e){return xee($E(e,1,RN,!0))}),Aee=function(e,t){return gv(t,function(n){return e[n]})},t_,jN=function(e){return e==null?[]:Aee(e,Bd(e))};try{t_={clone:SQ,constant:jE,each:sN,filter:bN,has:wN,isArray:Si,isEmpty:QQ,isFunction:nm,isUndefined:EN,keys:Bd,map:xN,reduce:SN,size:fee,transform:dee,union:See,values:jN}}catch{}t_||(t_=window._);var En=t_,BE=Ur;function Ur(e){this._isDirected=!En.has(e,"directed")||e.directed,this._isMultigraph=!!En.has(e,"multigraph")&&e.multigraph,this._isCompound=!!En.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=En.constant(void 0),this._defaultEdgeLabelFn=En.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function pM(e,t){e[t]?e[t]++:e[t]=1}function hM(e,t){--e[t]||delete e[t]}function Ey(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(En.isUndefined(o)?"\0":o)}function Tee(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return o&&(v.name=o),v}function K1(e,t){return Ey(e,t.v,t.w,t.name)}Ur.prototype._nodeCount=0,Ur.prototype._edgeCount=0,Ur.prototype.isDirected=function(){return this._isDirected},Ur.prototype.isMultigraph=function(){return this._isMultigraph},Ur.prototype.isCompound=function(){return this._isCompound},Ur.prototype.setGraph=function(e){return this._label=e,this},Ur.prototype.graph=function(){return this._label},Ur.prototype.setDefaultNodeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultNodeLabelFn=e,this},Ur.prototype.nodeCount=function(){return this._nodeCount},Ur.prototype.nodes=function(){return En.keys(this._nodes)},Ur.prototype.sources=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._in[t])})},Ur.prototype.sinks=function(){var e=this;return En.filter(this.nodes(),function(t){return En.isEmpty(e._out[t])})},Ur.prototype.setNodes=function(e,t){var n=arguments,o=this;return En.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Ur.prototype.setNode=function(e,t){return En.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Ur.prototype.node=function(e){return this._nodes[e]},Ur.prototype.hasNode=function(e){return En.has(this._nodes,e)},Ur.prototype.removeNode=function(e){var t=this;if(En.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],En.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),En.each(En.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],En.each(En.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Ur.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(En.isUndefined(t))t="\0";else{for(var n=t+="";!En.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Ur.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Ur.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Ur.prototype.children=function(e){if(En.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return En.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Ur.prototype.predecessors=function(e){var t=this._preds[e];if(t)return En.keys(t)},Ur.prototype.successors=function(e){var t=this._sucs[e];if(t)return En.keys(t)},Ur.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return En.union(t,this.successors(e))},Ur.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Ur.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;En.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),En.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&En.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Ur.prototype.setDefaultEdgeLabel=function(e){return En.isFunction(e)||(e=En.constant(e)),this._defaultEdgeLabelFn=e,this},Ur.prototype.edgeCount=function(){return this._edgeCount},Ur.prototype.edges=function(){return En.values(this._edgeObjs)},Ur.prototype.setPath=function(e,t){var n=this,o=arguments;return En.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Ur.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,En.isUndefined(n)||(n=""+n);var c=Ey(this._isDirected,e,t,n);if(En.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!En.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var v=Tee(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,pM(this._preds[t],e),pM(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Ur.prototype.edge=function(e,t,n){var o=arguments.length===1?K1(this._isDirected,arguments[0]):Ey(this._isDirected,e,t,n);return this._edgeLabels[o]},Ur.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?K1(this._isDirected,arguments[0]):Ey(this._isDirected,e,t,n);return En.has(this._edgeLabels,o)},Ur.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?K1(this._isDirected,arguments[0]):Ey(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],hM(this._preds[t],e),hM(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Ur.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.v===t}):o}},Ur.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=En.values(n);return t?En.filter(o,function(r){return r.w===t}):o}},Ur.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var vM={Graph:BE,version:"2.1.8"},Mee={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Pee(e),edges:kee(e)};return En.isUndefined(e.graph())||(t.value=En.clone(e.graph())),t},read:function(e){var t=new BE(e.options).setGraph(e.value);return En.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),En.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Pee(e){return En.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return En.isUndefined(n)||(r.value=n),En.isUndefined(o)||(r.parent=o),r})}function kee(e){return En.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return En.isUndefined(t.name)||(o.name=t.name),En.isUndefined(n)||(o.value=n),o})}var Nee=function(e){var t,n={},o=[];function r(s){En.has(n,s)||(n[s]=!0,t.push(s),En.each(e.successors(s),r),En.each(e.predecessors(s),r))}return En.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},CN=ju;function ju(){this._arr=[],this._keyIndices={}}ju.prototype.size=function(){return this._arr.length},ju.prototype.keys=function(){return this._arr.map(function(e){return e.key})},ju.prototype.has=function(e){return En.has(this._keyIndices,e)},ju.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},ju.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ju.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!En.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},ju.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},ju.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},ju.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},ju.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},ju.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var DN=function(e,t,n,o){return function(r,s,c,v){var h,g,_={},w=new CN,O=function(S){var P=S.v!==h?S.v:S.w,A=_[P],R=c(S),D=g.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+R);D<A.distance&&(A.distance=D,A.predecessor=h,w.decrease(P,D))};for(r.nodes().forEach(function(S){var P=S===s?0:Number.POSITIVE_INFINITY;_[S]={distance:P},w.add(S,P)});w.size()>0&&(h=w.removeMin(),(g=_[h]).distance!==Number.POSITIVE_INFINITY);)v(h).forEach(O);return _}(e,String(t),n||Ree,o||function(r){return e.outEdges(r)})},Ree=En.constant(1),jee=function(e,t,n){return En.transform(e.nodes(),function(o,r){o[r]=DN(e,r,t,n)},{})},IN=function(e){var t=0,n=[],o={},r=[];function s(c){var v=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(_){En.has(o,_)?o[_].onStack&&(v.lowlink=Math.min(v.lowlink,o[_].index)):(s(_),v.lowlink=Math.min(v.lowlink,o[_].lowlink))}),v.lowlink===v.index){var h,g=[];do h=n.pop(),o[h].onStack=!1,g.push(h);while(c!==h);r.push(g)}}return e.nodes().forEach(function(c){En.has(o,c)||s(c)}),r},Cee=function(e){return En.filter(IN(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},Dee=function(e,t,n){return function(o,r,s){var c={},v=o.nodes();return v.forEach(function(h){c[h]={},c[h][h]={distance:0},v.forEach(function(g){h!==g&&(c[h][g]={distance:Number.POSITIVE_INFINITY})}),s(h).forEach(function(g){var _=g.v===h?g.w:g.v,w=r(g);c[h][_]={distance:w,predecessor:h}})}),v.forEach(function(h){var g=c[h];v.forEach(function(_){var w=c[_];v.forEach(function(O){var S=w[h],P=g[O],A=w[O],R=S.distance+P.distance;R<A.distance&&(A.distance=R,A.predecessor=P.predecessor)})})}),c}(e,t||Iee,n||function(o){return e.outEdges(o)})},Iee=En.constant(1),Z1=LN;function LN(e){var t={},n={},o=[];if(En.each(e.sinks(),function r(s){if(En.has(n,s))throw new n_;En.has(t,s)||(n[s]=!0,t[s]=!0,En.each(e.predecessors(s),r),delete n[s],o.push(s))}),En.size(t)!==e.nodeCount())throw new n_;return o}function n_(){}LN.CycleException=n_,n_.prototype=new Error;var yM=function(e,t,n){En.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return En.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);FN(e,c,n==="post",s,o,r)}),r};function FN(e,t,n,o,r,s){En.has(o,t)||(o[t]=!0,n||s.push(t),En.each(r(t),function(c){FN(e,c,n,o,r,s)}),n&&s.push(t))}var r_,Lee={Graph:vM.Graph,json:Mee,alg:{components:Nee,dijkstra:DN,dijkstraAll:jee,findCycles:Cee,floydWarshall:Dee,isAcyclic:function(e){try{Z1(e)}catch(t){if(t instanceof Z1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return yM(e,t,"post")},preorder:function(e,t){return yM(e,t,"pre")},prim:function(e,t){var n,o=new BE,r={},s=new CN;function c(h){var g=h.v===n?h.w:h.v,_=s.priority(g);if(_!==void 0){var w=t(h);w<_&&(r[g]=n,s.decrease(g,w))}}if(e.nodeCount()===0)return o;En.each(e.nodes(),function(h){s.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),En.has(r,n))o.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:IN,topsort:Z1},version:vM.version};try{r_=Lee}catch{}r_||(r_=window.graphlib);var yc=r_,Fee=function(e){return aN(e,5)},Uy=function(e,t,n){if(!kl(n))return!1;var o=typeof t;return!!(o=="number"?Rf(n)&&C_(t,n.length):o=="string"&&t in n)&&Gv(n[t],e)},$N=Object.prototype,$ee=$N.hasOwnProperty,Bee=U_(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&Uy(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=eh(s),v=-1,h=c.length;++v<h;){var g=c[v],_=e[g];(_===void 0||Gv(_,$N[g])&&!$ee.call(e,g))&&(e[g]=s[g])}return e}),Uee=function(e){return function(t,n,o){var r=Object(t);if(!Rf(t)){var s=jf(n);t=Bd(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},Gee=/^\s+|\s+$/g,Vee=/^[-+]0x[0-9a-f]+$/i,Wee=/^0b[01]+$/i,zee=/^0o[0-7]+$/i,Hee=parseInt,Xee=function(e){if(typeof e=="number")return e;if(Wp(e))return NaN;if(kl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=kl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Gee,"");var n=Wee.test(e);return n||zee.test(e)?Hee(e.slice(2),n?2:8):Vee.test(e)?NaN:+e},Tg=function(e){return e?(e=Xee(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},Yee=function(e){var t=Tg(e),n=t%1;return t==t?n?t-n:t:0},qee=Math.max,Kee=Uee(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Yee(n);return r<0&&(r=qee(o+r,0)),NN(e,jf(t),r)}),BN=function(e){return e!=null&&e.length?$E(e,1):[]},Zee=function(e,t){return e==null?e:CE(e,lN(t),eh)},Jee=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Qee=function(e,t){var n={};return t=jf(t),DE(e,function(o,r,s){R_(n,r,t(o,r,s))}),n},UE=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(v===void 0?c==c&&!Wp(c):n(c,v)))var v=c,h=s}return h},ete=function(e,t){return e>t},tte=function(e){return e&&e.length?UE(e,th,ete):void 0},Cw=function(e,t,n){(n!==void 0&&!Gv(e[t],n)||n===void 0&&!(t in e))&&R_(e,t,n)},nte=Function.prototype,rte=Object.prototype,UN=nte.toString,ote=rte.hasOwnProperty,ite=UN.call(Object),ate=function(e){if(!_s(e)||$d(e)!="[object Object]")return!1;var t=L_(e);if(t===null)return!0;var n=ote.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&UN.call(n)==ite},Dw=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},lte=function(e){return rm(e,eh(e))},ute=function(e,t,n,o,r,s,c){var v=Dw(e,n),h=Dw(t,n),g=c.get(h);if(g)Cw(e,n,g);else{var _=s?s(v,h,n+"",e,t,c):void 0,w=_===void 0;if(w){var O=Si(h),S=!O&&Gp(h),P=!O&&!S&&om(h);_=h,O||S||P?Si(v)?_=v:RN(v)?_=Jk(v):S?(w=!1,_=Zk(h,!0)):P?(w=!1,_=rN(h,!0)):_=[]:ate(h)||Av(h)?(_=v,Av(v)?_=lte(v):kl(v)&&!nm(v)||(_=iN(h))):w=!1}w&&(c.set(h,_),r(_,h,o,s,c),c.delete(h)),Cw(e,n,_)}},ste=function e(t,n,o,r,s){t!==n&&CE(n,function(c,v){if(s||(s=new yv),kl(c))ute(t,n,v,o,e,r,s);else{var h=r?r(Dw(t,v),c,v+"",t,n,s):void 0;h===void 0&&(h=c),Cw(t,v,h)}},eh)},cte=function(e){return U_(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&Uy(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var v=n[o];v&&e(t,v,o,s)}return t})}(function(e,t,n){ste(e,t,n)}),GN=function(e,t){return e<t},fte=function(e){return e&&e.length?UE(e,th,GN):void 0},dte=function(e,t){return e&&e.length?UE(e,jf(t),GN):void 0},pte=function(){return ws.Date.now()},hte=function(e,t,n,o){if(!kl(e))return e;for(var r=-1,s=(t=$_(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var h=im(t[r]),g=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(r!=c){var _=v[h];(g=o?o(_,h,v):void 0)===void 0&&(g=kl(_)?_:C_(t[r+1])?[]:{})}j_(v,h,g),v=v[h]}return e},vte=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],v=B_(e,c);n(v,c)&&hte(s,$_(c,e),v)}return s},yte=function(e,t){return vte(e,t,function(n,o){return gN(e,o)})},mte=function(e){return kN(PN(e,void 0,BN),e+"")}(function(e,t){return e==null?{}:yte(e,t)}),gte=Math.ceil,_te=Math.max,bte=function(e,t,n,o){for(var r=-1,s=_te(gte((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++r]=e,e+=n;return c},wte=function(e){return function(t,n,o){return o&&typeof o!="number"&&Uy(t,n,o)&&(n=o=void 0),t=Tg(t),n===void 0?(n=t,t=0):n=Tg(n),o=o===void 0?t<n?1:-1:Tg(o),bte(t,n,o,e)}}(),Ete=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Ote=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=Wp(e),c=t!==void 0,v=t===null,h=t==t,g=Wp(t);if(!v&&!g&&!s&&e>t||s&&c&&h&&!v&&!g||o&&c&&h||!n&&h||!r)return 1;if(!o&&!s&&!g&&e<t||g&&n&&r&&!o&&!s||v&&n&&r||!c&&r||!h)return-1}return 0},xte=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++o<c;){var h=Ote(r[o],s[o]);if(h)return o>=v?h:h*(n[o]=="desc"?-1:1)}return e.index-t.index},Ste=function(e,t,n){t=t.length?gv(t,function(s){return Si(s)?function(c){return B_(c,s.length===1?s[0]:s)}:s}):[th];var o=-1;t=gv(t,D_(jf));var r=ON(e,function(s,c,v){return{criteria:gv(t,function(h){return h(s)}),index:++o,value:s}});return Ete(r,function(s,c){return xte(s,c,n)})},Ate=U_(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Uy(e,t[0],t[1])?t=[]:n>2&&Uy(t[0],t[1],t[2])&&(t=[t[0]]),Ste(e,$E(t,1),[])}),Tte=0,Mte=function(e){var t=++Tte;return yN(e)+t},Pte=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var v=o<s?t[o]:void 0;n(c,e[o],v)}return c},o_,kte=function(e,t){return Pte(e||[],t||[],j_)};try{o_={cloneDeep:Fee,constant:jE,defaults:Bee,each:sN,filter:bN,find:Kee,flatten:BN,forEach:uN,forIn:Zee,has:wN,isUndefined:EN,last:Jee,map:xN,mapValues:Qee,max:tte,merge:cte,min:fte,minBy:dte,now:pte,pick:mte,range:wte,reduce:SN,sortBy:Ate,uniqueId:Mte,values:jN,zipObject:kte}}catch{}o_||(o_=window._);var Nte=o_;yc.Graph;Nte.constant(1);yc.Graph;yc.Graph;yc.alg.preorder;yc.alg.postorder;yc.Graph;yc.Graph;yc.Graph;yc.Graph;yc.Graph;function Gy(e){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(e)}function Rte(e,t){if(Gy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(Gy(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jte(e){var t=Rte(e,"string");return Gy(t)=="symbol"?t:t+""}function an(e,t,n){return(t=jte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cte=typeof gy=="object"&&gy&&gy.Object===Object&&gy,VN=Cte,Dte=VN,Ite=typeof self=="object"&&self&&self.Object===Object&&self,Lte=Dte||Ite||Function("return this")(),Fte=Lte,$te=Fte,Bte=$te.Symbol,WN=Bte,mM=WN;mM&&mM.toStringTag;var gM=WN;gM&&gM.toStringTag;var i_={exports:{}};i_.exports;(function(e,t){var n=VN,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,v=function(){try{var h=r&&r.require&&r.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v})(i_,i_.exports);var Ute=i_.exports,_M=Ute;_M&&_M.isTypedArray;var zN={exports:{}},HN={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(HN);var Gte=HN.exports;(function(e){var t=Gte.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var o,r={},s=Object.prototype,c=s.hasOwnProperty,v=typeof Symbol=="function"?Symbol:{},h=v.iterator||"@@iterator",g=v.asyncIterator||"@@asyncIterator",_=v.toStringTag||"@@toStringTag";function w(H,re,fe,Se){return Object.defineProperty(H,re,{value:fe,enumerable:!Se,configurable:!Se,writable:!Se})}try{w({},"")}catch{w=function(fe,Se,Te){return fe[Se]=Te}}function O(H,re,fe,Se){var Te=re&&re.prototype instanceof A?re:A,he=Object.create(Te.prototype);return w(he,"_invoke",function(_e,De,Ve){var vt=1;return function(rt,gt){if(vt===3)throw Error("Generator is already running");if(vt===4){if(rt==="throw")throw gt;return{value:o,done:!0}}for(Ve.method=rt,Ve.arg=gt;;){var Nt=Ve.delegate;if(Nt){var yt=G(Nt,Ve);if(yt){if(yt===P)continue;return yt}}if(Ve.method==="next")Ve.sent=Ve._sent=Ve.arg;else if(Ve.method==="throw"){if(vt===1)throw vt=4,Ve.arg;Ve.dispatchException(Ve.arg)}else Ve.method==="return"&&Ve.abrupt("return",Ve.arg);vt=3;var Yt=S(_e,De,Ve);if(Yt.type==="normal"){if(vt=Ve.done?4:2,Yt.arg===P)continue;return{value:Yt.arg,done:Ve.done}}Yt.type==="throw"&&(vt=4,Ve.method="throw",Ve.arg=Yt.arg)}}}(H,fe,new K(Se||[])),!0),he}function S(H,re,fe){try{return{type:"normal",arg:H.call(re,fe)}}catch(Se){return{type:"throw",arg:Se}}}r.wrap=O;var P={};function A(){}function R(){}function D(){}var N={};w(N,h,function(){return this});var B=Object.getPrototypeOf,q=B&&B(B(z([])));q&&q!==s&&c.call(q,h)&&(N=q);var Z=D.prototype=A.prototype=Object.create(N);function Y(H){["next","throw","return"].forEach(function(re){w(H,re,function(fe){return this._invoke(re,fe)})})}function te(H,re){function fe(Te,he,_e,De){var Ve=S(H[Te],H,he);if(Ve.type!=="throw"){var vt=Ve.arg,rt=vt.value;return rt&&t(rt)=="object"&&c.call(rt,"__await")?re.resolve(rt.__await).then(function(gt){fe("next",gt,_e,De)},function(gt){fe("throw",gt,_e,De)}):re.resolve(rt).then(function(gt){vt.value=gt,_e(vt)},function(gt){return fe("throw",gt,_e,De)})}De(Ve.arg)}var Se;w(this,"_invoke",function(Te,he){function _e(){return new re(function(De,Ve){fe(Te,he,De,Ve)})}return Se=Se?Se.then(_e,_e):_e()},!0)}function G(H,re){var fe=re.method,Se=H.i[fe];if(Se===o)return re.delegate=null,fe==="throw"&&H.i.return&&(re.method="return",re.arg=o,G(H,re),re.method==="throw")||fe!=="return"&&(re.method="throw",re.arg=new TypeError("The iterator does not provide a '"+fe+"' method")),P;var Te=S(Se,H.i,re.arg);if(Te.type==="throw")return re.method="throw",re.arg=Te.arg,re.delegate=null,P;var he=Te.arg;return he?he.done?(re[H.r]=he.value,re.next=H.n,re.method!=="return"&&(re.method="next",re.arg=o),re.delegate=null,P):he:(re.method="throw",re.arg=new TypeError("iterator result is not an object"),re.delegate=null,P)}function C(H){this.tryEntries.push(H)}function W(H){var re=H[4]||{};re.type="normal",re.arg=o,H[4]=re}function K(H){this.tryEntries=[[-1]],H.forEach(C,this),this.reset(!0)}function z(H){if(H!=null){var re=H[h];if(re)return re.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var fe=-1,Se=function Te(){for(;++fe<H.length;)if(c.call(H,fe))return Te.value=H[fe],Te.done=!1,Te;return Te.value=o,Te.done=!0,Te};return Se.next=Se}}throw new TypeError(t(H)+" is not iterable")}return R.prototype=D,w(Z,"constructor",D),w(D,"constructor",R),R.displayName=w(D,_,"GeneratorFunction"),r.isGeneratorFunction=function(H){var re=typeof H=="function"&&H.constructor;return!!re&&(re===R||(re.displayName||re.name)==="GeneratorFunction")},r.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,D):(H.__proto__=D,w(H,_,"GeneratorFunction")),H.prototype=Object.create(Z),H},r.awrap=function(H){return{__await:H}},Y(te.prototype),w(te.prototype,g,function(){return this}),r.AsyncIterator=te,r.async=function(H,re,fe,Se,Te){Te===void 0&&(Te=Promise);var he=new te(O(H,re,fe,Se),Te);return r.isGeneratorFunction(re)?he:he.next().then(function(_e){return _e.done?_e.value:he.next()})},Y(Z),w(Z,_,"Generator"),w(Z,h,function(){return this}),w(Z,"toString",function(){return"[object Generator]"}),r.keys=function(H){var re=Object(H),fe=[];for(var Se in re)fe.unshift(Se);return function Te(){for(;fe.length;)if((Se=fe.pop())in re)return Te.value=Se,Te.done=!1,Te;return Te.done=!0,Te}},r.values=z,K.prototype={constructor:K,reset:function(re){if(this.prev=this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(W),!re)for(var fe in this)fe.charAt(0)==="t"&&c.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=o)},stop:function(){this.done=!0;var re=this.tryEntries[0][4];if(re.type==="throw")throw re.arg;return this.rval},dispatchException:function(re){if(this.done)throw re;var fe=this;function Se(rt){_e.type="throw",_e.arg=re,fe.next=rt}for(var Te=fe.tryEntries.length-1;Te>=0;--Te){var he=this.tryEntries[Te],_e=he[4],De=this.prev,Ve=he[1],vt=he[2];if(he[0]===-1)return Se("end"),!1;if(!Ve&&!vt)throw Error("try statement without catch or finally");if(he[0]!=null&&he[0]<=De){if(De<Ve)return this.method="next",this.arg=o,Se(Ve),!0;if(De<vt)return Se(vt),!1}}},abrupt:function(re,fe){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Te=this.tryEntries[Se];if(Te[0]>-1&&Te[0]<=this.prev&&this.prev<Te[2]){var he=Te;break}}he&&(re==="break"||re==="continue")&&he[0]<=fe&&fe<=he[2]&&(he=null);var _e=he?he[4]:{};return _e.type=re,_e.arg=fe,he?(this.method="next",this.next=he[2],P):this.complete(_e)},complete:function(re,fe){if(re.type==="throw")throw re.arg;return re.type==="break"||re.type==="continue"?this.next=re.arg:re.type==="return"?(this.rval=this.arg=re.arg,this.method="return",this.next="end"):re.type==="normal"&&fe&&(this.next=fe),P},finish:function(re){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Se=this.tryEntries[fe];if(Se[2]===re)return this.complete(Se[4],Se[3]),W(Se),P}},catch:function(re){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Se=this.tryEntries[fe];if(Se[0]===re){var Te=Se[4];if(Te.type==="throw"){var he=Te.arg;W(Se)}return he}}throw Error("illegal catch attempt")},delegateYield:function(re,fe,Se){return this.delegate={i:z(re),r:fe,n:Se},this.method==="next"&&(this.arg=o),P}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(zN);var Vte=zN.exports,J1=Vte();try{regeneratorRuntime=J1}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=J1:Function("r","regeneratorRuntime = r")(J1)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var bM;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(bM||(bM={}));var wM;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(wM||(wM={}));var EM;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(EM||(EM={}));var OM;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(OM||(OM={}));var Wte={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(gy,function(){var n=function(F){return F instanceof Uint8Array||F instanceof Uint16Array||F instanceof Uint32Array||F instanceof Int8Array||F instanceof Int16Array||F instanceof Int32Array||F instanceof Float32Array||F instanceof Float64Array||F instanceof Uint8ClampedArray},o=function(F,ae){for(var be=Object.keys(ae),Qe=0;Qe<be.length;++Qe)F[be[Qe]]=ae[be[Qe]];return F},r=`
`;function s(F){return typeof atob<"u"?atob(F):"base64:"+F}function c(F){var ae=new Error("(regl) "+F);throw console.error(ae),ae}function v(F,ae){F||c(ae)}function h(F){return F?": "+F:""}function g(F,ae,be){F in ae||c("unknown parameter ("+F+")"+h(be)+". possible values: "+Object.keys(ae).join())}function _(F,ae){n(F)||c("invalid parameter type"+h(ae)+". must be a typed array")}function w(F,ae){switch(ae){case"number":return typeof F=="number";case"object":return typeof F=="object";case"string":return typeof F=="string";case"boolean":return typeof F=="boolean";case"function":return typeof F=="function";case"undefined":return typeof F>"u";case"symbol":return typeof F=="symbol"}}function O(F,ae,be){w(F,ae)||c("invalid parameter type"+h(be)+". expected "+ae+", got "+typeof F)}function S(F,ae){F>=0&&(F|0)===F||c("invalid parameter type, ("+F+")"+h(ae)+". must be a nonnegative integer")}function P(F,ae,be){ae.indexOf(F)<0&&c("invalid value"+h(be)+". must be one of: "+ae)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function R(F){Object.keys(F).forEach(function(ae){A.indexOf(ae)<0&&c('invalid regl constructor argument "'+ae+'". must be one of '+A)})}function D(F,ae){for(F=F+"";F.length<ae;)F=" "+F;return F}function N(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B(F,ae){this.number=F,this.line=ae,this.errors=[]}function q(F,ae,be){this.file=F,this.line=ae,this.message=be}function Z(){var F=new Error,ae=(F.stack||F).toString(),be=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ae);if(be)return be[1];var Qe=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ae);return Qe?Qe[1]:"unknown"}function Y(){var F=new Error,ae=(F.stack||F).toString(),be=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ae);if(be)return be[1];var Qe=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ae);return Qe?Qe[1]:"unknown"}function te(F,ae){var be=F.split(`
`),Qe=1,ct=0,Ke={unknown:new N,0:new N};Ke.unknown.name=Ke[0].name=ae||Z(),Ke.unknown.lines.push(new B(0,""));for(var lt=0;lt<be.length;++lt){var Pt=be[lt],Dt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Pt);if(Dt)switch(Dt[1]){case"line":var jt=/(\d+)(\s+\d+)?/.exec(Dt[2]);jt&&(Qe=jt[1]|0,jt[2]&&(ct=jt[2]|0,ct in Ke||(Ke[ct]=new N)));break;case"define":var ut=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Dt[2]);ut&&(Ke[ct].name=ut[1]?s(ut[2]):ut[2]);break}Ke[ct].lines.push(new B(Qe++,Pt))}return Object.keys(Ke).forEach(function(Vt){var Ut=Ke[Vt];Ut.lines.forEach(function(kt){Ut.index[kt.number]=kt})}),Ke}function G(F){var ae=[];return F.split(`
`).forEach(function(be){if(!(be.length<5)){var Qe=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);Qe?ae.push(new q(Qe[1]|0,Qe[2]|0,Qe[3].trim())):be.length>0&&ae.push(new q("unknown",0,be))}}),ae}function C(F,ae){ae.forEach(function(be){var Qe=F[be.file];if(Qe){var ct=Qe.index[be.line];if(ct){ct.errors.push(be),Qe.hasErrors=!0;return}}F.unknown.hasErrors=!0,F.unknown.lines[0].errors.push(be)})}function W(F,ae,be,Qe,ct){if(!F.getShaderParameter(ae,F.COMPILE_STATUS)){var Ke=F.getShaderInfoLog(ae),lt=Qe===F.FRAGMENT_SHADER?"fragment":"vertex";Te(be,"string",lt+" shader source must be a string",ct);var Pt=te(be,ct),Dt=G(Ke);C(Pt,Dt),Object.keys(Pt).forEach(function(jt){var ut=Pt[jt];if(!ut.hasErrors)return;var Vt=[""],Ut=[""];function kt(_t,We){Vt.push(_t),Ut.push(We||"")}kt("file number "+jt+": "+ut.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ut.lines.forEach(function(_t){if(_t.errors.length>0){kt(D(_t.number,4)+"|  ","background-color:yellow; font-weight:bold"),kt(_t.line+r,"color:red; background-color:yellow; font-weight:bold");var We=0;_t.errors.forEach(function(it){var Lt=it.message,Kt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lt);if(Kt){var xt=Kt[1];switch(Lt=Kt[2],xt){case"assign":xt="=";break}We=Math.max(_t.line.indexOf(xt,We),0)}else We=0;kt(D("| ",6)),kt(D("^^^",We+3)+r,"font-weight:bold"),kt(D("| ",6)),kt(Lt+r,"font-weight:bold")}),kt(D("| ",6)+r)}else kt(D(_t.number,4)+"|  "),kt(_t.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Vt.join("%c"),console.log.apply(console,Ut)):console.log(Vt.join(""))}),v.raise("Error compiling "+lt+" shader, "+Pt[0].name)}}function K(F,ae,be,Qe,ct){if(!F.getProgramParameter(ae,F.LINK_STATUS)){var Ke=F.getProgramInfoLog(ae),lt=te(be,ct),Pt=te(Qe,ct),Dt='Error linking program with vertex shader, "'+Pt[0].name+'", and fragment shader "'+lt[0].name+'"';typeof document<"u"?console.log("%c"+Dt+r+"%c"+Ke,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Dt+r+Ke),v.raise(Dt)}}function z(F){F._commandRef=Z()}function H(F,ae,be,Qe){z(F);function ct(Dt){return Dt?Qe.id(Dt):0}F._fragId=ct(F.static.frag),F._vertId=ct(F.static.vert);function Ke(Dt,jt){Object.keys(jt).forEach(function(ut){Dt[Qe.id(ut)]=!0})}var lt=F._uniformSet={};Ke(lt,ae.static),Ke(lt,ae.dynamic);var Pt=F._attributeSet={};Ke(Pt,be.static),Ke(Pt,be.dynamic),F._hasCount="count"in F.static||"count"in F.dynamic||"elements"in F.static||"elements"in F.dynamic}function re(F,ae){var be=Y();c(F+" in command "+(ae||Z())+(be==="unknown"?"":" called from "+be))}function fe(F,ae,be){F||re(ae,be||Z())}function Se(F,ae,be,Qe){F in ae||re("unknown parameter ("+F+")"+h(be)+". possible values: "+Object.keys(ae).join(),Qe||Z())}function Te(F,ae,be,Qe){w(F,ae)||re("invalid parameter type"+h(be)+". expected "+ae+", got "+typeof F,Qe||Z())}function he(F){F()}function _e(F,ae,be){F.texture?P(F.texture._texture.internalformat,ae,"unsupported texture format for attachment"):P(F.renderbuffer._renderbuffer.format,be,"unsupported renderbuffer format for attachment")}var De=33071,Ve=9728,vt=9984,rt=9985,gt=9986,Nt=9987,yt=5120,Yt=5121,Ce=5122,we=5123,ke=5124,dt=5125,zt=5126,Ot=32819,rn=32820,yn=33635,Tn=34042,pn=36193,st={};st[yt]=st[Yt]=1,st[Ce]=st[we]=st[pn]=st[yn]=st[Ot]=st[rn]=2,st[ke]=st[dt]=st[zt]=st[Tn]=4;function xn(F,ae){return F===rn||F===Ot||F===yn?2:F===Tn?4:st[F]*ae}function Fe(F){return!(F&F-1)&&!!F}function mn(F,ae,be){var Qe,ct=ae.width,Ke=ae.height,lt=ae.channels;v(ct>0&&ct<=be.maxTextureSize&&Ke>0&&Ke<=be.maxTextureSize,"invalid texture shape"),(F.wrapS!==De||F.wrapT!==De)&&v(Fe(ct)&&Fe(Ke),"incompatible wrap mode for texture, both width and height must be power of 2"),ae.mipmask===1?ct!==1&&Ke!==1&&v(F.minFilter!==vt&&F.minFilter!==gt&&F.minFilter!==rt&&F.minFilter!==Nt,"min filter requires mipmap"):(v(Fe(ct)&&Fe(Ke),"texture must be a square power of 2 to support mipmapping"),v(ae.mipmask===(ct<<1)-1,"missing or incomplete mipmap data")),ae.type===zt&&(be.extensions.indexOf("oes_texture_float_linear")<0&&v(F.minFilter===Ve&&F.magFilter===Ve,"filter not supported, must enable oes_texture_float_linear"),v(!F.genMipmaps,"mipmap generation not supported with float textures"));var Pt=ae.images;for(Qe=0;Qe<16;++Qe)if(Pt[Qe]){var Dt=ct>>Qe,jt=Ke>>Qe;v(ae.mipmask&1<<Qe,"missing mipmap data");var ut=Pt[Qe];if(v(ut.width===Dt&&ut.height===jt,"invalid shape for mip images"),v(ut.format===ae.format&&ut.internalformat===ae.internalformat&&ut.type===ae.type,"incompatible type for mip image"),!ut.compressed)if(ut.data){var Vt=Math.ceil(xn(ut.type,lt)*Dt/ut.unpackAlignment)*ut.unpackAlignment;v(ut.data.byteLength===Vt*jt,"invalid data for image, buffer size is inconsistent with image format")}else ut.element||ut.copy}else F.genMipmaps||v((ae.mipmask&1<<Qe)===0,"extra mipmap data");ae.compressed&&v(!F.genMipmaps,"mipmap generation for compressed images not supported")}function Kn(F,ae,be,Qe){var ct=F.width,Ke=F.height,lt=F.channels;v(ct>0&&ct<=Qe.maxTextureSize&&Ke>0&&Ke<=Qe.maxTextureSize,"invalid texture shape"),v(ct===Ke,"cube map must be square"),v(ae.wrapS===De&&ae.wrapT===De,"wrap mode not supported by cube map");for(var Pt=0;Pt<be.length;++Pt){var Dt=be[Pt];v(Dt.width===ct&&Dt.height===Ke,"inconsistent cube map face shape"),ae.genMipmaps&&(v(!Dt.compressed,"can not generate mipmap for compressed textures"),v(Dt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var jt=Dt.images,ut=0;ut<16;++ut){var Vt=jt[ut];if(Vt){var Ut=ct>>ut,kt=Ke>>ut;v(Dt.mipmask&1<<ut,"missing mipmap data"),v(Vt.width===Ut&&Vt.height===kt,"invalid shape for mip images"),v(Vt.format===F.format&&Vt.internalformat===F.internalformat&&Vt.type===F.type,"incompatible type for mip image"),Vt.compressed||(Vt.data?v(Vt.data.byteLength===Ut*kt*Math.max(xn(Vt.type,lt),Vt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Vt.element||Vt.copy)}}}}var oe=o(v,{optional:he,raise:c,commandRaise:re,command:fe,parameter:g,commandParameter:Se,constructor:R,type:O,commandType:Te,isTypedArray:_,nni:S,oneOf:P,shaderError:W,linkError:K,callSite:Y,saveCommandRef:z,saveDrawInfo:H,framebufferFormat:_e,guessCommand:Z,texture2D:mn,textureCube:Kn}),$n=0,Sr=0,Gr=5,eo=6;function Dn(F,ae){this.id=$n++,this.type=F,this.data=ae}function Ro(F){return F.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function xe(F){if(F.length===0)return[];var ae=F.charAt(0),be=F.charAt(F.length-1);if(F.length>1&&ae===be&&(ae==='"'||ae==="'"))return['"'+Ro(F.substr(1,F.length-2))+'"'];var Qe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(F);if(Qe)return xe(F.substr(0,Qe.index)).concat(xe(Qe[1])).concat(xe(F.substr(Qe.index+Qe[0].length)));var ct=F.split(".");if(ct.length===1)return['"'+Ro(F)+'"'];for(var Ke=[],lt=0;lt<ct.length;++lt)Ke=Ke.concat(xe(ct[lt]));return Ke}function He(F){return"["+xe(F).join("][")+"]"}function je(F,ae){return new Dn(F,He(ae+""))}function ot(F){return typeof F=="function"&&!F._reglType||F instanceof Dn}function en(F,ae){if(typeof F=="function")return new Dn(Sr,F);if(typeof F=="number"||typeof F=="boolean")return new Dn(Gr,F);if(Array.isArray(F))return new Dn(eo,F.map((be,Qe)=>en(be,ae+"["+Qe+"]")));if(F instanceof Dn)return F;oe(!1,"invalid option type in uniform "+ae)}var qt={DynamicVariable:Dn,define:je,isDynamic:ot,unbox:en,accessor:He},kn={next:typeof requestAnimationFrame=="function"?function(F){return requestAnimationFrame(F)}:function(F){return setTimeout(F,16)},cancel:typeof cancelAnimationFrame=="function"?function(F){return cancelAnimationFrame(F)}:clearTimeout},wr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ni(){var F={"":0},ae=[""];return{id:function(be){var Qe=F[be];return Qe||(Qe=F[be]=ae.length,ae.push(be),Qe)},str:function(be){return ae[be]}}}function yi(F,ae,be){var Qe=document.createElement("canvas");o(Qe.style,{border:0,margin:0,padding:0,top:0,left:0}),F.appendChild(Qe),F===document.body&&(Qe.style.position="absolute",o(F.style,{margin:0,padding:0}));function ct(){var Pt=window.innerWidth,Dt=window.innerHeight;if(F!==document.body){var jt=F.getBoundingClientRect();Pt=jt.right-jt.left,Dt=jt.bottom-jt.top}Qe.width=be*Pt,Qe.height=be*Dt,o(Qe.style,{width:Pt+"px",height:Dt+"px"})}var Ke;F!==document.body&&typeof ResizeObserver=="function"?(Ke=new ResizeObserver(function(){setTimeout(ct)}),Ke.observe(F)):window.addEventListener("resize",ct,!1);function lt(){Ke?Ke.disconnect():window.removeEventListener("resize",ct),F.removeChild(Qe)}return ct(),{canvas:Qe,onDestroy:lt}}function Go(F,ae){function be(Qe){try{return F.getContext(Qe,ae)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}function Xo(F){return typeof F.nodeName=="string"&&typeof F.appendChild=="function"&&typeof F.getBoundingClientRect=="function"}function Sn(F){return typeof F.drawArrays=="function"||typeof F.drawElements=="function"}function Bn(F){return typeof F=="string"?F.split():(oe(Array.isArray(F),"invalid extension array"),F)}function Xn(F){return typeof F=="string"?(oe(typeof document<"u","not supported outside of DOM"),document.querySelector(F)):F}function ir(F){var ae=F||{},be,Qe,ct,Ke,lt={},Pt=[],Dt=[],jt=typeof window>"u"?1:window.devicePixelRatio,ut=!1,Vt=function(_t){_t&&oe.raise(_t)},Ut=function(){};if(typeof ae=="string"?(oe(typeof document<"u","selector queries only supported in DOM enviroments"),be=document.querySelector(ae),oe(be,"invalid query string for element")):typeof ae=="object"?Xo(ae)?be=ae:Sn(ae)?(Ke=ae,ct=Ke.canvas):(oe.constructor(ae),"gl"in ae?Ke=ae.gl:"canvas"in ae?ct=Xn(ae.canvas):"container"in ae&&(Qe=Xn(ae.container)),"attributes"in ae&&(lt=ae.attributes,oe.type(lt,"object","invalid context attributes")),"extensions"in ae&&(Pt=Bn(ae.extensions)),"optionalExtensions"in ae&&(Dt=Bn(ae.optionalExtensions)),"onDone"in ae&&(oe.type(ae.onDone,"function","invalid or missing onDone callback"),Vt=ae.onDone),"profile"in ae&&(ut=!!ae.profile),"pixelRatio"in ae&&(jt=+ae.pixelRatio,oe(jt>0,"invalid pixel ratio"))):oe.raise("invalid arguments to regl"),be&&(be.nodeName.toLowerCase()==="canvas"?ct=be:Qe=be),!Ke){if(!ct){oe(typeof document<"u","must manually specify webgl context outside of DOM environments");var kt=yi(Qe||document.body,Vt,jt);if(!kt)return null;ct=kt.canvas,Ut=kt.onDestroy}lt.premultipliedAlpha===void 0&&(lt.premultipliedAlpha=!0),Ke=Go(ct,lt)}return Ke?{gl:Ke,canvas:ct,container:Qe,extensions:Pt,optionalExtensions:Dt,pixelRatio:jt,profile:ut,onDone:Vt,onDestroy:Ut}:(Ut(),Vt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kr(F,ae){var be={};function Qe(lt){oe.type(lt,"string","extension name must be string");var Pt=lt.toLowerCase(),Dt;try{Dt=be[Pt]=F.getExtension(Pt)}catch{}return!!Dt}for(var ct=0;ct<ae.extensions.length;++ct){var Ke=ae.extensions[ct];if(!Qe(Ke))return ae.onDestroy(),ae.onDone('"'+Ke+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ae.optionalExtensions.forEach(Qe),{extensions:be,restore:function(){Object.keys(be).forEach(function(lt){if(be[lt]&&!Qe(lt))throw new Error("(regl): error restoring extension "+lt)})}}}function Rr(F,ae){for(var be=Array(F),Qe=0;Qe<F;++Qe)be[Qe]=ae(Qe);return be}var cl=5120,Ua=5121,fl=5122,au=5123,Ud=5124,mc=5125,fa=5126;function Wu(F){for(var ae=16;ae<=1<<28;ae*=16)if(F<=ae)return ae;return 0}function Pn(F){var ae,be;return ae=(F>65535)<<4,F>>>=ae,be=(F>255)<<3,F>>>=be,ae|=be,be=(F>15)<<2,F>>>=be,ae|=be,be=(F>3)<<1,F>>>=be,ae|=be,ae|F>>1}function Cf(){var F=Rr(8,function(){return[]});function ae(Ke){var lt=Wu(Ke),Pt=F[Pn(lt)>>2];return Pt.length>0?Pt.pop():new ArrayBuffer(lt)}function be(Ke){F[Pn(Ke.byteLength)>>2].push(Ke)}function Qe(Ke,lt){var Pt=null;switch(Ke){case cl:Pt=new Int8Array(ae(lt),0,lt);break;case Ua:Pt=new Uint8Array(ae(lt),0,lt);break;case fl:Pt=new Int16Array(ae(2*lt),0,lt);break;case au:Pt=new Uint16Array(ae(2*lt),0,lt);break;case Ud:Pt=new Int32Array(ae(4*lt),0,lt);break;case mc:Pt=new Uint32Array(ae(4*lt),0,lt);break;case fa:Pt=new Float32Array(ae(4*lt),0,lt);break;default:return null}return Pt.length!==lt?Pt.subarray(0,lt):Pt}function ct(Ke){be(Ke.buffer)}return{alloc:ae,free:be,allocType:Qe,freeType:ct}}var vo=Cf();vo.zero=Cf();var gc=3408,qi=3410,ta=3411,Es=3412,Ta=3413,da=3414,Ma=3415,_c=33901,bc=33902,Df=3379,zu=3386,If=34921,wc=36347,Gd=36348,Rl=35661,Lf=35660,dl=34930,Ec=36349,Os=34076,Oc=34024,xc=7936,Vd=7937,Ff=7938,zr=35724,Vr=34047,$f=36063,lu=34852,pa=3553,xs=34067,Bf=34069,jo=33984,jl=6408,Cl=5126,Ss=5121,uu=36160,mi=36053,Sc=36064,Uf=16384,Ac=function(F,ae){var be=1;ae.ext_texture_filter_anisotropic&&(be=F.getParameter(Vr));var Qe=1,ct=1;ae.webgl_draw_buffers&&(Qe=F.getParameter(lu),ct=F.getParameter($f));var Ke=!!ae.oes_texture_float;if(Ke){var lt=F.createTexture();F.bindTexture(pa,lt),F.texImage2D(pa,0,jl,1,1,0,jl,Cl,null);var Pt=F.createFramebuffer();if(F.bindFramebuffer(uu,Pt),F.framebufferTexture2D(uu,Sc,pa,lt,0),F.bindTexture(pa,null),F.checkFramebufferStatus(uu)!==mi)Ke=!1;else{F.viewport(0,0,1,1),F.clearColor(1,0,0,1),F.clear(Uf);var Dt=vo.allocType(Cl,4);F.readPixels(0,0,1,1,jl,Cl,Dt),F.getError()?Ke=!1:(F.deleteFramebuffer(Pt),F.deleteTexture(lt),Ke=Dt[0]===1),vo.freeType(Dt)}}var jt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ut=!0;if(!jt){var Vt=F.createTexture(),Ut=vo.allocType(Ss,36);F.activeTexture(jo),F.bindTexture(xs,Vt),F.texImage2D(Bf,0,jl,3,3,0,jl,Ss,Ut),vo.freeType(Ut),F.bindTexture(xs,null),F.deleteTexture(Vt),ut=!F.getError()}return{colorBits:[F.getParameter(qi),F.getParameter(ta),F.getParameter(Es),F.getParameter(Ta)],depthBits:F.getParameter(da),stencilBits:F.getParameter(Ma),subpixelBits:F.getParameter(gc),extensions:Object.keys(ae).filter(function(kt){return!!ae[kt]}),maxAnisotropic:be,maxDrawbuffers:Qe,maxColorAttachments:ct,pointSizeDims:F.getParameter(_c),lineWidthDims:F.getParameter(bc),maxViewportDims:F.getParameter(zu),maxCombinedTextureUnits:F.getParameter(Rl),maxCubeMapSize:F.getParameter(Os),maxRenderbufferSize:F.getParameter(Oc),maxTextureUnits:F.getParameter(dl),maxTextureSize:F.getParameter(Df),maxAttributes:F.getParameter(If),maxVertexUniforms:F.getParameter(wc),maxVertexTextureUnits:F.getParameter(Lf),maxVaryingVectors:F.getParameter(Gd),maxFragmentUniforms:F.getParameter(Ec),glsl:F.getParameter(zr),renderer:F.getParameter(Vd),vendor:F.getParameter(xc),version:F.getParameter(Ff),readFloat:Ke,npotTextureCube:ut}};function Ni(F){return!!F&&typeof F=="object"&&Array.isArray(F.shape)&&Array.isArray(F.stride)&&typeof F.offset=="number"&&F.shape.length===F.stride.length&&(Array.isArray(F.data)||n(F.data))}var ri=function(F){return Object.keys(F).map(function(ae){return F[ae]})},na={shape:ji,flatten:Vf};function to(F,ae,be){for(var Qe=0;Qe<ae;++Qe)be[Qe]=F[Qe]}function Gf(F,ae,be,Qe){for(var ct=0,Ke=0;Ke<ae;++Ke)for(var lt=F[Ke],Pt=0;Pt<be;++Pt)Qe[ct++]=lt[Pt]}function Ri(F,ae,be,Qe,ct,Ke){for(var lt=Ke,Pt=0;Pt<ae;++Pt)for(var Dt=F[Pt],jt=0;jt<be;++jt)for(var ut=Dt[jt],Vt=0;Vt<Qe;++Vt)ct[lt++]=ut[Vt]}function Tc(F,ae,be,Qe,ct){for(var Ke=1,lt=be+1;lt<ae.length;++lt)Ke*=ae[lt];var Pt=ae[be];if(ae.length-be===4){var Dt=ae[be+1],jt=ae[be+2],ut=ae[be+3];for(lt=0;lt<Pt;++lt)Ri(F[lt],Dt,jt,ut,Qe,ct),ct+=Ke}else for(lt=0;lt<Pt;++lt)Tc(F[lt],ae,be+1,Qe,ct),ct+=Ke}function Vf(F,ae,be,Qe){var ct=1;if(ae.length)for(var Ke=0;Ke<ae.length;++Ke)ct*=ae[Ke];else ct=0;var lt=Qe||vo.allocType(be,ct);switch(ae.length){case 0:break;case 1:to(F,ae[0],lt);break;case 2:Gf(F,ae[0],ae[1],lt);break;case 3:Ri(F,ae[0],ae[1],ae[2],lt,0);break;default:Tc(F,ae,0,lt,0)}return lt}function ji(F){for(var ae=[],be=F;be.length;be=be[0])ae.push(be.length);return ae}var Ti={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Mc=5120,Fr=5122,oi=5124,As=5121,Wf=5123,Pc=5125,Ts=5126,Ga=5126,Ci={int8:Mc,int16:Fr,int32:oi,uint8:As,uint16:Wf,uint32:Pc,float:Ts,float32:Ga},su=35048,Ki=35040,ha={dynamic:su,stream:Ki,static:35044},Mr=na.flatten,Di=na.shape,Pa=35044,fi=35040,cu=5121,Dl=5126,ka=[];ka[5120]=1,ka[5122]=2,ka[5124]=4,ka[5121]=1,ka[5123]=2,ka[5125]=4,ka[5126]=4;function uo(F){return Ti[Object.prototype.toString.call(F)]|0}function Hu(F,ae){for(var be=0;be<ae.length;++be)F[be]=ae[be]}function Va(F,ae,be,Qe,ct,Ke,lt){for(var Pt=0,Dt=0;Dt<be;++Dt)for(var jt=0;jt<Qe;++jt)F[Pt++]=ae[ct*Dt+Ke*jt+lt]}function va(F,ae,be,Qe){var ct=0,Ke={};function lt(We){this.id=ct++,this.buffer=F.createBuffer(),this.type=We,this.usage=Pa,this.byteLength=0,this.dimension=1,this.dtype=cu,this.persistentData=null,be.profile&&(this.stats={size:0})}lt.prototype.bind=function(){F.bindBuffer(this.type,this.buffer)},lt.prototype.destroy=function(){Ut(this)};var Pt=[];function Dt(We,it){var Lt=Pt.pop();return Lt||(Lt=new lt(We)),Lt.bind(),Vt(Lt,it,fi,0,1,!1),Lt}function jt(We){Pt.push(We)}function ut(We,it,Lt){We.byteLength=it.byteLength,F.bufferData(We.type,it,Lt)}function Vt(We,it,Lt,Kt,xt,Zt){var St;if(We.usage=Lt,Array.isArray(it)){if(We.dtype=Kt||Dl,it.length>0){var Wt;if(Array.isArray(it[0])){St=Di(it);for(var bt=1,Xt=1;Xt<St.length;++Xt)bt*=St[Xt];We.dimension=bt,Wt=Mr(it,St,We.dtype),ut(We,Wt,Lt),Zt?We.persistentData=Wt:vo.freeType(Wt)}else if(typeof it[0]=="number"){We.dimension=xt;var Mn=vo.allocType(We.dtype,it.length);Hu(Mn,it),ut(We,Mn,Lt),Zt?We.persistentData=Mn:vo.freeType(Mn)}else n(it[0])?(We.dimension=it[0].length,We.dtype=Kt||uo(it[0])||Dl,Wt=Mr(it,[it.length,it[0].length],We.dtype),ut(We,Wt,Lt),Zt?We.persistentData=Wt:vo.freeType(Wt)):oe.raise("invalid buffer data")}}else if(n(it))We.dtype=Kt||uo(it),We.dimension=xt,ut(We,it,Lt),Zt&&(We.persistentData=new Uint8Array(new Uint8Array(it.buffer)));else if(Ni(it)){St=it.shape;var Wn=it.stride,It=it.offset,At=0,Et=0,Cn=0,tr=0;St.length===1?(At=St[0],Et=1,Cn=Wn[0],tr=0):St.length===2?(At=St[0],Et=St[1],Cn=Wn[0],tr=Wn[1]):oe.raise("invalid shape"),We.dtype=Kt||uo(it.data)||Dl,We.dimension=Et;var un=vo.allocType(We.dtype,At*Et);Va(un,it.data,At,Et,Cn,tr,It),ut(We,un,Lt),Zt?We.persistentData=un:vo.freeType(un)}else it instanceof ArrayBuffer?(We.dtype=cu,We.dimension=xt,ut(We,it,Lt),Zt&&(We.persistentData=new Uint8Array(new Uint8Array(it)))):oe.raise("invalid buffer data")}function Ut(We){ae.bufferCount--,Qe(We);var it=We.buffer;oe(it,"buffer must not be deleted already"),F.deleteBuffer(it),We.buffer=null,delete Ke[We.id]}function kt(We,it,Lt,Kt){ae.bufferCount++;var xt=new lt(it);Ke[xt.id]=xt;function Zt(bt){var Xt=Pa,Mn=null,Wn=0,It=0,At=1;return Array.isArray(bt)||n(bt)||Ni(bt)||bt instanceof ArrayBuffer?Mn=bt:typeof bt=="number"?Wn=bt|0:bt&&(oe.type(bt,"object","buffer arguments must be an object, a number or an array"),"data"in bt&&(oe(Mn===null||Array.isArray(Mn)||n(Mn)||Ni(Mn),"invalid data for buffer"),Mn=bt.data),"usage"in bt&&(oe.parameter(bt.usage,ha,"invalid buffer usage"),Xt=ha[bt.usage]),"type"in bt&&(oe.parameter(bt.type,Ci,"invalid buffer type"),It=Ci[bt.type]),"dimension"in bt&&(oe.type(bt.dimension,"number","invalid dimension"),At=bt.dimension|0),"length"in bt&&(oe.nni(Wn,"buffer length must be a nonnegative integer"),Wn=bt.length|0)),xt.bind(),Mn?Vt(xt,Mn,Xt,It,At,Kt):(Wn&&F.bufferData(xt.type,Wn,Xt),xt.dtype=It||cu,xt.usage=Xt,xt.dimension=At,xt.byteLength=Wn),be.profile&&(xt.stats.size=xt.byteLength*ka[xt.dtype]),Zt}function St(bt,Xt){oe(Xt+bt.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+bt.byteLength+" starting from offset "+Xt+" to a buffer of size "+xt.byteLength),F.bufferSubData(xt.type,Xt,bt)}function Wt(bt,Xt){var Mn=(Xt||0)|0,Wn;if(xt.bind(),n(bt)||bt instanceof ArrayBuffer)St(bt,Mn);else if(Array.isArray(bt)){if(bt.length>0)if(typeof bt[0]=="number"){var It=vo.allocType(xt.dtype,bt.length);Hu(It,bt),St(It,Mn),vo.freeType(It)}else if(Array.isArray(bt[0])||n(bt[0])){Wn=Di(bt);var At=Mr(bt,Wn,xt.dtype);St(At,Mn),vo.freeType(At)}else oe.raise("invalid buffer data")}else if(Ni(bt)){Wn=bt.shape;var Et=bt.stride,Cn=0,tr=0,un=0,Qn=0;Wn.length===1?(Cn=Wn[0],tr=1,un=Et[0],Qn=0):Wn.length===2?(Cn=Wn[0],tr=Wn[1],un=Et[0],Qn=Et[1]):oe.raise("invalid shape");var Vn=Array.isArray(bt.data)?xt.dtype:uo(bt.data),rr=vo.allocType(Vn,Cn*tr);Va(rr,bt.data,Cn,tr,un,Qn,bt.offset),St(rr,Mn),vo.freeType(rr)}else oe.raise("invalid data for buffer subdata");return Zt}return Lt||Zt(We),Zt._reglType="buffer",Zt._buffer=xt,Zt.subdata=Wt,be.profile&&(Zt.stats=xt.stats),Zt.destroy=function(){Ut(xt)},Zt}function _t(){ri(Ke).forEach(function(We){We.buffer=F.createBuffer(),F.bindBuffer(We.type,We.buffer),F.bufferData(We.type,We.persistentData||We.byteLength,We.usage)})}return be.profile&&(ae.getTotalBufferSize=function(){var We=0;return Object.keys(Ke).forEach(function(it){We+=Ke[it].stats.size}),We}),{create:kt,createStream:Dt,destroyStream:jt,clear:function(){ri(Ke).forEach(Ut),Pt.forEach(Ut)},getBuffer:function(We){return We&&We._buffer instanceof lt?We._buffer:null},restore:_t,_initBuffer:Vt}}var kc=0,Wd=0,Nc=1,Vo=1,Il=4,Wa=4,Yo={points:kc,point:Wd,lines:Nc,line:Vo,triangles:Il,triangle:Wa,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Rc=0,ra=1,ya=4,Ms=5120,Ii=5121,Zi=5122,ii=5123,oa=5124,Mi=5125,at=34963,Ct=35040,Ft=35044;function fn(F,ae,be,Qe){var ct={},Ke=0,lt={uint8:Ii,uint16:ii};ae.oes_element_index_uint&&(lt.uint32=Mi);function Pt(_t){this.id=Ke++,ct[this.id]=this,this.buffer=_t,this.primType=ya,this.vertCount=0,this.type=0}Pt.prototype.bind=function(){this.buffer.bind()};var Dt=[];function jt(_t){var We=Dt.pop();return We||(We=new Pt(be.create(null,at,!0,!1)._buffer)),Vt(We,_t,Ct,-1,-1,0,0),We}function ut(_t){Dt.push(_t)}function Vt(_t,We,it,Lt,Kt,xt,Zt){_t.buffer.bind();var St;if(We){var Wt=Zt;!Zt&&(!n(We)||Ni(We)&&!n(We.data))&&(Wt=ae.oes_element_index_uint?Mi:ii),be._initBuffer(_t.buffer,We,it,Wt,3)}else F.bufferData(at,xt,it),_t.buffer.dtype=St||Ii,_t.buffer.usage=it,_t.buffer.dimension=3,_t.buffer.byteLength=xt;if(St=Zt,!Zt){switch(_t.buffer.dtype){case Ii:case Ms:St=Ii;break;case ii:case Zi:St=ii;break;case Mi:case oa:St=Mi;break;default:oe.raise("unsupported type for element array")}_t.buffer.dtype=St}_t.type=St,oe(St!==Mi||!!ae.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var bt=Kt;bt<0&&(bt=_t.buffer.byteLength,St===ii?bt>>=1:St===Mi&&(bt>>=2)),_t.vertCount=bt;var Xt=Lt;if(Lt<0){Xt=ya;var Mn=_t.buffer.dimension;Mn===1&&(Xt=Rc),Mn===2&&(Xt=ra),Mn===3&&(Xt=ya)}_t.primType=Xt}function Ut(_t){Qe.elementsCount--,oe(_t.buffer!==null,"must not double destroy elements"),delete ct[_t.id],_t.buffer.destroy(),_t.buffer=null}function kt(_t,We){var it=be.create(null,at,!0),Lt=new Pt(it._buffer);Qe.elementsCount++;function Kt(xt){if(!xt)it(),Lt.primType=ya,Lt.vertCount=0,Lt.type=Ii;else if(typeof xt=="number")it(xt),Lt.primType=ya,Lt.vertCount=xt|0,Lt.type=Ii;else{var Zt=null,St=Ft,Wt=-1,bt=-1,Xt=0,Mn=0;Array.isArray(xt)||n(xt)||Ni(xt)?Zt=xt:(oe.type(xt,"object","invalid arguments for elements"),"data"in xt&&(Zt=xt.data,oe(Array.isArray(Zt)||n(Zt)||Ni(Zt),"invalid data for element buffer")),"usage"in xt&&(oe.parameter(xt.usage,ha,"invalid element buffer usage"),St=ha[xt.usage]),"primitive"in xt&&(oe.parameter(xt.primitive,Yo,"invalid element buffer primitive"),Wt=Yo[xt.primitive]),"count"in xt&&(oe(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),bt=xt.count|0),"type"in xt&&(oe.parameter(xt.type,lt,"invalid buffer type"),Mn=lt[xt.type]),"length"in xt?Xt=xt.length|0:(Xt=bt,Mn===ii||Mn===Zi?Xt*=2:(Mn===Mi||Mn===oa)&&(Xt*=4))),Vt(Lt,Zt,St,Wt,bt,Xt,Mn)}return Kt}return Kt(_t),Kt._reglType="elements",Kt._elements=Lt,Kt.subdata=function(xt,Zt){return it.subdata(xt,Zt),Kt},Kt.destroy=function(){Ut(Lt)},Kt}return{create:kt,createStream:jt,destroyStream:ut,getElements:function(_t){return typeof _t=="function"&&_t._elements instanceof Pt?_t._elements:null},clear:function(){ri(ct).forEach(Ut)}}}var ur=new Float32Array(1),Pr=new Uint32Array(ur.buffer),so=5123;function T(F){for(var ae=vo.allocType(so,F.length),be=0;be<F.length;++be)if(isNaN(F[be]))ae[be]=65535;else if(F[be]===1/0)ae[be]=31744;else if(F[be]===-1/0)ae[be]=64512;else{ur[0]=F[be];var Qe=Pr[0],ct=Qe>>>31<<15,Ke=(Qe<<1>>>24)-127,lt=Qe>>13&1024-1;if(Ke<-24)ae[be]=ct;else if(Ke<-14){var Pt=-14-Ke;ae[be]=ct+(lt+1024>>Pt)}else Ke>15?ae[be]=ct+31744:ae[be]=ct+(Ke+15<<10)+lt}return ae}function M(F){return Array.isArray(F)||n(F)}var $=function(F){return!(F&F-1)&&!!F},ne=34467,ge=3553,Ge=34067,pt=34069,Ht=6408,bn=6406,yr=6407,ln=6409,Wr=6410,pr=32854,Dr=32855,ia=36194,_o=32819,Ji=32820,pl=33635,hl=34042,Ll=6402,fu=34041,za=35904,du=35906,qo=36193,Fl=33776,vl=33777,Ha=33778,Xa=33779,Xu=35986,nh=35987,rh=34798,zd=35840,jc=35841,Yu=35842,zf=35843,oh=36196,qu=5121,Cc=5123,Hf=5125,Co=5126,Li=10242,Xf=10243,Yf=10497,Ps=33071,Vv=33648,ks=10240,yl=10241,Dc=9728,Ku=9729,pu=9984,Ns=9985,Ic=9986,hu=9987,Wv=33170,Lc=4352,zv=4353,Hv=4354,ih=34046,qf=3317,Pi=37440,ah=37441,ie=37443,Zu=37444,$l=33984,Na=[pu,Ic,Ns,hu],kr=[0,ln,Wr,yr,Ht],gi={};gi[ln]=gi[bn]=gi[Ll]=1,gi[fu]=gi[Wr]=2,gi[yr]=gi[za]=3,gi[Ht]=gi[du]=4;function $r(F){return"[object "+F+"]"}var Ya=$r("HTMLCanvasElement"),Bl=$r("OffscreenCanvas"),ma=$r("CanvasRenderingContext2D"),Kf=$r("ImageBitmap"),Zf=$r("HTMLImageElement"),Hd=$r("HTMLVideoElement"),lh=Object.keys(Ti).concat([Ya,Bl,ma,Kf,Zf,Hd]),Ul=[];Ul[qu]=1,Ul[Co]=4,Ul[qo]=2,Ul[Cc]=2,Ul[Hf]=4;var Do=[];Do[pr]=2,Do[Dr]=2,Do[ia]=2,Do[fu]=4,Do[Fl]=.5,Do[vl]=.5,Do[Ha]=1,Do[Xa]=1,Do[Xu]=.5,Do[nh]=1,Do[rh]=1,Do[zd]=.5,Do[jc]=.25,Do[Yu]=.5,Do[zf]=.25,Do[oh]=.5;function Rs(F){return Array.isArray(F)&&(F.length===0||typeof F[0]=="number")}function Xd(F){if(!Array.isArray(F))return!1;var ae=F.length;return!(ae===0||!M(F[0]))}function Gl(F){return Object.prototype.toString.call(F)}function qa(F){return Gl(F)===Ya}function Fc(F){return Gl(F)===Bl}function vu(F){return Gl(F)===ma}function ga(F){return Gl(F)===Kf}function Yd(F){return Gl(F)===Zf}function qd(F){return Gl(F)===Hd}function Ka(F){if(!F)return!1;var ae=Gl(F);return lh.indexOf(ae)>=0?!0:Rs(F)||Xd(F)||Ni(F)}function yo(F){return Ti[Object.prototype.toString.call(F)]|0}function uh(F,ae){var be=ae.length;switch(F.type){case qu:case Cc:case Hf:case Co:var Qe=vo.allocType(F.type,be);Qe.set(ae),F.data=Qe;break;case qo:F.data=T(ae);break;default:oe.raise("unsupported texture type, must specify a typed array")}}function Kd(F,ae){return vo.allocType(F.type===qo?Co:F.type,ae)}function Io(F,ae){F.type===qo?(F.data=T(ae),vo.freeType(ae)):F.data=ae}function Hr(F,ae,be,Qe,ct,Ke){for(var lt=F.width,Pt=F.height,Dt=F.channels,jt=lt*Pt*Dt,ut=Kd(F,jt),Vt=0,Ut=0;Ut<Pt;++Ut)for(var kt=0;kt<lt;++kt)for(var _t=0;_t<Dt;++_t)ut[Vt++]=ae[be*kt+Qe*Ut+ct*_t+Ke];Io(F,ut)}function Ko(F,ae,be,Qe,ct,Ke){var lt;if(typeof Do[F]<"u"?lt=Do[F]:lt=gi[F]*Ul[ae],Ke&&(lt*=6),ct){for(var Pt=0,Dt=be;Dt>=1;)Pt+=lt*Dt*Dt,Dt/=2;return Pt}else return lt*be*Qe}function Or(F,ae,be,Qe,ct,Ke,lt){var Pt={"don't care":Lc,"dont care":Lc,nice:Hv,fast:zv},Dt={repeat:Yf,clamp:Ps,mirror:Vv},jt={nearest:Dc,linear:Ku},ut=o({mipmap:hu,"nearest mipmap nearest":pu,"linear mipmap nearest":Ns,"nearest mipmap linear":Ic,"linear mipmap linear":hu},jt),Vt={none:0,browser:Zu},Ut={uint8:qu,rgba4:_o,rgb565:pl,"rgb5 a1":Ji},kt={alpha:bn,luminance:ln,"luminance alpha":Wr,rgb:yr,rgba:Ht,rgba4:pr,"rgb5 a1":Dr,rgb565:ia},_t={};ae.ext_srgb&&(kt.srgb=za,kt.srgba=du),ae.oes_texture_float&&(Ut.float32=Ut.float=Co),ae.oes_texture_half_float&&(Ut.float16=Ut["half float"]=qo),ae.webgl_depth_texture&&(o(kt,{depth:Ll,"depth stencil":fu}),o(Ut,{uint16:Cc,uint32:Hf,"depth stencil":hl})),ae.webgl_compressed_texture_s3tc&&o(_t,{"rgb s3tc dxt1":Fl,"rgba s3tc dxt1":vl,"rgba s3tc dxt3":Ha,"rgba s3tc dxt5":Xa}),ae.webgl_compressed_texture_atc&&o(_t,{"rgb atc":Xu,"rgba atc explicit alpha":nh,"rgba atc interpolated alpha":rh}),ae.webgl_compressed_texture_pvrtc&&o(_t,{"rgb pvrtc 4bppv1":zd,"rgb pvrtc 2bppv1":jc,"rgba pvrtc 4bppv1":Yu,"rgba pvrtc 2bppv1":zf}),ae.webgl_compressed_texture_etc1&&(_t["rgb etc1"]=oh);var We=Array.prototype.slice.call(F.getParameter(ne));Object.keys(_t).forEach(function(ye){var tt=_t[ye];We.indexOf(tt)>=0&&(kt[ye]=tt)});var it=Object.keys(kt);be.textureFormats=it;var Lt=[];Object.keys(kt).forEach(function(ye){var tt=kt[ye];Lt[tt]=ye});var Kt=[];Object.keys(Ut).forEach(function(ye){var tt=Ut[ye];Kt[tt]=ye});var xt=[];Object.keys(jt).forEach(function(ye){var tt=jt[ye];xt[tt]=ye});var Zt=[];Object.keys(ut).forEach(function(ye){var tt=ut[ye];Zt[tt]=ye});var St=[];Object.keys(Dt).forEach(function(ye){var tt=Dt[ye];St[tt]=ye});var Wt=it.reduce(function(ye,tt){var qe=kt[tt];return qe===ln||qe===bn||qe===ln||qe===Wr||qe===Ll||qe===fu||ae.ext_srgb&&(qe===za||qe===du)?ye[qe]=qe:qe===Dr||tt.indexOf("rgba")>=0?ye[qe]=Ht:ye[qe]=yr,ye},{});function bt(){this.internalformat=Ht,this.format=Ht,this.type=qu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zu,this.width=0,this.height=0,this.channels=0}function Xt(ye,tt){ye.internalformat=tt.internalformat,ye.format=tt.format,ye.type=tt.type,ye.compressed=tt.compressed,ye.premultiplyAlpha=tt.premultiplyAlpha,ye.flipY=tt.flipY,ye.unpackAlignment=tt.unpackAlignment,ye.colorSpace=tt.colorSpace,ye.width=tt.width,ye.height=tt.height,ye.channels=tt.channels}function Mn(ye,tt){if(!(typeof tt!="object"||!tt)){if("premultiplyAlpha"in tt&&(oe.type(tt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ye.premultiplyAlpha=tt.premultiplyAlpha),"flipY"in tt&&(oe.type(tt.flipY,"boolean","invalid texture flip"),ye.flipY=tt.flipY),"alignment"in tt&&(oe.oneOf(tt.alignment,[1,2,4,8],"invalid texture unpack alignment"),ye.unpackAlignment=tt.alignment),"colorSpace"in tt&&(oe.parameter(tt.colorSpace,Vt,"invalid colorSpace"),ye.colorSpace=Vt[tt.colorSpace]),"type"in tt){var qe=tt.type;oe(ae.oes_texture_float||!(qe==="float"||qe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),oe(ae.oes_texture_half_float||!(qe==="half float"||qe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),oe(ae.webgl_depth_texture||!(qe==="uint16"||qe==="uint32"||qe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),oe.parameter(qe,Ut,"invalid texture type"),ye.type=Ut[qe]}var tn=ye.width,hr=ye.height,se=ye.channels,ee=!1;"shape"in tt?(oe(Array.isArray(tt.shape)&&tt.shape.length>=2,"shape must be an array"),tn=tt.shape[0],hr=tt.shape[1],tt.shape.length===3&&(se=tt.shape[2],oe(se>0&&se<=4,"invalid number of channels"),ee=!0),oe(tn>=0&&tn<=be.maxTextureSize,"invalid width"),oe(hr>=0&&hr<=be.maxTextureSize,"invalid height")):("radius"in tt&&(tn=hr=tt.radius,oe(tn>=0&&tn<=be.maxTextureSize,"invalid radius")),"width"in tt&&(tn=tt.width,oe(tn>=0&&tn<=be.maxTextureSize,"invalid width")),"height"in tt&&(hr=tt.height,oe(hr>=0&&hr<=be.maxTextureSize,"invalid height")),"channels"in tt&&(se=tt.channels,oe(se>0&&se<=4,"invalid number of channels"),ee=!0)),ye.width=tn|0,ye.height=hr|0,ye.channels=se|0;var Me=!1;if("format"in tt){var Ue=tt.format;oe(ae.webgl_depth_texture||!(Ue==="depth"||Ue==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),oe.parameter(Ue,kt,"invalid texture format");var ze=ye.internalformat=kt[Ue];ye.format=Wt[ze],Ue in Ut&&("type"in tt||(ye.type=Ut[Ue])),Ue in _t&&(ye.compressed=!0),Me=!0}!ee&&Me?ye.channels=gi[ye.format]:ee&&!Me?ye.channels!==kr[ye.format]&&(ye.format=ye.internalformat=kr[ye.channels]):Me&&ee&&oe(ye.channels===gi[ye.format],"number of channels inconsistent with specified format")}}function Wn(ye){F.pixelStorei(Pi,ye.flipY),F.pixelStorei(ah,ye.premultiplyAlpha),F.pixelStorei(ie,ye.colorSpace),F.pixelStorei(qf,ye.unpackAlignment)}function It(){bt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function At(ye,tt){var qe=null;if(Ka(tt)?qe=tt:tt&&(oe.type(tt,"object","invalid pixel data type"),Mn(ye,tt),"x"in tt&&(ye.xOffset=tt.x|0),"y"in tt&&(ye.yOffset=tt.y|0),Ka(tt.data)&&(qe=tt.data)),oe(!ye.compressed||qe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),tt.copy){oe(!qe,"can not specify copy and data field for the same texture");var tn=ct.viewportWidth,hr=ct.viewportHeight;ye.width=ye.width||tn-ye.xOffset,ye.height=ye.height||hr-ye.yOffset,ye.needsCopy=!0,oe(ye.xOffset>=0&&ye.xOffset<tn&&ye.yOffset>=0&&ye.yOffset<hr&&ye.width>0&&ye.width<=tn&&ye.height>0&&ye.height<=hr,"copy texture read out of bounds")}else if(!qe)ye.width=ye.width||1,ye.height=ye.height||1,ye.channels=ye.channels||4;else if(n(qe))ye.channels=ye.channels||4,ye.data=qe,!("type"in tt)&&ye.type===qu&&(ye.type=yo(qe));else if(Rs(qe))ye.channels=ye.channels||4,uh(ye,qe),ye.alignment=1,ye.needsFree=!0;else if(Ni(qe)){var se=qe.data;!Array.isArray(se)&&ye.type===qu&&(ye.type=yo(se));var ee=qe.shape,Me=qe.stride,Ue,ze,Ne,Pe,Ie,de;ee.length===3?(Ne=ee[2],de=Me[2]):(oe(ee.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ne=1,de=1),Ue=ee[0],ze=ee[1],Pe=Me[0],Ie=Me[1],ye.alignment=1,ye.width=Ue,ye.height=ze,ye.channels=Ne,ye.format=ye.internalformat=kr[Ne],ye.needsFree=!0,Hr(ye,se,Pe,Ie,de,qe.offset)}else if(qa(qe)||Fc(qe)||vu(qe))qa(qe)||Fc(qe)?ye.element=qe:ye.element=qe.canvas,ye.width=ye.element.width,ye.height=ye.element.height,ye.channels=4;else if(ga(qe))ye.element=qe,ye.width=qe.width,ye.height=qe.height,ye.channels=4;else if(Yd(qe))ye.element=qe,ye.width=qe.naturalWidth,ye.height=qe.naturalHeight,ye.channels=4;else if(qd(qe))ye.element=qe,ye.width=qe.videoWidth,ye.height=qe.videoHeight,ye.channels=4;else if(Xd(qe)){var Oe=ye.width||qe[0].length,ce=ye.height||qe.length,Be=ye.channels;M(qe[0][0])?Be=Be||qe[0][0].length:Be=Be||1;for(var Xe=na.shape(qe),d=1,m=0;m<Xe.length;++m)d*=Xe[m];var E=Kd(ye,d);na.flatten(qe,Xe,"",E),Io(ye,E),ye.alignment=1,ye.width=Oe,ye.height=ce,ye.channels=Be,ye.format=ye.internalformat=kr[Be],ye.needsFree=!0}ye.type===Co?oe(be.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ye.type===qo&&oe(be.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Et(ye,tt,qe){var tn=ye.element,hr=ye.data,se=ye.internalformat,ee=ye.format,Me=ye.type,Ue=ye.width,ze=ye.height;Wn(ye),tn?F.texImage2D(tt,qe,ee,ee,Me,tn):ye.compressed?F.compressedTexImage2D(tt,qe,se,Ue,ze,0,hr):ye.needsCopy?(Qe(),F.copyTexImage2D(tt,qe,ee,ye.xOffset,ye.yOffset,Ue,ze,0)):F.texImage2D(tt,qe,ee,Ue,ze,0,ee,Me,hr||null)}function Cn(ye,tt,qe,tn,hr){var se=ye.element,ee=ye.data,Me=ye.internalformat,Ue=ye.format,ze=ye.type,Ne=ye.width,Pe=ye.height;Wn(ye),se?F.texSubImage2D(tt,hr,qe,tn,Ue,ze,se):ye.compressed?F.compressedTexSubImage2D(tt,hr,qe,tn,Me,Ne,Pe,ee):ye.needsCopy?(Qe(),F.copyTexSubImage2D(tt,hr,qe,tn,ye.xOffset,ye.yOffset,Ne,Pe)):F.texSubImage2D(tt,hr,qe,tn,Ne,Pe,Ue,ze,ee)}var tr=[];function un(){return tr.pop()||new It}function Qn(ye){ye.needsFree&&vo.freeType(ye.data),It.call(ye),tr.push(ye)}function Vn(){bt.call(this),this.genMipmaps=!1,this.mipmapHint=Lc,this.mipmask=0,this.images=Array(16)}function rr(ye,tt,qe){var tn=ye.images[0]=un();ye.mipmask=1,tn.width=ye.width=tt,tn.height=ye.height=qe,tn.channels=ye.channels=4}function gr(ye,tt){var qe=null;if(Ka(tt))qe=ye.images[0]=un(),Xt(qe,ye),At(qe,tt),ye.mipmask=1;else if(Mn(ye,tt),Array.isArray(tt.mipmap))for(var tn=tt.mipmap,hr=0;hr<tn.length;++hr)qe=ye.images[hr]=un(),Xt(qe,ye),qe.width>>=hr,qe.height>>=hr,At(qe,tn[hr]),ye.mipmask|=1<<hr;else qe=ye.images[0]=un(),Xt(qe,ye),At(qe,tt),ye.mipmask=1;Xt(ye,ye.images[0]),ye.compressed&&(ye.internalformat===Fl||ye.internalformat===vl||ye.internalformat===Ha||ye.internalformat===Xa)&&oe(ye.width%4===0&&ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Mo(ye,tt){for(var qe=ye.images,tn=0;tn<qe.length;++tn){if(!qe[tn])return;Et(qe[tn],tt,tn)}}var Fo=[];function cr(){var ye=Fo.pop()||new Vn;bt.call(ye),ye.mipmask=0;for(var tt=0;tt<16;++tt)ye.images[tt]=null;return ye}function Wo(ye){for(var tt=ye.images,qe=0;qe<tt.length;++qe)tt[qe]&&Qn(tt[qe]),tt[qe]=null;Fo.push(ye)}function Qr(){this.minFilter=Dc,this.magFilter=Dc,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Lc}function Po(ye,tt){if("min"in tt){var qe=tt.min;oe.parameter(qe,ut),ye.minFilter=ut[qe],Na.indexOf(ye.minFilter)>=0&&!("faces"in tt)&&(ye.genMipmaps=!0)}if("mag"in tt){var tn=tt.mag;oe.parameter(tn,jt),ye.magFilter=jt[tn]}var hr=ye.wrapS,se=ye.wrapT;if("wrap"in tt){var ee=tt.wrap;typeof ee=="string"?(oe.parameter(ee,Dt),hr=se=Dt[ee]):Array.isArray(ee)&&(oe.parameter(ee[0],Dt),oe.parameter(ee[1],Dt),hr=Dt[ee[0]],se=Dt[ee[1]])}else{if("wrapS"in tt){var Me=tt.wrapS;oe.parameter(Me,Dt),hr=Dt[Me]}if("wrapT"in tt){var Ue=tt.wrapT;oe.parameter(Ue,Dt),se=Dt[Ue]}}if(ye.wrapS=hr,ye.wrapT=se,"anisotropic"in tt){var ze=tt.anisotropic;oe(typeof ze=="number"&&ze>=1&&ze<=be.maxAnisotropic,"aniso samples must be between 1 and "),ye.anisotropic=tt.anisotropic}if("mipmap"in tt){var Ne=!1;switch(typeof tt.mipmap){case"string":oe.parameter(tt.mipmap,Pt,"invalid mipmap hint"),ye.mipmapHint=Pt[tt.mipmap],ye.genMipmaps=!0,Ne=!0;break;case"boolean":Ne=ye.genMipmaps=tt.mipmap;break;case"object":oe(Array.isArray(tt.mipmap),"invalid mipmap type"),ye.genMipmaps=!1,Ne=!0;break;default:oe.raise("invalid mipmap type")}Ne&&!("min"in tt)&&(ye.minFilter=pu)}}function $o(ye,tt){F.texParameteri(tt,yl,ye.minFilter),F.texParameteri(tt,ks,ye.magFilter),F.texParameteri(tt,Li,ye.wrapS),F.texParameteri(tt,Xf,ye.wrapT),ae.ext_texture_filter_anisotropic&&F.texParameteri(tt,ih,ye.anisotropic),ye.genMipmaps&&(F.hint(Wv,ye.mipmapHint),F.generateMipmap(tt))}var Eo=0,mo={},ei=be.maxTextureUnits,Oo=Array(ei).map(function(){return null});function Zn(ye){bt.call(this),this.mipmask=0,this.internalformat=Ht,this.id=Eo++,this.refCount=1,this.target=ye,this.texture=F.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qr,lt.profile&&(this.stats={size:0})}function ai(ye){F.activeTexture($l),F.bindTexture(ye.target,ye.texture)}function Nr(){var ye=Oo[0];ye?F.bindTexture(ye.target,ye.texture):F.bindTexture(ge,null)}function jn(ye){var tt=ye.texture;oe(tt,"must not double destroy texture");var qe=ye.unit,tn=ye.target;qe>=0&&(F.activeTexture($l+qe),F.bindTexture(tn,null),Oo[qe]=null),F.deleteTexture(tt),ye.texture=null,ye.params=null,ye.pixels=null,ye.refCount=0,delete mo[ye.id],Ke.textureCount--}o(Zn.prototype,{bind:function(){var ye=this;ye.bindCount+=1;var tt=ye.unit;if(tt<0){for(var qe=0;qe<ei;++qe){var tn=Oo[qe];if(tn){if(tn.bindCount>0)continue;tn.unit=-1}Oo[qe]=ye,tt=qe;break}tt>=ei&&oe.raise("insufficient number of texture units"),lt.profile&&Ke.maxTextureUnits<tt+1&&(Ke.maxTextureUnits=tt+1),ye.unit=tt,F.activeTexture($l+tt),F.bindTexture(ye.target,ye.texture)}return tt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&jn(this)}});function fr(ye,tt){var qe=new Zn(ge);mo[qe.id]=qe,Ke.textureCount++;function tn(ee,Me){var Ue=qe.texInfo;Qr.call(Ue);var ze=cr();return typeof ee=="number"?typeof Me=="number"?rr(ze,ee|0,Me|0):rr(ze,ee|0,ee|0):ee?(oe.type(ee,"object","invalid arguments to regl.texture"),Po(Ue,ee),gr(ze,ee)):rr(ze,1,1),Ue.genMipmaps&&(ze.mipmask=(ze.width<<1)-1),qe.mipmask=ze.mipmask,Xt(qe,ze),oe.texture2D(Ue,ze,be),qe.internalformat=ze.internalformat,tn.width=ze.width,tn.height=ze.height,ai(qe),Mo(ze,ge),$o(Ue,ge),Nr(),Wo(ze),lt.profile&&(qe.stats.size=Ko(qe.internalformat,qe.type,ze.width,ze.height,Ue.genMipmaps,!1)),tn.format=Lt[qe.internalformat],tn.type=Kt[qe.type],tn.mag=xt[Ue.magFilter],tn.min=Zt[Ue.minFilter],tn.wrapS=St[Ue.wrapS],tn.wrapT=St[Ue.wrapT],tn}function hr(ee,Me,Ue,ze){oe(!!ee,"must specify image data");var Ne=Me|0,Pe=Ue|0,Ie=ze|0,de=un();return Xt(de,qe),de.width=0,de.height=0,At(de,ee),de.width=de.width||(qe.width>>Ie)-Ne,de.height=de.height||(qe.height>>Ie)-Pe,oe(qe.type===de.type&&qe.format===de.format&&qe.internalformat===de.internalformat,"incompatible format for texture.subimage"),oe(Ne>=0&&Pe>=0&&Ne+de.width<=qe.width&&Pe+de.height<=qe.height,"texture.subimage write out of bounds"),oe(qe.mipmask&1<<Ie,"missing mipmap data"),oe(de.data||de.element||de.needsCopy,"missing image data"),ai(qe),Cn(de,ge,Ne,Pe,Ie),Nr(),Qn(de),tn}function se(ee,Me){var Ue=ee|0,ze=Me|0||Ue;if(Ue===qe.width&&ze===qe.height)return tn;tn.width=qe.width=Ue,tn.height=qe.height=ze,ai(qe);for(var Ne=0;qe.mipmask>>Ne;++Ne){var Pe=Ue>>Ne,Ie=ze>>Ne;if(!Pe||!Ie)break;F.texImage2D(ge,Ne,qe.format,Pe,Ie,0,qe.format,qe.type,null)}return Nr(),lt.profile&&(qe.stats.size=Ko(qe.internalformat,qe.type,Ue,ze,!1,!1)),tn}return tn(ye,tt),tn.subimage=hr,tn.resize=se,tn._reglType="texture2d",tn._texture=qe,lt.profile&&(tn.stats=qe.stats),tn.destroy=function(){qe.decRef()},tn}function zn(ye,tt,qe,tn,hr,se){var ee=new Zn(Ge);mo[ee.id]=ee,Ke.cubeCount++;var Me=new Array(6);function Ue(Pe,Ie,de,Oe,ce,Be){var Xe,d=ee.texInfo;for(Qr.call(d),Xe=0;Xe<6;++Xe)Me[Xe]=cr();if(typeof Pe=="number"||!Pe){var m=Pe|0||1;for(Xe=0;Xe<6;++Xe)rr(Me[Xe],m,m)}else if(typeof Pe=="object")if(Ie)gr(Me[0],Pe),gr(Me[1],Ie),gr(Me[2],de),gr(Me[3],Oe),gr(Me[4],ce),gr(Me[5],Be);else if(Po(d,Pe),Mn(ee,Pe),"faces"in Pe){var E=Pe.faces;for(oe(Array.isArray(E)&&E.length===6,"cube faces must be a length 6 array"),Xe=0;Xe<6;++Xe)oe(typeof E[Xe]=="object"&&!!E[Xe],"invalid input for cube map face"),Xt(Me[Xe],ee),gr(Me[Xe],E[Xe])}else for(Xe=0;Xe<6;++Xe)gr(Me[Xe],Pe);else oe.raise("invalid arguments to cube map");for(Xt(ee,Me[0]),be.npotTextureCube||oe($(ee.width)&&$(ee.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?ee.mipmask=(Me[0].width<<1)-1:ee.mipmask=Me[0].mipmask,oe.textureCube(ee,d,Me,be),ee.internalformat=Me[0].internalformat,Ue.width=Me[0].width,Ue.height=Me[0].height,ai(ee),Xe=0;Xe<6;++Xe)Mo(Me[Xe],pt+Xe);for($o(d,Ge),Nr(),lt.profile&&(ee.stats.size=Ko(ee.internalformat,ee.type,Ue.width,Ue.height,d.genMipmaps,!0)),Ue.format=Lt[ee.internalformat],Ue.type=Kt[ee.type],Ue.mag=xt[d.magFilter],Ue.min=Zt[d.minFilter],Ue.wrapS=St[d.wrapS],Ue.wrapT=St[d.wrapT],Xe=0;Xe<6;++Xe)Wo(Me[Xe]);return Ue}function ze(Pe,Ie,de,Oe,ce){oe(!!Ie,"must specify image data"),oe(typeof Pe=="number"&&Pe===(Pe|0)&&Pe>=0&&Pe<6,"invalid face");var Be=de|0,Xe=Oe|0,d=ce|0,m=un();return Xt(m,ee),m.width=0,m.height=0,At(m,Ie),m.width=m.width||(ee.width>>d)-Be,m.height=m.height||(ee.height>>d)-Xe,oe(ee.type===m.type&&ee.format===m.format&&ee.internalformat===m.internalformat,"incompatible format for texture.subimage"),oe(Be>=0&&Xe>=0&&Be+m.width<=ee.width&&Xe+m.height<=ee.height,"texture.subimage write out of bounds"),oe(ee.mipmask&1<<d,"missing mipmap data"),oe(m.data||m.element||m.needsCopy,"missing image data"),ai(ee),Cn(m,pt+Pe,Be,Xe,d),Nr(),Qn(m),Ue}function Ne(Pe){var Ie=Pe|0;if(Ie!==ee.width){Ue.width=ee.width=Ie,Ue.height=ee.height=Ie,ai(ee);for(var de=0;de<6;++de)for(var Oe=0;ee.mipmask>>Oe;++Oe)F.texImage2D(pt+de,Oe,ee.format,Ie>>Oe,Ie>>Oe,0,ee.format,ee.type,null);return Nr(),lt.profile&&(ee.stats.size=Ko(ee.internalformat,ee.type,Ue.width,Ue.height,!1,!0)),Ue}}return Ue(ye,tt,qe,tn,hr,se),Ue.subimage=ze,Ue.resize=Ne,Ue._reglType="textureCube",Ue._texture=ee,lt.profile&&(Ue.stats=ee.stats),Ue.destroy=function(){ee.decRef()},Ue}function lo(){for(var ye=0;ye<ei;++ye)F.activeTexture($l+ye),F.bindTexture(ge,null),Oo[ye]=null;ri(mo).forEach(jn),Ke.cubeCount=0,Ke.textureCount=0}lt.profile&&(Ke.getTotalTextureSize=function(){var ye=0;return Object.keys(mo).forEach(function(tt){ye+=mo[tt].stats.size}),ye});function Fa(){for(var ye=0;ye<ei;++ye){var tt=Oo[ye];tt&&(tt.bindCount=0,tt.unit=-1,Oo[ye]=null)}ri(mo).forEach(function(qe){qe.texture=F.createTexture(),F.bindTexture(qe.target,qe.texture);for(var tn=0;tn<32;++tn)if(qe.mipmask&1<<tn)if(qe.target===ge)F.texImage2D(ge,tn,qe.internalformat,qe.width>>tn,qe.height>>tn,0,qe.internalformat,qe.type,null);else for(var hr=0;hr<6;++hr)F.texImage2D(pt+hr,tn,qe.internalformat,qe.width>>tn,qe.height>>tn,0,qe.internalformat,qe.type,null);$o(qe.texInfo,qe.target)})}function Zl(){for(var ye=0;ye<ei;++ye){var tt=Oo[ye];tt&&(tt.bindCount=0,tt.unit=-1,Oo[ye]=null),F.activeTexture($l+ye),F.bindTexture(ge,null),F.bindTexture(Ge,null)}}return{create2D:fr,createCube:zn,clear:lo,getTexture:function(ye){return null},restore:Fa,refresh:Zl}}var io=36161,Nn=32854,ao=32855,$c=36194,ml=33189,Jf=36168,bo=34041,xo=35907,Zd=34836,Jd=34842,Bc=34843,Fi=[];Fi[Nn]=2,Fi[ao]=2,Fi[$c]=2,Fi[ml]=2,Fi[Jf]=1,Fi[bo]=4,Fi[xo]=4,Fi[Zd]=16,Fi[Jd]=8,Fi[Bc]=6;function Qf(F,ae,be){return Fi[F]*ae*be}var js=function(F,ae,be,Qe,ct){var Ke={rgba4:Nn,rgb565:$c,"rgb5 a1":ao,depth:ml,stencil:Jf,"depth stencil":bo};ae.ext_srgb&&(Ke.srgba=xo),ae.ext_color_buffer_half_float&&(Ke.rgba16f=Jd,Ke.rgb16f=Bc),ae.webgl_color_buffer_float&&(Ke.rgba32f=Zd);var lt=[];Object.keys(Ke).forEach(function(kt){var _t=Ke[kt];lt[_t]=kt});var Pt=0,Dt={};function jt(kt){this.id=Pt++,this.refCount=1,this.renderbuffer=kt,this.format=Nn,this.width=0,this.height=0,ct.profile&&(this.stats={size:0})}jt.prototype.decRef=function(){--this.refCount<=0&&ut(this)};function ut(kt){var _t=kt.renderbuffer;oe(_t,"must not double destroy renderbuffer"),F.bindRenderbuffer(io,null),F.deleteRenderbuffer(_t),kt.renderbuffer=null,kt.refCount=0,delete Dt[kt.id],Qe.renderbufferCount--}function Vt(kt,_t){var We=new jt(F.createRenderbuffer());Dt[We.id]=We,Qe.renderbufferCount++;function it(Kt,xt){var Zt=0,St=0,Wt=Nn;if(typeof Kt=="object"&&Kt){var bt=Kt;if("shape"in bt){var Xt=bt.shape;oe(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Zt=Xt[0]|0,St=Xt[1]|0}else"radius"in bt&&(Zt=St=bt.radius|0),"width"in bt&&(Zt=bt.width|0),"height"in bt&&(St=bt.height|0);"format"in bt&&(oe.parameter(bt.format,Ke,"invalid renderbuffer format"),Wt=Ke[bt.format])}else typeof Kt=="number"?(Zt=Kt|0,typeof xt=="number"?St=xt|0:St=Zt):Kt?oe.raise("invalid arguments to renderbuffer constructor"):Zt=St=1;if(oe(Zt>0&&St>0&&Zt<=be.maxRenderbufferSize&&St<=be.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===We.width&&St===We.height&&Wt===We.format))return it.width=We.width=Zt,it.height=We.height=St,We.format=Wt,F.bindRenderbuffer(io,We.renderbuffer),F.renderbufferStorage(io,Wt,Zt,St),oe(F.getError()===0,"invalid render buffer format"),ct.profile&&(We.stats.size=Qf(We.format,We.width,We.height)),it.format=lt[We.format],it}function Lt(Kt,xt){var Zt=Kt|0,St=xt|0||Zt;return Zt===We.width&&St===We.height||(oe(Zt>0&&St>0&&Zt<=be.maxRenderbufferSize&&St<=be.maxRenderbufferSize,"invalid renderbuffer size"),it.width=We.width=Zt,it.height=We.height=St,F.bindRenderbuffer(io,We.renderbuffer),F.renderbufferStorage(io,We.format,Zt,St),oe(F.getError()===0,"invalid render buffer format"),ct.profile&&(We.stats.size=Qf(We.format,We.width,We.height))),it}return it(kt,_t),it.resize=Lt,it._reglType="renderbuffer",it._renderbuffer=We,ct.profile&&(it.stats=We.stats),it.destroy=function(){We.decRef()},it}ct.profile&&(Qe.getTotalRenderbufferSize=function(){var kt=0;return Object.keys(Dt).forEach(function(_t){kt+=Dt[_t].stats.size}),kt});function Ut(){ri(Dt).forEach(function(kt){kt.renderbuffer=F.createRenderbuffer(),F.bindRenderbuffer(io,kt.renderbuffer),F.renderbufferStorage(io,kt.format,kt.width,kt.height)}),F.bindRenderbuffer(io,null)}return{create:Vt,clear:function(){ri(Dt).forEach(ut)},restore:Ut}},Ra=36160,yu=36161,Vl=3553,ja=34069,sh=36064,gl=36096,_a=36128,Qd=33306,ep=36053,ed=36054,ch=36055,fh=36057,dh=36061,tp=36193,Cs=5121,np=5126,Uc=6407,xr=6408,Xv=6402,rp=[Uc,xr],mu=[];mu[xr]=4,mu[Uc]=3;var Gc=[];Gc[Cs]=1,Gc[np]=4,Gc[tp]=2;var Yv=32854,qv=32855,Ca=36194,op=33189,td=36168,nd=34041,ph=35907,ip=34836,aa=34842,gu=34843,rd=[Yv,qv,Ca,ph,aa,gu,ip],Ju={};Ju[ep]="complete",Ju[ed]="incomplete attachment",Ju[fh]="incomplete dimensions",Ju[ch]="incomplete, missing attachment",Ju[dh]="unsupported";function Vc(F,ae,be,Qe,ct,Ke){var lt={cur:null,next:null,dirty:!1,setFBO:null},Pt=["rgba"],Dt=["rgba4","rgb565","rgb5 a1"];ae.ext_srgb&&Dt.push("srgba"),ae.ext_color_buffer_half_float&&Dt.push("rgba16f","rgb16f"),ae.webgl_color_buffer_float&&Dt.push("rgba32f");var jt=["uint8"];ae.oes_texture_half_float&&jt.push("half float","float16"),ae.oes_texture_float&&jt.push("float","float32");function ut(It,At,Et){this.target=It,this.texture=At,this.renderbuffer=Et;var Cn=0,tr=0;At?(Cn=At.width,tr=At.height):Et&&(Cn=Et.width,tr=Et.height),this.width=Cn,this.height=tr}function Vt(It){It&&(It.texture&&It.texture._texture.decRef(),It.renderbuffer&&It.renderbuffer._renderbuffer.decRef())}function Ut(It,At,Et){if(It)if(It.texture){var Cn=It.texture._texture,tr=Math.max(1,Cn.width),un=Math.max(1,Cn.height);oe(tr===At&&un===Et,"inconsistent width/height for supplied texture"),Cn.refCount+=1}else{var Qn=It.renderbuffer._renderbuffer;oe(Qn.width===At&&Qn.height===Et,"inconsistent width/height for renderbuffer"),Qn.refCount+=1}}function kt(It,At){At&&(At.texture?F.framebufferTexture2D(Ra,It,At.target,At.texture._texture.texture,0):F.framebufferRenderbuffer(Ra,It,yu,At.renderbuffer._renderbuffer.renderbuffer))}function _t(It){var At=Vl,Et=null,Cn=null,tr=It;typeof It=="object"&&(tr=It.data,"target"in It&&(At=It.target|0)),oe.type(tr,"function","invalid attachment data");var un=tr._reglType;return un==="texture2d"?(Et=tr,oe(At===Vl)):un==="textureCube"?(Et=tr,oe(At>=ja&&At<ja+6,"invalid cube map target")):un==="renderbuffer"?(Cn=tr,At=yu):oe.raise("invalid regl object for attachment"),new ut(At,Et,Cn)}function We(It,At,Et,Cn,tr){if(Et){var un=Qe.create2D({width:It,height:At,format:Cn,type:tr});return un._texture.refCount=0,new ut(Vl,un,null)}else{var Qn=ct.create({width:It,height:At,format:Cn});return Qn._renderbuffer.refCount=0,new ut(yu,null,Qn)}}function it(It){return It&&(It.texture||It.renderbuffer)}function Lt(It,At,Et){It&&(It.texture?It.texture.resize(At,Et):It.renderbuffer&&It.renderbuffer.resize(At,Et),It.width=At,It.height=Et)}var Kt=0,xt={};function Zt(){this.id=Kt++,xt[this.id]=this,this.framebuffer=F.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function St(It){It.colorAttachments.forEach(Vt),Vt(It.depthAttachment),Vt(It.stencilAttachment),Vt(It.depthStencilAttachment)}function Wt(It){var At=It.framebuffer;oe(At,"must not double destroy framebuffer"),F.deleteFramebuffer(At),It.framebuffer=null,Ke.framebufferCount--,delete xt[It.id]}function bt(It){var At;F.bindFramebuffer(Ra,It.framebuffer);var Et=It.colorAttachments;for(At=0;At<Et.length;++At)kt(sh+At,Et[At]);for(At=Et.length;At<be.maxColorAttachments;++At)F.framebufferTexture2D(Ra,sh+At,Vl,null,0);F.framebufferTexture2D(Ra,Qd,Vl,null,0),F.framebufferTexture2D(Ra,gl,Vl,null,0),F.framebufferTexture2D(Ra,_a,Vl,null,0),kt(gl,It.depthAttachment),kt(_a,It.stencilAttachment),kt(Qd,It.depthStencilAttachment);var Cn=F.checkFramebufferStatus(Ra);!F.isContextLost()&&Cn!==ep&&oe.raise("framebuffer configuration not supported, status = "+Ju[Cn]),F.bindFramebuffer(Ra,lt.next?lt.next.framebuffer:null),lt.cur=lt.next,F.getError()}function Xt(It,At){var Et=new Zt;Ke.framebufferCount++;function Cn(un,Qn){var Vn;oe(lt.next!==Et,"can not update framebuffer which is currently in use");var rr=0,gr=0,Mo=!0,Fo=!0,cr=null,Wo=!0,Qr="rgba",Po="uint8",$o=1,Eo=null,mo=null,ei=null,Oo=!1;if(typeof un=="number")rr=un|0,gr=Qn|0||rr;else if(!un)rr=gr=1;else{oe.type(un,"object","invalid arguments for framebuffer");var Zn=un;if("shape"in Zn){var ai=Zn.shape;oe(Array.isArray(ai)&&ai.length>=2,"invalid shape for framebuffer"),rr=ai[0],gr=ai[1]}else"radius"in Zn&&(rr=gr=Zn.radius),"width"in Zn&&(rr=Zn.width),"height"in Zn&&(gr=Zn.height);("color"in Zn||"colors"in Zn)&&(cr=Zn.color||Zn.colors,Array.isArray(cr)&&oe(cr.length===1||ae.webgl_draw_buffers,"multiple render targets not supported")),cr||("colorCount"in Zn&&($o=Zn.colorCount|0,oe($o>0,"invalid color buffer count")),"colorTexture"in Zn&&(Wo=!!Zn.colorTexture,Qr="rgba4"),"colorType"in Zn&&(Po=Zn.colorType,Wo?(oe(ae.oes_texture_float||!(Po==="float"||Po==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),oe(ae.oes_texture_half_float||!(Po==="half float"||Po==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Po==="half float"||Po==="float16"?(oe(ae.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Qr="rgba16f"):(Po==="float"||Po==="float32")&&(oe(ae.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Qr="rgba32f"),oe.oneOf(Po,jt,"invalid color type")),"colorFormat"in Zn&&(Qr=Zn.colorFormat,Pt.indexOf(Qr)>=0?Wo=!0:Dt.indexOf(Qr)>=0?Wo=!1:Wo?oe.oneOf(Zn.colorFormat,Pt,"invalid color format for texture"):oe.oneOf(Zn.colorFormat,Dt,"invalid color format for renderbuffer"))),("depthTexture"in Zn||"depthStencilTexture"in Zn)&&(Oo=!!(Zn.depthTexture||Zn.depthStencilTexture),oe(!Oo||ae.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Zn&&(typeof Zn.depth=="boolean"?Mo=Zn.depth:(Eo=Zn.depth,Fo=!1)),"stencil"in Zn&&(typeof Zn.stencil=="boolean"?Fo=Zn.stencil:(mo=Zn.stencil,Mo=!1)),"depthStencil"in Zn&&(typeof Zn.depthStencil=="boolean"?Mo=Fo=Zn.depthStencil:(ei=Zn.depthStencil,Mo=!1,Fo=!1))}var Nr=null,jn=null,fr=null,zn=null;if(Array.isArray(cr))Nr=cr.map(_t);else if(cr)Nr=[_t(cr)];else for(Nr=new Array($o),Vn=0;Vn<$o;++Vn)Nr[Vn]=We(rr,gr,Wo,Qr,Po);oe(ae.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),oe(Nr.length<=be.maxColorAttachments,"too many color attachments, not supported"),rr=rr||Nr[0].width,gr=gr||Nr[0].height,Eo?jn=_t(Eo):Mo&&!Fo&&(jn=We(rr,gr,Oo,"depth","uint32")),mo?fr=_t(mo):Fo&&!Mo&&(fr=We(rr,gr,!1,"stencil","uint8")),ei?zn=_t(ei):!Eo&&!mo&&Fo&&Mo&&(zn=We(rr,gr,Oo,"depth stencil","depth stencil")),oe(!!Eo+!!mo+!!ei<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var lo=null;for(Vn=0;Vn<Nr.length;++Vn)if(Ut(Nr[Vn],rr,gr),oe(!Nr[Vn]||Nr[Vn].texture&&rp.indexOf(Nr[Vn].texture._texture.format)>=0||Nr[Vn].renderbuffer&&rd.indexOf(Nr[Vn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Vn+" is invalid"),Nr[Vn]&&Nr[Vn].texture){var Fa=mu[Nr[Vn].texture._texture.format]*Gc[Nr[Vn].texture._texture.type];lo===null?lo=Fa:oe(lo===Fa,"all color attachments much have the same number of bits per pixel.")}return Ut(jn,rr,gr),oe(!jn||jn.texture&&jn.texture._texture.format===Xv||jn.renderbuffer&&jn.renderbuffer._renderbuffer.format===op,"invalid depth attachment for framebuffer object"),Ut(fr,rr,gr),oe(!fr||fr.renderbuffer&&fr.renderbuffer._renderbuffer.format===td,"invalid stencil attachment for framebuffer object"),Ut(zn,rr,gr),oe(!zn||zn.texture&&zn.texture._texture.format===nd||zn.renderbuffer&&zn.renderbuffer._renderbuffer.format===nd,"invalid depth-stencil attachment for framebuffer object"),St(Et),Et.width=rr,Et.height=gr,Et.colorAttachments=Nr,Et.depthAttachment=jn,Et.stencilAttachment=fr,Et.depthStencilAttachment=zn,Cn.color=Nr.map(it),Cn.depth=it(jn),Cn.stencil=it(fr),Cn.depthStencil=it(zn),Cn.width=Et.width,Cn.height=Et.height,bt(Et),Cn}function tr(un,Qn){oe(lt.next!==Et,"can not resize a framebuffer which is currently in use");var Vn=Math.max(un|0,1),rr=Math.max(Qn|0||Vn,1);if(Vn===Et.width&&rr===Et.height)return Cn;for(var gr=Et.colorAttachments,Mo=0;Mo<gr.length;++Mo)Lt(gr[Mo],Vn,rr);return Lt(Et.depthAttachment,Vn,rr),Lt(Et.stencilAttachment,Vn,rr),Lt(Et.depthStencilAttachment,Vn,rr),Et.width=Cn.width=Vn,Et.height=Cn.height=rr,bt(Et),Cn}return Cn(It,At),o(Cn,{resize:tr,_reglType:"framebuffer",_framebuffer:Et,destroy:function(){Wt(Et),St(Et)},use:function(un){lt.setFBO({framebuffer:Cn},un)}})}function Mn(It){var At=Array(6);function Et(tr){var un;oe(At.indexOf(lt.next)<0,"can not update framebuffer which is currently in use");var Qn={color:null},Vn=0,rr=null,gr="rgba",Mo="uint8",Fo=1;if(typeof tr=="number")Vn=tr|0;else if(!tr)Vn=1;else{oe.type(tr,"object","invalid arguments for framebuffer");var cr=tr;if("shape"in cr){var Wo=cr.shape;oe(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),oe(Wo[0]===Wo[1],"cube framebuffer must be square"),Vn=Wo[0]}else"radius"in cr&&(Vn=cr.radius|0),"width"in cr?(Vn=cr.width|0,"height"in cr&&oe(cr.height===Vn,"must be square")):"height"in cr&&(Vn=cr.height|0);("color"in cr||"colors"in cr)&&(rr=cr.color||cr.colors,Array.isArray(rr)&&oe(rr.length===1||ae.webgl_draw_buffers,"multiple render targets not supported")),rr||("colorCount"in cr&&(Fo=cr.colorCount|0,oe(Fo>0,"invalid color buffer count")),"colorType"in cr&&(oe.oneOf(cr.colorType,jt,"invalid color type"),Mo=cr.colorType),"colorFormat"in cr&&(gr=cr.colorFormat,oe.oneOf(cr.colorFormat,Pt,"invalid color format for texture"))),"depth"in cr&&(Qn.depth=cr.depth),"stencil"in cr&&(Qn.stencil=cr.stencil),"depthStencil"in cr&&(Qn.depthStencil=cr.depthStencil)}var Qr;if(rr)if(Array.isArray(rr))for(Qr=[],un=0;un<rr.length;++un)Qr[un]=rr[un];else Qr=[rr];else{Qr=Array(Fo);var Po={radius:Vn,format:gr,type:Mo};for(un=0;un<Fo;++un)Qr[un]=Qe.createCube(Po)}for(Qn.color=Array(Qr.length),un=0;un<Qr.length;++un){var $o=Qr[un];oe(typeof $o=="function"&&$o._reglType==="textureCube","invalid cube map"),Vn=Vn||$o.width,oe($o.width===Vn&&$o.height===Vn,"invalid cube map shape"),Qn.color[un]={target:ja,data:Qr[un]}}for(un=0;un<6;++un){for(var Eo=0;Eo<Qr.length;++Eo)Qn.color[Eo].target=ja+un;un>0&&(Qn.depth=At[0].depth,Qn.stencil=At[0].stencil,Qn.depthStencil=At[0].depthStencil),At[un]?At[un](Qn):At[un]=Xt(Qn)}return o(Et,{width:Vn,height:Vn,color:Qr})}function Cn(tr){var un,Qn=tr|0;if(oe(Qn>0&&Qn<=be.maxCubeMapSize,"invalid radius for cube fbo"),Qn===Et.width)return Et;var Vn=Et.color;for(un=0;un<Vn.length;++un)Vn[un].resize(Qn);for(un=0;un<6;++un)At[un].resize(Qn);return Et.width=Et.height=Qn,Et}return Et(It),o(Et,{faces:At,resize:Cn,_reglType:"framebufferCube",destroy:function(){At.forEach(function(tr){tr.destroy()})}})}function Wn(){lt.cur=null,lt.next=null,lt.dirty=!0,ri(xt).forEach(function(It){It.framebuffer=F.createFramebuffer(),bt(It)})}return o(lt,{getFramebuffer:function(It){if(typeof It=="function"&&It._reglType==="framebuffer"){var At=It._framebuffer;if(At instanceof Zt)return At}return null},create:Xt,createCube:Mn,clear:function(){ri(xt).forEach(Wt)},restore:Wn})}var hh=5126,Wc=34962;function od(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=hh,this.offset=0,this.stride=0,this.divisor=0}function id(F,ae,be,Qe,ct){for(var Ke=be.maxAttributes,lt=new Array(Ke),Pt=0;Pt<Ke;++Pt)lt[Pt]=new od;var Dt=0,jt={},ut={Record:od,scope:{},state:lt,currentVAO:null,targetVAO:null,restore:Ut()?xt:function(){},createVAO:Zt,getVAO:_t,destroyBuffer:Vt,setVAO:Ut()?We:it,clear:Ut()?Lt:function(){}};function Vt(St){for(var Wt=0;Wt<lt.length;++Wt){var bt=lt[Wt];bt.buffer===St&&(F.disableVertexAttribArray(Wt),bt.buffer=null)}}function Ut(){return ae.oes_vertex_array_object}function kt(){return ae.angle_instanced_arrays}function _t(St){return typeof St=="function"&&St._vao?St._vao:null}function We(St){if(St!==ut.currentVAO){var Wt=Ut();St?Wt.bindVertexArrayOES(St.vao):Wt.bindVertexArrayOES(null),ut.currentVAO=St}}function it(St){if(St!==ut.currentVAO){if(St)St.bindAttrs();else for(var Wt=kt(),bt=0;bt<lt.length;++bt){var Xt=lt[bt];Xt.buffer?(F.enableVertexAttribArray(bt),F.vertexAttribPointer(bt,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Wt&&Xt.divisor&&Wt.vertexAttribDivisorANGLE(bt,Xt.divisor)):(F.disableVertexAttribArray(bt),F.vertexAttrib4f(bt,Xt.x,Xt.y,Xt.z,Xt.w))}ut.currentVAO=St}}function Lt(){ri(jt).forEach(function(St){St.destroy()})}function Kt(){this.id=++Dt,this.attributes=[];var St=Ut();St?this.vao=St.createVertexArrayOES():this.vao=null,jt[this.id]=this,this.buffers=[]}Kt.prototype.bindAttrs=function(){for(var St=kt(),Wt=this.attributes,bt=0;bt<Wt.length;++bt){var Xt=Wt[bt];Xt.buffer?(F.enableVertexAttribArray(bt),F.bindBuffer(Wc,Xt.buffer.buffer),F.vertexAttribPointer(bt,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),St&&Xt.divisor&&St.vertexAttribDivisorANGLE(bt,Xt.divisor)):(F.disableVertexAttribArray(bt),F.vertexAttrib4f(bt,Xt.x,Xt.y,Xt.z,Xt.w))}for(var Mn=Wt.length;Mn<Ke;++Mn)F.disableVertexAttribArray(Mn)},Kt.prototype.refresh=function(){var St=Ut();St&&(St.bindVertexArrayOES(this.vao),this.bindAttrs(),ut.currentVAO=this)},Kt.prototype.destroy=function(){if(this.vao){var St=Ut();this===ut.currentVAO&&(ut.currentVAO=null,St.bindVertexArrayOES(null)),St.deleteVertexArrayOES(this.vao),this.vao=null}jt[this.id]&&(delete jt[this.id],Qe.vaoCount-=1)};function xt(){var St=Ut();St&&ri(jt).forEach(function(Wt){Wt.refresh()})}function Zt(St){var Wt=new Kt;Qe.vaoCount+=1;function bt(Xt){oe(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),oe(Xt.length<Ke,"too many attributes"),oe(Xt.length>0,"must specify at least one attribute");var Mn={},Wn=Wt.attributes;Wn.length=Xt.length;for(var It=0;It<Xt.length;++It){var At=Xt[It],Et=Wn[It]=new od,Cn=At.data||At;if(Array.isArray(Cn)||n(Cn)||Ni(Cn)){var tr;Wt.buffers[It]&&(tr=Wt.buffers[It],n(Cn)&&tr._buffer.byteLength>=Cn.byteLength?tr.subdata(Cn):(tr.destroy(),Wt.buffers[It]=null)),Wt.buffers[It]||(tr=Wt.buffers[It]=ct.create(At,Wc,!1,!0)),Et.buffer=ct.getBuffer(tr),Et.size=Et.buffer.dimension|0,Et.normalized=!1,Et.type=Et.buffer.dtype,Et.offset=0,Et.stride=0,Et.divisor=0,Et.state=1,Mn[It]=1}else ct.getBuffer(At)?(Et.buffer=ct.getBuffer(At),Et.size=Et.buffer.dimension|0,Et.normalized=!1,Et.type=Et.buffer.dtype,Et.offset=0,Et.stride=0,Et.divisor=0,Et.state=1):ct.getBuffer(At.buffer)?(Et.buffer=ct.getBuffer(At.buffer),Et.size=(+At.size||Et.buffer.dimension)|0,Et.normalized=!!At.normalized||!1,"type"in At?(oe.parameter(At.type,Ci,"invalid buffer type"),Et.type=Ci[At.type]):Et.type=Et.buffer.dtype,Et.offset=(At.offset||0)|0,Et.stride=(At.stride||0)|0,Et.divisor=(At.divisor||0)|0,Et.state=1,oe(Et.size>=1&&Et.size<=4,"size must be between 1 and 4"),oe(Et.offset>=0,"invalid offset"),oe(Et.stride>=0&&Et.stride<=255,"stride must be between 0 and 255"),oe(Et.divisor>=0,"divisor must be positive"),oe(!Et.divisor||!!ae.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in At?(oe(It>0,"first attribute must not be a constant"),Et.x=+At.x||0,Et.y=+At.y||0,Et.z=+At.z||0,Et.w=+At.w||0,Et.state=2):oe(!1,"invalid attribute spec for location "+It)}for(var un=0;un<Wt.buffers.length;++un)!Mn[un]&&Wt.buffers[un]&&(Wt.buffers[un].destroy(),Wt.buffers[un]=null);return Wt.refresh(),bt}return bt.destroy=function(){for(var Xt=0;Xt<Wt.buffers.length;++Xt)Wt.buffers[Xt]&&Wt.buffers[Xt].destroy();Wt.buffers.length=0,Wt.destroy()},bt._vao=Wt,bt._reglType="vao",bt(St)}return ut}var ad=35632,_u=35633,vh=35718,bu=35721;function ap(F,ae,be,Qe){var ct={},Ke={};function lt(We,it,Lt,Kt){this.name=We,this.id=it,this.location=Lt,this.info=Kt}function Pt(We,it){for(var Lt=0;Lt<We.length;++Lt)if(We[Lt].id===it.id){We[Lt].location=it.location;return}We.push(it)}function Dt(We,it,Lt){var Kt=We===ad?ct:Ke,xt=Kt[it];if(!xt){var Zt=ae.str(it);xt=F.createShader(We),F.shaderSource(xt,Zt),F.compileShader(xt),oe.shaderError(F,xt,Zt,We,Lt),Kt[it]=xt}return xt}var jt={},ut=[],Vt=0;function Ut(We,it){this.id=Vt++,this.fragId=We,this.vertId=it,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Qe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kt(We,it,Lt){var Kt,xt,Zt=Dt(ad,We.fragId),St=Dt(_u,We.vertId),Wt=We.program=F.createProgram();if(F.attachShader(Wt,Zt),F.attachShader(Wt,St),Lt)for(Kt=0;Kt<Lt.length;++Kt){var bt=Lt[Kt];F.bindAttribLocation(Wt,bt[0],bt[1])}F.linkProgram(Wt),oe.linkError(F,Wt,ae.str(We.fragId),ae.str(We.vertId),it);var Xt=F.getProgramParameter(Wt,vh);Qe.profile&&(We.stats.uniformsCount=Xt);var Mn=We.uniforms;for(Kt=0;Kt<Xt;++Kt)if(xt=F.getActiveUniform(Wt,Kt),xt)if(xt.size>1)for(var Wn=0;Wn<xt.size;++Wn){var It=xt.name.replace("[0]","["+Wn+"]");Pt(Mn,new lt(It,ae.id(It),F.getUniformLocation(Wt,It),xt))}else Pt(Mn,new lt(xt.name,ae.id(xt.name),F.getUniformLocation(Wt,xt.name),xt));var At=F.getProgramParameter(Wt,bu);Qe.profile&&(We.stats.attributesCount=At);var Et=We.attributes;for(Kt=0;Kt<At;++Kt)xt=F.getActiveAttrib(Wt,Kt),xt&&Pt(Et,new lt(xt.name,ae.id(xt.name),F.getAttribLocation(Wt,xt.name),xt))}Qe.profile&&(be.getMaxUniformsCount=function(){var We=0;return ut.forEach(function(it){it.stats.uniformsCount>We&&(We=it.stats.uniformsCount)}),We},be.getMaxAttributesCount=function(){var We=0;return ut.forEach(function(it){it.stats.attributesCount>We&&(We=it.stats.attributesCount)}),We});function _t(){ct={},Ke={};for(var We=0;We<ut.length;++We)kt(ut[We],null,ut[We].attributes.map(function(it){return[it.location,it.name]}))}return{clear:function(){var We=F.deleteShader.bind(F);ri(ct).forEach(We),ct={},ri(Ke).forEach(We),Ke={},ut.forEach(function(it){F.deleteProgram(it.program)}),ut.length=0,jt={},be.shaderCount=0},program:function(We,it,Lt,Kt){oe.command(We>=0,"missing vertex shader",Lt),oe.command(it>=0,"missing fragment shader",Lt);var xt=jt[it];xt||(xt=jt[it]={});var Zt=xt[We];if(Zt&&(Zt.refCount++,!Kt))return Zt;var St=new Ut(it,We);return be.shaderCount++,kt(St,Lt,Kt),Zt||(xt[We]=St),ut.push(St),o(St,{destroy:function(){if(St.refCount--,St.refCount<=0){F.deleteProgram(St.program);var Wt=ut.indexOf(St);ut.splice(Wt,1),be.shaderCount--}xt[St.vertId].refCount<=0&&(F.deleteShader(Ke[St.vertId]),delete Ke[St.vertId],delete jt[St.fragId][St.vertId]),Object.keys(jt[St.fragId]).length||(F.deleteShader(ct[St.fragId]),delete ct[St.fragId],delete jt[St.fragId])}})},restore:_t,shader:Dt,frag:-1,vert:-1}}var lp=6408,Qu=5121,co=3333,zc=5126;function wo(F,ae,be,Qe,ct,Ke,lt){function Pt(ut){var Vt;ae.next===null?(oe(ct.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Vt=Qu):(oe(ae.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Vt=ae.next.colorAttachments[0].texture._texture.type,Ke.oes_texture_float?(oe(Vt===Qu||Vt===zc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Vt===zc&&oe(lt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):oe(Vt===Qu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,kt=0,_t=Qe.framebufferWidth,We=Qe.framebufferHeight,it=null;n(ut)?it=ut:ut&&(oe.type(ut,"object","invalid arguments to regl.read()"),Ut=ut.x|0,kt=ut.y|0,oe(Ut>=0&&Ut<Qe.framebufferWidth,"invalid x offset for regl.read"),oe(kt>=0&&kt<Qe.framebufferHeight,"invalid y offset for regl.read"),_t=(ut.width||Qe.framebufferWidth-Ut)|0,We=(ut.height||Qe.framebufferHeight-kt)|0,it=ut.data||null),it&&(Vt===Qu?oe(it instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Vt===zc&&oe(it instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),oe(_t>0&&_t+Ut<=Qe.framebufferWidth,"invalid width for read pixels"),oe(We>0&&We+kt<=Qe.framebufferHeight,"invalid height for read pixels"),be();var Lt=_t*We*4;return it||(Vt===Qu?it=new Uint8Array(Lt):Vt===zc&&(it=it||new Float32Array(Lt))),oe.isTypedArray(it,"data buffer for regl.read() must be a typedarray"),oe(it.byteLength>=Lt,"data buffer for regl.read() too small"),F.pixelStorei(co,4),F.readPixels(Ut,kt,_t,We,lp,Vt,it),it}function Dt(ut){var Vt;return ae.setFBO({framebuffer:ut.framebuffer},function(){Vt=Pt(ut)}),Vt}function jt(ut){return!ut||!("framebuffer"in ut)?Pt(ut):Dt(ut)}return jt}function Wl(F){return Array.prototype.slice.call(F)}function di(F){return Wl(F).join("")}function _l(){var F=0,ae=[],be=[];function Qe(Vt){for(var Ut=0;Ut<be.length;++Ut)if(be[Ut]===Vt)return ae[Ut];var kt="g"+F++;return ae.push(kt),be.push(Vt),kt}function ct(){var Vt=[];function Ut(){Vt.push.apply(Vt,Wl(arguments))}var kt=[];function _t(){var We="v"+F++;return kt.push(We),arguments.length>0&&(Vt.push(We,"="),Vt.push.apply(Vt,Wl(arguments)),Vt.push(";")),We}return o(Ut,{def:_t,toString:function(){return di([kt.length>0?"var "+kt.join(",")+";":"",di(Vt)])}})}function Ke(){var Vt=ct(),Ut=ct(),kt=Vt.toString,_t=Ut.toString;function We(it,Lt){Ut(it,Lt,"=",Vt.def(it,Lt),";")}return o(function(){Vt.apply(Vt,Wl(arguments))},{def:Vt.def,entry:Vt,exit:Ut,save:We,set:function(it,Lt,Kt){We(it,Lt),Vt(it,Lt,"=",Kt,";")},toString:function(){return kt()+_t()}})}function lt(){var Vt=di(arguments),Ut=Ke(),kt=Ke(),_t=Ut.toString,We=kt.toString;return o(Ut,{then:function(){return Ut.apply(Ut,Wl(arguments)),this},else:function(){return kt.apply(kt,Wl(arguments)),this},toString:function(){var it=We();return it&&(it="else{"+it+"}"),di(["if(",Vt,"){",_t(),"}",it])}})}var Pt=ct(),Dt={};function jt(Vt,Ut){var kt=[];function _t(){var xt="a"+kt.length;return kt.push(xt),xt}Ut=Ut||0;for(var We=0;We<Ut;++We)_t();var it=Ke(),Lt=it.toString,Kt=Dt[Vt]=o(it,{arg:_t,toString:function(){return di(["function(",kt.join(),"){",Lt(),"}"])}});return Kt}function ut(){var Vt=['"use strict";',Pt,"return {"];Object.keys(Dt).forEach(function(_t){Vt.push('"',_t,'":',Dt[_t].toString(),",")}),Vt.push("}");var Ut=di(Vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),kt=Function.apply(null,ae.concat(Ut));return kt.apply(null,be)}return{global:Pt,link:Qe,block:ct,proc:jt,scope:Ke,cond:lt,compile:ut}}var zl="xyzw".split(""),wu=5121,es=1,ld=2,ud=0,bl=1,ts=2,sd=3,Hc=4,Eu=5,up=6,Ds="dither",cd="blend.enable",Xc="blend.color",wl="blend.equation",Is="blend.func",Yc="depth.enable",qc="depth.func",fd="depth.range",dd="depth.mask",Za="colorMask",sp="cull.enable",cp="cull.face",fp="frontFace",pd="lineWidth",El="polygonOffset.enable",Kc="polygonOffset.offset",hd="sample.alpha",vd="sample.enable",Ls="sample.coverage",Hl="stencil.enable",Jn="stencil.mask",Fs="stencil.func",Zc="stencil.opFront",Ja="stencil.opBack",$s="scissor.enable",Bs="scissor.box",So="viewport",Us="profile",Ou="framebuffer",Jc="vert",no="frag",Lo="elements",Xl="primitive",Qa="count",el="offset",xu="instances",Ol="vao",Gs="Width",Qc="Height",Su=Ou+Gs,Vs=Ou+Qc,Rt=So+Gs,dp=So+Qc,ns="drawingBuffer",ef=ns+Gs,yd=ns+Qc,pp=[Is,wl,Fs,Zc,Ja,Ls,So,Bs,Kc],xl=34962,hp=34963,tl=35632,Au=35633,md=3553,yh=34067,mh=2884,gh=3042,vp=3024,yp=2960,mp=2929,gp=3089,_h=32823,bh=32926,wh=32928,$i=5126,rs=35664,tf=35665,la=35666,Da=5124,gd=35667,Bi=35668,nf=35669,os=35670,Ws=35671,rf=35672,of=35673,zs=35674,Hs=35675,is=35676,Yl=35678,Zo=35680,af=4,lf=1028,ql=1029,_p=2304,Ui=2305,Jo=32775,Eh=32776,Ia=519,Fn=7680,_d=0,as=1,bd=32774,Oh=513,Xs=36160,xh=36064,nl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ls={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},rl={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Sh={frag:tl,vert:Au},bp={cw:_p,ccw:Ui};function Tu(F){return Array.isArray(F)||n(F)||Ni(F)}function Sl(F){return F.sort(function(ae,be){return ae===So?-1:be===So?1:ae<be?-1:1})}function Gi(F,ae,be,Qe){this.thisDep=F,this.contextDep=ae,this.propDep=be,this.append=Qe}function Gn(F){return F&&!(F.thisDep||F.contextDep||F.propDep)}function Ao(F){return new Gi(!1,!1,!1,F)}function ki(F,ae){var be=F.type;if(be===ud){var Qe=F.data.length;return new Gi(!0,Qe>=1,Qe>=2,ae)}else if(be===Hc){var ct=F.data;return new Gi(ct.thisDep,ct.contextDep,ct.propDep,ae)}else{if(be===Eu)return new Gi(!1,!1,!1,ae);if(be===up){for(var Ke=!1,lt=!1,Pt=!1,Dt=0;Dt<F.data.length;++Dt){var jt=F.data[Dt];if(jt.type===bl)Pt=!0;else if(jt.type===ts)lt=!0;else if(jt.type===sd)Ke=!0;else if(jt.type===ud){Ke=!0;var ut=jt.data;ut>=1&&(lt=!0),ut>=2&&(Pt=!0)}else jt.type===Hc&&(Ke=Ke||jt.data.thisDep,lt=lt||jt.data.contextDep,Pt=Pt||jt.data.propDep)}return new Gi(Ke,lt,Pt,ae)}else return new Gi(be===sd,be===ts,be===bl,ae)}}var ua=new Gi(!1,!1,!1,function(){});function Kv(F,ae,be,Qe,ct,Ke,lt,Pt,Dt,jt,ut,Vt,Ut,kt,_t){var We=jt.Record,it={add:32774,subtract:32778,"reverse subtract":32779};be.ext_blend_minmax&&(it.min=Jo,it.max=Eh);var Lt=be.angle_instanced_arrays,Kt=be.webgl_draw_buffers,xt={dirty:!0,profile:_t.profile},Zt={},St=[],Wt={},bt={};function Xt(se){return se.replace(".","_")}function Mn(se,ee,Me){var Ue=Xt(se);St.push(se),Zt[Ue]=xt[Ue]=!!Me,Wt[Ue]=ee}function Wn(se,ee,Me){var Ue=Xt(se);St.push(se),Array.isArray(Me)?(xt[Ue]=Me.slice(),Zt[Ue]=Me.slice()):xt[Ue]=Zt[Ue]=Me,bt[Ue]=ee}Mn(Ds,vp),Mn(cd,gh),Wn(Xc,"blendColor",[0,0,0,0]),Wn(wl,"blendEquationSeparate",[bd,bd]),Wn(Is,"blendFuncSeparate",[as,_d,as,_d]),Mn(Yc,mp,!0),Wn(qc,"depthFunc",Oh),Wn(fd,"depthRange",[0,1]),Wn(dd,"depthMask",!0),Wn(Za,Za,[!0,!0,!0,!0]),Mn(sp,mh),Wn(cp,"cullFace",ql),Wn(fp,fp,Ui),Wn(pd,pd,1),Mn(El,_h),Wn(Kc,"polygonOffset",[0,0]),Mn(hd,bh),Mn(vd,wh),Wn(Ls,"sampleCoverage",[1,!1]),Mn(Hl,yp),Wn(Jn,"stencilMask",-1),Wn(Fs,"stencilFunc",[Ia,0,-1]),Wn(Zc,"stencilOpSeparate",[lf,Fn,Fn,Fn]),Wn(Ja,"stencilOpSeparate",[ql,Fn,Fn,Fn]),Mn($s,gp),Wn(Bs,"scissor",[0,0,F.drawingBufferWidth,F.drawingBufferHeight]),Wn(So,So,[0,0,F.drawingBufferWidth,F.drawingBufferHeight]);var It={gl:F,context:Ut,strings:ae,next:Zt,current:xt,draw:Vt,elements:Ke,buffer:ct,shader:ut,attributes:jt.state,vao:jt,uniforms:Dt,framebuffer:Pt,extensions:be,timer:kt,isBufferArgs:Tu},At={primTypes:Yo,compareFuncs:ls,blendFuncs:nl,blendEquations:it,stencilOps:rl,glTypes:Ci,orientationType:bp};oe.optional(function(){It.isArrayLike=M}),Kt&&(At.backBuffer=[ql],At.drawBuffer=Rr(Qe.maxDrawbuffers,function(se){return se===0?[0]:Rr(se,function(ee){return xh+ee})}));var Et=0;function Cn(){var se=_l(),ee=se.link,Me=se.global;se.id=Et++,se.batchId="0";var Ue=ee(It),ze=se.shared={props:"a0"};Object.keys(It).forEach(function(Oe){ze[Oe]=Me.def(Ue,".",Oe)}),oe.optional(function(){se.CHECK=ee(oe),se.commandStr=oe.guessCommand(),se.command=ee(se.commandStr),se.assert=function(Oe,ce,Be){Oe("if(!(",ce,"))",this.CHECK,".commandRaise(",ee(Be),",",this.command,");")},At.invalidBlendCombinations=Ys});var Ne=se.next={},Pe=se.current={};Object.keys(bt).forEach(function(Oe){Array.isArray(xt[Oe])&&(Ne[Oe]=Me.def(ze.next,".",Oe),Pe[Oe]=Me.def(ze.current,".",Oe))});var Ie=se.constants={};Object.keys(At).forEach(function(Oe){Ie[Oe]=Me.def(JSON.stringify(At[Oe]))}),se.invoke=function(Oe,ce){switch(ce.type){case ud:var Be=["this",ze.context,ze.props,se.batchId];return Oe.def(ee(ce.data),".call(",Be.slice(0,Math.max(ce.data.length+1,4)),")");case bl:return Oe.def(ze.props,ce.data);case ts:return Oe.def(ze.context,ce.data);case sd:return Oe.def("this",ce.data);case Hc:return ce.data.append(se,Oe),ce.data.ref;case Eu:return ce.data.toString();case up:return ce.data.map(function(Xe){return se.invoke(Oe,Xe)})}},se.attribCache={};var de={};return se.scopeAttrib=function(Oe){var ce=ae.id(Oe);if(ce in de)return de[ce];var Be=jt.scope[ce];Be||(Be=jt.scope[ce]=new We);var Xe=de[ce]=ee(Be);return Xe},se}function tr(se){var ee=se.static,Me=se.dynamic,Ue;if(Us in ee){var ze=!!ee[Us];Ue=Ao(function(Pe,Ie){return ze}),Ue.enable=ze}else if(Us in Me){var Ne=Me[Us];Ue=ki(Ne,function(Pe,Ie){return Pe.invoke(Ie,Ne)})}return Ue}function un(se,ee){var Me=se.static,Ue=se.dynamic;if(Ou in Me){var ze=Me[Ou];return ze?(ze=Pt.getFramebuffer(ze),oe.command(ze,"invalid framebuffer object"),Ao(function(Pe,Ie){var de=Pe.link(ze),Oe=Pe.shared;Ie.set(Oe.framebuffer,".next",de);var ce=Oe.context;return Ie.set(ce,"."+Su,de+".width"),Ie.set(ce,"."+Vs,de+".height"),de})):Ao(function(Pe,Ie){var de=Pe.shared;Ie.set(de.framebuffer,".next","null");var Oe=de.context;return Ie.set(Oe,"."+Su,Oe+"."+ef),Ie.set(Oe,"."+Vs,Oe+"."+yd),"null"})}else if(Ou in Ue){var Ne=Ue[Ou];return ki(Ne,function(Pe,Ie){var de=Pe.invoke(Ie,Ne),Oe=Pe.shared,ce=Oe.framebuffer,Be=Ie.def(ce,".getFramebuffer(",de,")");oe.optional(function(){Pe.assert(Ie,"!"+de+"||"+Be,"invalid framebuffer object")}),Ie.set(ce,".next",Be);var Xe=Oe.context;return Ie.set(Xe,"."+Su,Be+"?"+Be+".width:"+Xe+"."+ef),Ie.set(Xe,"."+Vs,Be+"?"+Be+".height:"+Xe+"."+yd),Be})}else return null}function Qn(se,ee,Me){var Ue=se.static,ze=se.dynamic;function Ne(de){if(de in Ue){var Oe=Ue[de];oe.commandType(Oe,"object","invalid "+de,Me.commandStr);var ce=!0,Be=Oe.x|0,Xe=Oe.y|0,d,m;return"width"in Oe?(d=Oe.width|0,oe.command(d>=0,"invalid "+de,Me.commandStr)):ce=!1,"height"in Oe?(m=Oe.height|0,oe.command(m>=0,"invalid "+de,Me.commandStr)):ce=!1,new Gi(!ce&&ee&&ee.thisDep,!ce&&ee&&ee.contextDep,!ce&&ee&&ee.propDep,function(V,Q){var pe=V.shared.context,Ee=d;"width"in Oe||(Ee=Q.def(pe,".",Su,"-",Be));var Le=m;return"height"in Oe||(Le=Q.def(pe,".",Vs,"-",Xe)),[Be,Xe,Ee,Le]})}else if(de in ze){var E=ze[de],j=ki(E,function(V,Q){var pe=V.invoke(Q,E);oe.optional(function(){V.assert(Q,pe+"&&typeof "+pe+'==="object"',"invalid "+de)});var Ee=V.shared.context,Le=Q.def(pe,".x|0"),ft=Q.def(pe,".y|0"),mt=Q.def('"width" in ',pe,"?",pe,".width|0:","(",Ee,".",Su,"-",Le,")"),Gt=Q.def('"height" in ',pe,"?",pe,".height|0:","(",Ee,".",Vs,"-",ft,")");return oe.optional(function(){V.assert(Q,mt+">=0&&"+Gt+">=0","invalid "+de)}),[Le,ft,mt,Gt]});return ee&&(j.thisDep=j.thisDep||ee.thisDep,j.contextDep=j.contextDep||ee.contextDep,j.propDep=j.propDep||ee.propDep),j}else return ee?new Gi(ee.thisDep,ee.contextDep,ee.propDep,function(V,Q){var pe=V.shared.context;return[0,0,Q.def(pe,".",Su),Q.def(pe,".",Vs)]}):null}var Pe=Ne(So);if(Pe){var Ie=Pe;Pe=new Gi(Pe.thisDep,Pe.contextDep,Pe.propDep,function(de,Oe){var ce=Ie.append(de,Oe),Be=de.shared.context;return Oe.set(Be,"."+Rt,ce[2]),Oe.set(Be,"."+dp,ce[3]),ce})}return{viewport:Pe,scissor_box:Ne(Bs)}}function Vn(se,ee){var Me=se.static,Ue=typeof Me[no]=="string"&&typeof Me[Jc]=="string";if(Ue){if(Object.keys(ee.dynamic).length>0)return null;var ze=ee.static,Ne=Object.keys(ze);if(Ne.length>0&&typeof ze[Ne[0]]=="number"){for(var Pe=[],Ie=0;Ie<Ne.length;++Ie)oe(typeof ze[Ne[Ie]]=="number","must specify all vertex attribute locations when using vaos"),Pe.push([ze[Ne[Ie]]|0,Ne[Ie]]);return Pe}}return null}function rr(se,ee,Me){var Ue=se.static,ze=se.dynamic;function Ne(ce){if(ce in Ue){var Be=ae.id(Ue[ce]);oe.optional(function(){ut.shader(Sh[ce],Be,oe.guessCommand())});var Xe=Ao(function(){return Be});return Xe.id=Be,Xe}else if(ce in ze){var d=ze[ce];return ki(d,function(m,E){var j=m.invoke(E,d),V=E.def(m.shared.strings,".id(",j,")");return oe.optional(function(){E(m.shared.shader,".shader(",Sh[ce],",",V,",",m.command,");")}),V})}return null}var Pe=Ne(no),Ie=Ne(Jc),de=null,Oe;return Gn(Pe)&&Gn(Ie)?(de=ut.program(Ie.id,Pe.id,null,Me),Oe=Ao(function(ce,Be){return ce.link(de)})):Oe=new Gi(Pe&&Pe.thisDep||Ie&&Ie.thisDep,Pe&&Pe.contextDep||Ie&&Ie.contextDep,Pe&&Pe.propDep||Ie&&Ie.propDep,function(ce,Be){var Xe=ce.shared.shader,d;Pe?d=Pe.append(ce,Be):d=Be.def(Xe,".",no);var m;Ie?m=Ie.append(ce,Be):m=Be.def(Xe,".",Jc);var E=Xe+".program("+m+","+d;return oe.optional(function(){E+=","+ce.command}),Be.def(E+")")}),{frag:Pe,vert:Ie,progVar:Oe,program:de}}function gr(se,ee){var Me=se.static,Ue=se.dynamic;function ze(){if(Lo in Me){var ce=Me[Lo];Tu(ce)?ce=Ke.getElements(Ke.create(ce,!0)):ce&&(ce=Ke.getElements(ce),oe.command(ce,"invalid elements",ee.commandStr));var Be=Ao(function(d,m){if(ce){var E=d.link(ce);return d.ELEMENTS=E,E}return d.ELEMENTS=null,null});return Be.value=ce,Be}else if(Lo in Ue){var Xe=Ue[Lo];return ki(Xe,function(d,m){var E=d.shared,j=E.isBufferArgs,V=E.elements,Q=d.invoke(m,Xe),pe=m.def("null"),Ee=m.def(j,"(",Q,")"),Le=d.cond(Ee).then(pe,"=",V,".createStream(",Q,");").else(pe,"=",V,".getElements(",Q,");");return oe.optional(function(){d.assert(Le.else,"!"+Q+"||"+pe,"invalid elements")}),m.entry(Le),m.exit(d.cond(Ee).then(V,".destroyStream(",pe,");")),d.ELEMENTS=pe,pe})}return null}var Ne=ze();function Pe(){if(Xl in Me){var ce=Me[Xl];return oe.commandParameter(ce,Yo,"invalid primitve",ee.commandStr),Ao(function(Xe,d){return Yo[ce]})}else if(Xl in Ue){var Be=Ue[Xl];return ki(Be,function(Xe,d){var m=Xe.constants.primTypes,E=Xe.invoke(d,Be);return oe.optional(function(){Xe.assert(d,E+" in "+m,"invalid primitive, must be one of "+Object.keys(Yo))}),d.def(m,"[",E,"]")})}else if(Ne)return Gn(Ne)?Ne.value?Ao(function(Xe,d){return d.def(Xe.ELEMENTS,".primType")}):Ao(function(){return af}):new Gi(Ne.thisDep,Ne.contextDep,Ne.propDep,function(Xe,d){var m=Xe.ELEMENTS;return d.def(m,"?",m,".primType:",af)});return null}function Ie(ce,Be){if(ce in Me){var Xe=Me[ce]|0;return oe.command(!Be||Xe>=0,"invalid "+ce,ee.commandStr),Ao(function(m,E){return Be&&(m.OFFSET=Xe),Xe})}else if(ce in Ue){var d=Ue[ce];return ki(d,function(m,E){var j=m.invoke(E,d);return Be&&(m.OFFSET=j,oe.optional(function(){m.assert(E,j+">=0","invalid "+ce)})),j})}else if(Be&&Ne)return Ao(function(m,E){return m.OFFSET="0",0});return null}var de=Ie(el,!0);function Oe(){if(Qa in Me){var ce=Me[Qa]|0;return oe.command(typeof ce=="number"&&ce>=0,"invalid vertex count",ee.commandStr),Ao(function(){return ce})}else if(Qa in Ue){var Be=Ue[Qa];return ki(Be,function(m,E){var j=m.invoke(E,Be);return oe.optional(function(){m.assert(E,"typeof "+j+'==="number"&&'+j+">=0&&"+j+"===("+j+"|0)","invalid vertex count")}),j})}else if(Ne)if(Gn(Ne)){if(Ne)return de?new Gi(de.thisDep,de.contextDep,de.propDep,function(m,E){var j=E.def(m.ELEMENTS,".vertCount-",m.OFFSET);return oe.optional(function(){m.assert(E,j+">=0","invalid vertex offset/element buffer too small")}),j}):Ao(function(m,E){return E.def(m.ELEMENTS,".vertCount")});var Xe=Ao(function(){return-1});return oe.optional(function(){Xe.MISSING=!0}),Xe}else{var d=new Gi(Ne.thisDep||de.thisDep,Ne.contextDep||de.contextDep,Ne.propDep||de.propDep,function(m,E){var j=m.ELEMENTS;return m.OFFSET?E.def(j,"?",j,".vertCount-",m.OFFSET,":-1"):E.def(j,"?",j,".vertCount:-1")});return oe.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:Ne,primitive:Pe(),count:Oe(),instances:Ie(xu,!1),offset:de}}function Mo(se,ee){var Me=se.static,Ue=se.dynamic,ze={};return St.forEach(function(Ne){var Pe=Xt(Ne);function Ie(de,Oe){if(Ne in Me){var ce=de(Me[Ne]);ze[Pe]=Ao(function(){return ce})}else if(Ne in Ue){var Be=Ue[Ne];ze[Pe]=ki(Be,function(Xe,d){return Oe(Xe,d,Xe.invoke(d,Be))})}}switch(Ne){case sp:case cd:case Ds:case Hl:case Yc:case $s:case El:case hd:case vd:case dd:return Ie(function(de){return oe.commandType(de,"boolean",Ne,ee.commandStr),de},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,"typeof "+ce+'==="boolean"',"invalid flag "+Ne,de.commandStr)}),ce});case qc:return Ie(function(de){return oe.commandParameter(de,ls,"invalid "+Ne,ee.commandStr),ls[de]},function(de,Oe,ce){var Be=de.constants.compareFuncs;return oe.optional(function(){de.assert(Oe,ce+" in "+Be,"invalid "+Ne+", must be one of "+Object.keys(ls))}),Oe.def(Be,"[",ce,"]")});case fd:return Ie(function(de){return oe.command(M(de)&&de.length===2&&typeof de[0]=="number"&&typeof de[1]=="number"&&de[0]<=de[1],"depth range is 2d array",ee.commandStr),de},function(de,Oe,ce){oe.optional(function(){de.assert(Oe,de.shared.isArrayLike+"("+ce+")&&"+ce+".length===2&&typeof "+ce+'[0]==="number"&&typeof '+ce+'[1]==="number"&&'+ce+"[0]<="+ce+"[1]","depth range must be a 2d array")});var Be=Oe.def("+",ce,"[0]"),Xe=Oe.def("+",ce,"[1]");return[Be,Xe]});case Is:return Ie(function(de){oe.commandType(de,"object","blend.func",ee.commandStr);var Oe="srcRGB"in de?de.srcRGB:de.src,ce="srcAlpha"in de?de.srcAlpha:de.src,Be="dstRGB"in de?de.dstRGB:de.dst,Xe="dstAlpha"in de?de.dstAlpha:de.dst;return oe.commandParameter(Oe,nl,Pe+".srcRGB",ee.commandStr),oe.commandParameter(ce,nl,Pe+".srcAlpha",ee.commandStr),oe.commandParameter(Be,nl,Pe+".dstRGB",ee.commandStr),oe.commandParameter(Xe,nl,Pe+".dstAlpha",ee.commandStr),oe.command(Ys.indexOf(Oe+", "+Be)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Oe+", "+Be+")",ee.commandStr),[nl[Oe],nl[Be],nl[ce],nl[Xe]]},function(de,Oe,ce){var Be=de.constants.blendFuncs;oe.optional(function(){de.assert(Oe,ce+"&&typeof "+ce+'==="object"',"invalid blend func, must be an object")});function Xe(pe,Ee){var Le=Oe.def('"',pe,Ee,'" in ',ce,"?",ce,".",pe,Ee,":",ce,".",pe);return oe.optional(function(){de.assert(Oe,Le+" in "+Be,"invalid "+Ne+"."+pe+Ee+", must be one of "+Object.keys(nl))}),Le}var d=Xe("src","RGB"),m=Xe("dst","RGB");oe.optional(function(){var pe=de.constants.invalidBlendCombinations;de.assert(Oe,pe+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var E=Oe.def(Be,"[",d,"]"),j=Oe.def(Be,"[",Xe("src","Alpha"),"]"),V=Oe.def(Be,"[",m,"]"),Q=Oe.def(Be,"[",Xe("dst","Alpha"),"]");return[E,V,j,Q]});case wl:return Ie(function(de){if(typeof de=="string")return oe.commandParameter(de,it,"invalid "+Ne,ee.commandStr),[it[de],it[de]];if(typeof de=="object")return oe.commandParameter(de.rgb,it,Ne+".rgb",ee.commandStr),oe.commandParameter(de.alpha,it,Ne+".alpha",ee.commandStr),[it[de.rgb],it[de.alpha]];oe.commandRaise("invalid blend.equation",ee.commandStr)},function(de,Oe,ce){var Be=de.constants.blendEquations,Xe=Oe.def(),d=Oe.def(),m=de.cond("typeof ",ce,'==="string"');return oe.optional(function(){function E(j,V,Q){de.assert(j,Q+" in "+Be,"invalid "+V+", must be one of "+Object.keys(it))}E(m.then,Ne,ce),de.assert(m.else,ce+"&&typeof "+ce+'==="object"',"invalid "+Ne),E(m.else,Ne+".rgb",ce+".rgb"),E(m.else,Ne+".alpha",ce+".alpha")}),m.then(Xe,"=",d,"=",Be,"[",ce,"];"),m.else(Xe,"=",Be,"[",ce,".rgb];",d,"=",Be,"[",ce,".alpha];"),Oe(m),[Xe,d]});case Xc:return Ie(function(de){return oe.command(M(de)&&de.length===4,"blend.color must be a 4d array",ee.commandStr),Rr(4,function(Oe){return+de[Oe]})},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,de.shared.isArrayLike+"("+ce+")&&"+ce+".length===4","blend.color must be a 4d array")}),Rr(4,function(Be){return Oe.def("+",ce,"[",Be,"]")})});case Jn:return Ie(function(de){return oe.commandType(de,"number",Pe,ee.commandStr),de|0},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,"typeof "+ce+'==="number"',"invalid stencil.mask")}),Oe.def(ce,"|0")});case Fs:return Ie(function(de){oe.commandType(de,"object",Pe,ee.commandStr);var Oe=de.cmp||"keep",ce=de.ref||0,Be="mask"in de?de.mask:-1;return oe.commandParameter(Oe,ls,Ne+".cmp",ee.commandStr),oe.commandType(ce,"number",Ne+".ref",ee.commandStr),oe.commandType(Be,"number",Ne+".mask",ee.commandStr),[ls[Oe],ce,Be]},function(de,Oe,ce){var Be=de.constants.compareFuncs;oe.optional(function(){function E(){de.assert(Oe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}E(ce+"&&typeof ",ce,'==="object"'),E('!("cmp" in ',ce,")||(",ce,".cmp in ",Be,")")});var Xe=Oe.def('"cmp" in ',ce,"?",Be,"[",ce,".cmp]",":",Fn),d=Oe.def(ce,".ref|0"),m=Oe.def('"mask" in ',ce,"?",ce,".mask|0:-1");return[Xe,d,m]});case Zc:case Ja:return Ie(function(de){oe.commandType(de,"object",Pe,ee.commandStr);var Oe=de.fail||"keep",ce=de.zfail||"keep",Be=de.zpass||"keep";return oe.commandParameter(Oe,rl,Ne+".fail",ee.commandStr),oe.commandParameter(ce,rl,Ne+".zfail",ee.commandStr),oe.commandParameter(Be,rl,Ne+".zpass",ee.commandStr),[Ne===Ja?ql:lf,rl[Oe],rl[ce],rl[Be]]},function(de,Oe,ce){var Be=de.constants.stencilOps;oe.optional(function(){de.assert(Oe,ce+"&&typeof "+ce+'==="object"',"invalid "+Ne)});function Xe(d){return oe.optional(function(){de.assert(Oe,'!("'+d+'" in '+ce+")||("+ce+"."+d+" in "+Be+")","invalid "+Ne+"."+d+", must be one of "+Object.keys(rl))}),Oe.def('"',d,'" in ',ce,"?",Be,"[",ce,".",d,"]:",Fn)}return[Ne===Ja?ql:lf,Xe("fail"),Xe("zfail"),Xe("zpass")]});case Kc:return Ie(function(de){oe.commandType(de,"object",Pe,ee.commandStr);var Oe=de.factor|0,ce=de.units|0;return oe.commandType(Oe,"number",Pe+".factor",ee.commandStr),oe.commandType(ce,"number",Pe+".units",ee.commandStr),[Oe,ce]},function(de,Oe,ce){oe.optional(function(){de.assert(Oe,ce+"&&typeof "+ce+'==="object"',"invalid "+Ne)});var Be=Oe.def(ce,".factor|0"),Xe=Oe.def(ce,".units|0");return[Be,Xe]});case cp:return Ie(function(de){var Oe=0;return de==="front"?Oe=lf:de==="back"&&(Oe=ql),oe.command(!!Oe,Pe,ee.commandStr),Oe},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,ce+'==="front"||'+ce+'==="back"',"invalid cull.face")}),Oe.def(ce,'==="front"?',lf,":",ql)});case pd:return Ie(function(de){return oe.command(typeof de=="number"&&de>=Qe.lineWidthDims[0]&&de<=Qe.lineWidthDims[1],"invalid line width, must be a positive number between "+Qe.lineWidthDims[0]+" and "+Qe.lineWidthDims[1],ee.commandStr),de},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,"typeof "+ce+'==="number"&&'+ce+">="+Qe.lineWidthDims[0]+"&&"+ce+"<="+Qe.lineWidthDims[1],"invalid line width")}),ce});case fp:return Ie(function(de){return oe.commandParameter(de,bp,Pe,ee.commandStr),bp[de]},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,ce+'==="cw"||'+ce+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Oe.def(ce+'==="cw"?'+_p+":"+Ui)});case Za:return Ie(function(de){return oe.command(M(de)&&de.length===4,"color.mask must be length 4 array",ee.commandStr),de.map(function(Oe){return!!Oe})},function(de,Oe,ce){return oe.optional(function(){de.assert(Oe,de.shared.isArrayLike+"("+ce+")&&"+ce+".length===4","invalid color.mask")}),Rr(4,function(Be){return"!!"+ce+"["+Be+"]"})});case Ls:return Ie(function(de){oe.command(typeof de=="object"&&de,Pe,ee.commandStr);var Oe="value"in de?de.value:1,ce=!!de.invert;return oe.command(typeof Oe=="number"&&Oe>=0&&Oe<=1,"sample.coverage.value must be a number between 0 and 1",ee.commandStr),[Oe,ce]},function(de,Oe,ce){oe.optional(function(){de.assert(Oe,ce+"&&typeof "+ce+'==="object"',"invalid sample.coverage")});var Be=Oe.def('"value" in ',ce,"?+",ce,".value:1"),Xe=Oe.def("!!",ce,".invert");return[Be,Xe]})}}),ze}function Fo(se,ee){var Me=se.static,Ue=se.dynamic,ze={};return Object.keys(Me).forEach(function(Ne){var Pe=Me[Ne],Ie;if(typeof Pe=="number"||typeof Pe=="boolean")Ie=Ao(function(){return Pe});else if(typeof Pe=="function"){var de=Pe._reglType;de==="texture2d"||de==="textureCube"?Ie=Ao(function(Oe){return Oe.link(Pe)}):de==="framebuffer"||de==="framebufferCube"?(oe.command(Pe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ne+'"',ee.commandStr),Ie=Ao(function(Oe){return Oe.link(Pe.color[0])})):oe.commandRaise('invalid data for uniform "'+Ne+'"',ee.commandStr)}else M(Pe)?Ie=Ao(function(Oe){var ce=Oe.global.def("[",Rr(Pe.length,function(Be){return oe.command(typeof Pe[Be]=="number"||typeof Pe[Be]=="boolean","invalid uniform "+Ne,Oe.commandStr),Pe[Be]}),"]");return ce}):oe.commandRaise('invalid or missing data for uniform "'+Ne+'"',ee.commandStr);Ie.value=Pe,ze[Ne]=Ie}),Object.keys(Ue).forEach(function(Ne){var Pe=Ue[Ne];ze[Ne]=ki(Pe,function(Ie,de){return Ie.invoke(de,Pe)})}),ze}function cr(se,ee){var Me=se.static,Ue=se.dynamic,ze={};return Object.keys(Me).forEach(function(Ne){var Pe=Me[Ne],Ie=ae.id(Ne),de=new We;if(Tu(Pe))de.state=es,de.buffer=ct.getBuffer(ct.create(Pe,xl,!1,!0)),de.type=0;else{var Oe=ct.getBuffer(Pe);if(Oe)de.state=es,de.buffer=Oe,de.type=0;else if(oe.command(typeof Pe=="object"&&Pe,"invalid data for attribute "+Ne,ee.commandStr),"constant"in Pe){var ce=Pe.constant;de.buffer="null",de.state=ld,typeof ce=="number"?de.x=ce:(oe.command(M(ce)&&ce.length>0&&ce.length<=4,"invalid constant for attribute "+Ne,ee.commandStr),zl.forEach(function(V,Q){Q<ce.length&&(de[V]=ce[Q])}))}else{Tu(Pe.buffer)?Oe=ct.getBuffer(ct.create(Pe.buffer,xl,!1,!0)):Oe=ct.getBuffer(Pe.buffer),oe.command(!!Oe,'missing buffer for attribute "'+Ne+'"',ee.commandStr);var Be=Pe.offset|0;oe.command(Be>=0,'invalid offset for attribute "'+Ne+'"',ee.commandStr);var Xe=Pe.stride|0;oe.command(Xe>=0&&Xe<256,'invalid stride for attribute "'+Ne+'", must be integer betweeen [0, 255]',ee.commandStr);var d=Pe.size|0;oe.command(!("size"in Pe)||d>0&&d<=4,'invalid size for attribute "'+Ne+'", must be 1,2,3,4',ee.commandStr);var m=!!Pe.normalized,E=0;"type"in Pe&&(oe.commandParameter(Pe.type,Ci,"invalid type for attribute "+Ne,ee.commandStr),E=Ci[Pe.type]);var j=Pe.divisor|0;"divisor"in Pe&&(oe.command(j===0||Lt,'cannot specify divisor for attribute "'+Ne+'", instancing not supported',ee.commandStr),oe.command(j>=0,'invalid divisor for attribute "'+Ne+'"',ee.commandStr)),oe.optional(function(){var V=ee.commandStr,Q=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Pe).forEach(function(pe){oe.command(Q.indexOf(pe)>=0,'unknown parameter "'+pe+'" for attribute pointer "'+Ne+'" (valid parameters are '+Q+")",V)})}),de.buffer=Oe,de.state=es,de.size=d,de.normalized=m,de.type=E||Oe.dtype,de.offset=Be,de.stride=Xe,de.divisor=j}}ze[Ne]=Ao(function(V,Q){var pe=V.attribCache;if(Ie in pe)return pe[Ie];var Ee={isStream:!1};return Object.keys(de).forEach(function(Le){Ee[Le]=de[Le]}),de.buffer&&(Ee.buffer=V.link(de.buffer),Ee.type=Ee.type||Ee.buffer+".dtype"),pe[Ie]=Ee,Ee})}),Object.keys(Ue).forEach(function(Ne){var Pe=Ue[Ne];function Ie(de,Oe){var ce=de.invoke(Oe,Pe),Be=de.shared,Xe=de.constants,d=Be.isBufferArgs,m=Be.buffer;oe.optional(function(){de.assert(Oe,ce+"&&(typeof "+ce+'==="object"||typeof '+ce+'==="function")&&('+d+"("+ce+")||"+m+".getBuffer("+ce+")||"+m+".getBuffer("+ce+".buffer)||"+d+"("+ce+'.buffer)||("constant" in '+ce+"&&(typeof "+ce+'.constant==="number"||'+Be.isArrayLike+"("+ce+".constant))))",'invalid dynamic attribute "'+Ne+'"')});var E={isStream:Oe.def(!1)},j=new We;j.state=es,Object.keys(j).forEach(function(Ee){E[Ee]=Oe.def(""+j[Ee])});var V=E.buffer,Q=E.type;Oe("if(",d,"(",ce,")){",E.isStream,"=true;",V,"=",m,".createStream(",xl,",",ce,");",Q,"=",V,".dtype;","}else{",V,"=",m,".getBuffer(",ce,");","if(",V,"){",Q,"=",V,".dtype;",'}else if("constant" in ',ce,"){",E.state,"=",ld,";","if(typeof "+ce+'.constant === "number"){',E[zl[0]],"=",ce,".constant;",zl.slice(1).map(function(Ee){return E[Ee]}).join("="),"=0;","}else{",zl.map(function(Ee,Le){return E[Ee]+"="+ce+".constant.length>"+Le+"?"+ce+".constant["+Le+"]:0;"}).join(""),"}}else{","if(",d,"(",ce,".buffer)){",V,"=",m,".createStream(",xl,",",ce,".buffer);","}else{",V,"=",m,".getBuffer(",ce,".buffer);","}",Q,'="type" in ',ce,"?",Xe.glTypes,"[",ce,".type]:",V,".dtype;",E.normalized,"=!!",ce,".normalized;");function pe(Ee){Oe(E[Ee],"=",ce,".",Ee,"|0;")}return pe("size"),pe("offset"),pe("stride"),pe("divisor"),Oe("}}"),Oe.exit("if(",E.isStream,"){",m,".destroyStream(",V,");","}"),E}ze[Ne]=ki(Pe,Ie)}),ze}function Wo(se,ee){var Me=se.static,Ue=se.dynamic;if(Ol in Me){var ze=Me[Ol];return ze!==null&&jt.getVAO(ze)===null&&(ze=jt.createVAO(ze)),Ao(function(Pe){return Pe.link(jt.getVAO(ze))})}else if(Ol in Ue){var Ne=Ue[Ol];return ki(Ne,function(Pe,Ie){var de=Pe.invoke(Ie,Ne);return Ie.def(Pe.shared.vao+".getVAO("+de+")")})}return null}function Qr(se){var ee=se.static,Me=se.dynamic,Ue={};return Object.keys(ee).forEach(function(ze){var Ne=ee[ze];Ue[ze]=Ao(function(Pe,Ie){return typeof Ne=="number"||typeof Ne=="boolean"?""+Ne:Pe.link(Ne)})}),Object.keys(Me).forEach(function(ze){var Ne=Me[ze];Ue[ze]=ki(Ne,function(Pe,Ie){return Pe.invoke(Ie,Ne)})}),Ue}function Po(se,ee,Me,Ue,ze){var Ne=se.static,Pe=se.dynamic;oe.optional(function(){var pe=[Ou,Jc,no,Lo,Xl,el,Qa,xu,Us,Ol].concat(St);function Ee(Le){Object.keys(Le).forEach(function(ft){oe.command(pe.indexOf(ft)>=0,'unknown parameter "'+ft+'"',ze.commandStr)})}Ee(Ne),Ee(Pe)});var Ie=Vn(se,ee),de=un(se),Oe=Qn(se,de,ze),ce=gr(se,ze),Be=Mo(se,ze),Xe=rr(se,ze,Ie);function d(pe){var Ee=Oe[pe];Ee&&(Be[pe]=Ee)}d(So),d(Xt(Bs));var m=Object.keys(Be).length>0,E={framebuffer:de,draw:ce,shader:Xe,state:Be,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(E.profile=tr(se),E.uniforms=Fo(Me,ze),E.drawVAO=E.scopeVAO=Wo(se),!E.drawVAO&&Xe.program&&!Ie&&be.angle_instanced_arrays){var j=!0,V=Xe.program.attributes.map(function(pe){var Ee=ee.static[pe];return j=j&&!!Ee,Ee});if(j&&V.length>0){var Q=jt.getVAO(jt.createVAO(V));E.drawVAO=new Gi(null,null,null,function(pe,Ee){return pe.link(Q)}),E.useVAO=!0}}return Ie?E.useVAO=!0:E.attributes=cr(ee,ze),E.context=Qr(Ue),E}function $o(se,ee,Me){var Ue=se.shared,ze=Ue.context,Ne=se.scope();Object.keys(Me).forEach(function(Pe){ee.save(ze,"."+Pe);var Ie=Me[Pe],de=Ie.append(se,ee);Array.isArray(de)?Ne(ze,".",Pe,"=[",de.join(),"];"):Ne(ze,".",Pe,"=",de,";")}),ee(Ne)}function Eo(se,ee,Me,Ue){var ze=se.shared,Ne=ze.gl,Pe=ze.framebuffer,Ie;Kt&&(Ie=ee.def(ze.extensions,".webgl_draw_buffers"));var de=se.constants,Oe=de.drawBuffer,ce=de.backBuffer,Be;Me?Be=Me.append(se,ee):Be=ee.def(Pe,".next"),Ue||ee("if(",Be,"!==",Pe,".cur){"),ee("if(",Be,"){",Ne,".bindFramebuffer(",Xs,",",Be,".framebuffer);"),Kt&&ee(Ie,".drawBuffersWEBGL(",Oe,"[",Be,".colorAttachments.length]);"),ee("}else{",Ne,".bindFramebuffer(",Xs,",null);"),Kt&&ee(Ie,".drawBuffersWEBGL(",ce,");"),ee("}",Pe,".cur=",Be,";"),Ue||ee("}")}function mo(se,ee,Me){var Ue=se.shared,ze=Ue.gl,Ne=se.current,Pe=se.next,Ie=Ue.current,de=Ue.next,Oe=se.cond(Ie,".dirty");St.forEach(function(ce){var Be=Xt(ce);if(!(Be in Me.state)){var Xe,d;if(Be in Pe){Xe=Pe[Be],d=Ne[Be];var m=Rr(xt[Be].length,function(j){return Oe.def(Xe,"[",j,"]")});Oe(se.cond(m.map(function(j,V){return j+"!=="+d+"["+V+"]"}).join("||")).then(ze,".",bt[Be],"(",m,");",m.map(function(j,V){return d+"["+V+"]="+j}).join(";"),";"))}else{Xe=Oe.def(de,".",Be);var E=se.cond(Xe,"!==",Ie,".",Be);Oe(E),Be in Wt?E(se.cond(Xe).then(ze,".enable(",Wt[Be],");").else(ze,".disable(",Wt[Be],");"),Ie,".",Be,"=",Xe,";"):E(ze,".",bt[Be],"(",Xe,");",Ie,".",Be,"=",Xe,";")}}}),Object.keys(Me.state).length===0&&Oe(Ie,".dirty=false;"),ee(Oe)}function ei(se,ee,Me,Ue){var ze=se.shared,Ne=se.current,Pe=ze.current,Ie=ze.gl;Sl(Object.keys(Me)).forEach(function(de){var Oe=Me[de];if(!(Ue&&!Ue(Oe))){var ce=Oe.append(se,ee);if(Wt[de]){var Be=Wt[de];Gn(Oe)?ce?ee(Ie,".enable(",Be,");"):ee(Ie,".disable(",Be,");"):ee(se.cond(ce).then(Ie,".enable(",Be,");").else(Ie,".disable(",Be,");")),ee(Pe,".",de,"=",ce,";")}else if(M(ce)){var Xe=Ne[de];ee(Ie,".",bt[de],"(",ce,");",ce.map(function(d,m){return Xe+"["+m+"]="+d}).join(";"),";")}else ee(Ie,".",bt[de],"(",ce,");",Pe,".",de,"=",ce,";")}})}function Oo(se,ee){Lt&&(se.instancing=ee.def(se.shared.extensions,".angle_instanced_arrays"))}function Zn(se,ee,Me,Ue,ze){var Ne=se.shared,Pe=se.stats,Ie=Ne.current,de=Ne.timer,Oe=Me.profile;function ce(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Be,Xe;function d(pe){Be=ee.def(),pe(Be,"=",ce(),";"),typeof ze=="string"?pe(Pe,".count+=",ze,";"):pe(Pe,".count++;"),kt&&(Ue?(Xe=ee.def(),pe(Xe,"=",de,".getNumPendingQueries();")):pe(de,".beginQuery(",Pe,");"))}function m(pe){pe(Pe,".cpuTime+=",ce(),"-",Be,";"),kt&&(Ue?pe(de,".pushScopeStats(",Xe,",",de,".getNumPendingQueries(),",Pe,");"):pe(de,".endQuery();"))}function E(pe){var Ee=ee.def(Ie,".profile");ee(Ie,".profile=",pe,";"),ee.exit(Ie,".profile=",Ee,";")}var j;if(Oe){if(Gn(Oe)){Oe.enable?(d(ee),m(ee.exit),E("true")):E("false");return}j=Oe.append(se,ee),E(j)}else j=ee.def(Ie,".profile");var V=se.block();d(V),ee("if(",j,"){",V,"}");var Q=se.block();m(Q),ee.exit("if(",j,"){",Q,"}")}function ai(se,ee,Me,Ue,ze){var Ne=se.shared;function Pe(de){switch(de){case rs:case gd:case Ws:return 2;case tf:case Bi:case rf:return 3;case la:case nf:case of:return 4;default:return 1}}function Ie(de,Oe,ce){var Be=Ne.gl,Xe=ee.def(de,".location"),d=ee.def(Ne.attributes,"[",Xe,"]"),m=ce.state,E=ce.buffer,j=[ce.x,ce.y,ce.z,ce.w],V=["buffer","normalized","offset","stride"];function Q(){ee("if(!",d,".buffer){",Be,".enableVertexAttribArray(",Xe,");}");var Ee=ce.type,Le;if(ce.size?Le=ee.def(ce.size,"||",Oe):Le=Oe,ee("if(",d,".type!==",Ee,"||",d,".size!==",Le,"||",V.map(function(mt){return d+"."+mt+"!=="+ce[mt]}).join("||"),"){",Be,".bindBuffer(",xl,",",E,".buffer);",Be,".vertexAttribPointer(",[Xe,Le,Ee,ce.normalized,ce.stride,ce.offset],");",d,".type=",Ee,";",d,".size=",Le,";",V.map(function(mt){return d+"."+mt+"="+ce[mt]+";"}).join(""),"}"),Lt){var ft=ce.divisor;ee("if(",d,".divisor!==",ft,"){",se.instancing,".vertexAttribDivisorANGLE(",[Xe,ft],");",d,".divisor=",ft,";}")}}function pe(){ee("if(",d,".buffer){",Be,".disableVertexAttribArray(",Xe,");",d,".buffer=null;","}if(",zl.map(function(Ee,Le){return d+"."+Ee+"!=="+j[Le]}).join("||"),"){",Be,".vertexAttrib4f(",Xe,",",j,");",zl.map(function(Ee,Le){return d+"."+Ee+"="+j[Le]+";"}).join(""),"}")}m===es?Q():m===ld?pe():(ee("if(",m,"===",es,"){"),Q(),ee("}else{"),pe(),ee("}"))}Ue.forEach(function(de){var Oe=de.name,ce=Me.attributes[Oe],Be;if(ce){if(!ze(ce))return;Be=ce.append(se,ee)}else{if(!ze(ua))return;var Xe=se.scopeAttrib(Oe);oe.optional(function(){se.assert(ee,Xe+".state","missing attribute "+Oe)}),Be={},Object.keys(new We).forEach(function(d){Be[d]=ee.def(Xe,".",d)})}Ie(se.link(de),Pe(de.info.type),Be)})}function Nr(se,ee,Me,Ue,ze){for(var Ne=se.shared,Pe=Ne.gl,Ie,de=0;de<Ue.length;++de){var Oe=Ue[de],ce=Oe.name,Be=Oe.info.type,Xe=Me.uniforms[ce],d=se.link(Oe),m=d+".location",E;if(Xe){if(!ze(Xe))continue;if(Gn(Xe)){var j=Xe.value;if(oe.command(j!==null&&typeof j<"u",'missing uniform "'+ce+'"',se.commandStr),Be===Yl||Be===Zo){oe.command(typeof j=="function"&&(Be===Yl&&(j._reglType==="texture2d"||j._reglType==="framebuffer")||Be===Zo&&(j._reglType==="textureCube"||j._reglType==="framebufferCube")),"invalid texture for uniform "+ce,se.commandStr);var V=se.link(j._texture||j.color[0]._texture);ee(Pe,".uniform1i(",m,",",V+".bind());"),ee.exit(V,".unbind();")}else if(Be===zs||Be===Hs||Be===is){oe.optional(function(){oe.command(M(j),"invalid matrix for uniform "+ce,se.commandStr),oe.command(Be===zs&&j.length===4||Be===Hs&&j.length===9||Be===is&&j.length===16,"invalid length for matrix uniform "+ce,se.commandStr)});var Q=se.global.def("new Float32Array(["+Array.prototype.slice.call(j)+"])"),pe=2;Be===Hs?pe=3:Be===is&&(pe=4),ee(Pe,".uniformMatrix",pe,"fv(",m,",false,",Q,");")}else{switch(Be){case $i:oe.commandType(j,"number","uniform "+ce,se.commandStr),Ie="1f";break;case rs:oe.command(M(j)&&j.length===2,"uniform "+ce,se.commandStr),Ie="2f";break;case tf:oe.command(M(j)&&j.length===3,"uniform "+ce,se.commandStr),Ie="3f";break;case la:oe.command(M(j)&&j.length===4,"uniform "+ce,se.commandStr),Ie="4f";break;case os:oe.commandType(j,"boolean","uniform "+ce,se.commandStr),Ie="1i";break;case Da:oe.commandType(j,"number","uniform "+ce,se.commandStr),Ie="1i";break;case Ws:oe.command(M(j)&&j.length===2,"uniform "+ce,se.commandStr),Ie="2i";break;case gd:oe.command(M(j)&&j.length===2,"uniform "+ce,se.commandStr),Ie="2i";break;case rf:oe.command(M(j)&&j.length===3,"uniform "+ce,se.commandStr),Ie="3i";break;case Bi:oe.command(M(j)&&j.length===3,"uniform "+ce,se.commandStr),Ie="3i";break;case of:oe.command(M(j)&&j.length===4,"uniform "+ce,se.commandStr),Ie="4i";break;case nf:oe.command(M(j)&&j.length===4,"uniform "+ce,se.commandStr),Ie="4i";break}ee(Pe,".uniform",Ie,"(",m,",",M(j)?Array.prototype.slice.call(j):j,");")}continue}else E=Xe.append(se,ee)}else{if(!ze(ua))continue;E=ee.def(Ne.uniforms,"[",ae.id(ce),"]")}Be===Yl?(oe(!Array.isArray(E),"must specify a scalar prop for textures"),ee("if(",E,"&&",E,'._reglType==="framebuffer"){',E,"=",E,".color[0];","}")):Be===Zo&&(oe(!Array.isArray(E),"must specify a scalar prop for cube maps"),ee("if(",E,"&&",E,'._reglType==="framebufferCube"){',E,"=",E,".color[0];","}")),oe.optional(function(){function Gt(Mt,Jt){se.assert(ee,Mt,'bad data or missing for uniform "'+ce+'".  '+Jt)}function An(Mt){oe(!Array.isArray(E),"must not specify an array type for uniform"),Gt("typeof "+E+'==="'+Mt+'"',"invalid type, expected "+Mt)}function On(Mt,Jt){Array.isArray(E)?oe(E.length===Mt,"must have length "+Mt):Gt(Ne.isArrayLike+"("+E+")&&"+E+".length==="+Mt,"invalid vector, should have length "+Mt,se.commandStr)}function Yn(Mt){oe(!Array.isArray(E),"must not specify a value type"),Gt("typeof "+E+'==="function"&&'+E+'._reglType==="texture'+(Mt===md?"2d":"Cube")+'"',"invalid texture type",se.commandStr)}switch(Be){case Da:An("number");break;case gd:On(2);break;case Bi:On(3);break;case nf:On(4);break;case $i:An("number");break;case rs:On(2);break;case tf:On(3);break;case la:On(4);break;case os:An("boolean");break;case Ws:On(2);break;case rf:On(3);break;case of:On(4);break;case zs:On(4);break;case Hs:On(9);break;case is:On(16);break;case Yl:Yn(md);break;case Zo:Yn(yh);break}});var Ee=1;switch(Be){case Yl:case Zo:var Le=ee.def(E,"._texture");ee(Pe,".uniform1i(",m,",",Le,".bind());"),ee.exit(Le,".unbind();");continue;case Da:case os:Ie="1i";break;case gd:case Ws:Ie="2i",Ee=2;break;case Bi:case rf:Ie="3i",Ee=3;break;case nf:case of:Ie="4i",Ee=4;break;case $i:Ie="1f";break;case rs:Ie="2f",Ee=2;break;case tf:Ie="3f",Ee=3;break;case la:Ie="4f",Ee=4;break;case zs:Ie="Matrix2fv";break;case Hs:Ie="Matrix3fv";break;case is:Ie="Matrix4fv";break}if(ee(Pe,".uniform",Ie,"(",m,","),Ie.charAt(0)==="M"){var ft=Math.pow(Be-zs+2,2),mt=se.global.def("new Float32Array(",ft,")");Array.isArray(E)?ee("false,(",Rr(ft,function(Gt){return mt+"["+Gt+"]="+E[Gt]}),",",mt,")"):ee("false,(Array.isArray(",E,")||",E," instanceof Float32Array)?",E,":(",Rr(ft,function(Gt){return mt+"["+Gt+"]="+E+"["+Gt+"]"}),",",mt,")")}else Ee>1?ee(Rr(Ee,function(Gt){return Array.isArray(E)?E[Gt]:E+"["+Gt+"]"})):(oe(!Array.isArray(E),"uniform value must not be an array"),ee(E));ee(");")}}function jn(se,ee,Me,Ue){var ze=se.shared,Ne=ze.gl,Pe=ze.draw,Ie=Ue.draw;function de(){var Le=Ie.elements,ft,mt=ee;return Le?((Le.contextDep&&Ue.contextDynamic||Le.propDep)&&(mt=Me),ft=Le.append(se,mt)):ft=mt.def(Pe,".",Lo),ft&&mt("if("+ft+")"+Ne+".bindBuffer("+hp+","+ft+".buffer.buffer);"),ft}function Oe(){var Le=Ie.count,ft,mt=ee;return Le?((Le.contextDep&&Ue.contextDynamic||Le.propDep)&&(mt=Me),ft=Le.append(se,mt),oe.optional(function(){Le.MISSING&&se.assert(ee,"false","missing vertex count"),Le.DYNAMIC&&se.assert(mt,ft+">=0","missing vertex count")})):(ft=mt.def(Pe,".",Qa),oe.optional(function(){se.assert(mt,ft+">=0","missing vertex count")})),ft}var ce=de();function Be(Le){var ft=Ie[Le];return ft?ft.contextDep&&Ue.contextDynamic||ft.propDep?ft.append(se,Me):ft.append(se,ee):ee.def(Pe,".",Le)}var Xe=Be(Xl),d=Be(el),m=Oe();if(typeof m=="number"){if(m===0)return}else Me("if(",m,"){"),Me.exit("}");var E,j;Lt&&(E=Be(xu),j=se.instancing);var V=ce+".type",Q=Ie.elements&&Gn(Ie.elements);function pe(){function Le(){Me(j,".drawElementsInstancedANGLE(",[Xe,m,V,d+"<<(("+V+"-"+wu+")>>1)",E],");")}function ft(){Me(j,".drawArraysInstancedANGLE(",[Xe,d,m,E],");")}ce?Q?Le():(Me("if(",ce,"){"),Le(),Me("}else{"),ft(),Me("}")):ft()}function Ee(){function Le(){Me(Ne+".drawElements("+[Xe,m,V,d+"<<(("+V+"-"+wu+")>>1)"]+");")}function ft(){Me(Ne+".drawArrays("+[Xe,d,m]+");")}ce?Q?Le():(Me("if(",ce,"){"),Le(),Me("}else{"),ft(),Me("}")):ft()}Lt&&(typeof E!="number"||E>=0)?typeof E=="string"?(Me("if(",E,">0){"),pe(),Me("}else if(",E,"<0){"),Ee(),Me("}")):pe():Ee()}function fr(se,ee,Me,Ue,ze){var Ne=Cn(),Pe=Ne.proc("body",ze);return oe.optional(function(){Ne.commandStr=ee.commandStr,Ne.command=Ne.link(ee.commandStr)}),Lt&&(Ne.instancing=Pe.def(Ne.shared.extensions,".angle_instanced_arrays")),se(Ne,Pe,Me,Ue),Ne.compile().body}function zn(se,ee,Me,Ue){Oo(se,ee),Me.useVAO?Me.drawVAO?ee(se.shared.vao,".setVAO(",Me.drawVAO.append(se,ee),");"):ee(se.shared.vao,".setVAO(",se.shared.vao,".targetVAO);"):(ee(se.shared.vao,".setVAO(null);"),ai(se,ee,Me,Ue.attributes,function(){return!0})),Nr(se,ee,Me,Ue.uniforms,function(){return!0}),jn(se,ee,ee,Me)}function lo(se,ee){var Me=se.proc("draw",1);Oo(se,Me),$o(se,Me,ee.context),Eo(se,Me,ee.framebuffer),mo(se,Me,ee),ei(se,Me,ee.state),Zn(se,Me,ee,!1,!0);var Ue=ee.shader.progVar.append(se,Me);if(Me(se.shared.gl,".useProgram(",Ue,".program);"),ee.shader.program)zn(se,Me,ee,ee.shader.program);else{Me(se.shared.vao,".setVAO(null);");var ze=se.global.def("{}"),Ne=Me.def(Ue,".id"),Pe=Me.def(ze,"[",Ne,"]");Me(se.cond(Pe).then(Pe,".call(this,a0);").else(Pe,"=",ze,"[",Ne,"]=",se.link(function(Ie){return fr(zn,se,ee,Ie,1)}),"(",Ue,");",Pe,".call(this,a0);"))}Object.keys(ee.state).length>0&&Me(se.shared.current,".dirty=true;")}function Fa(se,ee,Me,Ue){se.batchId="a1",Oo(se,ee);function ze(){return!0}ai(se,ee,Me,Ue.attributes,ze),Nr(se,ee,Me,Ue.uniforms,ze),jn(se,ee,ee,Me)}function Zl(se,ee,Me,Ue){Oo(se,ee);var ze=Me.contextDep,Ne=ee.def(),Pe="a0",Ie="a1",de=ee.def();se.shared.props=de,se.batchId=Ne;var Oe=se.scope(),ce=se.scope();ee(Oe.entry,"for(",Ne,"=0;",Ne,"<",Ie,";++",Ne,"){",de,"=",Pe,"[",Ne,"];",ce,"}",Oe.exit);function Be(V){return V.contextDep&&ze||V.propDep}function Xe(V){return!Be(V)}if(Me.needsContext&&$o(se,ce,Me.context),Me.needsFramebuffer&&Eo(se,ce,Me.framebuffer),ei(se,ce,Me.state,Be),Me.profile&&Be(Me.profile)&&Zn(se,ce,Me,!1,!0),Ue)Me.useVAO?Me.drawVAO?Be(Me.drawVAO)?ce(se.shared.vao,".setVAO(",Me.drawVAO.append(se,ce),");"):Oe(se.shared.vao,".setVAO(",Me.drawVAO.append(se,Oe),");"):Oe(se.shared.vao,".setVAO(",se.shared.vao,".targetVAO);"):(Oe(se.shared.vao,".setVAO(null);"),ai(se,Oe,Me,Ue.attributes,Xe),ai(se,ce,Me,Ue.attributes,Be)),Nr(se,Oe,Me,Ue.uniforms,Xe),Nr(se,ce,Me,Ue.uniforms,Be),jn(se,Oe,ce,Me);else{var d=se.global.def("{}"),m=Me.shader.progVar.append(se,ce),E=ce.def(m,".id"),j=ce.def(d,"[",E,"]");ce(se.shared.gl,".useProgram(",m,".program);","if(!",j,"){",j,"=",d,"[",E,"]=",se.link(function(V){return fr(Fa,se,Me,V,2)}),"(",m,");}",j,".call(this,a0[",Ne,"],",Ne,");")}}function ye(se,ee){var Me=se.proc("batch",2);se.batchId="0",Oo(se,Me);var Ue=!1,ze=!0;Object.keys(ee.context).forEach(function(d){Ue=Ue||ee.context[d].propDep}),Ue||($o(se,Me,ee.context),ze=!1);var Ne=ee.framebuffer,Pe=!1;Ne?(Ne.propDep?Ue=Pe=!0:Ne.contextDep&&Ue&&(Pe=!0),Pe||Eo(se,Me,Ne)):Eo(se,Me,null),ee.state.viewport&&ee.state.viewport.propDep&&(Ue=!0);function Ie(d){return d.contextDep&&Ue||d.propDep}mo(se,Me,ee),ei(se,Me,ee.state,function(d){return!Ie(d)}),(!ee.profile||!Ie(ee.profile))&&Zn(se,Me,ee,!1,"a1"),ee.contextDep=Ue,ee.needsContext=ze,ee.needsFramebuffer=Pe;var de=ee.shader.progVar;if(de.contextDep&&Ue||de.propDep)Zl(se,Me,ee,null);else{var Oe=de.append(se,Me);if(Me(se.shared.gl,".useProgram(",Oe,".program);"),ee.shader.program)Zl(se,Me,ee,ee.shader.program);else{Me(se.shared.vao,".setVAO(null);");var ce=se.global.def("{}"),Be=Me.def(Oe,".id"),Xe=Me.def(ce,"[",Be,"]");Me(se.cond(Xe).then(Xe,".call(this,a0,a1);").else(Xe,"=",ce,"[",Be,"]=",se.link(function(d){return fr(Zl,se,ee,d,2)}),"(",Oe,");",Xe,".call(this,a0,a1);"))}}Object.keys(ee.state).length>0&&Me(se.shared.current,".dirty=true;")}function tt(se,ee){var Me=se.proc("scope",3);se.batchId="a2";var Ue=se.shared,ze=Ue.current;$o(se,Me,ee.context),ee.framebuffer&&ee.framebuffer.append(se,Me),Sl(Object.keys(ee.state)).forEach(function(Pe){var Ie=ee.state[Pe],de=Ie.append(se,Me);M(de)?de.forEach(function(Oe,ce){Me.set(se.next[Pe],"["+ce+"]",Oe)}):Me.set(Ue.next,"."+Pe,de)}),Zn(se,Me,ee,!0,!0),[Lo,el,Qa,xu,Xl].forEach(function(Pe){var Ie=ee.draw[Pe];Ie&&Me.set(Ue.draw,"."+Pe,""+Ie.append(se,Me))}),Object.keys(ee.uniforms).forEach(function(Pe){var Ie=ee.uniforms[Pe].append(se,Me);Array.isArray(Ie)&&(Ie="["+Ie.join()+"]"),Me.set(Ue.uniforms,"["+ae.id(Pe)+"]",Ie)}),Object.keys(ee.attributes).forEach(function(Pe){var Ie=ee.attributes[Pe].append(se,Me),de=se.scopeAttrib(Pe);Object.keys(new We).forEach(function(Oe){Me.set(de,"."+Oe,Ie[Oe])})}),ee.scopeVAO&&Me.set(Ue.vao,".targetVAO",ee.scopeVAO.append(se,Me));function Ne(Pe){var Ie=ee.shader[Pe];Ie&&Me.set(Ue.shader,"."+Pe,Ie.append(se,Me))}Ne(Jc),Ne(no),Object.keys(ee.state).length>0&&(Me(ze,".dirty=true;"),Me.exit(ze,".dirty=true;")),Me("a1(",se.shared.context,",a0,",se.batchId,");")}function qe(se){if(!(typeof se!="object"||M(se))){for(var ee=Object.keys(se),Me=0;Me<ee.length;++Me)if(qt.isDynamic(se[ee[Me]]))return!0;return!1}}function tn(se,ee,Me){var Ue=ee.static[Me];if(!Ue||!qe(Ue))return;var ze=se.global,Ne=Object.keys(Ue),Pe=!1,Ie=!1,de=!1,Oe=se.global.def("{}");Ne.forEach(function(Be){var Xe=Ue[Be];if(qt.isDynamic(Xe)){typeof Xe=="function"&&(Xe=Ue[Be]=qt.unbox(Xe));var d=ki(Xe,null);Pe=Pe||d.thisDep,de=de||d.propDep,Ie=Ie||d.contextDep}else{switch(ze(Oe,".",Be,"="),typeof Xe){case"number":ze(Xe);break;case"string":ze('"',Xe,'"');break;case"object":Array.isArray(Xe)&&ze("[",Xe.join(),"]");break;default:ze(se.link(Xe));break}ze(";")}});function ce(Be,Xe){Ne.forEach(function(d){var m=Ue[d];if(qt.isDynamic(m)){var E=Be.invoke(Xe,m);Xe(Oe,".",d,"=",E,";")}})}ee.dynamic[Me]=new qt.DynamicVariable(Hc,{thisDep:Pe,contextDep:Ie,propDep:de,ref:Oe,append:ce}),delete ee.static[Me]}function hr(se,ee,Me,Ue,ze){var Ne=Cn();Ne.stats=Ne.link(ze),Object.keys(ee.static).forEach(function(Ie){tn(Ne,ee,Ie)}),pp.forEach(function(Ie){tn(Ne,se,Ie)});var Pe=Po(se,ee,Me,Ue,Ne);return lo(Ne,Pe),tt(Ne,Pe),ye(Ne,Pe),o(Ne.compile(),{destroy:function(){Pe.shader.program.destroy()}})}return{next:Zt,current:xt,procs:function(){var se=Cn(),ee=se.proc("poll"),Me=se.proc("refresh"),Ue=se.block();ee(Ue),Me(Ue);var ze=se.shared,Ne=ze.gl,Pe=ze.next,Ie=ze.current;Ue(Ie,".dirty=false;"),Eo(se,ee),Eo(se,Me,null,!0);var de;Lt&&(de=se.link(Lt)),be.oes_vertex_array_object&&Me(se.link(be.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Oe=0;Oe<Qe.maxAttributes;++Oe){var ce=Me.def(ze.attributes,"[",Oe,"]"),Be=se.cond(ce,".buffer");Be.then(Ne,".enableVertexAttribArray(",Oe,");",Ne,".bindBuffer(",xl,",",ce,".buffer.buffer);",Ne,".vertexAttribPointer(",Oe,",",ce,".size,",ce,".type,",ce,".normalized,",ce,".stride,",ce,".offset);").else(Ne,".disableVertexAttribArray(",Oe,");",Ne,".vertexAttrib4f(",Oe,",",ce,".x,",ce,".y,",ce,".z,",ce,".w);",ce,".buffer=null;"),Me(Be),Lt&&Me(de,".vertexAttribDivisorANGLE(",Oe,",",ce,".divisor);")}return Me(se.shared.vao,".currentVAO=null;",se.shared.vao,".setVAO(",se.shared.vao,".targetVAO);"),Object.keys(Wt).forEach(function(Xe){var d=Wt[Xe],m=Ue.def(Pe,".",Xe),E=se.block();E("if(",m,"){",Ne,".enable(",d,")}else{",Ne,".disable(",d,")}",Ie,".",Xe,"=",m,";"),Me(E),ee("if(",m,"!==",Ie,".",Xe,"){",E,"}")}),Object.keys(bt).forEach(function(Xe){var d=bt[Xe],m=xt[Xe],E,j,V=se.block();if(V(Ne,".",d,"("),M(m)){var Q=m.length;E=se.global.def(Pe,".",Xe),j=se.global.def(Ie,".",Xe),V(Rr(Q,function(pe){return E+"["+pe+"]"}),");",Rr(Q,function(pe){return j+"["+pe+"]="+E+"["+pe+"];"}).join("")),ee("if(",Rr(Q,function(pe){return E+"["+pe+"]!=="+j+"["+pe+"]"}).join("||"),"){",V,"}")}else E=Ue.def(Pe,".",Xe),j=Ue.def(Ie,".",Xe),V(E,");",Ie,".",Xe,"=",E,";"),ee("if(",E,"!==",j,"){",V,"}");Me(V)}),se.compile()}(),compile:hr}}function Ah(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Mu=34918,mr=34919,Th=35007,sa=function(F,ae){if(!ae.ext_disjoint_timer_query)return null;var be=[];function Qe(){return be.pop()||ae.ext_disjoint_timer_query.createQueryEXT()}function ct(Lt){be.push(Lt)}var Ke=[];function lt(Lt){var Kt=Qe();ae.ext_disjoint_timer_query.beginQueryEXT(Th,Kt),Ke.push(Kt),kt(Ke.length-1,Ke.length,Lt)}function Pt(){ae.ext_disjoint_timer_query.endQueryEXT(Th)}function Dt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var jt=[];function ut(){return jt.pop()||new Dt}function Vt(Lt){jt.push(Lt)}var Ut=[];function kt(Lt,Kt,xt){var Zt=ut();Zt.startQueryIndex=Lt,Zt.endQueryIndex=Kt,Zt.sum=0,Zt.stats=xt,Ut.push(Zt)}var _t=[],We=[];function it(){var Lt,Kt,xt=Ke.length;if(xt!==0){We.length=Math.max(We.length,xt+1),_t.length=Math.max(_t.length,xt+1),_t[0]=0,We[0]=0;var Zt=0;for(Lt=0,Kt=0;Kt<Ke.length;++Kt){var St=Ke[Kt];ae.ext_disjoint_timer_query.getQueryObjectEXT(St,mr)?(Zt+=ae.ext_disjoint_timer_query.getQueryObjectEXT(St,Mu),ct(St)):Ke[Lt++]=St,_t[Kt+1]=Zt,We[Kt+1]=Lt}for(Ke.length=Lt,Lt=0,Kt=0;Kt<Ut.length;++Kt){var Wt=Ut[Kt],bt=Wt.startQueryIndex,Xt=Wt.endQueryIndex;Wt.sum+=_t[Xt]-_t[bt];var Mn=We[bt],Wn=We[Xt];Wn===Mn?(Wt.stats.gpuTime+=Wt.sum/1e6,Vt(Wt)):(Wt.startQueryIndex=Mn,Wt.endQueryIndex=Wn,Ut[Lt++]=Wt)}Ut.length=Lt}}return{beginQuery:lt,endQuery:Pt,pushScopeStats:kt,update:it,getNumPendingQueries:function(){return Ke.length},clear:function(){be.push.apply(be,Ke);for(var Lt=0;Lt<be.length;Lt++)ae.ext_disjoint_timer_query.deleteQueryEXT(be[Lt]);Ke.length=0,be.length=0},restore:function(){Ke.length=0,be.length=0}}},Qo=16384,La=256,Zv=1024,uf=34962,Al="webglcontextlost",wp="webglcontextrestored",Kl=1,Jr=2,To=3;function _i(F,ae){for(var be=0;be<F.length;++be)if(F[be]===ae)return be;return-1}function sf(F){var ae=ir(F);if(!ae)return null;var be=ae.gl,Qe=be.getContextAttributes(),ct=be.isContextLost(),Ke=Kr(be,ae);if(!Ke)return null;var lt=ni(),Pt=Ah(),Dt=Ke.extensions,jt=sa(be,Dt),ut=wr(),Vt=be.drawingBufferWidth,Ut=be.drawingBufferHeight,kt={tick:0,time:0,viewportWidth:Vt,viewportHeight:Ut,framebufferWidth:Vt,framebufferHeight:Ut,drawingBufferWidth:Vt,drawingBufferHeight:Ut,pixelRatio:ae.pixelRatio},_t={},We={elements:null,primitive:4,count:-1,offset:0,instances:-1},it=Ac(be,Dt),Lt=va(be,Pt,ae,xt),Kt=id(be,Dt,it,Pt,Lt);function xt(jn){return Kt.destroyBuffer(jn)}var Zt=fn(be,Dt,Lt,Pt),St=ap(be,lt,Pt,ae),Wt=Or(be,Dt,it,function(){Mn.procs.poll()},kt,Pt,ae),bt=js(be,Dt,it,Pt,ae),Xt=Vc(be,Dt,it,Wt,bt,Pt),Mn=Kv(be,lt,Dt,it,Lt,Zt,Wt,Xt,_t,Kt,St,We,kt,jt,ae),Wn=wo(be,Xt,Mn.procs.poll,kt,Qe,Dt,it),It=Mn.next,At=be.canvas,Et=[],Cn=[],tr=[],un=[ae.onDestroy],Qn=null;function Vn(){if(Et.length===0){jt&&jt.update(),Qn=null;return}Qn=kn.next(Vn),ei();for(var jn=Et.length-1;jn>=0;--jn){var fr=Et[jn];fr&&fr(kt,null,0)}be.flush(),jt&&jt.update()}function rr(){!Qn&&Et.length>0&&(Qn=kn.next(Vn))}function gr(){Qn&&(kn.cancel(Vn),Qn=null)}function Mo(jn){jn.preventDefault(),ct=!0,gr(),Cn.forEach(function(fr){fr()})}function Fo(jn){be.getError(),ct=!1,Ke.restore(),St.restore(),Lt.restore(),Wt.restore(),bt.restore(),Xt.restore(),Kt.restore(),jt&&jt.restore(),Mn.procs.refresh(),rr(),tr.forEach(function(fr){fr()})}At&&(At.addEventListener(Al,Mo,!1),At.addEventListener(wp,Fo,!1));function cr(){Et.length=0,gr(),At&&(At.removeEventListener(Al,Mo),At.removeEventListener(wp,Fo)),St.clear(),Xt.clear(),bt.clear(),Wt.clear(),Zt.clear(),Lt.clear(),Kt.clear(),jt&&jt.clear(),un.forEach(function(jn){jn()})}function Wo(jn){oe(!!jn,"invalid args to regl({...})"),oe.type(jn,"object","invalid args to regl({...})");function fr(ze){var Ne=o({},ze);delete Ne.uniforms,delete Ne.attributes,delete Ne.context,delete Ne.vao,"stencil"in Ne&&Ne.stencil.op&&(Ne.stencil.opBack=Ne.stencil.opFront=Ne.stencil.op,delete Ne.stencil.op);function Pe(Ie){if(Ie in Ne){var de=Ne[Ie];delete Ne[Ie],Object.keys(de).forEach(function(Oe){Ne[Ie+"."+Oe]=de[Oe]})}}return Pe("blend"),Pe("depth"),Pe("cull"),Pe("stencil"),Pe("polygonOffset"),Pe("scissor"),Pe("sample"),"vao"in ze&&(Ne.vao=ze.vao),Ne}function zn(ze,Ne){var Pe={},Ie={};return Object.keys(ze).forEach(function(de){var Oe=ze[de];if(qt.isDynamic(Oe)){Ie[de]=qt.unbox(Oe,de);return}else if(Ne&&Array.isArray(Oe)){for(var ce=0;ce<Oe.length;++ce)if(qt.isDynamic(Oe[ce])){Ie[de]=qt.unbox(Oe,de);return}}Pe[de]=Oe}),{dynamic:Ie,static:Pe}}var lo=zn(jn.context||{},!0),Fa=zn(jn.uniforms||{},!0),Zl=zn(jn.attributes||{},!1),ye=zn(fr(jn),!1),tt={gpuTime:0,cpuTime:0,count:0},qe=Mn.compile(ye,Zl,Fa,lo,tt),tn=qe.draw,hr=qe.batch,se=qe.scope,ee=[];function Me(ze){for(;ee.length<ze;)ee.push(null);return ee}function Ue(ze,Ne){var Pe;if(ct&&oe.raise("context lost"),typeof ze=="function")return se.call(this,null,ze,0);if(typeof Ne=="function")if(typeof ze=="number")for(Pe=0;Pe<ze;++Pe)se.call(this,null,Ne,Pe);else if(Array.isArray(ze))for(Pe=0;Pe<ze.length;++Pe)se.call(this,ze[Pe],Ne,Pe);else return se.call(this,ze,Ne,0);else if(typeof ze=="number"){if(ze>0)return hr.call(this,Me(ze|0),ze|0)}else if(Array.isArray(ze)){if(ze.length)return hr.call(this,ze,ze.length)}else return tn.call(this,ze)}return o(Ue,{stats:tt,destroy:function(){qe.destroy()}})}var Qr=Xt.setFBO=Wo({framebuffer:qt.define.call(null,Kl,"framebuffer")});function Po(jn,fr){var zn=0;Mn.procs.poll();var lo=fr.color;lo&&(be.clearColor(+lo[0]||0,+lo[1]||0,+lo[2]||0,+lo[3]||0),zn|=Qo),"depth"in fr&&(be.clearDepth(+fr.depth),zn|=La),"stencil"in fr&&(be.clearStencil(fr.stencil|0),zn|=Zv),oe(!!zn,"called regl.clear with no buffer specified"),be.clear(zn)}function $o(jn){if(oe(typeof jn=="object"&&jn,"regl.clear() takes an object as input"),"framebuffer"in jn)if(jn.framebuffer&&jn.framebuffer_reglType==="framebufferCube")for(var fr=0;fr<6;++fr)Qr(o({framebuffer:jn.framebuffer.faces[fr]},jn),Po);else Qr(jn,Po);else Po(null,jn)}function Eo(jn){oe.type(jn,"function","regl.frame() callback must be a function"),Et.push(jn);function fr(){var zn=_i(Et,jn);oe(zn>=0,"cannot cancel a frame twice");function lo(){var Fa=_i(Et,lo);Et[Fa]=Et[Et.length-1],Et.length-=1,Et.length<=0&&gr()}Et[zn]=lo}return rr(),{cancel:fr}}function mo(){var jn=It.viewport,fr=It.scissor_box;jn[0]=jn[1]=fr[0]=fr[1]=0,kt.viewportWidth=kt.framebufferWidth=kt.drawingBufferWidth=jn[2]=fr[2]=be.drawingBufferWidth,kt.viewportHeight=kt.framebufferHeight=kt.drawingBufferHeight=jn[3]=fr[3]=be.drawingBufferHeight}function ei(){kt.tick+=1,kt.time=Zn(),mo(),Mn.procs.poll()}function Oo(){Wt.refresh(),mo(),Mn.procs.refresh(),jt&&jt.update()}function Zn(){return(wr()-ut)/1e3}Oo();function ai(jn,fr){oe.type(fr,"function","listener callback must be a function");var zn;switch(jn){case"frame":return Eo(fr);case"lost":zn=Cn;break;case"restore":zn=tr;break;case"destroy":zn=un;break;default:oe.raise("invalid event, must be one of frame,lost,restore,destroy")}return zn.push(fr),{cancel:function(){for(var lo=0;lo<zn.length;++lo)if(zn[lo]===fr){zn[lo]=zn[zn.length-1],zn.pop();return}}}}var Nr=o(Wo,{clear:$o,prop:qt.define.bind(null,Kl),context:qt.define.bind(null,Jr),this:qt.define.bind(null,To),draw:Wo({}),buffer:function(jn){return Lt.create(jn,uf,!1,!1)},elements:function(jn){return Zt.create(jn,!1)},texture:Wt.create2D,cube:Wt.createCube,renderbuffer:bt.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:Kt.createVAO,attributes:Qe,frame:Eo,on:ai,limits:it,hasExtension:function(jn){return it.extensions.indexOf(jn.toLowerCase())>=0},read:Wn,destroy:cr,_gl:be,_refresh:Oo,poll:function(){ei(),jt&&jt.update()},now:Zn,stats:Pt});return ae.onDone(null,Nr),Nr}return sf})})(Wte);var bf,vy,wf,Ru,yy,Pd,my,pg,ac,Cp,Ea,lc,uc,hg;bf={},an(bf,on.POINTS,"points"),an(bf,on.LINES,"lines"),an(bf,on.LINE_LOOP,"line loop"),an(bf,on.LINE_STRIP,"line strip"),an(bf,on.TRIANGLES,"triangles"),an(bf,on.TRIANGLE_FAN,"triangle fan"),an(bf,on.TRIANGLE_STRIP,"triangle strip");vy={},an(vy,on.STATIC_DRAW,"static"),an(vy,on.DYNAMIC_DRAW,"dynamic"),an(vy,on.STREAM_DRAW,"stream");wf={},an(wf,on.BYTE,"int8"),an(wf,on.UNSIGNED_INT,"int16"),an(wf,on.INT,"int32"),an(wf,on.UNSIGNED_BYTE,"uint8"),an(wf,on.UNSIGNED_SHORT,"uint16"),an(wf,on.UNSIGNED_INT,"uint32"),an(wf,on.FLOAT,"float");Ru={},an(Ru,on.ALPHA,"alpha"),an(Ru,on.LUMINANCE,"luminance"),an(Ru,on.LUMINANCE_ALPHA,"luminance alpha"),an(Ru,on.RGB,"rgb"),an(Ru,on.RGBA,"rgba"),an(Ru,on.RGBA4,"rgba4"),an(Ru,on.RGB5_A1,"rgb5 a1"),an(Ru,on.RGB565,"rgb565"),an(Ru,on.DEPTH_COMPONENT,"depth"),an(Ru,on.DEPTH_STENCIL,"depth stencil");yy={},an(yy,on.DONT_CARE,"dont care"),an(yy,on.NICEST,"nice"),an(yy,on.FASTEST,"fast");Pd={},an(Pd,on.NEAREST,"nearest"),an(Pd,on.LINEAR,"linear"),an(Pd,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(Pd,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(Pd,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(Pd,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");my={},an(my,on.REPEAT,"repeat"),an(my,on.CLAMP_TO_EDGE,"clamp"),an(my,on.MIRRORED_REPEAT,"mirror");pg={},an(pg,on.NONE,"none"),an(pg,on.BROWSER_DEFAULT_WEBGL,"browser");ac={},an(ac,on.NEVER,"never"),an(ac,on.ALWAYS,"always"),an(ac,on.LESS,"less"),an(ac,on.LEQUAL,"lequal"),an(ac,on.GREATER,"greater"),an(ac,on.GEQUAL,"gequal"),an(ac,on.EQUAL,"equal"),an(ac,on.NOTEQUAL,"notequal");Cp={},an(Cp,on.FUNC_ADD,"add"),an(Cp,on.MIN_EXT,"min"),an(Cp,on.MAX_EXT,"max"),an(Cp,on.FUNC_SUBTRACT,"subtract"),an(Cp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");Ea={},an(Ea,on.ZERO,"zero"),an(Ea,on.ONE,"one"),an(Ea,on.SRC_COLOR,"src color"),an(Ea,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(Ea,on.SRC_ALPHA,"src alpha"),an(Ea,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(Ea,on.DST_COLOR,"dst color"),an(Ea,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(Ea,on.DST_ALPHA,"dst alpha"),an(Ea,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(Ea,on.CONSTANT_COLOR,"constant color"),an(Ea,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(Ea,on.CONSTANT_ALPHA,"constant alpha"),an(Ea,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(Ea,on.SRC_ALPHA_SATURATE,"src alpha saturate");lc={},an(lc,on.NEVER,"never"),an(lc,on.ALWAYS,"always"),an(lc,on.LESS,"less"),an(lc,on.LEQUAL,"lequal"),an(lc,on.GREATER,"greater"),an(lc,on.GEQUAL,"gequal"),an(lc,on.EQUAL,"equal"),an(lc,on.NOTEQUAL,"notequal");uc={},an(uc,on.ZERO,"zero"),an(uc,on.KEEP,"keep"),an(uc,on.REPLACE,"replace"),an(uc,on.INVERT,"invert"),an(uc,on.INCR,"increment"),an(uc,on.DECR,"decrement"),an(uc,on.INCR_WRAP,"increment wrap"),an(uc,on.DECR_WRAP,"decrement wrap");hg={},an(hg,on.FRONT,"front"),an(hg,on.BACK,"back");var zte=Function.prototype,Hte=zte.toString;Hte.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class XN{constructor(){wa(this,"lf");wa(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new tJ(this.option).layout({nodes:n.map(_=>({id:_.id,size:{width:_.width,height:_.height},model:_})),edges:o.map(_=>({source:_.sourceNodeId,target:_.targetNodeId,model:_}))}).nodes)==null||g.forEach(_=>{const{model:w}=_;w.set_position({x:_.x,y:_.y})}),this.lf.fitView()}}wa(XN,"pluginName","dagre");const Xte=Cr({name:"WorkFlow"}),Yte=Cr({...Xte,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":$V,"./nodes/application-node/index.ts":HV,"./nodes/base-node/index.ts":YW,"./nodes/condition-node/index.ts":Jz,"./nodes/document-extract-node/index.ts":rH,"./nodes/form-node/index.ts":OH,"./nodes/function-lib-node/index.ts":IH,"./nodes/function-node/index.ts":JH,"./nodes/image-generate/index.ts":cX,"./nodes/image-understand/index.ts":wX,"./nodes/mcp-node/index.ts":$X,"./nodes/question-node/index.ts":qX,"./nodes/recommend-node/index.ts":eY,"./nodes/reply-node/index.ts":lY,"./nodes/reranker-node/index.ts":EY,"./nodes/search-dataset-node/index.ts":jY,"./nodes/speech-to-text-node/index.ts":GY,"./nodes/start-node/index.ts":YY,"./nodes/text-to-speech-node/index.ts":rq,"./nodes/variable-assign-node/index.ts":fq}),o=IV(),r=wt(""),s=e,c={nodes:[...hL]};po({get:()=>s.data?s.data:c,set:A=>A});const v=wt();Uo(()=>{g()});const h=A=>{v.value.render(A)},g=A=>{const R=document.querySelector("#container");R&&(v.value=new O9({plugins:[XN],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:R}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),_q(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(D=>n[D].default),mq]),v.value.setDefaultEdgeType("app-edge"),v.value.render(A||{}),v.value.graphModel.eventCenter.on("delete_edge",D=>{D.forEach(N=>{v.value.deleteEdge(N)})}),v.value.graphModel.eventCenter.on("anchor:drop",D=>{D.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var D;(D=v.value)==null||D.fitView()},500))};return t({onmousedown:A=>{A.type&&v.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(A=>{var R;return(R=A==null?void 0:A.validate)==null?void 0:R.call(A)})),getGraphData:()=>v.value.getGraphData(),addNode:A=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:R,virtualRectCenterPositionY:D}=v.value.graphModel.getVirtualRectSize(),N=v.value.graphModel.addNode({type:A.type,properties:A.properties,x:R,y:D-v.value.graphModel.height/2});N.isSelected=!0,N.isHovered=!0,v.value.toFront(N.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:h}),(A,R)=>(Ye(),Rn(Bo,null,[R[0]||(R[0]=me("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(Ye(),Bt(gq,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):nr("",!0),L(vr(o),{"flow-id":r.value},null,8,["flow-id"])],64))}});const qte={class:"workflow-publish-history border-l"},Kte={class:"border-b p-16-24"},Zte={class:"list-height pt-0"},Jte={class:"p-8 pt-0"},Qte={class:"flex-between"},ene={style:{"max-width":"80%"}},tne={class:"text-center"},nne=Cr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=qM(),{params:{id:o}}=n,r=t,s=wt(!1),c=wt([]),v=wt("");function h(A){v.value=A.id}function g(A){r("click",A)}function _(A){r("refreshVersion",A)}function w(A){A.writeStatus=!0}function O(A){A.writeStatus=!1}function S(A,R){if(A){const D={name:A};Aa.putWorkFlowVersion(o,R.id,D,s).then(()=>{Up(Qt("common.modifySuccess")),R.writeStatus=!1,P()})}else xa(Qt("views.applicationWorkflow.tip.nameMessage"))}function P(){Aa.getWorkFlowVersion(o,s).then(A=>{c.value=A.data})}return Uo(()=>{P()}),(A,R)=>{const D=ue("ReadWrite"),N=ue("el-tag"),B=ue("UserFilled"),q=ue("el-icon"),Z=ue("AppAvatar"),Y=ue("el-text"),te=ue("MoreFilled"),G=ue("el-button"),C=ue("EditPen"),W=ue("el-dropdown-item"),K=ue("RefreshLeft"),z=ue("el-dropdown-menu"),H=ue("el-dropdown"),re=ue("common-list"),fe=ue("el-scrollbar"),Se=Ev("loading");return Ye(),Rn("div",qte,[me("h4",Kte,$e(A.$t("views.applicationWorkflow.setting.releaseHistory")),1),me("div",Zte,[L(fe,null,{default:U(()=>[me("div",Jte,[Pl((Ye(),Bt(re,{data:c.value,class:"mt-8",onClick:g,onMouseenter:h,onMouseleave:R[1]||(R[1]=Te=>v.value="")},{default:U(({row:Te,index:he})=>[me("div",Qte,[me("div",ene,[me("h5",{class:sc([he===0?"primary":"","flex"])},[L(D,{onChange:_e=>S(_e,Te),data:Te.name||vr(ew)(Te.update_time),trigger:"manual",write:Te.writeStatus,onClose:_e=>O(Te)},null,8,["onChange","data","write","onClose"]),he===0?(Ye(),Bt(N,{key:0,class:"default-tag ml-4"},{default:U(()=>[Tt($e(A.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):nr("",!0)],2),L(Y,{type:"info",class:"color-secondary flex mt-8"},{default:U(()=>[L(Z,{size:20,class:"avatar-grey mr-4"},{default:U(()=>[L(q,null,{default:U(()=>[L(B)]),_:1})]),_:1}),Tt(" "+$e(Te.publish_user_name),1)]),_:2},1024)]),Pl(me("div",{onClick:R[0]||(R[0]=_n(()=>{},["stop"]))},[L(H,{trigger:"click",teleported:!1},{dropdown:U(()=>[L(z,null,{default:U(()=>[L(W,{onClick:_n(_e=>w(Te),["stop"])},{default:U(()=>[L(q,null,{default:U(()=>[L(C)]),_:1}),Tt(" "+$e(A.$t("common.edit")),1)]),_:2},1032,["onClick"]),L(W,{onClick:_e=>_(Te)},{default:U(()=>[L(q,null,{default:U(()=>[L(K)]),_:1}),Tt(" "+$e(A.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:U(()=>[L(G,{text:""},{default:U(()=>[L(q,null,{default:U(()=>[L(te)]),_:1})]),_:1})]),_:2},1024)],512),[[wv,v.value===Te.id]])])]),empty:U(()=>[me("div",tne,[L(Y,{type:"info"},{default:U(()=>[Tt($e(A.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Se,s.value]])])]),_:1})])])}}});const rne=Rv(nne,[["__scopeId","data-v-ff153f59"]]),xM=[si.AiChat,si.Reply,si.FunctionLib,si.FunctionLibCustom,si.ImageUnderstandNode,si.Application,si.SpeechToTextNode,si.TextToSpeechNode,si.ImageGenerateNode];class SM{constructor(t){wa(this,"nodes");wa(this,"edges");wa(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===si.Start);if(t.length==0)throw Qt("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Qt("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===si.Base);if(t.length==0)throw Qt("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Qt("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===si.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===si.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==si.Start&&n.id!==si.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Qt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(o.length==0&&!xM.includes(t.type))throw Qt("views.applicationWorkflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==si.Base&&t.type!==si.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Qt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===si.Condition){const n=t.properties.node_data.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.needConnect1")}${o.type}${Qt("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(o=>o.sourceNodeId==t.id).length==0&&!xM.includes(t.type))throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.nodeUnavailable")}`}}const one={class:"application-workflow"},ine={class:"header border-b flex-between p-12-24"},ane={class:"flex align-center"},lne={key:0},une={key:0},sne={key:1},cne={class:"ml-4"},fne={class:"flex-between"},dne={class:"flex align-center"},pne={class:"mr-12 ml-24 flex"},hne=["src"],vne={class:"mr-16"},yne={class:"scrollbar-height"},Mne=Cr({__name:"index",setup(e){const{user:t,application:n}=Pf(),o=vL(),r=qM(),s=po(()=>t.isDefaultTheme()),{params:{id:c}}=r;let v;const h=wt(),g=wt(),_=wt(!1),w=wt(null),O=wt(!1),S=wt(!1),P=wt(!1),A=wt(""),R=wt(!1),D=wt(!1),N=wt(!1),B=wt({}),q=wt(null);function Z(){JSON.stringify(q.value)!==JSON.stringify(he())?Bw(Qt("common.tip"),Qt("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Qt("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Qt("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{De(!0,!0)}).catch(rt=>{rt==="cancel"&&o.push({path:`/application/${c}/WORK_FLOW/overview`})}):o.push({path:`/application/${c}/WORK_FLOW/overview`})}function Y(){N.value||(D.value=!1,N.value=!1)}function te(rt){rt&&C(rt),w1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&Ve(),D.value=!1,N.value=!1}function G(rt){N.value=!0,B.value=rt,C(rt),vt()}function C(rt){var gt;rt.work_flow.nodes.map(Nt=>{Nt.properties.noRender=!0}),w.value.work_flow=rt.work_flow,A.value=rt==null?void 0:rt.update_time,(gt=h.value)==null||gt.clearGraphData(),Ov(()=>{var Nt;(Nt=h.value)==null||Nt.render(rt.work_flow)})}function W(){_e(),w1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&Ve(),D.value=!1,N.value=!1}function K(){D.value=!0}function z(rt){rt?Ve():vt(),localStorage.setItem("workflowAutoSave",rt.toString())}function H(rt){O.value=!1}function re(rt){O.value=!1}function fe(){O.value=!1}async function Se(){var rt;(rt=h.value)==null||rt.validate().then(async()=>{const gt={work_flow:he()};await n.asyncPutApplication(c,gt,_);const Nt=new SM(gt.work_flow);try{Nt.is_valid()}catch(yt){xa(yt.toString());return}Aa.putPublishApplication(c,gt,_).then(()=>{n.asyncGetApplicationDetail(c,_).then(yt=>{w.value.name=yt.data.name,Up(Qt("views.applicationWorkflow.tip.publicSuccess"))})})}).catch(gt=>{var Yt,Ce,we,ke;const Nt=gt.node,yt=gt.errMessage;if(typeof yt=="string")xa(((Yt=gt.node.properties)==null?void 0:Yt.stepName)+` ${Qt("views.applicationWorkflow.node").toLowerCase()} `+yt.toLowerCase());else{const dt=Object.keys(yt);xa(((Ce=Nt.properties)==null?void 0:Ce.stepName)+` ${Qt("views.applicationWorkflow.node").toLowerCase()} `+((ke=(we=yt[dt[0]])==null?void 0:we[0])==null?void 0:ke.message.toLowerCase()))}})}const Te=()=>{var rt;(rt=h.value)==null||rt.validate().then(()=>{var yt;const gt=he(),Nt=new SM(gt);try{Nt.is_valid(),w.value={...w.value,type:"WORK_FLOW",...(yt=Nt.get_base_node())==null?void 0:yt.properties.node_data,work_flow:he()},S.value=!0}catch(Yt){xa(Yt.toString())}}).catch(gt=>{var Yt,Ce,we,ke;const Nt=gt.node,yt=gt.errMessage;if(typeof yt=="string")xa(((Yt=gt.node.properties)==null?void 0:Yt.stepName)+` ${Qt("views.applicationWorkflow.node")}，`+yt);else{const dt=Object.keys(yt);xa(((Ce=Nt.properties)==null?void 0:Ce.stepName)+` ${Qt("views.applicationWorkflow.node")}，`+((ke=(we=yt[dt[0]])==null?void 0:we[0])==null?void 0:ke.message))}})};function he(){var rt;return(rt=h.value)==null?void 0:rt.getGraphData()}function _e(){n.asyncGetApplicationDetail(c).then(rt=>{var gt,Nt,yt;(gt=rt.data)==null||gt.work_flow.nodes.map(Yt=>{Yt.properties.noRender=!0}),w.value=rt.data,w.value.stt_model_id=rt.data.stt_model,w.value.tts_model_id=rt.data.tts_model,w.value.tts_type=rt.data.tts_type,A.value=(Nt=rt.data)==null?void 0:Nt.update_time,n.asyncGetAccessToken(c,_).then(Yt=>{w.value={...w.value,...Yt.data}}),(yt=h.value)==null||yt.clearGraphData(),Ov(()=>{var Yt;(Yt=h.value)==null||Yt.render(w.value.work_flow),q.value=he()})})}function De(rt,gt){const Nt={work_flow:he()};_.value=gt||!1,n.asyncPutApplication(c,Nt).then(yt=>{A.value=new Date,rt&&(q.value=he(),Up(Qt("common.saveSuccess")),gt&&o.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{_.value=!1})}const Ve=()=>{v=setInterval(()=>{De()},6e4)},vt=()=>{v&&clearInterval(v)};return Uo(()=>{_e();const rt=localStorage.getItem("workflowAutoSave");R.value=rt==="true",w1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&Ve()}),yL(()=>{var rt;vt(),(rt=h.value)==null||rt.clearGraphData()}),(rt,gt)=>{var Kn,oe;const Nt=ue("back-button"),yt=ue("el-text"),Yt=ue("el-button"),Ce=ue("el-divider"),we=ue("Close"),ke=ue("el-icon"),dt=ue("AppIcon"),zt=ue("MoreFilled"),Ot=ue("el-dropdown-item"),rn=ue("el-switch"),yn=ue("el-dropdown-menu"),Tn=ue("el-dropdown"),pn=ue("el-collapse-transition"),st=ue("AppAvatar"),xn=ue("AiChat"),Fe=Ev("click-outside"),mn=Ev("loading");return Pl((Ye(),Rn("div",one,[me("div",ine,[me("div",ane,[L(Nt,{onClick:Z}),me("h4",null,$e((Kn=w.value)==null?void 0:Kn.name),1),D.value&&N.value?(Ye(),Rn("div",lne,[L(yt,{type:"info",class:"ml-16 color-secondary"},{default:U(()=>[Tt($e(rt.$t("views.applicationWorkflow.info.previewVersion"))+" "+$e(B.value.name||vr(ew)(B.value.update_time)),1)]),_:1})])):A.value?(Ye(),Bt(yt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:U(()=>[Tt($e(rt.$t("views.applicationWorkflow.info.saveTime"))+$e(vr(ew)(A.value)),1)]),_:1})):nr("",!0)]),D.value&&N.value?(Ye(),Rn("div",une,[L(Yt,{type:"primary",class:"mr-8",onClick:gt[0]||(gt[0]=$n=>te())},{default:U(()=>[Tt($e(rt.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),L(Ce,{direction:"vertical"}),L(Yt,{text:"",onClick:W},{default:U(()=>[L(ke,null,{default:U(()=>[L(we)]),_:1})]),_:1})])):(Ye(),Rn("div",sne,[L(Yt,{icon:"Plus",onClick:gt[1]||(gt[1]=$n=>O.value=!O.value)},{default:U(()=>[Tt($e(rt.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),L(Yt,{onClick:Te,disabled:S.value},{default:U(()=>[L(dt,{iconName:"app-play-outlined",class:"mr-4"}),Tt(" "+$e(rt.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),L(Yt,{onClick:gt[2]||(gt[2]=$n=>De(!0))},{default:U(()=>[L(dt,{iconName:"app-save-outlined",class:"mr-4"}),Tt(" "+$e(rt.$t("common.save")),1)]),_:1}),L(Yt,{type:"primary",onClick:Se},{default:U(()=>[Tt($e(rt.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),L(Tn,{trigger:"click"},{dropdown:U(()=>[L(yn,null,{default:U(()=>[L(Ot,{onClick:K},{default:U(()=>[L(dt,{iconName:"app-history-outlined"}),Tt(" "+$e(rt.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),L(Ot,null,{default:U(()=>[L(dt,{iconName:"app-save-outlined"}),Tt(" "+$e(rt.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),me("div",cne,[L(rn,{size:"small",modelValue:R.value,"onUpdate:modelValue":gt[4]||(gt[4]=$n=>R.value=$n),onChange:z},null,8,["modelValue"])])]),_:1})]),_:1})]),default:U(()=>[L(Yt,{text:"",onClick:gt[3]||(gt[3]=_n(()=>{},["stop"])),class:"ml-8 mt-4"},{default:U(()=>[L(ke,{class:"rotate-90"},{default:U(()=>[L(zt)]),_:1})]),_:1})]),_:1})]))]),L(pn,null,{default:U(()=>[Pl(L(SP,{show:O.value,id:vr(c),onClickNodes:H,onOnmousedown:re,workflowRef:h.value},null,8,["show","id","workflowRef"]),[[Fe,fe]])]),_:1}),me("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[w.value?(Ye(),Bt(Yte,{key:0,ref_key:"workflowRef",ref:h,data:(oe=w.value)==null?void 0:oe.work_flow},null,8,["data"])):nr("",!0)],512),L(pn,null,{default:U(()=>{var $n,Sr,Gr,eo;return[S.value?(Ye(),Rn("div",{key:0,class:sc(["workflow-debug-container",P.value?"enlarge":""])},[me("div",{class:sc(["workflow-debug-header",s.value?"":"custom-header"])},[me("div",fne,[me("div",dne,[me("div",pne,[vr(mL)(($n=w.value)==null?void 0:$n.icon)?(Ye(),Bt(st,{key:0,shape:"square",size:32,style:{background:"none"}},{default:U(()=>{var Dn;return[me("img",{src:(Dn=w.value)==null?void 0:Dn.icon,alt:""},null,8,hne)]}),_:1})):(Sr=w.value)!=null&&Sr.name?(Ye(),Bt(st,{key:1,name:(Gr=w.value)==null?void 0:Gr.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):nr("",!0)]),me("h4",null,$e(((eo=w.value)==null?void 0:eo.name)||rt.$t("views.application.applicationForm.form.appName.label")),1)]),me("div",vne,[L(Yt,{link:"",onClick:gt[5]||(gt[5]=Dn=>P.value=!P.value)},{default:U(()=>[L(dt,{iconName:P.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),L(Yt,{link:"",onClick:gt[6]||(gt[6]=Dn=>S.value=!1)},{default:U(()=>[L(ke,{size:20,class:"color-secondary"},{default:U(()=>[L(we)]),_:1})]),_:1})])])],2),me("div",yne,[L(xn,{"application-details":w.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):nr("",!0)]}),_:1}),D.value?Pl((Ye(),Bt(rne,{key:0,onClick:G,onRefreshVersion:te},null,512)),[[Fe,Y]]):nr("",!0)])),[[mn,_.value]])}}});export{Mne as default};
