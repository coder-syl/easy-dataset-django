# 快速启动指南 - 使用 Django 后端

## 🎯 问题已解决

已清理占用 1717 端口的进程，并创建了中间件来拦截 API 请求并转发到 Django 后端。

**重要更新**：已创建 `middleware.js` 文件，它会拦截所有 `/api/*` 请求并转发到 Django 后端，优先级高于 Next.js 的 API 路由。

## 📋 启动步骤

### 第一步：启动 Django 后端

打开**新的终端窗口**，执行：

```bash
cd easy-dataset-django
python manage.py runserver 0.0.0.0:8000
```

**重要**：确保 Django 运行在 **8000 端口**，不是 1717！

验证：访问 `http://127.0.0.1:8000/api/projects` 应该能看到 Django API 响应。

### 第二步：启动 Next.js 前端

在**项目根目录**，执行：

```bash
pnpm dev
```

或者使用启动脚本：

```bash
# Windows
start-dev.bat
```

### 第三步：访问应用

打开浏览器访问：`http://localhost:1717/`

应该能看到 Next.js 前端页面，而不是 Django 404 错误。

## ✅ 验证清单

- [ ] Django 运行在 `http://127.0.0.1:8000`（不是 1717）
- [ ] Next.js 运行在 `http://localhost:1717`
- [ ] 访问 `http://localhost:1717/` 显示前端页面
- [ ] 前端 API 请求（如 `/api/projects`）能正常工作

## 🔧 如果还有问题

### 问题：仍然看到 Django 404

**解决方法**：
1. 检查 Django 是否在 8000 端口：`netstat -ano | findstr :8000`
2. 检查 Next.js 是否在 1717 端口：`netstat -ano | findstr :1717`
3. 如果 1717 端口被占用，运行：`fix-port-conflict.bat`

### 问题：端口被占用

**解决方法**：
```bash
# 查找占用端口的进程
netstat -ano | findstr :1717
netstat -ano | findstr :8000

# 停止进程（替换 <PID> 为实际进程 ID）
taskkill /PID <PID> /F
```

### 问题：API 请求失败

**检查项**：
1. Django 是否正常运行
2. 浏览器控制台是否有 CORS 错误
3. Django 的 CORS 配置：`CORS_ALLOW_ALL_ORIGINS = True`

## 📝 工作原理

1. 用户访问 `http://localhost:1717/` → Next.js 返回前端页面
2. 前端发起 API 请求 `/api/projects` → Next.js 代理到 `http://127.0.0.1:8000/api/projects`
3. Django 处理请求并返回数据 → Next.js 返回给前端

## 🚀 现在可以开始使用了！

按照上述步骤启动后，前端会自动使用 Django 后端的接口。

